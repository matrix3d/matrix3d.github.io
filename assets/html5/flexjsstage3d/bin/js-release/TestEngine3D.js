'use strict';var COMPILED=false;var goog=goog||{};goog.global=this;goog.global.CLOSURE_UNCOMPILED_DEFINES;goog.global.CLOSURE_DEFINES;goog.isDef=function(val){return val!==void 0};
goog.exportPath_=function(name,opt_object,opt_objectToExportTo){var parts=name.split('.');var cur=opt_objectToExportTo||goog.global;if(!(parts[0]in cur)&&cur.execScript)cur.execScript('var '+parts[0]);for(var part;parts.length&&(part=parts.shift());)if(!parts.length&&goog.isDef(opt_object))cur[part]=opt_object;else if(cur[part])cur=cur[part];else cur=cur[part]={}};
goog.define=function(name,defaultValue){var value=defaultValue;if(!COMPILED)if(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,name))value=goog.global.CLOSURE_UNCOMPILED_DEFINES[name];else if(goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,name))value=goog.global.CLOSURE_DEFINES[name];goog.exportPath_(name,value)};goog.define('goog.DEBUG',true);goog.define('goog.LOCALE','en');
goog.define('goog.TRUSTED_SITE',true);goog.define('goog.STRICT_MODE_COMPATIBLE',false);goog.define('goog.DISALLOW_TEST_ONLY_CODE',COMPILED&&!goog.DEBUG);goog.define('goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING',false);goog.provide=function(name){if(goog.isInModuleLoader_())throw Error('goog.provide can not be used within a goog.module.');if(!COMPILED)if(goog.isProvided_(name))throw Error('Namespace "'+name+'" already declared.');goog.constructNamespace_(name)};
goog.constructNamespace_=function(name,opt_obj){if(!COMPILED){delete goog.implicitNamespaces_[name];var namespace=name;while(namespace=namespace.substring(0,namespace.lastIndexOf('.'))){if(goog.getObjectByName(namespace))break;goog.implicitNamespaces_[namespace]=true}}goog.exportPath_(name,opt_obj)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(name){if(!goog.isString(name)||!name||name.search(goog.VALID_MODULE_RE_)==-1)throw Error('Invalid module identifier');if(!goog.isInModuleLoader_())throw Error('Module '+name+' has been loaded incorrectly.');if(goog.moduleLoaderState_.moduleName)throw Error('goog.module may only be called once per module.');goog.moduleLoaderState_.moduleName=name;if(!COMPILED){if(goog.isProvided_(name))throw Error('Namespace "'+name+'" already declared.');delete goog.implicitNamespaces_[name]}};
goog.module.get=function(name){return goog.module.getInternal_(name)};goog.module.getInternal_=function(name){if(!COMPILED)if(goog.isProvided_(name))return name in goog.loadedModules_?goog.loadedModules_[name]:goog.getObjectByName(name);else return null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.moduleLoaderState_!=null};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error('goog.module.declareLegacyNamespace must be called from '+'within a goog.module');if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error('goog.module must be called prior to '+'goog.module.declareLegacyNamespace.');goog.moduleLoaderState_.declareLegacyNamespace=true};
goog.setTestOnly=function(opt_message){if(goog.DISALLOW_TEST_ONLY_CODE){opt_message=opt_message||'';throw Error('Importing test-only code into non-debug environment'+(opt_message?': '+opt_message:'.'));}};goog.forwardDeclare=function(name){};goog.forwardDeclare('Document');goog.forwardDeclare('HTMLScriptElement');goog.forwardDeclare('XMLHttpRequest');
if(!COMPILED){goog.isProvided_=function(name){return name in goog.loadedModules_||!goog.implicitNamespaces_[name]&&goog.isDefAndNotNull(goog.getObjectByName(name))};goog.implicitNamespaces_={'goog.module':true}}goog.getObjectByName=function(name,opt_obj){var parts=name.split('.');var cur=opt_obj||goog.global;for(var part;part=parts.shift();)if(goog.isDefAndNotNull(cur[part]))cur=cur[part];else return null;return cur};
goog.globalize=function(obj,opt_global){var global=opt_global||goog.global;for(var x in obj)global[x]=obj[x]};
goog.addDependency=function(relPath,provides,requires,opt_loadFlags){if(goog.DEPENDENCIES_ENABLED){var provide,require;var path=relPath.replace(/\\/g,'/');var deps=goog.dependencies_;if(!opt_loadFlags||typeof opt_loadFlags==='boolean')opt_loadFlags=opt_loadFlags?{'module':'goog'}:{};for(var i=0;provide=provides[i];i++){deps.nameToPath[provide]=path;deps.loadFlags[path]=opt_loadFlags}for(var j=0;require=requires[j];j++){if(!(path in deps.requires))deps.requires[path]={};deps.requires[path][require]=
true}}};goog.define('goog.ENABLE_DEBUG_LOADER',true);goog.logToConsole_=function(msg){if(goog.global.console)goog.global.console['error'](msg)};
goog.require=function(name){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_)goog.maybeProcessDeferredDep_(name);if(goog.isProvided_(name))if(goog.isInModuleLoader_())return goog.module.getInternal_(name);else return null;if(goog.ENABLE_DEBUG_LOADER){var path=goog.getPathFromDeps_(name);if(path){goog.writeScripts_(path);return null}}var errorMessage='goog.require could not find: '+name;goog.logToConsole_(errorMessage);throw Error(errorMessage);}};goog.basePath='';goog.global.CLOSURE_BASE_PATH;
goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error('unimplemented abstract method');};goog.addSingletonGetter=function(ctor){ctor.getInstance=function(){if(ctor.instance_)return ctor.instance_;if(goog.DEBUG)goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=ctor;return ctor.instance_=new ctor}};goog.instantiatedSingletons_=[];goog.define('goog.LOAD_MODULE_USING_EVAL',true);
goog.define('goog.SEAL_MODULE_EXPORTS',goog.DEBUG);goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.define('goog.TRANSPILE','detect');goog.define('goog.TRANSPILER','transpile.js');
if(goog.DEPENDENCIES_ENABLED){goog.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}};goog.inHtmlDocument_=function(){var doc=goog.global.document;return doc!=null&&'write'in doc};goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else if(!goog.inHtmlDocument_())return;var doc=goog.global.document;var scripts=doc.getElementsByTagName('SCRIPT');for(var i=scripts.length-1;i>=0;--i){var script=
(scripts[i]);var src=script.src;var qmark=src.lastIndexOf('?');var l=qmark==-1?src.length:qmark;if(src.substr(l-7,7)=='base.js'){goog.basePath=src.substr(0,l-7);return}}};goog.importScript_=function(src,opt_sourceText){var importScript=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(importScript(src,opt_sourceText))goog.dependencies_.written[src]=true};goog.IS_OLD_IE_=!!(!goog.global.atob&&goog.global.document&&goog.global.document.all);goog.importProcessedScript_=function(src,isModule,
needsTranspile){var bootstrap='goog.retrieveAndExec_("'+src+'", '+isModule+', '+needsTranspile+');';goog.importScript_('',bootstrap)};goog.queuedModules_=[];goog.wrapModule_=function(srcUrl,scriptText){if(!goog.LOAD_MODULE_USING_EVAL||!goog.isDef(goog.global.JSON))return''+'goog.loadModule(function(exports) {'+'"use strict";'+scriptText+'\n'+';return exports'+'});'+'\n//# sourceURL\x3d'+srcUrl+'\n';else return''+'goog.loadModule('+goog.global.JSON.stringify(scriptText+'\n//# sourceURL\x3d'+srcUrl+
'\n')+');'};goog.loadQueuedModules_=function(){var count=goog.queuedModules_.length;if(count>0){var queue=goog.queuedModules_;goog.queuedModules_=[];for(var i=0;i<count;i++){var path=queue[i];goog.maybeProcessDeferredPath_(path)}}};goog.maybeProcessDeferredDep_=function(name){if(goog.isDeferredModule_(name)&&goog.allDepsAreAvailable_(name)){var path=goog.getPathFromDeps_(name);goog.maybeProcessDeferredPath_(goog.basePath+path)}};goog.isDeferredModule_=function(name){var path=goog.getPathFromDeps_(name);
var loadFlags=path&&goog.dependencies_.loadFlags[path]||{};if(path&&(loadFlags['module']=='goog'||goog.needsTranspile_(loadFlags['lang']))){var abspath=goog.basePath+path;return abspath in goog.dependencies_.deferred}return false};goog.allDepsAreAvailable_=function(name){var path=goog.getPathFromDeps_(name);if(path&&path in goog.dependencies_.requires)for(var requireName in goog.dependencies_.requires[path])if(!goog.isProvided_(requireName)&&!goog.isDeferredModule_(requireName))return false;return true};
goog.maybeProcessDeferredPath_=function(abspath){if(abspath in goog.dependencies_.deferred){var src=goog.dependencies_.deferred[abspath];delete goog.dependencies_.deferred[abspath];goog.globalEval(src)}};goog.loadModuleFromUrl=function(url){goog.retrieveAndExec_(url,true,false)};goog.writeScriptSrcNode_=function(src){goog.global.document.write('\x3cscript type\x3d"text/javascript" src\x3d"'+src+'"\x3e\x3c/'+'script\x3e')};goog.appendScriptSrcNode_=function(src){var doc=goog.global.document;var scriptEl=
(doc.createElement('script'));scriptEl.type='text/javascript';scriptEl.src=src;scriptEl.defer=false;scriptEl.async=false;doc.head.appendChild(scriptEl)};goog.writeScriptTag_=function(src,opt_sourceText){if(goog.inHtmlDocument_()){var doc=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&doc.readyState=='complete'){var isDeps=/\bdeps.js$/.test(src);if(isDeps)return false;else throw Error('Cannot write "'+src+'" after document load');}if(opt_sourceText===undefined)if(!goog.IS_OLD_IE_)if(goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING)goog.appendScriptSrcNode_(src);
else goog.writeScriptSrcNode_(src);else{var state=" onreadystatechange\x3d'goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";doc.write('\x3cscript type\x3d"text/javascript" src\x3d"'+src+'"'+state+'\x3e\x3c/'+'script\x3e')}else doc.write('\x3cscript type\x3d"text/javascript"\x3e'+opt_sourceText+'\x3c/'+'script\x3e');return true}else return false};goog.needsTranspile_=function(lang){if(goog.TRANSPILE=='always')return true;else if(goog.TRANSPILE=='never')return false;else if(!goog.transpiledLanguages_){goog.transpiledLanguages_=
{'es5':true,'es6':true,'es6-impl':true};try{goog.transpiledLanguages_['es5']=eval('[1,].length!\x3d1');var es6implTest='let a\x3d{};const X\x3dclass{constructor(){}x(z){return new Map(['+'...arguments]).get(z[0])\x3d\x3d3}};return new X().x([a,3])';var es6fullTest='class X{constructor(){if(new.target!\x3dString)throw 1;this.x\x3d42}}'+'let q\x3dReflect.construct(X,[],String);if(q.x!\x3d42||!(q instanceof '+'String))throw 1;for(const a of[2,3]){if(a\x3d\x3d2)continue;function '+'f(z\x3d{a}){let a\x3d0;return z.a}{function f(){return 0;}}return f()'+
'\x3d\x3d3}';if(eval('(()\x3d\x3e{"use strict";'+es6implTest+'})()'))goog.transpiledLanguages_['es6-impl']=false;if(eval('(()\x3d\x3e{"use strict";'+es6fullTest+'})()'))goog.transpiledLanguages_['es6']=false}catch(err){}}return!!goog.transpiledLanguages_[lang]};goog.transpiledLanguages_=null;goog.lastNonModuleScriptIndex_=0;goog.onScriptLoad_=function(script,scriptIndex){if(script.readyState=='complete'&&goog.lastNonModuleScriptIndex_==scriptIndex)goog.loadQueuedModules_();return true};goog.writeScripts_=
function(pathToLoad){var scripts=[];var seenScript={};var deps=goog.dependencies_;function visitNode(path){if(path in deps.written)return;if(path in deps.visited)return;deps.visited[path]=true;if(path in deps.requires)for(var requireName in deps.requires[path])if(!goog.isProvided_(requireName))if(requireName in deps.nameToPath)visitNode(deps.nameToPath[requireName]);else throw Error('Undefined nameToPath for '+requireName);if(!(path in seenScript)){seenScript[path]=true;scripts.push(path)}}visitNode(pathToLoad);
for(var i=0;i<scripts.length;i++){var path=scripts[i];goog.dependencies_.written[path]=true}var moduleState=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var i=0;i<scripts.length;i++){var path=scripts[i];if(path){var loadFlags=deps.loadFlags[path]||{};var needsTranspile=goog.needsTranspile_(loadFlags['lang']);if(loadFlags['module']=='goog'||needsTranspile)goog.importProcessedScript_(goog.basePath+path,loadFlags['module']=='goog',needsTranspile);else goog.importScript_(goog.basePath+path)}else{goog.moduleLoaderState_=
moduleState;throw Error('Undefined script input');}}goog.moduleLoaderState_=moduleState};goog.getPathFromDeps_=function(rule){if(rule in goog.dependencies_.nameToPath)return goog.dependencies_.nameToPath[rule];else return null};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS)goog.importScript_(goog.basePath+'deps.js')}
goog.loadModule=function(moduleDef){var previousState=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:undefined,declareLegacyNamespace:false};var exports;if(goog.isFunction(moduleDef))exports=moduleDef.call(undefined,{});else if(goog.isString(moduleDef))exports=goog.loadModuleFromSource_.call(undefined,moduleDef);else throw Error('Invalid module definition');var moduleName=goog.moduleLoaderState_.moduleName;if(!goog.isString(moduleName)||!moduleName)throw Error('Invalid module name "'+
moduleName+'"');if(goog.moduleLoaderState_.declareLegacyNamespace)goog.constructNamespace_(moduleName,exports);else if(goog.SEAL_MODULE_EXPORTS&&Object.seal)Object.seal(exports);goog.loadedModules_[moduleName]=exports}finally{goog.moduleLoaderState_=previousState}};goog.loadModuleFromSource_=function(){var exports={};eval(arguments[0]);return exports};
goog.normalizePath_=function(path){var components=path.split('/');var i=0;while(i<components.length)if(components[i]=='.')components.splice(i,1);else if(i&&components[i]=='..'&&components[i-1]&&components[i-1]!='..')components.splice(--i,2);else i++;return components.join('/')};
goog.loadFileSync_=function(src){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(src);else try{var xhr=new goog.global['XMLHttpRequest'];xhr.open('get',src,false);xhr.send();return xhr.status==0||xhr.status==200?xhr.responseText:null}catch(err){return null}};
goog.retrieveAndExec_=function(src,isModule,needsTranspile){if(!COMPILED){var originalPath=src;src=goog.normalizePath_(src);var importScript=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;var scriptText=goog.loadFileSync_(src);if(scriptText==null)throw new Error('Load of "'+src+'" failed');if(needsTranspile)scriptText=goog.transpile_.call(goog.global,scriptText,src);if(isModule)scriptText=goog.wrapModule_(src,scriptText);else scriptText+='\n//# sourceURL\x3d'+src;var isOldIE=goog.IS_OLD_IE_;
if(isOldIE){goog.dependencies_.deferred[originalPath]=scriptText;goog.queuedModules_.push(originalPath)}else importScript(src,scriptText)}};
goog.transpile_=function(code,path){var jscomp=goog.global['$jscomp'];if(!jscomp)goog.global['$jscomp']=jscomp={};var transpile=jscomp.transpile;if(!transpile){var transpilerPath=goog.basePath+goog.TRANSPILER;var transpilerCode=goog.loadFileSync_(transpilerPath);if(transpilerCode){eval(transpilerCode+'\n//# sourceURL\x3d'+transpilerPath);jscomp=goog.global['$jscomp'];transpile=jscomp.transpile}}if(!transpile){var suffix=' requires transpilation but no transpiler was found.';transpile=jscomp.transpile=
function(code,path){goog.logToConsole_(path+suffix);return code}}return transpile(code,path)};
goog.typeOf=function(value){var s=typeof value;if(s=='object')if(value){if(value instanceof Array)return'array';else if(value instanceof Object)return s;var className=Object.prototype.toString.call((value));if(className=='[object Window]')return'object';if(className=='[object Array]'||typeof value.length=='number'&&typeof value.splice!='undefined'&&typeof value.propertyIsEnumerable!='undefined'&&!value.propertyIsEnumerable('splice'))return'array';if(className=='[object Function]'||typeof value.call!=
'undefined'&&typeof value.propertyIsEnumerable!='undefined'&&!value.propertyIsEnumerable('call'))return'function'}else return'null';else if(s=='function'&&typeof value.call=='undefined')return'object';return s};goog.isNull=function(val){return val===null};goog.isDefAndNotNull=function(val){return val!=null};goog.isArray=function(val){return goog.typeOf(val)=='array'};goog.isArrayLike=function(val){var type=goog.typeOf(val);return type=='array'||type=='object'&&typeof val.length=='number'};
goog.isDateLike=function(val){return goog.isObject(val)&&typeof val.getFullYear=='function'};goog.isString=function(val){return typeof val=='string'};goog.isBoolean=function(val){return typeof val=='boolean'};goog.isNumber=function(val){return typeof val=='number'};goog.isFunction=function(val){return goog.typeOf(val)=='function'};goog.isObject=function(val){var type=typeof val;return type=='object'&&val!=null||type=='function'};
goog.getUid=function(obj){return obj[goog.UID_PROPERTY_]||(obj[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(obj){return!!obj[goog.UID_PROPERTY_]};goog.removeUid=function(obj){if(obj!==null&&'removeAttribute'in obj)obj.removeAttribute(goog.UID_PROPERTY_);try{delete obj[goog.UID_PROPERTY_]}catch(ex){}};goog.UID_PROPERTY_='closure_uid_'+(Math.random()*1E9>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;
goog.cloneObject=function(obj){var type=goog.typeOf(obj);if(type=='object'||type=='array'){if(obj.clone)return obj.clone();var clone=type=='array'?[]:{};for(var key in obj)clone[key]=goog.cloneObject(obj[key]);return clone}return obj};goog.bindNative_=function(fn,selfObj,var_args){return(fn.call.apply(fn.bind,arguments))};
goog.bindJs_=function(fn,selfObj,var_args){if(!fn)throw new Error;if(arguments.length>2){var boundArgs=Array.prototype.slice.call(arguments,2);return function(){var newArgs=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(newArgs,boundArgs);return fn.apply(selfObj,newArgs)}}else return function(){return fn.apply(selfObj,arguments)}};
goog.bind=function(fn,selfObj,var_args){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf('native code')!=-1)goog.bind=goog.bindNative_;else goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(fn,var_args){var args=Array.prototype.slice.call(arguments,1);return function(){var newArgs=args.slice();newArgs.push.apply(newArgs,arguments);return fn.apply(this,newArgs)}};goog.mixin=function(target,source){for(var x in source)target[x]=source[x]};
goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(script){if(goog.global.execScript)goog.global.execScript(script,'JavaScript');else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval('var _evalTest_ \x3d 1;');if(typeof goog.global['_evalTest_']!='undefined'){try{delete goog.global['_evalTest_']}catch(ignore){}goog.evalWorksForGlobals_=true}else goog.evalWorksForGlobals_=false}if(goog.evalWorksForGlobals_)goog.global.eval(script);else{var doc=goog.global.document;var scriptElt=(doc.createElement('SCRIPT'));
scriptElt.type='text/javascript';scriptElt.defer=false;scriptElt.appendChild(doc.createTextNode(script));doc.body.appendChild(scriptElt);doc.body.removeChild(scriptElt)}}else throw Error('goog.globalEval not available');};goog.evalWorksForGlobals_=null;goog.cssNameMapping_;goog.cssNameMappingStyle_;
goog.getCssName=function(className,opt_modifier){var getMapping=function(cssName){return goog.cssNameMapping_[cssName]||cssName};var renameByParts=function(cssName){var parts=cssName.split('-');var mapped=[];for(var i=0;i<parts.length;i++)mapped.push(getMapping(parts[i]));return mapped.join('-')};var rename;if(goog.cssNameMapping_)rename=goog.cssNameMappingStyle_=='BY_WHOLE'?getMapping:renameByParts;else rename=function(a){return a};if(opt_modifier)return className+'-'+rename(opt_modifier);else return rename(className)};
goog.setCssNameMapping=function(mapping,opt_style){goog.cssNameMapping_=mapping;goog.cssNameMappingStyle_=opt_style};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING)goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING;goog.getMsg=function(str,opt_values){if(opt_values)str=str.replace(/\{\$([^}]+)}/g,function(match,key){return opt_values!=null&&key in opt_values?opt_values[key]:match});return str};goog.getMsgWithFallback=function(a,b){return a};
goog.exportSymbol=function(publicPath,object,opt_objectToExportTo){goog.exportPath_(publicPath,object,opt_objectToExportTo)};goog.exportProperty=function(object,publicName,symbol){object[publicName]=symbol};
goog.inherits=function(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;childCtor.superClass_=parentCtor.prototype;childCtor.prototype=new tempCtor;childCtor.prototype.constructor=childCtor;childCtor.base=function(me,methodName,var_args){var args=new Array(arguments.length-2);for(var i=2;i<arguments.length;i++)args[i-2]=arguments[i];return parentCtor.prototype[methodName].apply(me,args)}};
goog.base=function(me,opt_methodName,var_args){var caller=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!caller)throw Error('arguments.caller not defined.  goog.base() cannot be used '+'with strict mode code. See '+'http://www.ecma-international.org/ecma-262/5.1/#sec-C');if(caller.superClass_){var ctorArgs=new Array(arguments.length-1);for(var i=1;i<arguments.length;i++)ctorArgs[i-1]=arguments[i];return caller.superClass_.constructor.apply(me,ctorArgs)}var args=new Array(arguments.length-
2);for(var i=2;i<arguments.length;i++)args[i-2]=arguments[i];var foundCaller=false;for(var ctor=me.constructor;ctor;ctor=ctor.superClass_&&ctor.superClass_.constructor)if(ctor.prototype[opt_methodName]===caller)foundCaller=true;else if(foundCaller)return ctor.prototype[opt_methodName].apply(me,args);if(me[opt_methodName]===caller)return me.constructor.prototype[opt_methodName].apply(me,args);else throw Error('goog.base called from a method of one name '+'to a method of a different name');};
goog.scope=function(fn){if(goog.isInModuleLoader_())throw Error('goog.scope is not supported within a goog.module.');fn.call(goog.global)};if(!COMPILED)goog.global['COMPILED']=COMPILED;
goog.defineClass=function(superClass,def){var constructor=def.constructor;var statics=def.statics;if(!constructor||constructor==Object.prototype.constructor)constructor=function(){throw Error('cannot instantiate an interface (no constructor defined).');};var cls=goog.defineClass.createSealingConstructor_(constructor,superClass);if(superClass)goog.inherits(cls,superClass);delete def.constructor;delete def.statics;goog.defineClass.applyProperties_(cls.prototype,def);if(statics!=null)if(statics instanceof
Function)statics(cls);else goog.defineClass.applyProperties_(cls,statics);return cls};goog.defineClass.ClassDescriptor;goog.define('goog.defineClass.SEAL_CLASS_INSTANCES',goog.DEBUG);
goog.defineClass.createSealingConstructor_=function(ctr,superClass){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return ctr;var superclassSealable=!goog.defineClass.isUnsealable_(superClass);var wrappedCtr=function(){var instance=ctr.apply(this,arguments)||this;instance[goog.UID_PROPERTY_]=instance[goog.UID_PROPERTY_];if(this.constructor===wrappedCtr&&superclassSealable&&Object.seal instanceof Function)Object.seal(instance);return instance};return wrappedCtr};
goog.defineClass.isUnsealable_=function(ctr){return ctr&&ctr.prototype&&ctr.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'];
goog.defineClass.applyProperties_=function(target,source){var key;for(key in source)if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key];for(var i=0;i<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;i++){key=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[i];if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key]}};goog.tagUnsealableClass=function(ctr){if(!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES)ctr.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=true};
goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_='goog_defineClass_legacy_unsealable';goog.provide('org.apache.flex.utils.Language');org.apache.flex.utils.Language=function(){};org.apache.flex.utils.Language.sortNames;org.apache.flex.utils.Language.sortNamesOne=[];org.apache.flex.utils.Language.muler;org.apache.flex.utils.Language.zeroStr=String.fromCharCode(0);
org.apache.flex.utils.Language.as=function(leftOperand,rightOperand,coercion){coercion=typeof coercion!=='undefined'?coercion:null;var error,itIs,message;coercion=coercion!==undefined?coercion:false;itIs=org.apache.flex.utils.Language.is(leftOperand,rightOperand);if(!itIs&&coercion){message='Type Coercion failed';if(TypeError)error=new TypeError(message);else error=new Error(message);throw error;}return itIs?leftOperand:null};org.apache.flex.utils.Language._int=function(value){return value>>0};
org.apache.flex.utils.Language.is=function(leftOperand,rightOperand){var superClass;if(leftOperand==null||rightOperand==null)return false;if(leftOperand instanceof rightOperand)return true;if(rightOperand===Object)return true;if(typeof leftOperand==='string')return rightOperand===String;if(typeof leftOperand==='number')return rightOperand===Number;if(typeof leftOperand==='boolean')return rightOperand===Boolean;if(rightOperand===Array)return Array.isArray(leftOperand);if(leftOperand.FLEXJS_CLASS_INFO===
undefined)return false;if(leftOperand.FLEXJS_CLASS_INFO.interfaces)if(org.apache.flex.utils.Language.checkInterfaces(leftOperand,rightOperand))return true;superClass=leftOperand.constructor;superClass=superClass.superClass_;if(superClass)while(superClass&&superClass.FLEXJS_CLASS_INFO){if(superClass.FLEXJS_CLASS_INFO.interfaces)if(org.apache.flex.utils.Language.checkInterfaces(superClass,rightOperand))return true;superClass=superClass.constructor;superClass=superClass.superClass_}return false};
org.apache.flex.utils.Language.checkInterfaces=function(leftOperand,rightOperand){var i,interfaces;interfaces=leftOperand.FLEXJS_CLASS_INFO.interfaces;for(i=interfaces.length-1;i>-1;i--){if(interfaces[i]===rightOperand)return true;if(interfaces[i].prototype.FLEXJS_CLASS_INFO.interfaces){var isit=org.apache.flex.utils.Language.checkInterfaces(interfaces[i].prototype,rightOperand);if(isit)return true}}return false};
org.apache.flex.utils.Language.prototype.isClass=function(classDef){return typeof classDef==='function'&&classDef.prototype&&classDef.prototype.constructor===classDef};org.apache.flex.utils.Language.prototype.asClass=function(classDef){return this.isClass(classDef)?classDef:null};org.apache.flex.utils.Language.postdecrement=function(obj,prop){var value=obj[prop];obj[prop]=value-1;return value};org.apache.flex.utils.Language.postincrement=function(obj,prop){var value=obj[prop];obj[prop]=value+1;return value};
org.apache.flex.utils.Language.predecrement=function(obj,prop){var value=obj[prop]-1;obj[prop]=value;return value};org.apache.flex.utils.Language.preincrement=function(obj,prop){var value=obj[prop]+1;obj[prop]=value;return value};
org.apache.flex.utils.Language.superGetter=function(clazz,pthis,prop){var superClass=clazz.superClass_;var superdesc=Object.getOwnPropertyDescriptor(superClass,prop);while(superdesc==null){superClass=superClass.constructor;superClass=superClass.superClass_;superdesc=Object.getOwnPropertyDescriptor(superClass,prop)}return superdesc.get.call(pthis)};
org.apache.flex.utils.Language.superSetter=function(clazz,pthis,prop,value){var superClass=clazz.superClass_;var superdesc=Object.getOwnPropertyDescriptor(superClass,prop);while(superdesc==null){superClass=superClass.constructor;superClass=superClass.superClass_;superdesc=Object.getOwnPropertyDescriptor(superClass,prop)}superdesc.set.apply(pthis,[value])};
org.apache.flex.utils.Language.trace=function(rest){rest=Array.prototype.slice.call(arguments,0);var theConsole;theConsole=goog.global.console;if(theConsole===undefined)if(typeof window!=='undefined')theConsole=window.console;else if(typeof console!=='undefined')theConsole=console;try{if(theConsole&&theConsole.log)theConsole.log.apply(theConsole,rest)}catch(e){}};org.apache.flex.utils.Language.uint=function(value){return value>>>0};
org.apache.flex.utils.Language.closure=function(fn,object,boundMethodName){if(object.hasOwnProperty(boundMethodName))return object[boundMethodName];var boundMethod=goog.bind(fn,object);Object.defineProperty(object,boundMethodName,{value:boundMethod});return boundMethod};
org.apache.flex.utils.Language.sortOn=function(arr,names,opt){opt=typeof opt!=='undefined'?opt:0;if(org.apache.flex.utils.Language.is(names,Array))org.apache.flex.utils.Language.sortNames=org.apache.flex.utils.Language.as(names,Array);else{org.apache.flex.utils.Language.sortNamesOne[0]=names;org.apache.flex.utils.Language.sortNames=org.apache.flex.utils.Language.sortNamesOne}if(org.apache.flex.utils.Language.is(opt,Array)){var opt2=0;var foreachiter0_target=opt;for(var foreachiter0 in foreachiter0_target){var o=
foreachiter0_target[foreachiter0];opt2=opt2|o}}else opt2=org.apache.flex.utils.Language.as(opt,Number);org.apache.flex.utils.Language.muler=(2&opt2)>0?-1:1;if(opt2&16)arr.sort(org.apache.flex.utils.Language.compareNumber);else if(opt2&1)arr.sort(org.apache.flex.utils.Language.compareStringCaseinsensitive);else arr.sort(org.apache.flex.utils.Language.compareString)};
org.apache.flex.utils.Language.compareStringCaseinsensitive=function(a,b){var foreachiter1_target=org.apache.flex.utils.Language.sortNames;for(var foreachiter1 in foreachiter1_target){var n=foreachiter1_target[foreachiter1];var v=(a[n]||org.apache.flex.utils.Language.zeroStr).toString().toLowerCase().localeCompare((b[n]||org.apache.flex.utils.Language.zeroStr).toString().toLowerCase());if(v!=0)return v*org.apache.flex.utils.Language.muler}return 0};
org.apache.flex.utils.Language.compareString=function(a,b){var foreachiter2_target=org.apache.flex.utils.Language.sortNames;for(var foreachiter2 in foreachiter2_target){var n=foreachiter2_target[foreachiter2];var v=(a[n]||org.apache.flex.utils.Language.zeroStr).toString().localeCompare((b[n]||org.apache.flex.utils.Language.zeroStr).toString());if(v!=0)return v*org.apache.flex.utils.Language.muler}return 0};
org.apache.flex.utils.Language.compareNumber=function(a,b){var foreachiter3_target=org.apache.flex.utils.Language.sortNames;for(var foreachiter3 in foreachiter3_target){var n=foreachiter3_target[foreachiter3];if(a[n]>b[n])return org.apache.flex.utils.Language.muler;else if(a[n]<b[n])return-org.apache.flex.utils.Language.muler}return 0};org.apache.flex.utils.Language.prototype.FLEXJS_CLASS_INFO={names:[{name:'Language',qName:'org.apache.flex.utils.Language'}]};
goog.exportSymbol('org.apache.flex.utils.Language',org.apache.flex.utils.Language);org.apache.flex.utils.Language.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'isClass':{type:'Boolean',declaredBy:'org.apache.flex.utils.Language'},'asClass':{type:'Class',declaredBy:'org.apache.flex.utils.Language'}}}}};goog.provide('flash.__native.IRenderer');goog.require('org.apache.flex.utils.Language');flash.__native.IRenderer=function(){};flash.__native.IRenderer.prototype.createPath=function(){return null};flash.__native.IRenderer.prototype.getCssColor=function(color,alpha,ct,toarr){return null};flash.__native.IRenderer.prototype.renderGraphics=function(ctx,g,m,blendMode,colorTransform){};flash.__native.IRenderer.prototype.renderImage=function(ctx,img,m,blendMode,colorTransform){};
flash.__native.IRenderer.prototype.renderText=function(ctx,txt,textFormat,m,blendMode,colorTransform,x,y){};flash.__native.IRenderer.prototype.finish=function(ctx){};flash.__native.IRenderer.prototype.start=function(ctx){};flash.__native.IRenderer.prototype.FLEXJS_CLASS_INFO={names:[{name:'IRenderer',qName:'flash.__native.IRenderer'}]};goog.exportSymbol('flash.__native.IRenderer',flash.__native.IRenderer);
flash.__native.IRenderer.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'IRenderer':{type:'',declaredBy:'flash.__native.IRenderer'},'createPath':{type:'GraphicsPath',declaredBy:'flash.__native.IRenderer'},'getCssColor':{type:'Object',declaredBy:'flash.__native.IRenderer'},'renderGraphics':{type:'void',declaredBy:'flash.__native.IRenderer'},'renderImage':{type:'void',declaredBy:'flash.__native.IRenderer'},'renderText':{type:'void',
declaredBy:'flash.__native.IRenderer'},'finish':{type:'void',declaredBy:'flash.__native.IRenderer'},'start':{type:'void',declaredBy:'flash.__native.IRenderer'}}}}};goog.provide('flash.display.IGraphicsData');flash.display.IGraphicsData=function(){};flash.display.IGraphicsData.prototype.draw=function(ctx,colorTransform){};flash.display.IGraphicsData.prototype.gldraw=function(glctx,colorTransform){};flash.display.IGraphicsData.prototype.FLEXJS_CLASS_INFO={names:[{name:'IGraphicsData',qName:'flash.display.IGraphicsData'}]};
flash.display.IGraphicsData.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'draw':{type:'void',declaredBy:'flash.display.IGraphicsData'},'gldraw':{type:'void',declaredBy:'flash.display.IGraphicsData'}}}}};goog.provide('flash.display.IGraphicsFill');flash.display.IGraphicsFill=function(){};flash.display.IGraphicsFill.prototype.FLEXJS_CLASS_INFO={names:[{name:'IGraphicsFill',qName:'flash.display.IGraphicsFill'}]};flash.display.IGraphicsFill.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('flash.display.GraphicsBitmapFill');goog.require('flash.display.IGraphicsData');goog.require('flash.display.IGraphicsFill');flash.display.GraphicsBitmapFill=function(bitmapData,matrix,repeat,smooth){bitmapData=typeof bitmapData!=='undefined'?bitmapData:null;matrix=typeof matrix!=='undefined'?matrix:null;repeat=typeof repeat!=='undefined'?repeat:true;smooth=typeof smooth!=='undefined'?smooth:false;this.bitmapData=bitmapData;this.matrix=matrix;this.repeat=repeat;this.smooth=smooth};flash.display.GraphicsBitmapFill.prototype.bitmapData;
flash.display.GraphicsBitmapFill.prototype.matrix;flash.display.GraphicsBitmapFill.prototype.repeat;flash.display.GraphicsBitmapFill.prototype.smooth;flash.display.GraphicsBitmapFill.prototype.pattern;flash.display.GraphicsBitmapFill.prototype.draw=function(ctx,colorTransform){if(this.pattern==null&&this.bitmapData)this.pattern=ctx.createPattern(this.bitmapData.image,this.repeat?'repeat':'no-repeat');ctx.fillStyle=this.pattern};
flash.display.GraphicsBitmapFill.prototype.gldraw=function(ctx,colorTransform){if(this.pattern==null&&this.bitmapData)this.pattern=ctx.createPattern(this.bitmapData.image,this.repeat?'repeat':'no-repeat');ctx.fillStyleIsImage=true;ctx.fillStyle=this.pattern};flash.display.GraphicsBitmapFill.prototype.FLEXJS_CLASS_INFO={names:[{name:'GraphicsBitmapFill',qName:'flash.display.GraphicsBitmapFill'}],interfaces:[flash.display.IGraphicsFill,flash.display.IGraphicsData]};
goog.exportSymbol('flash.display.GraphicsBitmapFill',flash.display.GraphicsBitmapFill);
flash.display.GraphicsBitmapFill.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'bitmapData':{type:'BitmapData'},'matrix':{type:'Matrix'},'repeat':{type:'Boolean'},'smooth':{type:'Boolean'}}},accessors:function(){return{}},methods:function(){return{'GraphicsBitmapFill':{type:'',declaredBy:'flash.display.GraphicsBitmapFill'},'draw':{type:'void',declaredBy:'flash.display.GraphicsBitmapFill'},'gldraw':{type:'void',declaredBy:'flash.display.GraphicsBitmapFill'}}}}};goog.provide('flash.geom.Point');flash.geom.Point=function(x,y){x=typeof x!=='undefined'?x:0;y=typeof y!=='undefined'?y:0;this.x=x;this.y=y};flash.geom.Point.prototype.x;flash.geom.Point.prototype.y;flash.geom.Point.interpolate=function(pt1,pt2,f){return new flash.geom.Point(pt2.x+f*(pt1.x-pt2.x),pt2.y+f*(pt1.y-pt2.y))};flash.geom.Point.distance=function(pt1,pt2){return pt1.subtract(pt2).length};flash.geom.Point.polar=function(len,angle){return new flash.geom.Point(len*Math.cos(angle),len*Math.sin(angle))};
flash.geom.Point.prototype.clone=function(){return new flash.geom.Point(this.x,this.y)};flash.geom.Point.prototype.offset=function(dx,dy){this.x=this.x+dx;this.y=this.y+dy};flash.geom.Point.prototype.equals=function(toCompare){return toCompare.x===this.x&&toCompare.y===this.y};flash.geom.Point.prototype.subtract=function(v){return new flash.geom.Point(this.x-v.x,this.y-v.y)};flash.geom.Point.prototype.add=function(v){return new flash.geom.Point(this.x+v.x,this.y+v.y)};
flash.geom.Point.prototype.normalize=function(thickness){var invD=this.length;if(invD>0){invD=thickness/invD;this.x=this.x*invD;this.y=this.y*invD}};flash.geom.Point.prototype.toString=function(){return'(x\x3d'+this.x+', y\x3d'+this.y+')'};flash.geom.Point.prototype.copyFrom=function(sourcePoint){this.x=sourcePoint.x;this.y=sourcePoint.y};flash.geom.Point.prototype.setTo=function(xa,ya){this.x=xa;this.y=ya};
Object.defineProperties(flash.geom.Point.prototype,{length:{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}});flash.geom.Point.prototype.FLEXJS_CLASS_INFO={names:[{name:'Point',qName:'flash.geom.Point'}]};goog.exportSymbol('flash.geom.Point',flash.geom.Point);
flash.geom.Point.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'x':{type:'Number'},'y':{type:'Number'}}},accessors:function(){return{'length':{type:'Number',declaredBy:'flash.geom.Point'}}},methods:function(){return{'Point':{type:'',declaredBy:'flash.geom.Point'},'clone':{type:'Point',declaredBy:'flash.geom.Point'},'offset':{type:'void',declaredBy:'flash.geom.Point'},'equals':{type:'Boolean',declaredBy:'flash.geom.Point'},'subtract':{type:'Point',declaredBy:'flash.geom.Point'},
'add':{type:'Point',declaredBy:'flash.geom.Point'},'normalize':{type:'void',declaredBy:'flash.geom.Point'},'toString':{type:'String',declaredBy:'flash.geom.Point'},'copyFrom':{type:'void',declaredBy:'flash.geom.Point',metadata:function(){return[]}},'setTo':{type:'void',declaredBy:'flash.geom.Point',metadata:function(){return[]}}}}}};goog.provide('flash.geom.Matrix');goog.require('flash.geom.Point');flash.geom.Matrix=function(a,b,c,d,tx,ty){a=typeof a!=='undefined'?a:1;b=typeof b!=='undefined'?b:0;c=typeof c!=='undefined'?c:0;d=typeof d!=='undefined'?d:1;tx=typeof tx!=='undefined'?tx:0;ty=typeof ty!=='undefined'?ty:0;this.a=a;this.b=b;this.c=c;this.d=d;this.tx=tx;this.ty=ty};flash.geom.Matrix.prototype.a;flash.geom.Matrix.prototype.b;flash.geom.Matrix.prototype.c;flash.geom.Matrix.prototype.d;flash.geom.Matrix.prototype.tx;flash.geom.Matrix.prototype.ty;
flash.geom.Matrix.prototype.t0;flash.geom.Matrix.prototype.t1;flash.geom.Matrix.prototype.t2;flash.geom.Matrix.prototype.t3;flash.geom.Matrix.prototype.clone=function(){return new flash.geom.Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty)};
flash.geom.Matrix.prototype.concat=function(m){this.t0=this.a;this.a=this.a*m.a+this.b*m.c;this.b=this.t0*m.b+this.b*m.d;this.t0=this.c;this.c=this.c*m.a+this.d*m.c;this.d=this.t0*m.b+this.d*m.d;this.t0=this.tx;this.tx=this.tx*m.a+this.ty*m.c+m.tx;this.ty=this.t0*m.b+this.ty*m.d+m.ty};
flash.geom.Matrix.prototype.invert=function(){if(this.b===0&&this.c===0){this.a=1/this.a;this.d=1/this.d;this.tx*=-this.a;this.ty*=-this.d}else{var det=this.a*this.d-this.b*this.c;if(det===0){this.a=this.d=1;this.b=this.c=0;this.tx=this.ty=0}else{det=1/det;this.t0=this.a;this.t1=this.b;this.t2=this.c;this.t3=this.d;this.a=this.t3*det;this.b=-this.t1*det;this.c=-this.t2*det;this.d=this.t0*det;this.t0=-(this.b*this.tx+this.d*this.ty);this.tx=-(this.a*this.tx+this.c*this.ty);this.ty=this.t0}}};
flash.geom.Matrix.prototype.identity=function(){this.a=this.d=1;this.b=this.c=0;this.tx=this.ty=0};flash.geom.Matrix.prototype.createBox=function(scaleX,scaleY,rotation,tx,ty){rotation=typeof rotation!=='undefined'?rotation:0;tx=typeof tx!=='undefined'?tx:0;ty=typeof ty!=='undefined'?ty:0;var u=Math.cos(rotation);var v=Math.sin(rotation);this.a=u*scaleX;this.b=v*scaleY;this.c=-v*scaleX;this.d=u*scaleY;tx=tx;ty=ty};
flash.geom.Matrix.prototype.createGradientBox=function(width,height,rotation,tx,ty){rotation=typeof rotation!=='undefined'?rotation:0;tx=typeof tx!=='undefined'?tx:0;ty=typeof ty!=='undefined'?ty:0;this.createBox(width/1638.4,height/1638.4,rotation,tx+width/2,ty+height/2)};
flash.geom.Matrix.prototype.rotate=function(angle){var u=Math.cos(angle);var v=Math.sin(angle);this.t0=this.a;this.t1=this.c;this.t2=this.tx;this.a=u*this.a-v*this.b;this.b=v*this.t0+u*this.b;this.c=u*this.c-v*this.d;this.d=v*this.t1+u*this.d;this.tx=u*this.tx-v*this.ty;this.ty=v*this.t2+u*this.ty};flash.geom.Matrix.prototype.translate=function(dx,dy){this.tx+=dx;this.ty+=dy};flash.geom.Matrix.prototype.scale=function(sx,sy){this.a*=sx;this.b*=sy;this.c*=sx;this.d*=sy;this.tx*=sx;this.ty*=sy};
flash.geom.Matrix.prototype.deltaTransformPoint=function(point){return new flash.geom.Point(this.a*point.x+this.c*point.y,this.d*point.y+this.b*point.x)};flash.geom.Matrix.prototype.transformPoint=function(point){return new flash.geom.Point(this.a*point.x+this.c*point.y+this.tx,this.d*point.y+this.b*point.x+this.ty)};flash.geom.Matrix.prototype.toString=function(){return'(a\x3d'+this.a+', b\x3d'+this.b+', c\x3d'+this.c+', d\x3d'+this.d+', tx\x3d'+this.tx+', ty\x3d'+this.ty+')'};
flash.geom.Matrix.prototype.copyFrom=function(sourceMatrix){this.a=sourceMatrix.a;this.b=sourceMatrix.b;this.c=sourceMatrix.c;this.d=sourceMatrix.d;this.tx=sourceMatrix.tx;this.ty=sourceMatrix.ty};flash.geom.Matrix.prototype.setTo=function(aa,ba,ca,da,txa,tya){this.a=aa;this.b=ba;this.c=ca;this.d=da;this.tx=txa;this.ty=tya};
flash.geom.Matrix.prototype.copyRowTo=function(row,vector3D){switch(row){case 0:break;case 1:vector3D.x=this.b;vector3D.y=this.d;vector3D.z=this.ty;break;case 2:case 3:vector3D.x=0;vector3D.y=0;vector3D.z=1;break;default:vector3D.x=this.a;vector3D.y=this.c;vector3D.z=this.tx}};
flash.geom.Matrix.prototype.copyColumnTo=function(column,vector3D){switch(column){case 0:break;case 1:vector3D.x=this.c;vector3D.y=this.d;vector3D.z=0;break;case 2:case 3:vector3D.x=this.tx;vector3D.y=this.ty;vector3D.z=1;break;default:vector3D.x=this.a;vector3D.y=this.b;vector3D.z=0}};
flash.geom.Matrix.prototype.copyRowFrom=function(row,vector3D){switch(row){case 0:break;case 1:case 2:this.b=vector3D.x;this.d=vector3D.y;this.ty=vector3D.z;break;default:this.a=vector3D.x;this.c=vector3D.y;this.tx=vector3D.z}};flash.geom.Matrix.prototype.copyColumnFrom=function(column,vector3D){switch(column){case 0:break;case 1:case 2:this.b=vector3D.x;this.d=vector3D.y;this.ty=vector3D.z;break;default:this.a=vector3D.x;this.c=vector3D.y;this.tx=vector3D.z}};
flash.geom.Matrix.prototype.FLEXJS_CLASS_INFO={names:[{name:'Matrix',qName:'flash.geom.Matrix'}]};goog.exportSymbol('flash.geom.Matrix',flash.geom.Matrix);
flash.geom.Matrix.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'a':{type:'Number'},'b':{type:'Number'},'c':{type:'Number'},'d':{type:'Number'},'tx':{type:'Number'},'ty':{type:'Number'}}},accessors:function(){return{}},methods:function(){return{'Matrix':{type:'',declaredBy:'flash.geom.Matrix'},'clone':{type:'Matrix',declaredBy:'flash.geom.Matrix'},'concat':{type:'void',declaredBy:'flash.geom.Matrix'},'invert':{type:'void',declaredBy:'flash.geom.Matrix'},'identity':{type:'void',
declaredBy:'flash.geom.Matrix'},'createBox':{type:'void',declaredBy:'flash.geom.Matrix'},'createGradientBox':{type:'void',declaredBy:'flash.geom.Matrix'},'rotate':{type:'void',declaredBy:'flash.geom.Matrix'},'translate':{type:'void',declaredBy:'flash.geom.Matrix'},'scale':{type:'void',declaredBy:'flash.geom.Matrix'},'deltaTransformPoint':{type:'Point',declaredBy:'flash.geom.Matrix'},'transformPoint':{type:'Point',declaredBy:'flash.geom.Matrix'},'toString':{type:'String',declaredBy:'flash.geom.Matrix'},
'copyFrom':{type:'void',declaredBy:'flash.geom.Matrix'},'setTo':{type:'void',declaredBy:'flash.geom.Matrix'},'copyRowTo':{type:'void',declaredBy:'flash.geom.Matrix'},'copyColumnTo':{type:'void',declaredBy:'flash.geom.Matrix'},'copyRowFrom':{type:'void',declaredBy:'flash.geom.Matrix'},'copyColumnFrom':{type:'void',declaredBy:'flash.geom.Matrix'}}}}};goog.provide('flash.display.GraphicsEndFill');goog.require('flash.display.GraphicsBitmapFill');goog.require('flash.geom.Matrix');goog.require('flash.display.IGraphicsData');goog.require('flash.display.IGraphicsFill');flash.display.GraphicsEndFill=function(){this._worldMatrix=new flash.geom.Matrix};flash.display.GraphicsEndFill.prototype.fill;flash.display.GraphicsEndFill.prototype._worldMatrix;
flash.display.GraphicsEndFill.prototype.draw=function(ctx,colorTransform){if(this.fill){if(org.apache.flex.utils.Language.is(this.fill,flash.display.GraphicsBitmapFill)){var bfill=org.apache.flex.utils.Language.as(this.fill,flash.display.GraphicsBitmapFill);if(bfill.matrix)var m=bfill.matrix;ctx.globalAlpha=colorTransform.alphaMultiplier}else ctx.globalAlpha=1;if(m){ctx.save();ctx.transform(m.a,m.b,m.c,m.d,m.tx,m.ty)}ctx.fill();if(m)ctx.restore()}};
flash.display.GraphicsEndFill.prototype.gldraw=function(ctx,colorTransform){if(this.fill){var m=this.fill['matrix'];if(m)this._worldMatrix.copyFrom(m);else this._worldMatrix.identity();var temp=ctx.matr;ctx.transform2(this._worldMatrix);ctx.fill();ctx.matr=temp}};flash.display.GraphicsEndFill.prototype.FLEXJS_CLASS_INFO={names:[{name:'GraphicsEndFill',qName:'flash.display.GraphicsEndFill'}],interfaces:[flash.display.IGraphicsFill,flash.display.IGraphicsData]};
goog.exportSymbol('flash.display.GraphicsEndFill',flash.display.GraphicsEndFill);flash.display.GraphicsEndFill.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'fill':{type:'IGraphicsFill'},'_worldMatrix':{type:'Matrix'}}},accessors:function(){return{}},methods:function(){return{'GraphicsEndFill':{type:'',declaredBy:'flash.display.GraphicsEndFill'},'draw':{type:'void',declaredBy:'flash.display.GraphicsEndFill'},'gldraw':{type:'void',declaredBy:'flash.display.GraphicsEndFill'}}}}};goog.provide('flash.display.GraphicsPathCommand');flash.display.GraphicsPathCommand=function(){};flash.display.GraphicsPathCommand.NO_OP=0;flash.display.GraphicsPathCommand.MOVE_TO=1;flash.display.GraphicsPathCommand.LINE_TO=2;flash.display.GraphicsPathCommand.CURVE_TO=3;flash.display.GraphicsPathCommand.WIDE_MOVE_TO=4;flash.display.GraphicsPathCommand.WIDE_LINE_TO=5;flash.display.GraphicsPathCommand.CUBIC_CURVE_TO=6;flash.display.GraphicsPathCommand.ARC=7;
flash.display.GraphicsPathCommand.CLOSE_PATH=8;flash.display.GraphicsPathCommand.DRAW_TRIANGLES=9;flash.display.GraphicsPathCommand.prototype.FLEXJS_CLASS_INFO={names:[{name:'GraphicsPathCommand',qName:'flash.display.GraphicsPathCommand'}]};goog.exportSymbol('flash.display.GraphicsPathCommand',flash.display.GraphicsPathCommand);
flash.display.GraphicsPathCommand.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'GraphicsPathCommand':{type:'',declaredBy:'flash.display.GraphicsPathCommand'}}}}};goog.provide('flash.display.IGraphicsPath');flash.display.IGraphicsPath=function(){};flash.display.IGraphicsPath.prototype.FLEXJS_CLASS_INFO={names:[{name:'IGraphicsPath',qName:'flash.display.IGraphicsPath'}]};flash.display.IGraphicsPath.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('flash.display.GraphicsPath');goog.require('flash.display.GraphicsPathCommand');goog.require('flash.display.IGraphicsData');goog.require('flash.display.IGraphicsPath');
flash.display.GraphicsPath=function(commands,data,winding){commands=typeof commands!=='undefined'?commands:null;data=typeof data!=='undefined'?data:null;winding=typeof winding!=='undefined'?winding:'evenOdd';this.commands=new Array;this.data=new Array;this.tris=[];this.commands=commands;this.data=data;if(this.commands==null)this.commands=new Array;if(this.data==null)this.data=new Array;this._winding=winding};flash.display.GraphicsPath.prototype.gpuPath2DDirty=true;flash.display.GraphicsPath.prototype.commands;
flash.display.GraphicsPath.prototype.data;flash.display.GraphicsPath.prototype.tris;flash.display.GraphicsPath.prototype._winding;flash.display.GraphicsPath.prototype.clear=function(){this.commands.length=0;this.data.length=0;this.tris.length=0};flash.display.GraphicsPath.prototype.moveTo=function(x,y){this.commands.push(flash.display.GraphicsPathCommand.MOVE_TO);this.data.push(x,y)};
flash.display.GraphicsPath.prototype.lineTo=function(x,y){this.commands.push(flash.display.GraphicsPathCommand.LINE_TO);this.data.push(x,y)};flash.display.GraphicsPath.prototype.curveTo=function(controlX,controlY,anchorX,anchorY){this.commands.push(flash.display.GraphicsPathCommand.CURVE_TO);this.data.push(controlX,controlY,anchorX,anchorY)};
flash.display.GraphicsPath.prototype.cubicCurveTo=function(controlX1,controlY1,controlX2,controlY2,anchorX,anchorY){this.commands.push(flash.display.GraphicsPathCommand.CUBIC_CURVE_TO);this.data.push(controlX1,controlY1,controlX2,controlY2,anchorX,anchorY)};flash.display.GraphicsPath.prototype.wideLineTo=function(x,y){this.commands.push(flash.display.GraphicsPathCommand.WIDE_LINE_TO);this.data.push(0,0,x,y)};
flash.display.GraphicsPath.prototype.wideMoveTo=function(x,y){this.commands.push(flash.display.GraphicsPathCommand.WIDE_MOVE_TO);this.data.push(0,0,x,y)};flash.display.GraphicsPath.prototype.arc=function(x,y,r,a0,a1){this.commands.push(flash.display.GraphicsPathCommand.ARC);this.data.push(x,y,r,a0,a1)};
flash.display.GraphicsPath.prototype.draw=function(ctx,colorTransform){if(this.commands.length){ctx.beginPath();var p=0;var trip=0;var len=this.commands.length;for(var i=0;i<len;i++){var cmd=this.commands[i];switch(cmd){case flash.display.GraphicsPathCommand.MOVE_TO:ctx.moveTo(this.data[p++],this.data[p++]);break;case flash.display.GraphicsPathCommand.LINE_TO:ctx.lineTo(this.data[p++],this.data[p++]);break;case flash.display.GraphicsPathCommand.CURVE_TO:ctx.quadraticCurveTo(this.data[p++],this.data[p++],
this.data[p++],this.data[p++]);break;case flash.display.GraphicsPathCommand.CUBIC_CURVE_TO:ctx.bezierCurveTo(this.data[p++],this.data[p++],this.data[p++],this.data[p++],this.data[p++],this.data[p++]);break;case flash.display.GraphicsPathCommand.WIDE_MOVE_TO:p+=2;ctx.moveTo(this.data[p++],this.data[p++]);break;case flash.display.GraphicsPathCommand.WIDE_LINE_TO:p+=2;ctx.lineTo(this.data[p++],this.data[p++]);break;case flash.display.GraphicsPathCommand.ARC:ctx.arc(this.data[p++],this.data[p++],this.data[p++],
this.data[p++],this.data[p++]);break;case flash.display.GraphicsPathCommand.DRAW_TRIANGLES:this.doDrawTriangles(this.tris[trip++],ctx);break;case flash.display.GraphicsPathCommand.CLOSE_PATH:ctx.closePath();break}}}};flash.display.GraphicsPath.prototype.gldraw=function(ctx,colorTransform){ctx.drawPath(this,colorTransform)};flash.display.GraphicsPath.prototype.closePath=function(){this.commands.push(flash.display.GraphicsPathCommand.CLOSE_PATH)};
flash.display.GraphicsPath.prototype.drawTriangles=function(vertices,indices,uvtData){this.tris.push([vertices,indices,uvtData]);this.commands.push(flash.display.GraphicsPathCommand.DRAW_TRIANGLES)};
flash.display.GraphicsPath.prototype.doDrawTriangles=function(tri,ctx){var vertices=tri[0];var indices=tri[1];var len=indices.length;for(var i=0;i<len;){var i0=indices[i++];var i1=indices[i++];var i2=indices[i++];var x0=vertices[2*i0];var y0=vertices[2*i0+1];var x1=vertices[2*i1];var y1=vertices[2*i1+1];var x2=vertices[2*i2];var y2=vertices[2*i2+1];ctx.moveTo(x0,y0);ctx.lineTo(x1,y1);ctx.lineTo(x2,y2);ctx.lineTo(x0,y0)}};
Object.defineProperties(flash.display.GraphicsPath.prototype,{winding:{get:function(){return this._winding},set:function(value){this._winding=value}}});flash.display.GraphicsPath.prototype.FLEXJS_CLASS_INFO={names:[{name:'GraphicsPath',qName:'flash.display.GraphicsPath'}],interfaces:[flash.display.IGraphicsPath,flash.display.IGraphicsData]};goog.exportSymbol('flash.display.GraphicsPath',flash.display.GraphicsPath);
flash.display.GraphicsPath.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'gpuPath2DDirty':{type:'Boolean'},'commands':{type:'Vector.\x3cint\x3e'},'data':{type:'Vector.\x3cNumber\x3e'},'tris':{type:'Array'}}},accessors:function(){return{'winding':{type:'String',declaredBy:'flash.display.GraphicsPath'}}},methods:function(){return{'GraphicsPath':{type:'',declaredBy:'flash.display.GraphicsPath'},'clear':{type:'void',declaredBy:'flash.display.GraphicsPath'},'moveTo':{type:'void',
declaredBy:'flash.display.GraphicsPath'},'lineTo':{type:'void',declaredBy:'flash.display.GraphicsPath'},'curveTo':{type:'void',declaredBy:'flash.display.GraphicsPath'},'cubicCurveTo':{type:'void',declaredBy:'flash.display.GraphicsPath'},'wideLineTo':{type:'void',declaredBy:'flash.display.GraphicsPath'},'wideMoveTo':{type:'void',declaredBy:'flash.display.GraphicsPath'},'arc':{type:'void',declaredBy:'flash.display.GraphicsPath'},'draw':{type:'void',declaredBy:'flash.display.GraphicsPath'},'gldraw':{type:'void',
declaredBy:'flash.display.GraphicsPath'},'closePath':{type:'void',declaredBy:'flash.display.GraphicsPath'},'drawTriangles':{type:'void',declaredBy:'flash.display.GraphicsPath'}}}}};goog.provide('flash.__native.BaseRenderer');goog.require('flash.__native.IRenderer');goog.require('flash.display.GraphicsEndFill');goog.require('org.apache.flex.utils.Language');flash.__native.BaseRenderer=function(){flash.__native.BaseRenderer.base(this,'constructor');this.endFillInstance=new flash.display.GraphicsEndFill};goog.inherits(flash.__native.BaseRenderer,flash.__native.IRenderer);flash.__native.BaseRenderer.prototype.endFillInstance;
flash.__native.BaseRenderer.prototype.getCssColor=function(color,alpha,ct,toarr){return'rgba('+org.apache.flex.utils.Language._int((color>>16&255)*ct.redMultiplier+ct.redOffset)+','+org.apache.flex.utils.Language._int((color>>8&255)*ct.greenMultiplier+ct.greenOffset)+','+org.apache.flex.utils.Language._int((color&255)*ct.greenMultiplier+ct.greenOffset)+','+(alpha*ct.alphaMultiplier+ct.alphaOffset)+')'};flash.__native.BaseRenderer.prototype.createPath=function(){return new flash.display.GraphicsPath};
flash.__native.BaseRenderer.prototype.renderGraphics=function(ctx,g,m,blendMode,colorTransform){ctx.setTransform(m.a,m.b,m.c,m.d,m.tx,m.ty);ctx.globalCompositeOperation=blendMode;var len=g.graphicsData.length;for(var i=0;i<len;i++){var igd=g.graphicsData[i];igd.draw(ctx,colorTransform)}if(g.lastFill){this.endFillInstance.fill=g.lastFill;this.endFillInstance.draw(ctx,colorTransform)}if(g.lastStroke)ctx.stroke();ctx.fillStyle=null;ctx.strokeStyle=null};
flash.__native.BaseRenderer.prototype.renderImage=function(ctx,img,m,blendMode,colorTransform){ctx.globalAlpha=colorTransform.alphaMultiplier;ctx.globalCompositeOperation=blendMode;ctx.setTransform(m.a,m.b,m.c,m.d,m.tx,m.ty);ctx.drawImage(img.image,0,0)};
flash.__native.BaseRenderer.prototype.renderText=function(ctx,txt,textFormat,m,blendMode,colorTransform,x,y){ctx.globalAlpha=colorTransform.alphaMultiplier;ctx.globalCompositeOperation=blendMode;ctx.setTransform(m.a,m.b,m.c,m.d,m.tx,m.ty);ctx.font=textFormat.css;ctx.fillStyle=textFormat.csscolor;ctx.textBaseline='top';ctx.fillText(txt,x,y)};flash.__native.BaseRenderer.prototype.FLEXJS_CLASS_INFO={names:[{name:'BaseRenderer',qName:'flash.__native.BaseRenderer'}]};
goog.exportSymbol('flash.__native.BaseRenderer',flash.__native.BaseRenderer);
flash.__native.BaseRenderer.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'BaseRenderer':{type:'',declaredBy:'flash.__native.BaseRenderer'},'getCssColor':{type:'Object',declaredBy:'flash.__native.BaseRenderer'},'createPath':{type:'GraphicsPath',declaredBy:'flash.__native.BaseRenderer'},'renderGraphics':{type:'void',declaredBy:'flash.__native.BaseRenderer'},'renderImage':{type:'void',declaredBy:'flash.__native.BaseRenderer'},
'renderText':{type:'void',declaredBy:'flash.__native.BaseRenderer'}}}}};goog.provide('SpriteFlexjs');goog.require('org.apache.flex.utils.Language');SpriteFlexjs=function(){};SpriteFlexjs.startTime=0;SpriteFlexjs.drawCounter;SpriteFlexjs.batDrawCounter;SpriteFlexjs.debug=false;SpriteFlexjs.wmode='direct';SpriteFlexjs.renderer=new flash.__native.BaseRenderer;
SpriteFlexjs.requestAnimationFrame=window['requestAnimationFrame']||window['webkitRequestAnimationFrame']||window['mozRequestAnimationFrame']||window['oRequestAnimationFrame']||window['msRequestAnimationFrame']||function(callback){setTimeout(callback,1E3/60)};SpriteFlexjs.prototype.FLEXJS_CLASS_INFO={names:[{name:'SpriteFlexjs',qName:'SpriteFlexjs'}]};goog.exportSymbol('SpriteFlexjs',SpriteFlexjs);
SpriteFlexjs.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'SpriteFlexjs':{type:'',declaredBy:'SpriteFlexjs'}}}}};goog.provide('flash.__native.BitmapTexture');flash.__native.BitmapTexture=function(){};flash.__native.BitmapTexture.prototype.texture;flash.__native.BitmapTexture.prototype.bmd;flash.__native.BitmapTexture.prototype.img;flash.__native.BitmapTexture.prototype.width;flash.__native.BitmapTexture.prototype.height;flash.__native.BitmapTexture.prototype.FLEXJS_CLASS_INFO={names:[{name:'BitmapTexture',qName:'flash.__native.BitmapTexture'}]};goog.exportSymbol('flash.__native.BitmapTexture',flash.__native.BitmapTexture);
flash.__native.BitmapTexture.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'texture':{type:'Texture'},'bmd':{type:'BitmapData'},'img':{type:'Object'},'width':{type:'int'},'height':{type:'int'}}},accessors:function(){return{}},methods:function(){return{'BitmapTexture':{type:'',declaredBy:'flash.__native.BitmapTexture'}}}}};goog.provide('flash.__native.GLCanvasPattern');flash.__native.GLCanvasPattern=function(image,repetition){this.repetition=repetition;this.image=image};flash.__native.GLCanvasPattern.prototype.image;flash.__native.GLCanvasPattern.prototype.repetition;flash.__native.GLCanvasPattern.prototype.FLEXJS_CLASS_INFO={names:[{name:'GLCanvasPattern',qName:'flash.__native.GLCanvasPattern'}]};goog.exportSymbol('flash.__native.GLCanvasPattern',flash.__native.GLCanvasPattern);
flash.__native.GLCanvasPattern.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'image':{type:'Object'},'repetition':{type:'String'}}},accessors:function(){return{}},methods:function(){return{'GLCanvasPattern':{type:'',declaredBy:'flash.__native.GLCanvasPattern'}}}}};goog.provide('flash.__native.GLIndexBufferSet');flash.__native.GLIndexBufferSet=function(data,usage){this.usage=usage;this.data=data};flash.__native.GLIndexBufferSet.prototype.buff;flash.__native.GLIndexBufferSet.prototype.usage;flash.__native.GLIndexBufferSet.prototype.dirty=true;flash.__native.GLIndexBufferSet.prototype.data;
flash.__native.GLIndexBufferSet.prototype.getBuff=function(ctx){if(this.buff==null){this.buff=ctx.createIndexBuffer(this.data.length);this.buff.gl.bindBuffer(this.buff.gl.ELEMENT_ARRAY_BUFFER,this.buff.buff);this.buff.gl.bufferData(this.buff.gl.ELEMENT_ARRAY_BUFFER,this.data,this.usage);this.dirty=false}if(this.dirty){this.buff.gl.bindBuffer(this.buff.gl.ELEMENT_ARRAY_BUFFER,this.buff.buff);this.buff.gl.bufferSubData(this.buff.gl.ELEMENT_ARRAY_BUFFER,0,this.data);this.dirty=false}return this.buff};
flash.__native.GLIndexBufferSet.prototype.FLEXJS_CLASS_INFO={names:[{name:'GLIndexBufferSet',qName:'flash.__native.GLIndexBufferSet'}]};goog.exportSymbol('flash.__native.GLIndexBufferSet',flash.__native.GLIndexBufferSet);
flash.__native.GLIndexBufferSet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'dirty':{type:'Boolean'},'data':{type:'Uint16Array'}}},accessors:function(){return{}},methods:function(){return{'GLIndexBufferSet':{type:'',declaredBy:'flash.__native.GLIndexBufferSet'},'getBuff':{type:'IndexBuffer3D',declaredBy:'flash.__native.GLIndexBufferSet'}}}}};goog.provide('flash.__native.GLVertexBufferSet');flash.__native.GLVertexBufferSet=function(data,data32PerVertex,usage){this.usage=usage;this.data32PerVertex=data32PerVertex;this.data=data};flash.__native.GLVertexBufferSet.prototype.data;flash.__native.GLVertexBufferSet.prototype.data32PerVertex;flash.__native.GLVertexBufferSet.prototype.buff;flash.__native.GLVertexBufferSet.prototype.usage;flash.__native.GLVertexBufferSet.prototype.dirty=true;
flash.__native.GLVertexBufferSet.prototype.getBuff=function(ctx){if(this.buff==null){this.buff=ctx.createVertexBuffer(this.data.length/this.data32PerVertex,this.data32PerVertex);this.buff.gl.bindBuffer(this.buff.gl.ARRAY_BUFFER,this.buff.buff);this.buff.gl.bufferData(this.buff.gl.ARRAY_BUFFER,this.data,this.usage);this.dirty=false}if(this.dirty){this.buff.gl.bindBuffer(this.buff.gl.ARRAY_BUFFER,this.buff.buff);this.buff.gl.bufferSubData(this.buff.gl.ARRAY_BUFFER,0,this.data);this.dirty=false}return this.buff};
flash.__native.GLVertexBufferSet.prototype.FLEXJS_CLASS_INFO={names:[{name:'GLVertexBufferSet',qName:'flash.__native.GLVertexBufferSet'}]};goog.exportSymbol('flash.__native.GLVertexBufferSet',flash.__native.GLVertexBufferSet);
flash.__native.GLVertexBufferSet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'data':{type:'Object'},'data32PerVertex':{type:'int'},'dirty':{type:'Boolean'}}},accessors:function(){return{}},methods:function(){return{'GLVertexBufferSet':{type:'',declaredBy:'flash.__native.GLVertexBufferSet'},'getBuff':{type:'VertexBuffer3D',declaredBy:'flash.__native.GLVertexBufferSet'}}}}};goog.provide('flash.__native.GLDrawable');goog.require('flash.__native.GLIndexBufferSet');goog.require('flash.__native.GLVertexBufferSet');flash.__native.GLDrawable=function(posData,uvData,iData,usage){this.usage=usage;this.pos=new flash.__native.GLVertexBufferSet(posData,2,usage);this.uv=new flash.__native.GLVertexBufferSet(uvData,2,usage);this.index=new flash.__native.GLIndexBufferSet(iData,usage)};flash.__native.GLDrawable.prototype.pos;flash.__native.GLDrawable.prototype.uv;flash.__native.GLDrawable.prototype._color;
flash.__native.GLDrawable.prototype.usage;flash.__native.GLDrawable.prototype.index;flash.__native.GLDrawable.prototype.numTriangles=-1;Object.defineProperties(flash.__native.GLDrawable.prototype,{color:{get:function(){if(this._color==null||this._color.data.length!=this.pos.data.length/2)this._color=new flash.__native.GLVertexBufferSet(new Uint32Array(this.pos.data.length/2),4,this.usage);return this._color},set:function(v){this._color=v}}});
flash.__native.GLDrawable.prototype.FLEXJS_CLASS_INFO={names:[{name:'GLDrawable',qName:'flash.__native.GLDrawable'}]};goog.exportSymbol('flash.__native.GLDrawable',flash.__native.GLDrawable);
flash.__native.GLDrawable.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'pos':{type:'GLVertexBufferSet'},'uv':{type:'GLVertexBufferSet'},'index':{type:'GLIndexBufferSet'},'numTriangles':{type:'int'}}},accessors:function(){return{'color':{type:'GLVertexBufferSet',declaredBy:'flash.__native.GLDrawable'}}},methods:function(){return{'GLDrawable':{type:'',declaredBy:'flash.__native.GLDrawable'}}}}};goog.provide('flash.__native.GLPath2D');flash.__native.GLPath2D=function(){this.matr=new flash.geom.Matrix};flash.__native.GLPath2D.prototype.matr;flash.__native.GLPath2D.prototype._drawable;flash.__native.GLPath2D.prototype.pos;flash.__native.GLPath2D.prototype.uv;flash.__native.GLPath2D.prototype.index;flash.__native.GLPath2D.prototype.path;
Object.defineProperties(flash.__native.GLPath2D.prototype,{drawable:{get:function(){if(this.path.gpuPath2DDirty){this.path.gpuPath2DDirty=false;var polys=this.path.polys;var nump=0;var numi=0;var len=this.path.polys.length;for(var i=0;i<len;i++){var plen=this.path.polys.array[i].length;nump+=plen;if(plen>=6)numi+=(plen/2-2)*3}var tlen=this.path.tris.length;var diffuv=false;for(i=0;i<tlen;i++){var tri=this.path.tris[i];nump+=tri[0].length;numi+=tri[1].length;if(tri[2])diffuv=true}if(this.pos==null||
this.pos.length!=nump)this.pos=new Float32Array(nump);if(this.index==null||this.index.length!=numi)this.index=new Uint16Array(numi);if(diffuv&&(this.uv==null||this.uv.length!=nump))this.uv=new Float32Array(nump);var offset=0;var pi=0;var ii=0;for(i=0;i<len;i++){var poly=polys.array[i];plen=poly.length;var plendiv2=plen/2;for(var j=0;j<plendiv2;j++){var x=poly.array[2*j];var y=poly.array[2*j+1];this.pos[pi++]=x;this.pos[pi++]=y;if(j>=2){this.index[ii++]=offset;this.index[ii++]=offset+j-1;this.index[ii++]=
offset+j}}offset+=j}for(i=0;i<tlen;i++){tri=this.path.tris[i];var vsdata=tri[0];var idata=tri[1];var uvdata=tri[2];var len2=vsdata.length;for(j=0;j<len2;j++){this.pos[pi]=vsdata[j];if(uvdata)this.uv[pi]=uvdata[j];pi++}len2=idata.length;for(j=0;j<len2;j++)this.index[ii++]=offset+idata[j];offset+=vsdata.length/2}if(this._drawable==null)this._drawable=new flash.__native.GLDrawable(this.pos,this.pos,this.index,WebGLRenderingContext.STATIC_DRAW);else{this._drawable.pos.data=this.pos;this._drawable.uv.data=
diffuv?this.uv:this.pos;this._drawable.index.data=this.index;this._drawable.pos.dirty=true;this._drawable.uv.dirty=true;this._drawable.index.dirty=true}}return this._drawable}}});flash.__native.GLPath2D.prototype.FLEXJS_CLASS_INFO={names:[{name:'GLPath2D',qName:'flash.__native.GLPath2D'}]};goog.exportSymbol('flash.__native.GLPath2D',flash.__native.GLPath2D);
flash.__native.GLPath2D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'matr':{type:'Matrix'},'_drawable':{type:'GLDrawable'},'path':{type:'GLGraphicsPath'}}},accessors:function(){return{'drawable':{type:'GLDrawable',declaredBy:'flash.__native.GLPath2D'}}},methods:function(){return{'GLPath2D':{type:'',declaredBy:'flash.__native.GLPath2D'}}}}};goog.provide('flash.geom.Rectangle');flash.geom.Rectangle=function(x,y,width,height){x=typeof x!=='undefined'?x:0;y=typeof y!=='undefined'?y:0;width=typeof width!=='undefined'?width:0;height=typeof height!=='undefined'?height:0;this.x=x;this.y=y;this.width=width;this.height=height};flash.geom.Rectangle.prototype.x;flash.geom.Rectangle.prototype.y;flash.geom.Rectangle.prototype.width;flash.geom.Rectangle.prototype.height;
flash.geom.Rectangle.prototype.clone=function(){return new flash.geom.Rectangle(this.x,this.y,this.width,this.height)};flash.geom.Rectangle.prototype.isEmpty=function(){return this.width<=0||this.height<=0};flash.geom.Rectangle.prototype.setEmpty=function(){this.x=0;this.y=0;this.width=0;this.height=0};flash.geom.Rectangle.prototype.inflate=function(dx,dy){this.x=this.x-dx;this.width=this.width+2*dx;this.y=this.y-dy;this.height=this.height+2*dy};
flash.geom.Rectangle.prototype.inflatePoint=function(point){this.x=this.x-point.x;this.width=this.width+2*point.x;this.y=this.y-point.y;this.height=this.height+2*point.y};flash.geom.Rectangle.prototype.offset=function(dx,dy){this.x=this.x+dx;this.y=this.y+dy};flash.geom.Rectangle.prototype.offsetPoint=function(point){this.x=this.x+point.x;this.y=this.y+point.y};flash.geom.Rectangle.prototype.contains=function(x,y){return x>=this.x&&x<this.x+this.width&&y>=this.y&&y<this.y+this.height};
flash.geom.Rectangle.prototype.containsPoint=function(point){return point.x>=this.x&&point.x<this.x+this.width&&point.y>=this.y&&point.y<this.y+this.height};flash.geom.Rectangle.prototype.containsRect=function(rect){var r1=rect.x+rect.width;var b1=rect.y+rect.height;var r2=this.x+this.width;var b2=this.y+this.height;return rect.x>=this.x&&rect.x<r2&&rect.y>=this.y&&rect.y<b2&&r1>this.x&&r1<=r2&&b1>this.y&&b1<=b2};
flash.geom.Rectangle.prototype.intersection=function(toIntersect){var result=new flash.geom.Rectangle;if(this.isEmpty()||toIntersect.isEmpty()){result.setEmpty();return result}result.x=Math.max(this.x,toIntersect.x);result.y=Math.max(this.y,toIntersect.y);result.width=Math.min(this.x+this.width,toIntersect.x+toIntersect.width)-result.x;result.height=Math.min(this.y+this.height,toIntersect.y+toIntersect.height)-result.y;if(result.width<=0||result.height<=0)result.setEmpty();return result};
flash.geom.Rectangle.prototype.intersects=function(toIntersect){if(this.isEmpty()||toIntersect.isEmpty())return false;var resultx=Math.max(this.x,toIntersect.x);var resulty=Math.max(this.y,toIntersect.y);var resultwidth=Math.min(this.x+this.width,toIntersect.x+toIntersect.width)-resultx;var resultheight=Math.min(this.y+this.height,toIntersect.y+toIntersect.height)-resulty;if(resultwidth<=0||resultheight<=0)return false;return true};
flash.geom.Rectangle.prototype.union=function(toUnion){var r=null;if(this.isEmpty())return toUnion.clone();if(toUnion.isEmpty())return this.clone();r=new flash.geom.Rectangle;r.x=Math.min(this.x,toUnion.x);r.y=Math.min(this.y,toUnion.y);r.width=Math.max(this.x+this.width,toUnion.x+toUnion.width)-r.x;r.height=Math.max(this.y+this.height,toUnion.y+toUnion.height)-r.y;return r};
flash.geom.Rectangle.prototype.equals=function(toCompare){return toCompare.x===this.x&&toCompare.y===this.y&&toCompare.width===this.width&&toCompare.height===this.height};flash.geom.Rectangle.prototype.toString=function(){return'(x\x3d'+this.x+', y\x3d'+this.y+', w\x3d'+this.width+', h\x3d'+this.height+')'};flash.geom.Rectangle.prototype.copyFrom=function(sourceRect){this.x=sourceRect.x;this.y=sourceRect.y;this.width=sourceRect.width;this.height=sourceRect.height};
flash.geom.Rectangle.prototype.setTo=function(xa,ya,widtha,heighta){this.x=xa;this.y=ya;this.width=widtha;this.height=heighta};
Object.defineProperties(flash.geom.Rectangle.prototype,{left:{get:function(){return this.x},set:function(value){this.width=this.width+(this.x-value);this.x=value}},right:{get:function(){return this.x+this.width},set:function(value){this.width=value-this.x}},top:{get:function(){return this.y},set:function(value){this.height=this.height+(this.y-value);this.y=value}},bottom:{get:function(){return this.y+this.height},set:function(value){this.height=value-this.y}},topLeft:{get:function(){return new flash.geom.Point(this.x,
this.y)},set:function(value){this.width=this.width+(this.x-value.x);this.height=this.height+(this.y-value.y);this.x=value.x;this.y=value.y}},bottomRight:{get:function(){return new flash.geom.Point(this.right,this.bottom)},set:function(value){this.width=value.x-this.x;this.height=value.y-this.y}},size:{get:function(){return new flash.geom.Point(this.width,this.height)},set:function(value){this.width=value.x;this.height=value.y}}});
flash.geom.Rectangle.prototype.FLEXJS_CLASS_INFO={names:[{name:'Rectangle',qName:'flash.geom.Rectangle'}]};goog.exportSymbol('flash.geom.Rectangle',flash.geom.Rectangle);
flash.geom.Rectangle.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'x':{type:'Number'},'y':{type:'Number'},'width':{type:'Number'},'height':{type:'Number'}}},accessors:function(){return{'left':{type:'Number',declaredBy:'flash.geom.Rectangle'},'right':{type:'Number',declaredBy:'flash.geom.Rectangle'},'top':{type:'Number',declaredBy:'flash.geom.Rectangle'},'bottom':{type:'Number',declaredBy:'flash.geom.Rectangle'},'topLeft':{type:'Point',declaredBy:'flash.geom.Rectangle'},
'bottomRight':{type:'Point',declaredBy:'flash.geom.Rectangle'},'size':{type:'Point',declaredBy:'flash.geom.Rectangle'}}},methods:function(){return{'Rectangle':{type:'',declaredBy:'flash.geom.Rectangle'},'clone':{type:'Rectangle',declaredBy:'flash.geom.Rectangle'},'isEmpty':{type:'Boolean',declaredBy:'flash.geom.Rectangle'},'setEmpty':{type:'void',declaredBy:'flash.geom.Rectangle'},'inflate':{type:'void',declaredBy:'flash.geom.Rectangle'},'inflatePoint':{type:'void',declaredBy:'flash.geom.Rectangle'},
'offset':{type:'void',declaredBy:'flash.geom.Rectangle'},'offsetPoint':{type:'void',declaredBy:'flash.geom.Rectangle'},'contains':{type:'Boolean',declaredBy:'flash.geom.Rectangle'},'containsPoint':{type:'Boolean',declaredBy:'flash.geom.Rectangle'},'containsRect':{type:'Boolean',declaredBy:'flash.geom.Rectangle'},'intersection':{type:'Rectangle',declaredBy:'flash.geom.Rectangle'},'intersects':{type:'Boolean',declaredBy:'flash.geom.Rectangle'},'union':{type:'Rectangle',declaredBy:'flash.geom.Rectangle'},
'equals':{type:'Boolean',declaredBy:'flash.geom.Rectangle'},'toString':{type:'String',declaredBy:'flash.geom.Rectangle'},'copyFrom':{type:'void',declaredBy:'flash.geom.Rectangle'},'setTo':{type:'void',declaredBy:'flash.geom.Rectangle'}}}}};goog.provide('flash.display.IBitmapDrawable');flash.display.IBitmapDrawable=function(){};flash.display.IBitmapDrawable.prototype.FLEXJS_CLASS_INFO={names:[{name:'IBitmapDrawable',qName:'flash.display.IBitmapDrawable'}]};flash.display.IBitmapDrawable.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('flash.display.BitmapData');goog.require('flash.geom.Rectangle');goog.require('flash.display.IBitmapDrawable');flash.display.BitmapData=function(width,height,transparent,fillColor){transparent=typeof transparent!=='undefined'?transparent:true;fillColor=typeof fillColor!=='undefined'?fillColor:4294967295;this.ctor(width,height,transparent,fillColor)};flash.display.BitmapData.prototype.data;flash.display.BitmapData.prototype.imageData;flash.display.BitmapData.prototype.image;
flash.display.BitmapData.prototype._lock=false;flash.display.BitmapData.prototype.ctx;flash.display.BitmapData.prototype._transparent;flash.display.BitmapData.prototype._width;flash.display.BitmapData.prototype._height;
flash.display.BitmapData.prototype.ctor=function(width,height,transparent,fillColor){transparent=typeof transparent!=='undefined'?transparent:true;fillColor=typeof fillColor!=='undefined'?fillColor:4294967295;this._transparent=transparent;this.image=org.apache.flex.utils.Language.as(document.createElement('canvas'),HTMLCanvasElement);this.image.width=this._width=width;this.image.height=this._height=height;this.ctx=org.apache.flex.utils.Language.as(this.image.getContext('2d'),CanvasRenderingContext2D);
this.imageData=this.ctx.getImageData(0,0,width,height);this.data=this.imageData.data;this.fillRect(this.rect,fillColor)};flash.display.BitmapData.prototype.fromImage=function(img,dx,dy,opt_dw,opt_dy){dx=typeof dx!=='undefined'?dx:0;dy=typeof dy!=='undefined'?dy:0;opt_dw=typeof opt_dw!=='undefined'?opt_dw:0;opt_dy=typeof opt_dy!=='undefined'?opt_dy:0;this.ctx.drawImage(img,dx,dy);this.imageData=this.ctx.getImageData(0,0,this.width,this.height);this.data=this.imageData.data};
flash.display.BitmapData.prototype.clone=function(){return null};flash.display.BitmapData.prototype.getPixel=function(x,y){var p=(y*this.width+x)*4;return this.data[p]<<16|this.data[p+1]<<8|this.data[p+2]};flash.display.BitmapData.prototype.getPixel32=function(x,y){var p=(y*this.width+x)*4;return this.data[p+3]<<24|this.data[p]<<16|this.data[p+1]<<8|this.data[p+2]};
flash.display.BitmapData.prototype.setPixel=function(x,y,color){var p=(y*this.width+x)*4;this.data[p]=color>>16&255;this.data[p+1]=color>>8&255;this.data[p+2]=color&255;if(!this._lock)this.ctx.putImageData(this.imageData,0,0)};flash.display.BitmapData.prototype.setPixel32=function(x,y,color){var p=(y*this.width+x)*4;this.data[p]=color>>16&255;this.data[p+1]=color>>8&255;this.data[p+2]=color&255;this.data[p+3]=color>>>24;if(!this._lock)this.ctx.putImageData(this.imageData,0,0)};
flash.display.BitmapData.prototype.colorTransform=function(rect,ct){};flash.display.BitmapData.prototype.compare=function(b){return null};flash.display.BitmapData.prototype.copyChannel=function(b,r,p,param4,param5){};
flash.display.BitmapData.prototype.copyPixels=function(sourceBitmapData,sourceRect,destPoint,alphaBitmapData,alphaPoint,mergeAlpha){alphaBitmapData=typeof alphaBitmapData!=='undefined'?alphaBitmapData:null;alphaPoint=typeof alphaPoint!=='undefined'?alphaPoint:null;mergeAlpha=typeof mergeAlpha!=='undefined'?mergeAlpha:false;this.lock();for(var x=0;x<sourceRect.width;x++)for(var y=0;y<sourceRect.height;y++)this.setPixel32(x+destPoint.x,y+destPoint.y,sourceBitmapData.getPixel32(x+sourceRect.x,y+sourceRect.y));
this.unlock()};flash.display.BitmapData.prototype.dispose=function(){};
flash.display.BitmapData.prototype.draw=function(source,matrix,colorTransform,blendMode,clipRect,smoothing){matrix=typeof matrix!=='undefined'?matrix:null;colorTransform=typeof colorTransform!=='undefined'?colorTransform:null;blendMode=typeof blendMode!=='undefined'?blendMode:null;clipRect=typeof clipRect!=='undefined'?clipRect:null;smoothing=typeof smoothing!=='undefined'?smoothing:false;this.drawWithQuality(source,matrix,colorTransform,blendMode,clipRect,smoothing)};
flash.display.BitmapData.prototype.drawWithQuality=function(source,matrix,colorTransform,blendMode,clipRect,smoothing,quality){matrix=typeof matrix!=='undefined'?matrix:null;colorTransform=typeof colorTransform!=='undefined'?colorTransform:null;blendMode=typeof blendMode!=='undefined'?blendMode:null;clipRect=typeof clipRect!=='undefined'?clipRect:null;smoothing=typeof smoothing!=='undefined'?smoothing:false;quality=typeof quality!=='undefined'?quality:null;if(org.apache.flex.utils.Language.is(source,
flash.display.BitmapData)){var bmd=org.apache.flex.utils.Language.as(source,flash.display.BitmapData);this.fromImage(bmd.ctx)}};flash.display.BitmapData.prototype.fillRect=function(rect,fillColor){this.lock();for(var y=0;y<this.width;++y)for(var x=0;x<this.height;++x)this.setPixel32(x,y,this.transparent?fillColor:4278190080|fillColor);this.unlock()};flash.display.BitmapData.prototype.floodFill=function(param1,param2,param3){};
flash.display.BitmapData.prototype.getColorBoundsRect=function(param1,param2,param3){param3=typeof param3!=='undefined'?param3:true;return null};flash.display.BitmapData.prototype.getPixels=function(param1){return null};flash.display.BitmapData.prototype.copyPixelsToByteArray=function(param1,param2){};flash.display.BitmapData.prototype.getVector=function(param1){return null};
flash.display.BitmapData.prototype.hitTest=function(param1,param2,param3,param4,param5){param4=typeof param4!=='undefined'?param4:null;param5=typeof param5!=='undefined'?param5:1;return false};flash.display.BitmapData.prototype.merge=function(param1,param2,param3,param4,param5,param6,param7){};
flash.display.BitmapData.prototype.noise=function(randomSeed,low,high,channelOptions,grayScale){low=typeof low!=='undefined'?low:0;high=typeof high!=='undefined'?high:255;channelOptions=typeof channelOptions!=='undefined'?channelOptions:7;grayScale=typeof grayScale!=='undefined'?grayScale:false;this.lock();for(var y=0;y<this.width;++y)for(var x=0;x<this.height;++x)this.setPixel32(x,y,4278190080|16777215*Math.random());this.unlock()};
flash.display.BitmapData.prototype.paletteMap=function(param1,param2,param3,param4,param5,param6,param7){param4=typeof param4!=='undefined'?param4:null;param5=typeof param5!=='undefined'?param5:null;param6=typeof param6!=='undefined'?param6:null;param7=typeof param7!=='undefined'?param7:null};
flash.display.BitmapData.prototype.perlinNoise=function(baseX,baseY,numOctaves,randomSeed,stitch,fractalNoise,channelOptions,grayScale,offsets){channelOptions=typeof channelOptions!=='undefined'?channelOptions:7;grayScale=typeof grayScale!=='undefined'?grayScale:false;offsets=typeof offsets!=='undefined'?offsets:null;this.noise(0)};
flash.display.BitmapData.prototype.pixelDissolve=function(param1,param2,param3,param4,param5,param6){param4=typeof param4!=='undefined'?param4:0;param5=typeof param5!=='undefined'?param5:0;param6=typeof param6!=='undefined'?param6:0;return 0};flash.display.BitmapData.prototype.scroll=function(param1,param2){};flash.display.BitmapData.prototype.setPixels=function(param1,param2){};flash.display.BitmapData.prototype.setVector=function(param1,param2){};
flash.display.BitmapData.prototype.threshold=function(param1,param2,param3,param4,param5,param6,param7,param8){param6=typeof param6!=='undefined'?param6:0;param7=typeof param7!=='undefined'?param7:4294967295;param8=typeof param8!=='undefined'?param8:false;return 0};flash.display.BitmapData.prototype.lock=function(){this._lock=true};flash.display.BitmapData.prototype.unlock=function(param1){param1=typeof param1!=='undefined'?param1:null;this._lock=false;this.ctx.putImageData(this.imageData,0,0)};
flash.display.BitmapData.prototype.histogram=function(param1){param1=typeof param1!=='undefined'?param1:null;return null};flash.display.BitmapData.prototype.encode=function(param1,param2,param3){param3=typeof param3!=='undefined'?param3:null;return null};
Object.defineProperties(flash.display.BitmapData.prototype,{width:{get:function(){return this._width}},height:{get:function(){return this._height}},transparent:{get:function(){return this._transparent}},rect:{get:function(){return new flash.geom.Rectangle(0,0,this.width,this.height)}}});flash.display.BitmapData.prototype.FLEXJS_CLASS_INFO={names:[{name:'BitmapData',qName:'flash.display.BitmapData'}],interfaces:[flash.display.IBitmapDrawable]};goog.exportSymbol('flash.display.BitmapData',flash.display.BitmapData);
flash.display.BitmapData.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'image':{type:'HTMLCanvasElement'},'ctx':{type:'CanvasRenderingContext2D'}}},accessors:function(){return{'width':{type:'int',declaredBy:'flash.display.BitmapData'},'height':{type:'int',declaredBy:'flash.display.BitmapData'},'transparent':{type:'Boolean',declaredBy:'flash.display.BitmapData'},'rect':{type:'Rectangle',declaredBy:'flash.display.BitmapData'}}},methods:function(){return{'BitmapData':{type:'',
declaredBy:'flash.display.BitmapData'},'fromImage':{type:'void',declaredBy:'flash.display.BitmapData'},'clone':{type:'BitmapData',declaredBy:'flash.display.BitmapData'},'getPixel':{type:'uint',declaredBy:'flash.display.BitmapData'},'getPixel32':{type:'uint',declaredBy:'flash.display.BitmapData'},'setPixel':{type:'void',declaredBy:'flash.display.BitmapData'},'setPixel32':{type:'void',declaredBy:'flash.display.BitmapData'},'colorTransform':{type:'void',declaredBy:'flash.display.BitmapData'},'compare':{type:'Object',
declaredBy:'flash.display.BitmapData'},'copyChannel':{type:'void',declaredBy:'flash.display.BitmapData'},'copyPixels':{type:'void',declaredBy:'flash.display.BitmapData'},'dispose':{type:'void',declaredBy:'flash.display.BitmapData'},'draw':{type:'void',declaredBy:'flash.display.BitmapData'},'drawWithQuality':{type:'void',declaredBy:'flash.display.BitmapData'},'fillRect':{type:'void',declaredBy:'flash.display.BitmapData'},'floodFill':{type:'void',declaredBy:'flash.display.BitmapData'},'getColorBoundsRect':{type:'Rectangle',
declaredBy:'flash.display.BitmapData'},'getPixels':{type:'ByteArray',declaredBy:'flash.display.BitmapData'},'copyPixelsToByteArray':{type:'void',declaredBy:'flash.display.BitmapData'},'getVector':{type:'Vector.\x3cuint\x3e',declaredBy:'flash.display.BitmapData'},'hitTest':{type:'Boolean',declaredBy:'flash.display.BitmapData'},'merge':{type:'void',declaredBy:'flash.display.BitmapData'},'noise':{type:'void',declaredBy:'flash.display.BitmapData'},'paletteMap':{type:'void',declaredBy:'flash.display.BitmapData'},
'perlinNoise':{type:'void',declaredBy:'flash.display.BitmapData'},'pixelDissolve':{type:'int',declaredBy:'flash.display.BitmapData'},'scroll':{type:'void',declaredBy:'flash.display.BitmapData'},'setPixels':{type:'void',declaredBy:'flash.display.BitmapData'},'setVector':{type:'void',declaredBy:'flash.display.BitmapData'},'threshold':{type:'uint',declaredBy:'flash.display.BitmapData'},'lock':{type:'void',declaredBy:'flash.display.BitmapData'},'unlock':{type:'void',declaredBy:'flash.display.BitmapData'},
'histogram':{type:'Vector.\x3cVector.\x3cNumber\x3e\x3e',declaredBy:'flash.display.BitmapData'},'encode':{type:'ByteArray',declaredBy:'flash.display.BitmapData'}}}}};goog.provide('flash.display3D.Context3DBlendFactor');flash.display3D.Context3DBlendFactor=function(){};flash.display3D.Context3DBlendFactor.ONE='one';flash.display3D.Context3DBlendFactor.ZERO='zero';flash.display3D.Context3DBlendFactor.SOURCE_ALPHA='sourceAlpha';flash.display3D.Context3DBlendFactor.SOURCE_COLOR='sourceColor';flash.display3D.Context3DBlendFactor.ONE_MINUS_SOURCE_ALPHA='oneMinusSourceAlpha';flash.display3D.Context3DBlendFactor.ONE_MINUS_SOURCE_COLOR='oneMinusSourceColor';
flash.display3D.Context3DBlendFactor.DESTINATION_ALPHA='destinationAlpha';flash.display3D.Context3DBlendFactor.DESTINATION_COLOR='destinationColor';flash.display3D.Context3DBlendFactor.ONE_MINUS_DESTINATION_ALPHA='oneMinusDestinationAlpha';flash.display3D.Context3DBlendFactor.ONE_MINUS_DESTINATION_COLOR='oneMinusDestinationColor';
flash.display3D.Context3DBlendFactor.getGLVal=function(gl,str){switch(str){case flash.display3D.Context3DBlendFactor.ONE:return gl.ONE;case flash.display3D.Context3DBlendFactor.ZERO:return gl.ZERO;case flash.display3D.Context3DBlendFactor.SOURCE_ALPHA:return gl.SRC_ALPHA;case flash.display3D.Context3DBlendFactor.SOURCE_COLOR:return gl.SRC_COLOR;case flash.display3D.Context3DBlendFactor.ONE_MINUS_SOURCE_ALPHA:return gl.ONE_MINUS_SRC_ALPHA;case flash.display3D.Context3DBlendFactor.ONE_MINUS_SOURCE_COLOR:return gl.ONE_MINUS_SRC_COLOR;
case flash.display3D.Context3DBlendFactor.DESTINATION_ALPHA:return gl.DST_ALPHA;case flash.display3D.Context3DBlendFactor.DESTINATION_COLOR:return gl.DST_COLOR;case flash.display3D.Context3DBlendFactor.ONE_MINUS_DESTINATION_ALPHA:return gl.ONE_MINUS_DST_ALPHA;case flash.display3D.Context3DBlendFactor.ONE_MINUS_DESTINATION_COLOR:return gl.ONE_MINUS_DST_COLOR}return 0};flash.display3D.Context3DBlendFactor.prototype.FLEXJS_CLASS_INFO={names:[{name:'Context3DBlendFactor',qName:'flash.display3D.Context3DBlendFactor'}]};
goog.exportSymbol('flash.display3D.Context3DBlendFactor',flash.display3D.Context3DBlendFactor);flash.display3D.Context3DBlendFactor.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Context3DBlendFactor':{type:'',declaredBy:'flash.display3D.Context3DBlendFactor'}}}}};goog.provide('flash.display3D.Context3DCompareMode');flash.display3D.Context3DCompareMode=function(){};flash.display3D.Context3DCompareMode.ALWAYS='always';flash.display3D.Context3DCompareMode.NEVER='never';flash.display3D.Context3DCompareMode.LESS='less';flash.display3D.Context3DCompareMode.LESS_EQUAL='lessEqual';flash.display3D.Context3DCompareMode.EQUAL='equal';flash.display3D.Context3DCompareMode.GREATER_EQUAL='greaterEqual';flash.display3D.Context3DCompareMode.GREATER='greater';
flash.display3D.Context3DCompareMode.NOT_EQUAL='notEqual';
flash.display3D.Context3DCompareMode.getGLVal=function(gl,str){switch(str){case flash.display3D.Context3DCompareMode.ALWAYS:return gl.ALWAYS;case flash.display3D.Context3DCompareMode.NEVER:return gl.NEAREST;case flash.display3D.Context3DCompareMode.LESS:return gl.LESS;case flash.display3D.Context3DCompareMode.LESS_EQUAL:return gl.LESS|gl.EQUAL;case flash.display3D.Context3DCompareMode.EQUAL:return gl.EQUAL;case flash.display3D.Context3DCompareMode.GREATER_EQUAL:return gl.GREATER|gl.EQUAL;case flash.display3D.Context3DCompareMode.GREATER:return gl.GREATER;
case flash.display3D.Context3DCompareMode.NOT_EQUAL:return gl.NOTEQUAL}return 0};flash.display3D.Context3DCompareMode.prototype.FLEXJS_CLASS_INFO={names:[{name:'Context3DCompareMode',qName:'flash.display3D.Context3DCompareMode'}]};goog.exportSymbol('flash.display3D.Context3DCompareMode',flash.display3D.Context3DCompareMode);
flash.display3D.Context3DCompareMode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Context3DCompareMode':{type:'',declaredBy:'flash.display3D.Context3DCompareMode'}}}}};goog.provide('flash.display3D.Context3DProgramType');flash.display3D.Context3DProgramType=function(){};flash.display3D.Context3DProgramType.VERTEX='vertex';flash.display3D.Context3DProgramType.FRAGMENT='fragment';flash.display3D.Context3DProgramType.prototype.FLEXJS_CLASS_INFO={names:[{name:'Context3DProgramType',qName:'flash.display3D.Context3DProgramType'}]};goog.exportSymbol('flash.display3D.Context3DProgramType',flash.display3D.Context3DProgramType);
flash.display3D.Context3DProgramType.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Context3DProgramType':{type:'',declaredBy:'flash.display3D.Context3DProgramType'}}}}};goog.provide('flash.display3D.Context3DTriangleFace');flash.display3D.Context3DTriangleFace=function(){};flash.display3D.Context3DTriangleFace.NONE='none';flash.display3D.Context3DTriangleFace.BACK='back';flash.display3D.Context3DTriangleFace.FRONT='front';flash.display3D.Context3DTriangleFace.FRONT_AND_BACK='frontAndBack';
flash.display3D.Context3DTriangleFace.getGLVal=function(gl,str){switch(str){case flash.display3D.Context3DTriangleFace.NONE:return gl.NONE;case flash.display3D.Context3DTriangleFace.BACK:return gl.FRONT;case flash.display3D.Context3DTriangleFace.FRONT:return gl.BACK;case flash.display3D.Context3DTriangleFace.FRONT_AND_BACK:return gl.FRONT_AND_BACK}return 0};flash.display3D.Context3DTriangleFace.prototype.FLEXJS_CLASS_INFO={names:[{name:'Context3DTriangleFace',qName:'flash.display3D.Context3DTriangleFace'}]};
goog.exportSymbol('flash.display3D.Context3DTriangleFace',flash.display3D.Context3DTriangleFace);flash.display3D.Context3DTriangleFace.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Context3DTriangleFace':{type:'',declaredBy:'flash.display3D.Context3DTriangleFace'}}}}};goog.provide('flash.display3D.Context3DVertexBufferFormat');flash.display3D.Context3DVertexBufferFormat=function(){};flash.display3D.Context3DVertexBufferFormat.FLOAT_1='float1';flash.display3D.Context3DVertexBufferFormat.FLOAT_2='float2';flash.display3D.Context3DVertexBufferFormat.FLOAT_3='float3';flash.display3D.Context3DVertexBufferFormat.FLOAT_4='float4';flash.display3D.Context3DVertexBufferFormat.BYTES_4='bytes4';
flash.display3D.Context3DVertexBufferFormat.prototype.FLEXJS_CLASS_INFO={names:[{name:'Context3DVertexBufferFormat',qName:'flash.display3D.Context3DVertexBufferFormat'}]};goog.exportSymbol('flash.display3D.Context3DVertexBufferFormat',flash.display3D.Context3DVertexBufferFormat);
flash.display3D.Context3DVertexBufferFormat.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Context3DVertexBufferFormat':{type:'',declaredBy:'flash.display3D.Context3DVertexBufferFormat'}}}}};goog.provide('flash.display3D.IndexBuffer3D');flash.display3D.IndexBuffer3D=function(){};flash.display3D.IndexBuffer3D.prototype.count;flash.display3D.IndexBuffer3D.prototype.buff;flash.display3D.IndexBuffer3D.prototype.gl;flash.display3D.IndexBuffer3D.prototype.uploadFromVector=function(data,startOffset,count){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.buff);this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(data),this.gl.STATIC_DRAW)};
flash.display3D.IndexBuffer3D.prototype.uploadFromByteArray=function(data,byteArrayOffset,startOffset,count){};flash.display3D.IndexBuffer3D.prototype.dispose=function(){};flash.display3D.IndexBuffer3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'IndexBuffer3D',qName:'flash.display3D.IndexBuffer3D'}]};goog.exportSymbol('flash.display3D.IndexBuffer3D',flash.display3D.IndexBuffer3D);
flash.display3D.IndexBuffer3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'count':{type:'int'},'buff':{type:'WebGLBuffer'},'gl':{type:'WebGLRenderingContext'}}},accessors:function(){return{}},methods:function(){return{'IndexBuffer3D':{type:'',declaredBy:'flash.display3D.IndexBuffer3D'},'uploadFromVector':{type:'void',declaredBy:'flash.display3D.IndexBuffer3D'},'uploadFromByteArray':{type:'void',declaredBy:'flash.display3D.IndexBuffer3D'},'dispose':{type:'void',declaredBy:'flash.display3D.IndexBuffer3D'}}}}};goog.provide('flash.display3D.Program3D');flash.display3D.Program3D=function(){this.uniformLocations={};this.attribLocations={}};flash.display3D.Program3D.prototype.fshader;flash.display3D.Program3D.prototype.vshader;flash.display3D.Program3D.prototype.program;flash.display3D.Program3D.prototype.gl;flash.display3D.Program3D.prototype.uniformLocations;flash.display3D.Program3D.prototype.attribLocations;
flash.display3D.Program3D.prototype.upload=function(vcode,fcode){this.fshader=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.vshader=this.gl.createShader(this.gl.VERTEX_SHADER);vcode.position=fcode.position=0;this.gl.shaderSource(this.vshader,vcode.readUTFBytes(vcode.length));this.gl.compileShader(this.vshader);if(!this.gl.getShaderParameter(this.vshader,this.gl.COMPILE_STATUS))throw this.vshader+'\n'+vcode+'\n'+this.gl.getShaderInfoLog(this.vshader);this.gl.shaderSource(this.fshader,fcode.readUTFBytes(fcode.length));
this.gl.compileShader(this.fshader);if(!this.gl.getShaderParameter(this.fshader,this.gl.COMPILE_STATUS))throw fcode+'\n'+this.gl.getShaderInfoLog(this.fshader);this.gl.attachShader(this.program,this.vshader);this.gl.attachShader(this.program,this.fshader);this.gl.linkProgram(this.program);if(!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw this.gl.getProgramInfoLog(this.program);};
flash.display3D.Program3D.prototype.dispose=function(){this.gl.deleteShader(this.fshader);this.gl.deleteShader(this.vshader);this.gl.deleteProgram(this.program)};flash.display3D.Program3D.prototype.getUniformLocation=function(name){var loc=this.uniformLocations[name];if(loc==null)loc=this.uniformLocations[name]=this.gl.getUniformLocation(this.program,name);return loc};
flash.display3D.Program3D.prototype.getAttribLocation=function(name){var loc=this.attribLocations[name];if(loc==null)loc=this.attribLocations[name]=this.gl.getAttribLocation(this.program,name);var locnum=Number(loc);this.gl.enableVertexAttribArray(locnum);return locnum};flash.display3D.Program3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Program3D',qName:'flash.display3D.Program3D'}]};goog.exportSymbol('flash.display3D.Program3D',flash.display3D.Program3D);
flash.display3D.Program3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'fshader':{type:'WebGLShader'},'vshader':{type:'WebGLShader'},'program':{type:'WebGLProgram'},'gl':{type:'WebGLRenderingContext'}}},accessors:function(){return{}},methods:function(){return{'Program3D':{type:'',declaredBy:'flash.display3D.Program3D'},'upload':{type:'void',declaredBy:'flash.display3D.Program3D'},'dispose':{type:'void',declaredBy:'flash.display3D.Program3D'},'getUniformLocation':{type:'WebGLUniformLocation',
declaredBy:'flash.display3D.Program3D'},'getAttribLocation':{type:'Number',declaredBy:'flash.display3D.Program3D'}}}}};goog.provide('flash.display3D.VertexBuffer3D');flash.display3D.VertexBuffer3D=function(){};flash.display3D.VertexBuffer3D.prototype.buff;flash.display3D.VertexBuffer3D.prototype.gl;flash.display3D.VertexBuffer3D.prototype.uploadFromVector=function(data,startVertex,numVertices){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buff);this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(data),this.gl.STATIC_DRAW)};
flash.display3D.VertexBuffer3D.prototype.uploadFromByteArray=function(data,byteArrayOffset,startVertex,numVertices){};flash.display3D.VertexBuffer3D.prototype.dispose=function(){};flash.display3D.VertexBuffer3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'VertexBuffer3D',qName:'flash.display3D.VertexBuffer3D'}]};goog.exportSymbol('flash.display3D.VertexBuffer3D',flash.display3D.VertexBuffer3D);
flash.display3D.VertexBuffer3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'buff':{type:'WebGLBuffer'},'gl':{type:'WebGLRenderingContext'}}},accessors:function(){return{}},methods:function(){return{'VertexBuffer3D':{type:'',declaredBy:'flash.display3D.VertexBuffer3D'},'uploadFromVector':{type:'void',declaredBy:'flash.display3D.VertexBuffer3D'},'uploadFromByteArray':{type:'void',declaredBy:'flash.display3D.VertexBuffer3D'},'dispose':{type:'void',declaredBy:'flash.display3D.VertexBuffer3D'}}}}};goog.provide('flash.events.IEventDispatcher');flash.events.IEventDispatcher=function(){};flash.events.IEventDispatcher.prototype.addEventListener=function(type,listener,useCapture,priority,useWeakReference){};flash.events.IEventDispatcher.prototype.dispatchEvent=function(event){};flash.events.IEventDispatcher.prototype.hasEventListener=function(type){};flash.events.IEventDispatcher.prototype.removeEventListener=function(type,listener,useCapture){};
flash.events.IEventDispatcher.prototype.willTrigger=function(type){};flash.events.IEventDispatcher.prototype.FLEXJS_CLASS_INFO={names:[{name:'IEventDispatcher',qName:'flash.events.IEventDispatcher'}]};
flash.events.IEventDispatcher.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'addEventListener':{type:'void',declaredBy:'flash.events.IEventDispatcher'},'dispatchEvent':{type:'Boolean',declaredBy:'flash.events.IEventDispatcher'},'hasEventListener':{type:'Boolean',declaredBy:'flash.events.IEventDispatcher'},'removeEventListener':{type:'void',declaredBy:'flash.events.IEventDispatcher'},'willTrigger':{type:'Boolean',
declaredBy:'flash.events.IEventDispatcher'}}}}};goog.provide('flash.events.EventDispatcher');goog.require('flash.events.IEventDispatcher');flash.events.EventDispatcher=function(target){target=typeof target!=='undefined'?target:null;this.listeners={};this.ctor(target)};flash.events.EventDispatcher.prototype.listeners;
flash.events.EventDispatcher.trimHeaderValue=function(headerValue){var currChar=null;var indexOfFirstValueChar=0;var headerValueLen=headerValue.length;var done=false;while(indexOfFirstValueChar<headerValueLen&&!done){currChar=headerValue.charAt(indexOfFirstValueChar);done=currChar!=' '&&currChar!='\t';if(!done)indexOfFirstValueChar++}var indexOfLastValueChar=headerValueLen;done=false;while(indexOfLastValueChar>indexOfFirstValueChar&&!done){currChar=headerValue.charAt(indexOfLastValueChar-1);done=
currChar!=' '&&currChar!='\t';if(!done)indexOfLastValueChar--}return headerValue.substring(indexOfFirstValueChar,indexOfLastValueChar)};flash.events.EventDispatcher.prototype.ctor=function(param1){};
flash.events.EventDispatcher.prototype.addEventListener=function(type,listener,useCapture,priority,useWeakReference){useCapture=typeof useCapture!=='undefined'?useCapture:false;priority=typeof priority!=='undefined'?priority:0;useWeakReference=typeof useWeakReference!=='undefined'?useWeakReference:false;var funcs=this.listeners[type]=this.listeners[type]||[];var i=funcs.indexOf(listener);if(i!=-1)funcs.splice(i,1);funcs.push(listener)};
flash.events.EventDispatcher.prototype.removeEventListener=function(type,listener,useCapture){useCapture=typeof useCapture!=='undefined'?useCapture:false;var funcs=this.listeners[type];if(funcs){var i=funcs.indexOf(listener);if(i!=-1)funcs.splice(i,1);if(funcs.length===0){this.listeners[type]=null;delete this.listeners[type]}}};flash.events.EventDispatcher.prototype.dispatchEvent=function(event){if(event.target)return this.dispatchEventFunction(event.clone());return this.dispatchEventFunction(event)};
flash.events.EventDispatcher.prototype.hasEventListener=function(type){return this.listeners[type]!=null};flash.events.EventDispatcher.prototype.willTrigger=function(param1){return false};flash.events.EventDispatcher.prototype.dispatchEventFunction=function(event){event.target=this;event.currentTarget=this;var funcs=this.listeners[event.type];if(funcs){var len=funcs.length;for(var i=0;i<len;i++){var func=funcs[i];func(event)}}return false};
flash.events.EventDispatcher.prototype.FLEXJS_CLASS_INFO={names:[{name:'EventDispatcher',qName:'flash.events.EventDispatcher'}],interfaces:[flash.events.IEventDispatcher]};goog.exportSymbol('flash.events.EventDispatcher',flash.events.EventDispatcher);
flash.events.EventDispatcher.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'EventDispatcher':{type:'',declaredBy:'flash.events.EventDispatcher'},'addEventListener':{type:'void',declaredBy:'flash.events.EventDispatcher'},'removeEventListener':{type:'void',declaredBy:'flash.events.EventDispatcher'},'dispatchEvent':{type:'Boolean',declaredBy:'flash.events.EventDispatcher'},'hasEventListener':{type:'Boolean',
declaredBy:'flash.events.EventDispatcher'},'willTrigger':{type:'Boolean',declaredBy:'flash.events.EventDispatcher'}}},metadata:function(){return[]}}};goog.provide('flash.display3D.textures.TextureBase');goog.require('flash.events.EventDispatcher');flash.display3D.textures.TextureBase=function(){flash.display3D.textures.TextureBase.base(this,'constructor')};goog.inherits(flash.display3D.textures.TextureBase,flash.events.EventDispatcher);flash.display3D.textures.TextureBase.prototype.dispose=function(){};flash.display3D.textures.TextureBase.prototype.FLEXJS_CLASS_INFO={names:[{name:'TextureBase',qName:'flash.display3D.textures.TextureBase'}]};
goog.exportSymbol('flash.display3D.textures.TextureBase',flash.display3D.textures.TextureBase);flash.display3D.textures.TextureBase.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'TextureBase':{type:'',declaredBy:'flash.display3D.textures.TextureBase'},'dispose':{type:'void',declaredBy:'flash.display3D.textures.TextureBase'}}},metadata:function(){return[]}}};goog.provide('flash.display3D.textures.CubeTexture');goog.require('flash.display3D.textures.TextureBase');flash.display3D.textures.CubeTexture=function(){flash.display3D.textures.CubeTexture.base(this,'constructor')};goog.inherits(flash.display3D.textures.CubeTexture,flash.display3D.textures.TextureBase);flash.display3D.textures.CubeTexture.prototype.uploadFromBitmapData=function(param1,param2,param3){param3=typeof param3!=='undefined'?param3:0};
flash.display3D.textures.CubeTexture.prototype.uploadFromByteArray=function(param1,param2,param3,param4){param4=typeof param4!=='undefined'?param4:0};flash.display3D.textures.CubeTexture.prototype.uploadCompressedTextureFromByteArray=function(param1,param2,param3){param3=typeof param3!=='undefined'?param3:false};flash.display3D.textures.CubeTexture.prototype.FLEXJS_CLASS_INFO={names:[{name:'CubeTexture',qName:'flash.display3D.textures.CubeTexture'}]};
goog.exportSymbol('flash.display3D.textures.CubeTexture',flash.display3D.textures.CubeTexture);
flash.display3D.textures.CubeTexture.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'CubeTexture':{type:'',declaredBy:'flash.display3D.textures.CubeTexture'},'uploadFromBitmapData':{type:'void',declaredBy:'flash.display3D.textures.CubeTexture'},'uploadFromByteArray':{type:'void',declaredBy:'flash.display3D.textures.CubeTexture'},'uploadCompressedTextureFromByteArray':{type:'void',declaredBy:'flash.display3D.textures.CubeTexture'}}},
metadata:function(){return[]}}};goog.provide('flash.display3D.textures.RectangleTexture');goog.require('flash.display3D.textures.TextureBase');flash.display3D.textures.RectangleTexture=function(){flash.display3D.textures.RectangleTexture.base(this,'constructor')};goog.inherits(flash.display3D.textures.RectangleTexture,flash.display3D.textures.TextureBase);flash.display3D.textures.RectangleTexture.prototype.uploadFromBitmapData=function(param1){};
flash.display3D.textures.RectangleTexture.prototype.uploadFromByteArray=function(param1,param2){};flash.display3D.textures.RectangleTexture.prototype.FLEXJS_CLASS_INFO={names:[{name:'RectangleTexture',qName:'flash.display3D.textures.RectangleTexture'}]};goog.exportSymbol('flash.display3D.textures.RectangleTexture',flash.display3D.textures.RectangleTexture);
flash.display3D.textures.RectangleTexture.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'RectangleTexture':{type:'',declaredBy:'flash.display3D.textures.RectangleTexture'},'uploadFromBitmapData':{type:'void',declaredBy:'flash.display3D.textures.RectangleTexture'},'uploadFromByteArray':{type:'void',declaredBy:'flash.display3D.textures.RectangleTexture'}}},metadata:function(){return[]}}};goog.provide('flash.display3D.textures.Texture');goog.require('flash.display3D.textures.TextureBase');flash.display3D.textures.Texture=function(){flash.display3D.textures.Texture.base(this,'constructor')};goog.inherits(flash.display3D.textures.Texture,flash.display3D.textures.TextureBase);flash.display3D.textures.Texture.prototype.gl;flash.display3D.textures.Texture.prototype.texture;flash.display3D.textures.Texture.prototype.repeat=true;
flash.display3D.textures.Texture.prototype.uploadFromBitmapData=function(bitmapData,maplevel){maplevel=typeof maplevel!=='undefined'?maplevel:0;this.uploadFromImg(bitmapData.image,maplevel)};
flash.display3D.textures.Texture.prototype.uploadFromImg=function(img,maplevel){maplevel=typeof maplevel!=='undefined'?maplevel:0;this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture);this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,img);if(this.repeat){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT)}else{this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,
this.gl.CLAMP_TO_EDGE);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)}if(maplevel>0){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_NEAREST);this.gl.generateMipmap(this.gl.TEXTURE_2D)}else{this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,
this.gl.NEAREST)}this.gl.bindTexture(this.gl.TEXTURE_2D,null)};flash.display3D.textures.Texture.prototype.uploadFromByteArray=function(param1,param2,param3){param3=typeof param3!=='undefined'?param3:0};flash.display3D.textures.Texture.prototype.uploadCompressedTextureFromByteArray=function(param1,param2,param3){param3=typeof param3!=='undefined'?param3:false};flash.display3D.textures.Texture.prototype.FLEXJS_CLASS_INFO={names:[{name:'Texture',qName:'flash.display3D.textures.Texture'}]};
goog.exportSymbol('flash.display3D.textures.Texture',flash.display3D.textures.Texture);
flash.display3D.textures.Texture.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'gl':{type:'WebGLRenderingContext'},'texture':{type:'WebGLTexture'},'repeat':{type:'Boolean'}}},accessors:function(){return{}},methods:function(){return{'Texture':{type:'',declaredBy:'flash.display3D.textures.Texture'},'uploadFromBitmapData':{type:'void',declaredBy:'flash.display3D.textures.Texture'},'uploadFromImg':{type:'void',declaredBy:'flash.display3D.textures.Texture'},'uploadFromByteArray':{type:'void',
declaredBy:'flash.display3D.textures.Texture'},'uploadCompressedTextureFromByteArray':{type:'void',declaredBy:'flash.display3D.textures.Texture'}}}}};goog.provide('flash.display3D.textures.VideoTexture');goog.require('flash.display3D.textures.TextureBase');flash.display3D.textures.VideoTexture=function(){flash.display3D.textures.VideoTexture.base(this,'constructor')};goog.inherits(flash.display3D.textures.VideoTexture,flash.display3D.textures.TextureBase);flash.display3D.textures.VideoTexture.prototype.attachCamera=function(param1){};
Object.defineProperties(flash.display3D.textures.VideoTexture.prototype,{videoWidth:{get:function(){return 0}},videoHeight:{get:function(){return 0}}});flash.display3D.textures.VideoTexture.prototype.FLEXJS_CLASS_INFO={names:[{name:'VideoTexture',qName:'flash.display3D.textures.VideoTexture'}]};goog.exportSymbol('flash.display3D.textures.VideoTexture',flash.display3D.textures.VideoTexture);
flash.display3D.textures.VideoTexture.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'videoWidth':{type:'int',declaredBy:'flash.display3D.textures.VideoTexture'},'videoHeight':{type:'int',declaredBy:'flash.display3D.textures.VideoTexture'}}},methods:function(){return{'VideoTexture':{type:'',declaredBy:'flash.display3D.textures.VideoTexture'},'attachCamera':{type:'void',declaredBy:'flash.display3D.textures.VideoTexture'}}}}};goog.provide('flash.display3D.Context3D');goog.require('flash.display3D.Context3DBlendFactor');goog.require('flash.display3D.Context3DCompareMode');goog.require('flash.display3D.Context3DProgramType');goog.require('flash.display3D.Context3DTriangleFace');goog.require('flash.display3D.Context3DVertexBufferFormat');goog.require('flash.display3D.IndexBuffer3D');goog.require('flash.display3D.Program3D');goog.require('flash.display3D.VertexBuffer3D');goog.require('flash.display3D.textures.CubeTexture');
goog.require('flash.display3D.textures.RectangleTexture');goog.require('flash.display3D.textures.Texture');goog.require('flash.display3D.textures.VideoTexture');goog.require('flash.events.EventDispatcher');flash.display3D.Context3D=function(){this.currentTextures={};this.currentVBufs={};flash.display3D.Context3D.base(this,'constructor')};goog.inherits(flash.display3D.Context3D,flash.events.EventDispatcher);flash.display3D.Context3D.prototype.canvas;flash.display3D.Context3D.prototype.gl;flash.display3D.Context3D.prototype.currentProgram;
flash.display3D.Context3D.prototype.currentTextures;flash.display3D.Context3D.prototype.currentVBufs;flash.display3D.Context3D.prototype.dispose=function(recreate){recreate=typeof recreate!=='undefined'?recreate:true};
flash.display3D.Context3D.prototype.configureBackBuffer=function(width,height,antiAlias,enableDepthAndStencil,wantsBestResolution){enableDepthAndStencil=typeof enableDepthAndStencil!=='undefined'?enableDepthAndStencil:true;wantsBestResolution=typeof wantsBestResolution!=='undefined'?wantsBestResolution:false;this.canvas.width=width;this.canvas.height=height;this.canvas.style.width=width+'px';this.canvas.style.height=height+'px';this.gl.viewport(0,0,width,height);if(enableDepthAndStencil){this.gl.enable(this.gl.DEPTH_TEST);
this.gl.enable(this.gl.STENCIL_TEST)}else{this.gl.disable(this.gl.DEPTH_TEST);this.gl.disable(this.gl.STENCIL_TEST)}};
flash.display3D.Context3D.prototype.clear=function(red,green,blue,alpha,depth,stencil,mask){red=typeof red!=='undefined'?red:0;green=typeof green!=='undefined'?green:0;blue=typeof blue!=='undefined'?blue:0;alpha=typeof alpha!=='undefined'?alpha:1;depth=typeof depth!=='undefined'?depth:1;stencil=typeof stencil!=='undefined'?stencil:0;mask=typeof mask!=='undefined'?mask:4294967295;this.gl.clearColor(red,green,blue,alpha);this.gl.clearDepth(depth);this.gl.clearStencil(stencil);this.gl.clear(this.gl.COLOR_BUFFER_BIT|
this.gl.DEPTH_BUFFER_BIT)};flash.display3D.Context3D.prototype.drawTriangles=function(indexBuffer,firstIndex,numTriangles){firstIndex=typeof firstIndex!=='undefined'?firstIndex:0;numTriangles=typeof numTriangles!=='undefined'?numTriangles:-1;this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,indexBuffer.buff);this.gl.drawElements(this.gl.TRIANGLES,numTriangles<0?indexBuffer.count:numTriangles*3,this.gl.UNSIGNED_SHORT,firstIndex*2)};flash.display3D.Context3D.prototype.present=function(){};
flash.display3D.Context3D.prototype.setProgram=function(program){if(this.currentProgram!=program){this.currentProgram=program;this.gl.useProgram(program.program)}};flash.display3D.Context3D.prototype.setProgramConstantsFromVector=function(programType,firstRegister,data,numRegisters){numRegisters=typeof numRegisters!=='undefined'?numRegisters:-1;this.setProgramConstantsFromVectorGL(this.getUniformLocationName(programType,firstRegister),data,numRegisters)};
flash.display3D.Context3D.prototype.setProgramConstantsFromMatrix=function(programType,firstRegister,matrix,transposedMatrix){transposedMatrix=typeof transposedMatrix!=='undefined'?transposedMatrix:false;this.setProgramConstantsFromMatrixGL(this.getUniformLocationName(programType,firstRegister),matrix,transposedMatrix)};flash.display3D.Context3D.prototype.setProgramConstantsFromByteArray=function(programType,firstRegister,numRegisters,data,byteArrayOffset){};
flash.display3D.Context3D.prototype.setProgramConstantsFromVectorGL=function(name,data,numRegisters){numRegisters=typeof numRegisters!=='undefined'?numRegisters:-1;this.gl.uniform4fv(this.getUniformLocation(name),data)};
flash.display3D.Context3D.prototype.setProgramConstantsFromMatrixGL=function(name,matrix,transposedMatrix){transposedMatrix=typeof transposedMatrix!=='undefined'?transposedMatrix:false;if(transposedMatrix)matrix.transpose();this.gl.uniformMatrix4fv(this.getUniformLocation(name),false,matrix.rawData);if(transposedMatrix)matrix.transpose()};flash.display3D.Context3D.prototype.setProgramConstantsFromByteArrayGL=function(name,numRegisters,data,byteArrayOffset){};
flash.display3D.Context3D.prototype.getUniformLocationName=function(programType,register){return flash.display3D.Context3DProgramType.VERTEX===programType?'vc'+register:'fc'+register};flash.display3D.Context3D.prototype.getUniformLocation=function(name){return this.currentProgram.getUniformLocation(name)};
flash.display3D.Context3D.prototype.setVertexBufferAt=function(index,buffer,bufferOffset,format){bufferOffset=typeof bufferOffset!=='undefined'?bufferOffset:0;format=typeof format!=='undefined'?format:'float4';this.setVertexBufferAtGL('va'+index,buffer,bufferOffset,format)};
flash.display3D.Context3D.prototype.setVertexBufferAtGL=function(name,buffer,bufferOffset,format){bufferOffset=typeof bufferOffset!=='undefined'?bufferOffset:0;format=typeof format!=='undefined'?format:'float4';if(this.currentVBufs[name]!=buffer){this.currentVBufs[name]=buffer;var loc=this.currentProgram.getAttribLocation(name);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,buffer.buff);var type=this.gl.FLOAT;var size=0;var normalized=false;switch(format){case flash.display3D.Context3DVertexBufferFormat.FLOAT_1:size=
1;break;case flash.display3D.Context3DVertexBufferFormat.FLOAT_2:size=2;break;case flash.display3D.Context3DVertexBufferFormat.FLOAT_3:size=3;break;case flash.display3D.Context3DVertexBufferFormat.FLOAT_4:size=4;break;case flash.display3D.Context3DVertexBufferFormat.BYTES_4:size=4;type=this.gl.UNSIGNED_BYTE;normalized=true;break}this.gl.vertexAttribPointer(loc,size,type,normalized,bufferOffset,bufferOffset)}};
flash.display3D.Context3D.prototype.setBlendFactors=function(sourceFactor,destinationFactor){this.gl.enable(this.gl.BLEND);this.gl.blendEquation(this.gl.FUNC_ADD);this.gl.blendFunc(flash.display3D.Context3DBlendFactor.getGLVal(this.gl,sourceFactor),flash.display3D.Context3DBlendFactor.getGLVal(this.gl,destinationFactor))};flash.display3D.Context3D.prototype.setColorMask=function(red,green,blue,alpha){this.gl.colorMask(red,green,blue,alpha)};
flash.display3D.Context3D.prototype.setDepthTest=function(depthMask,passCompareMode){this.gl.depthFunc(flash.display3D.Context3DCompareMode.getGLVal(this.gl,passCompareMode));this.gl.depthMask(depthMask)};
flash.display3D.Context3D.prototype.setTextureAt=function(sampler,texture){if(texture==null)this.setTextureInternal(sampler,null);else if(org.apache.flex.utils.Language.is(texture,flash.display3D.textures.Texture))this.setTextureInternal(sampler,org.apache.flex.utils.Language.as(texture,flash.display3D.textures.Texture));else if(org.apache.flex.utils.Language.is(texture,flash.display3D.textures.CubeTexture))this.setCubeTextureInternal(sampler,org.apache.flex.utils.Language.as(texture,flash.display3D.textures.CubeTexture));
else if(org.apache.flex.utils.Language.is(texture,flash.display3D.textures.RectangleTexture))this.setRectangleTextureInternal(sampler,org.apache.flex.utils.Language.as(texture,flash.display3D.textures.RectangleTexture));else if(org.apache.flex.utils.Language.is(texture,flash.display3D.textures.VideoTexture))this.setVideoTextureInternal(sampler,org.apache.flex.utils.Language.as(texture,flash.display3D.textures.VideoTexture))};
flash.display3D.Context3D.prototype.setRenderToTexture=function(texture,enableDepthAndStencil,antiAlias,surfaceSelector,colorOutputIndex){enableDepthAndStencil=typeof enableDepthAndStencil!=='undefined'?enableDepthAndStencil:false;antiAlias=typeof antiAlias!=='undefined'?antiAlias:0;surfaceSelector=typeof surfaceSelector!=='undefined'?surfaceSelector:0;colorOutputIndex=typeof colorOutputIndex!=='undefined'?colorOutputIndex:0;var targetType=0;if(org.apache.flex.utils.Language.is(texture,flash.display3D.textures.Texture))targetType=
1;else if(org.apache.flex.utils.Language.is(texture,flash.display3D.textures.CubeTexture))targetType=2;else if(org.apache.flex.utils.Language.is(texture,flash.display3D.textures.RectangleTexture))targetType=3;else if(texture!=null)throw'texture argument not derived from TextureBase (can be Texture, CubeTexture, or if supported, RectangleTexture)';this.setRenderToTextureInternal(texture,targetType,enableDepthAndStencil,antiAlias,surfaceSelector,colorOutputIndex)};
flash.display3D.Context3D.prototype.setRenderToBackBuffer=function(){};flash.display3D.Context3D.prototype.setRenderToTextureInternal=function(param1,param2,param3,param4,param5,param6){};flash.display3D.Context3D.prototype.setCulling=function(triangleFaceToCull){if(triangleFaceToCull===flash.display3D.Context3DTriangleFace.NONE)this.gl.disable(this.gl.CULL_FACE);else{this.gl.enable(this.gl.CULL_FACE);this.gl.cullFace(flash.display3D.Context3DTriangleFace.getGLVal(this.gl,triangleFaceToCull))}};
flash.display3D.Context3D.prototype.setStencilActions=function(triangleFace,compareMode,actionOnBothPass,actionOnDepthFail,actionOnDepthPassStencilFail){triangleFace=typeof triangleFace!=='undefined'?triangleFace:'frontAndBack';compareMode=typeof compareMode!=='undefined'?compareMode:'always';actionOnBothPass=typeof actionOnBothPass!=='undefined'?actionOnBothPass:'keep';actionOnDepthFail=typeof actionOnDepthFail!=='undefined'?actionOnDepthFail:'keep';actionOnDepthPassStencilFail=typeof actionOnDepthPassStencilFail!==
'undefined'?actionOnDepthPassStencilFail:'keep'};flash.display3D.Context3D.prototype.setStencilReferenceValue=function(referenceValue,readMask,writeMask){readMask=typeof readMask!=='undefined'?readMask:255;writeMask=typeof writeMask!=='undefined'?writeMask:255};flash.display3D.Context3D.prototype.setScissorRectangle=function(rectangle){if(rectangle==null)this.gl.disable(this.gl.SCISSOR_TEST);else{this.gl.enable(this.gl.SCISSOR_TEST);this.gl.scissor(rectangle.x,rectangle.y,rectangle.width,rectangle.height)}};
flash.display3D.Context3D.prototype.createVertexBuffer=function(numVertices,data32PerVertex,bufferUsage){bufferUsage=typeof bufferUsage!=='undefined'?bufferUsage:'staticDraw';var buffer=new flash.display3D.VertexBuffer3D;buffer.buff=this.gl.createBuffer();buffer.gl=this.gl;return buffer};
flash.display3D.Context3D.prototype.createIndexBuffer=function(numIndices,bufferUsage){bufferUsage=typeof bufferUsage!=='undefined'?bufferUsage:'staticDraw';var buffer=new flash.display3D.IndexBuffer3D;buffer.buff=this.gl.createBuffer();buffer.gl=this.gl;buffer.count=numIndices;return buffer};
flash.display3D.Context3D.prototype.createTexture=function(width,height,format,optimizeForRenderToTexture,streamingLevels){streamingLevels=typeof streamingLevels!=='undefined'?streamingLevels:0;var t=new flash.display3D.textures.Texture;t.gl=this.gl;t.texture=this.gl.createTexture();return t};flash.display3D.Context3D.prototype.createCubeTexture=function(size,format,optimizeForRenderToTexture,streamingLevels){streamingLevels=typeof streamingLevels!=='undefined'?streamingLevels:0;return null};
flash.display3D.Context3D.prototype.createRectangleTexture=function(width,height,format,optimizeForRenderToTexture){return null};flash.display3D.Context3D.prototype.createProgram=function(){var p=new flash.display3D.Program3D;p.gl=this.gl;p.program=this.gl.createProgram();return p};flash.display3D.Context3D.prototype.drawToBitmapData=function(destination){};flash.display3D.Context3D.prototype.setSamplerStateAt=function(sampler,wrap,filter,mipfilter){};
flash.display3D.Context3D.prototype.setTextureInternal=function(sampler,texture){this.setTextureAtGL('fs'+sampler,sampler,texture)};flash.display3D.Context3D.prototype.setTextureAtGL=function(name,sampler,texture){if(this.currentTextures[name]!=texture){this.currentTextures[name]=texture;if(texture){this.gl.activeTexture(WebGLRenderingContext['TEXTURE'+sampler]);this.gl.bindTexture(this.gl.TEXTURE_2D,texture.texture);this.gl.uniform1i(this.currentProgram.getUniformLocation(name),sampler)}}};
flash.display3D.Context3D.prototype.setCubeTextureInternal=function(param1,param2){};flash.display3D.Context3D.prototype.setRectangleTextureInternal=function(param1,param2){};flash.display3D.Context3D.prototype.setVideoTextureInternal=function(param1,param2){};flash.display3D.Context3D.prototype.createVideoTexture=function(){return null};
Object.defineProperties(flash.display3D.Context3D.prototype,{driverInfo:{get:function(){return null}},enableErrorChecking:{get:function(){return false},set:function(toggle){}},profile:{get:function(){return null}},backBufferWidth:{get:function(){return 0}},backBufferHeight:{get:function(){return 0}},maxBackBufferWidth:{get:function(){return 0},set:function(width){}},maxBackBufferHeight:{get:function(){return 0},set:function(height){}}});Object.defineProperties(flash.display3D.Context3D,{supportsVideoTexture:{get:function(){return false}}});
flash.display3D.Context3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Context3D',qName:'flash.display3D.Context3D'}]};goog.exportSymbol('flash.display3D.Context3D',flash.display3D.Context3D);
flash.display3D.Context3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'canvas':{type:'HTMLCanvasElement'},'gl':{type:'WebGLRenderingContext'}}},accessors:function(){return{'driverInfo':{type:'String',declaredBy:'flash.display3D.Context3D'},'enableErrorChecking':{type:'Boolean',declaredBy:'flash.display3D.Context3D'},'profile':{type:'String',declaredBy:'flash.display3D.Context3D'},'backBufferWidth':{type:'int',declaredBy:'flash.display3D.Context3D'},'backBufferHeight':{type:'int',
declaredBy:'flash.display3D.Context3D'},'maxBackBufferWidth':{type:'int',declaredBy:'flash.display3D.Context3D'},'maxBackBufferHeight':{type:'int',declaredBy:'flash.display3D.Context3D'}}},methods:function(){return{'Context3D':{type:'',declaredBy:'flash.display3D.Context3D'},'dispose':{type:'void',declaredBy:'flash.display3D.Context3D'},'configureBackBuffer':{type:'void',declaredBy:'flash.display3D.Context3D'},'clear':{type:'void',declaredBy:'flash.display3D.Context3D'},'drawTriangles':{type:'void',
declaredBy:'flash.display3D.Context3D'},'present':{type:'void',declaredBy:'flash.display3D.Context3D'},'setProgram':{type:'void',declaredBy:'flash.display3D.Context3D'},'setProgramConstantsFromVector':{type:'void',declaredBy:'flash.display3D.Context3D'},'setProgramConstantsFromMatrix':{type:'void',declaredBy:'flash.display3D.Context3D'},'setProgramConstantsFromByteArray':{type:'void',declaredBy:'flash.display3D.Context3D'},'setProgramConstantsFromVectorGL':{type:'void',declaredBy:'flash.display3D.Context3D'},
'setProgramConstantsFromMatrixGL':{type:'void',declaredBy:'flash.display3D.Context3D'},'setProgramConstantsFromByteArrayGL':{type:'void',declaredBy:'flash.display3D.Context3D'},'setVertexBufferAt':{type:'void',declaredBy:'flash.display3D.Context3D'},'setVertexBufferAtGL':{type:'void',declaredBy:'flash.display3D.Context3D'},'setBlendFactors':{type:'void',declaredBy:'flash.display3D.Context3D'},'setColorMask':{type:'void',declaredBy:'flash.display3D.Context3D'},'setDepthTest':{type:'void',declaredBy:'flash.display3D.Context3D'},
'setTextureAt':{type:'void',declaredBy:'flash.display3D.Context3D'},'setRenderToTexture':{type:'void',declaredBy:'flash.display3D.Context3D'},'setRenderToBackBuffer':{type:'void',declaredBy:'flash.display3D.Context3D'},'setCulling':{type:'void',declaredBy:'flash.display3D.Context3D'},'setStencilActions':{type:'void',declaredBy:'flash.display3D.Context3D'},'setStencilReferenceValue':{type:'void',declaredBy:'flash.display3D.Context3D'},'setScissorRectangle':{type:'void',declaredBy:'flash.display3D.Context3D'},
'createVertexBuffer':{type:'VertexBuffer3D',declaredBy:'flash.display3D.Context3D'},'createIndexBuffer':{type:'IndexBuffer3D',declaredBy:'flash.display3D.Context3D'},'createTexture':{type:'Texture',declaredBy:'flash.display3D.Context3D'},'createCubeTexture':{type:'CubeTexture',declaredBy:'flash.display3D.Context3D'},'createRectangleTexture':{type:'RectangleTexture',declaredBy:'flash.display3D.Context3D'},'createProgram':{type:'Program3D',declaredBy:'flash.display3D.Context3D'},'drawToBitmapData':{type:'void',
declaredBy:'flash.display3D.Context3D'},'setSamplerStateAt':{type:'void',declaredBy:'flash.display3D.Context3D'},'setTextureAtGL':{type:'void',declaredBy:'flash.display3D.Context3D'},'createVideoTexture':{type:'VideoTexture',declaredBy:'flash.display3D.Context3D'}}}}};goog.provide('flash.display3D.Context3DTextureFormat');flash.display3D.Context3DTextureFormat=function(){};flash.display3D.Context3DTextureFormat.BGRA='bgra';flash.display3D.Context3DTextureFormat.RGBA_HALF_FLOAT='rgbaHalfFloat';flash.display3D.Context3DTextureFormat.COMPRESSED='compressed';flash.display3D.Context3DTextureFormat.COMPRESSED_ALPHA='compressedAlpha';flash.display3D.Context3DTextureFormat.BGR_PACKED='bgrPacked565';flash.display3D.Context3DTextureFormat.BGRA_PACKED='bgraPacked4444';
flash.display3D.Context3DTextureFormat.prototype.FLEXJS_CLASS_INFO={names:[{name:'Context3DTextureFormat',qName:'flash.display3D.Context3DTextureFormat'}]};goog.exportSymbol('flash.display3D.Context3DTextureFormat',flash.display3D.Context3DTextureFormat);
flash.display3D.Context3DTextureFormat.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Context3DTextureFormat':{type:'',declaredBy:'flash.display3D.Context3DTextureFormat'}}},metadata:function(){return[]}}};goog.provide('flash.events.Event');flash.events.Event=function(type,bubbles,cancelable){bubbles=typeof bubbles!=='undefined'?bubbles:false;cancelable=typeof cancelable!=='undefined'?cancelable:false;this.ctor(type,bubbles,cancelable)};flash.events.Event.ACTIVATE='activate';flash.events.Event.ADDED='added';flash.events.Event.ADDED_TO_STAGE='addedToStage';flash.events.Event.BROWSER_ZOOM_CHANGE='browserZoomChange';flash.events.Event.CANCEL='cancel';flash.events.Event.CHANGE='change';
flash.events.Event.CLEAR='clear';flash.events.Event.CLOSE='close';flash.events.Event.COMPLETE='complete';flash.events.Event.CONNECT='connect';flash.events.Event.COPY='copy';flash.events.Event.CUT='cut';flash.events.Event.DEACTIVATE='deactivate';flash.events.Event.ENTER_FRAME='enterFrame';flash.events.Event.FRAME_CONSTRUCTED='frameConstructed';flash.events.Event.EXIT_FRAME='exitFrame';flash.events.Event.FRAME_LABEL='frameLabel';flash.events.Event.ID3='id3';flash.events.Event.INIT='init';
flash.events.Event.MOUSE_LEAVE='mouseLeave';flash.events.Event.OPEN='open';flash.events.Event.PASTE='paste';flash.events.Event.REMOVED='removed';flash.events.Event.REMOVED_FROM_STAGE='removedFromStage';flash.events.Event.RENDER='render';flash.events.Event.RESIZE='resize';flash.events.Event.SCROLL='scroll';flash.events.Event.TEXT_INTERACTION_MODE_CHANGE='textInteractionModeChange';flash.events.Event.SELECT='select';flash.events.Event.SELECT_ALL='selectAll';flash.events.Event.SOUND_COMPLETE='soundComplete';
flash.events.Event.TAB_CHILDREN_CHANGE='tabChildrenChange';flash.events.Event.TAB_ENABLED_CHANGE='tabEnabledChange';flash.events.Event.TAB_INDEX_CHANGE='tabIndexChange';flash.events.Event.UNLOAD='unload';flash.events.Event.FULLSCREEN='fullScreen';flash.events.Event.CONTEXT3D_CREATE='context3DCreate';flash.events.Event.TEXTURE_READY='textureReady';flash.events.Event.VIDEO_FRAME='videoFrame';flash.events.Event.SUSPEND='suspend';flash.events.Event.CHANNEL_MESSAGE='channelMessage';
flash.events.Event.CHANNEL_STATE='channelState';flash.events.Event.WORKER_STATE='workerState';flash.events.Event.prototype._type;flash.events.Event.prototype._bubbles;flash.events.Event.prototype._cancelable;flash.events.Event.prototype._target;flash.events.Event.prototype._currentTarget;flash.events.Event.prototype.formatToString=function(className,args){args=Array.prototype.slice.call(arguments,1);return null};
flash.events.Event.prototype.ctor=function(type,bubbles,cancelable){this._type=type;this._bubbles=bubbles;this._cancelable=cancelable};flash.events.Event.prototype.clone=function(){return new flash.events.Event(this.type,this.bubbles,this.cancelable)};flash.events.Event.prototype.toString=function(){return this.formatToString('Event','type','bubbles','cancelable','eventPhase')};flash.events.Event.prototype.stopPropagation=function(){};flash.events.Event.prototype.stopImmediatePropagation=function(){};
flash.events.Event.prototype.preventDefault=function(){};flash.events.Event.prototype.isDefaultPrevented=function(){return false};
Object.defineProperties(flash.events.Event.prototype,{type:{get:function(){return this._type}},bubbles:{get:function(){return this._bubbles}},cancelable:{get:function(){return this._cancelable}},target:{get:function(){return this._target},set:function(value){this._target=value}},currentTarget:{get:function(){return this._currentTarget},set:function(value){this._currentTarget=value}},eventPhase:{get:function(){return 0}}});flash.events.Event.prototype.FLEXJS_CLASS_INFO={names:[{name:'Event',qName:'flash.events.Event'}]};
goog.exportSymbol('flash.events.Event',flash.events.Event);
flash.events.Event.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'type':{type:'String',declaredBy:'flash.events.Event'},'bubbles':{type:'Boolean',declaredBy:'flash.events.Event'},'cancelable':{type:'Boolean',declaredBy:'flash.events.Event'},'target':{type:'Object',declaredBy:'flash.events.Event'},'currentTarget':{type:'Object',declaredBy:'flash.events.Event'},'eventPhase':{type:'uint',declaredBy:'flash.events.Event'}}},methods:function(){return{'Event':{type:'',
declaredBy:'flash.events.Event'},'formatToString':{type:'String',declaredBy:'flash.events.Event'},'clone':{type:'Event',declaredBy:'flash.events.Event'},'toString':{type:'String',declaredBy:'flash.events.Event'},'stopPropagation':{type:'void',declaredBy:'flash.events.Event'},'stopImmediatePropagation':{type:'void',declaredBy:'flash.events.Event'},'preventDefault':{type:'void',declaredBy:'flash.events.Event'},'isDefaultPrevented':{type:'Boolean',declaredBy:'flash.events.Event'}}}}};goog.provide('flash.geom.Orientation3D');flash.geom.Orientation3D=function(){};flash.geom.Orientation3D.EULER_ANGLES='eulerAngles';flash.geom.Orientation3D.AXIS_ANGLE='axisAngle';flash.geom.Orientation3D.QUATERNION='quaternion';flash.geom.Orientation3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Orientation3D',qName:'flash.geom.Orientation3D'}]};goog.exportSymbol('flash.geom.Orientation3D',flash.geom.Orientation3D);
flash.geom.Orientation3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Orientation3D':{type:'',declaredBy:'flash.geom.Orientation3D'}}},metadata:function(){return[]}}};goog.provide('flash.geom.Vector3D');flash.geom.Vector3D=function(x,y,z,w){x=typeof x!=='undefined'?x:0;y=typeof y!=='undefined'?y:0;z=typeof z!=='undefined'?z:0;w=typeof w!=='undefined'?w:0;this.x=x;this.y=y;this.z=z;this.w=w};flash.geom.Vector3D.X_AXIS=new flash.geom.Vector3D(1,0,0);flash.geom.Vector3D.Y_AXIS=new flash.geom.Vector3D(0,1,0);flash.geom.Vector3D.Z_AXIS=new flash.geom.Vector3D(0,0,1);flash.geom.Vector3D.prototype.x;flash.geom.Vector3D.prototype.y;flash.geom.Vector3D.prototype.z;flash.geom.Vector3D.prototype.w;
flash.geom.Vector3D.angleBetween=function(a,b){var dot=a.x*b.x+a.y*b.y+a.z*b.z;var al=a.length;var bl=b.length;dot=dot/(al*bl);return Math.acos(dot)};flash.geom.Vector3D.distance=function(pt1,pt2){return pt1.subtract(pt2).length};flash.geom.Vector3D.prototype.clone=function(){return new flash.geom.Vector3D(this.x,this.y,this.z,this.w)};flash.geom.Vector3D.prototype.dotProduct=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};
flash.geom.Vector3D.prototype.crossProduct=function(a){return new flash.geom.Vector3D(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x,1)};flash.geom.Vector3D.prototype.normalize=function(){var len=this.length;var lenInv=len!=0?1/len:0;this.x=this.x*lenInv;this.y=this.y*lenInv;this.z=this.z*lenInv;return len};flash.geom.Vector3D.prototype.scaleBy=function(s){this.x=this.x*s;this.y=this.y*s;this.z=this.z*s};
flash.geom.Vector3D.prototype.incrementBy=function(a){this.x=this.x+a.x;this.y=this.y+a.y;this.z=this.z+a.z};flash.geom.Vector3D.prototype.decrementBy=function(a){this.x=this.x-a.x;this.y=this.y-a.y;this.z=this.z-a.z};flash.geom.Vector3D.prototype.add=function(a){return new flash.geom.Vector3D(this.x+a.x,this.y+a.y,this.z+a.z)};flash.geom.Vector3D.prototype.subtract=function(a){return new flash.geom.Vector3D(this.x-a.x,this.y-a.y,this.z-a.z)};
flash.geom.Vector3D.prototype.negate=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z};flash.geom.Vector3D.prototype.equals=function(toCompare,allFour){allFour=typeof allFour!=='undefined'?allFour:false;return this.x===toCompare.x&&this.y===toCompare.y&&this.z===toCompare.z&&(allFour?this.w===toCompare.w:true)};
flash.geom.Vector3D.prototype.nearEquals=function(toCompare,tolerance,allFour){allFour=typeof allFour!=='undefined'?allFour:false;var diff=this.x-toCompare.x;diff=diff<0?0-diff:diff;var goodEnough=diff<tolerance;if(goodEnough){diff=this.y-toCompare.y;diff=diff<0?0-diff:diff;goodEnough=diff<tolerance;if(goodEnough){diff=this.z-toCompare.z;diff=diff<0?0-diff:diff;goodEnough=diff<tolerance;if(goodEnough&&allFour){diff=this.w=toCompare.w;diff=diff<0?0-diff:diff;goodEnough=diff<tolerance}}}return goodEnough};
flash.geom.Vector3D.prototype.project=function(){var tRecip=1/this.w;this.x=this.x*tRecip;this.y=this.y*tRecip;this.z=this.z*tRecip};flash.geom.Vector3D.prototype.toString=function(){var s='Vector3D('+this.x+', '+this.y+', '+this.z;s=s+')';return s};flash.geom.Vector3D.prototype.copyFrom=function(sourceVector3D){this.x=sourceVector3D.x;this.y=sourceVector3D.y;this.z=sourceVector3D.z};flash.geom.Vector3D.prototype.setTo=function(xa,ya,za){this.x=xa;this.y=ya;this.z=za};
Object.defineProperties(flash.geom.Vector3D.prototype,{length:{get:function(){var r=this.x*this.x+this.y*this.y+this.z*this.z;if(r<=0)return 0;return Math.sqrt(r)}},lengthSquared:{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z}}});flash.geom.Vector3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Vector3D',qName:'flash.geom.Vector3D'}]};goog.exportSymbol('flash.geom.Vector3D',flash.geom.Vector3D);
flash.geom.Vector3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'x':{type:'Number'},'y':{type:'Number'},'z':{type:'Number'},'w':{type:'Number'}}},accessors:function(){return{'length':{type:'Number',declaredBy:'flash.geom.Vector3D'},'lengthSquared':{type:'Number',declaredBy:'flash.geom.Vector3D'}}},methods:function(){return{'Vector3D':{type:'',declaredBy:'flash.geom.Vector3D'},'clone':{type:'Vector3D',declaredBy:'flash.geom.Vector3D'},'dotProduct':{type:'Number',
declaredBy:'flash.geom.Vector3D'},'crossProduct':{type:'Vector3D',declaredBy:'flash.geom.Vector3D'},'normalize':{type:'Number',declaredBy:'flash.geom.Vector3D'},'scaleBy':{type:'void',declaredBy:'flash.geom.Vector3D'},'incrementBy':{type:'void',declaredBy:'flash.geom.Vector3D'},'decrementBy':{type:'void',declaredBy:'flash.geom.Vector3D'},'add':{type:'Vector3D',declaredBy:'flash.geom.Vector3D'},'subtract':{type:'Vector3D',declaredBy:'flash.geom.Vector3D'},'negate':{type:'void',declaredBy:'flash.geom.Vector3D'},
'equals':{type:'Boolean',declaredBy:'flash.geom.Vector3D'},'nearEquals':{type:'Boolean',declaredBy:'flash.geom.Vector3D'},'project':{type:'void',declaredBy:'flash.geom.Vector3D'},'toString':{type:'String',declaredBy:'flash.geom.Vector3D'},'copyFrom':{type:'void',declaredBy:'flash.geom.Vector3D'},'setTo':{type:'void',declaredBy:'flash.geom.Vector3D'}}},metadata:function(){return[]}}};goog.provide('flash.geom.Matrix3D');goog.require('flash.geom.Orientation3D');goog.require('flash.geom.Vector3D');flash.geom.Matrix3D=function(v){v=typeof v!=='undefined'?v:null;if(v!=null&&v.length===16)this.rawData=v;else this.rawData=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1].slice()};flash.geom.Matrix3D.TEMP=new flash.geom.Matrix3D;flash.geom.Matrix3D.prototype.rawData;
flash.geom.Matrix3D.prototype.append=function(lhs){var m111=this.rawData[0];var m121=this.rawData[4];var m131=this.rawData[8];var m141=this.rawData[12];var m112=this.rawData[1];var m122=this.rawData[5];var m132=this.rawData[9];var m142=this.rawData[13];var m113=this.rawData[2];var m123=this.rawData[6];var m133=this.rawData[10];var m143=this.rawData[14];var m114=this.rawData[3];var m124=this.rawData[7];var m134=this.rawData[11];var m144=this.rawData[15];var m211=lhs.rawData[0];var m221=lhs.rawData[4];
var m231=lhs.rawData[8];var m241=lhs.rawData[12];var m212=lhs.rawData[1];var m222=lhs.rawData[5];var m232=lhs.rawData[9];var m242=lhs.rawData[13];var m213=lhs.rawData[2];var m223=lhs.rawData[6];var m233=lhs.rawData[10];var m243=lhs.rawData[14];var m214=lhs.rawData[3];var m224=lhs.rawData[7];var m234=lhs.rawData[11];var m244=lhs.rawData[15];this.rawData[0]=m111*m211+m112*m221+m113*m231+m114*m241;this.rawData[1]=m111*m212+m112*m222+m113*m232+m114*m242;this.rawData[2]=m111*m213+m112*m223+m113*m233+m114*
m243;this.rawData[3]=m111*m214+m112*m224+m113*m234+m114*m244;this.rawData[4]=m121*m211+m122*m221+m123*m231+m124*m241;this.rawData[5]=m121*m212+m122*m222+m123*m232+m124*m242;this.rawData[6]=m121*m213+m122*m223+m123*m233+m124*m243;this.rawData[7]=m121*m214+m122*m224+m123*m234+m124*m244;this.rawData[8]=m131*m211+m132*m221+m133*m231+m134*m241;this.rawData[9]=m131*m212+m132*m222+m133*m232+m134*m242;this.rawData[10]=m131*m213+m132*m223+m133*m233+m134*m243;this.rawData[11]=m131*m214+m132*m224+m133*m234+
m134*m244;this.rawData[12]=m141*m211+m142*m221+m143*m231+m144*m241;this.rawData[13]=m141*m212+m142*m222+m143*m232+m144*m242;this.rawData[14]=m141*m213+m142*m223+m143*m233+m144*m243;this.rawData[15]=m141*m214+m142*m224+m143*m234+m144*m244};
flash.geom.Matrix3D.prototype.appendRotation=function(degrees,axis,pivotPoint){pivotPoint=typeof pivotPoint!=='undefined'?pivotPoint:null;var m=flash.geom.Matrix3D.getAxisRotation(axis.x,axis.y,axis.z,degrees);if(pivotPoint!=null){var p=pivotPoint;m.appendTranslation(p.x,p.y,p.z)}this.append(m)};
flash.geom.Matrix3D.prototype.appendScale=function(xScale,yScale,zScale){this.rawData[0]*=xScale;this.rawData[1]*=xScale;this.rawData[2]*=xScale;this.rawData[3]*=xScale;this.rawData[4]*=yScale;this.rawData[5]*=yScale;this.rawData[6]*=yScale;this.rawData[7]*=yScale;this.rawData[8]*=zScale;this.rawData[9]*=zScale;this.rawData[10]*=zScale;this.rawData[11]*=zScale};flash.geom.Matrix3D.prototype.appendTranslation=function(x,y,z){this.rawData[12]+=x;this.rawData[13]+=y;this.rawData[14]+=z};
flash.geom.Matrix3D.prototype.clone=function(){return new flash.geom.Matrix3D(this.rawData.concat())};
flash.geom.Matrix3D.prototype.copyColumnFrom=function(column,vector3D){switch(column){case 0:this.rawData[0]=vector3D.x;this.rawData[1]=vector3D.y;this.rawData[2]=vector3D.z;this.rawData[3]=vector3D.w;break;case 1:this.rawData[4]=vector3D.x;this.rawData[5]=vector3D.y;this.rawData[6]=vector3D.z;this.rawData[7]=vector3D.w;break;case 2:this.rawData[8]=vector3D.x;this.rawData[9]=vector3D.y;this.rawData[10]=vector3D.z;this.rawData[11]=vector3D.w;break;case 3:this.rawData[12]=vector3D.x;this.rawData[13]=
vector3D.y;this.rawData[14]=vector3D.z;this.rawData[15]=vector3D.w;break;default:throw new Error('Error, Column '+column+' out of bounds [0, ..., 3]');break}};
flash.geom.Matrix3D.prototype.copyColumnTo=function(column,vector3D){switch(column){case 0:vector3D.x=this.rawData[0];vector3D.y=this.rawData[1];vector3D.z=this.rawData[2];vector3D.w=this.rawData[3];break;case 1:vector3D.x=this.rawData[4];vector3D.y=this.rawData[5];vector3D.z=this.rawData[6];vector3D.w=this.rawData[7];break;case 2:vector3D.x=this.rawData[8];vector3D.y=this.rawData[9];vector3D.z=this.rawData[10];vector3D.w=this.rawData[11];break;case 3:vector3D.x=this.rawData[12];vector3D.y=this.rawData[13];
vector3D.z=this.rawData[14];vector3D.w=this.rawData[15];break;default:throw new Error('Error, Column '+column+' out of bounds [0, ..., 3]');break}};flash.geom.Matrix3D.prototype.copyFrom=function(other){this.rawData=other.rawData.concat()};
flash.geom.Matrix3D.prototype.copyRawDataFrom=function(vector,index,transpose){index=typeof index!=='undefined'?index:0;transpose=typeof transpose!=='undefined'?transpose:false;if(transpose)this.transpose();var l=vector.length-index;var _g=0;while(_g<org.apache.flex.utils.Language._int(l)){var c=_g++;this.rawData[c]=vector[c+index]}if(transpose)this.transpose()};
flash.geom.Matrix3D.prototype.copyRawDataTo=function(vector,index,transpose){index=typeof index!=='undefined'?index:0;transpose=typeof transpose!=='undefined'?transpose:false;if(transpose)this.transpose();var l=this.rawData.length;var _g=0;while(_g<org.apache.flex.utils.Language._int(l)){var c=_g++;vector[c+index]=this.rawData[c]}if(transpose)this.transpose()};
flash.geom.Matrix3D.prototype.copyRowFrom=function(row,vector3D){switch(row){case 0:this.rawData[0]=vector3D.x;this.rawData[4]=vector3D.y;this.rawData[8]=vector3D.z;this.rawData[12]=vector3D.w;break;case 1:this.rawData[1]=vector3D.x;this.rawData[5]=vector3D.y;this.rawData[9]=vector3D.z;this.rawData[13]=vector3D.w;break;case 2:this.rawData[2]=vector3D.x;this.rawData[6]=vector3D.y;this.rawData[10]=vector3D.z;this.rawData[14]=vector3D.w;break;case 3:this.rawData[3]=vector3D.x;this.rawData[7]=vector3D.y;
this.rawData[11]=vector3D.z;this.rawData[15]=vector3D.w;break;default:throw new Error('Error, Row '+(''+row)+' out of bounds [0, ..., 3]');break}};
flash.geom.Matrix3D.prototype.copyRowTo=function(row,vector3D){switch(row){case 0:vector3D.x=this.rawData[0];vector3D.y=this.rawData[4];vector3D.z=this.rawData[8];vector3D.w=this.rawData[12];break;case 1:vector3D.x=this.rawData[1];vector3D.y=this.rawData[5];vector3D.z=this.rawData[9];vector3D.w=this.rawData[13];break;case 2:vector3D.x=this.rawData[2];vector3D.y=this.rawData[6];vector3D.z=this.rawData[10];vector3D.w=this.rawData[14];break;case 3:vector3D.x=this.rawData[3];vector3D.y=this.rawData[7];
vector3D.z=this.rawData[11];vector3D.w=this.rawData[15];break;default:throw new Error('Error, Row '+row+' out of bounds [0, ..., 3]');break}};flash.geom.Matrix3D.prototype.copyToMatrix3D=function(other){other.rawData=this.rawData.concat()};
flash.geom.Matrix3D.prototype.decompose=function(orientationStyle){orientationStyle=typeof orientationStyle!=='undefined'?orientationStyle:null;if(orientationStyle==null)orientationStyle=flash.geom.Orientation3D.EULER_ANGLES;var vec=new Array;var m=this.clone();var mr=m.rawData.concat();var pos=new flash.geom.Vector3D(mr[12],mr[13],mr[14]);var scale=new flash.geom.Vector3D;scale.x=Math.sqrt(mr[0]*mr[0]+mr[1]*mr[1]+mr[2]*mr[2]);scale.y=Math.sqrt(mr[4]*mr[4]+mr[5]*mr[5]+mr[6]*mr[6]);scale.z=Math.sqrt(mr[8]*
mr[8]+mr[9]*mr[9]+mr[10]*mr[10]);if(mr[0]*(mr[5]*mr[10]-mr[6]*mr[9])-mr[1]*(mr[4]*mr[10]-mr[6]*mr[8])+mr[2]*(mr[4]*mr[9]-mr[5]*mr[8])<0)scale.z=-scale.z;mr[0]/=scale.x;mr[1]/=scale.x;mr[2]/=scale.x;mr[4]/=scale.y;mr[5]/=scale.y;mr[6]/=scale.y;mr[8]/=scale.z;mr[9]/=scale.z;mr[10]/=scale.z;var rot=new flash.geom.Vector3D;switch(orientationStyle){case flash.geom.Orientation3D.AXIS_ANGLE:rot.w=Math.acos((mr[0]+mr[5]+mr[10]-1)/2);var len=Math.sqrt((mr[6]-mr[9])*(mr[6]-mr[9])+(mr[8]-mr[2])*(mr[8]-mr[2])+
(mr[1]-mr[4])*(mr[1]-mr[4]));if(len!=0){rot.x=(mr[6]-mr[9])/len;rot.y=(mr[8]-mr[2])/len;rot.z=(mr[1]-mr[4])/len}else rot.x=rot.y=rot.z=0;break;case flash.geom.Orientation3D.QUATERNION:var tr=mr[0]+mr[5]+mr[10];if(tr>0){rot.w=Math.sqrt(1+tr)/2;rot.x=(mr[6]-mr[9])/(4*rot.w);rot.y=(mr[8]-mr[2])/(4*rot.w);rot.z=(mr[1]-mr[4])/(4*rot.w)}else if(mr[0]>mr[5]&&mr[0]>mr[10]){rot.x=Math.sqrt(1+mr[0]-mr[5]-mr[10])/2;rot.w=(mr[6]-mr[9])/(4*rot.x);rot.y=(mr[1]+mr[4])/(4*rot.x);rot.z=(mr[8]+mr[2])/(4*rot.x)}else if(mr[5]>
mr[10]){rot.y=Math.sqrt(1+mr[5]-mr[0]-mr[10])/2;rot.x=(mr[1]+mr[4])/(4*rot.y);rot.w=(mr[8]-mr[2])/(4*rot.y);rot.z=(mr[6]+mr[9])/(4*rot.y)}else{rot.z=Math.sqrt(1+mr[10]-mr[0]-mr[5])/2;rot.x=(mr[8]+mr[2])/(4*rot.z);rot.y=(mr[6]+mr[9])/(4*rot.z);rot.w=(mr[1]-mr[4])/(4*rot.z)}break;case flash.geom.Orientation3D.EULER_ANGLES:rot.y=Math.asin(-mr[2]);if(mr[2]!=1&&mr[2]!=-1){rot.x=Math.atan2(mr[6],mr[10]);rot.z=Math.atan2(mr[1],mr[0])}else{rot.z=0;rot.x=Math.atan2(mr[4],mr[5])}break}vec.push(pos);vec.push(rot);
vec.push(scale);return vec};flash.geom.Matrix3D.prototype.deltaTransformVector=function(v){var x=v.x;var y=v.y;var z=v.z;return new flash.geom.Vector3D(x*this.rawData[0]+y*this.rawData[4]+z*this.rawData[8]+this.rawData[3],x*this.rawData[1]+y*this.rawData[5]+z*this.rawData[9]+this.rawData[7],x*this.rawData[2]+y*this.rawData[6]+z*this.rawData[10]+this.rawData[11],0)};
flash.geom.Matrix3D.prototype.identity=function(){this.rawData[0]=1;this.rawData[1]=0;this.rawData[2]=0;this.rawData[3]=0;this.rawData[4]=0;this.rawData[5]=1;this.rawData[6]=0;this.rawData[7]=0;this.rawData[8]=0;this.rawData[9]=0;this.rawData[10]=1;this.rawData[11]=0;this.rawData[12]=0;this.rawData[13]=0;this.rawData[14]=0;this.rawData[15]=1};
flash.geom.Matrix3D.prototype.interpolateTo=function(toMat,percent){var _g=0;while(_g<16){var i=_g++;this.rawData[i]=this.rawData[i]+(toMat.rawData[i]-this.rawData[i])*percent}};
flash.geom.Matrix3D.prototype.invert=function(){var d=this.determinant;var invertable=Math.abs(d)>1E-11;if(invertable){d=1/d;var m11=this.rawData[0];var m21=this.rawData[4];var m31=this.rawData[8];var m41=this.rawData[12];var m12=this.rawData[1];var m22=this.rawData[5];var m32=this.rawData[9];var m42=this.rawData[13];var m13=this.rawData[2];var m23=this.rawData[6];var m33=this.rawData[10];var m43=this.rawData[14];var m14=this.rawData[3];var m24=this.rawData[7];var m34=this.rawData[11];var m44=this.rawData[15];
this.rawData[0]=d*(m22*(m33*m44-m43*m34)-m32*(m23*m44-m43*m24)+m42*(m23*m34-m33*m24));this.rawData[1]=-d*(m12*(m33*m44-m43*m34)-m32*(m13*m44-m43*m14)+m42*(m13*m34-m33*m14));this.rawData[2]=d*(m12*(m23*m44-m43*m24)-m22*(m13*m44-m43*m14)+m42*(m13*m24-m23*m14));this.rawData[3]=-d*(m12*(m23*m34-m33*m24)-m22*(m13*m34-m33*m14)+m32*(m13*m24-m23*m14));this.rawData[4]=-d*(m21*(m33*m44-m43*m34)-m31*(m23*m44-m43*m24)+m41*(m23*m34-m33*m24));this.rawData[5]=d*(m11*(m33*m44-m43*m34)-m31*(m13*m44-m43*m14)+m41*(m13*
m34-m33*m14));this.rawData[6]=-d*(m11*(m23*m44-m43*m24)-m21*(m13*m44-m43*m14)+m41*(m13*m24-m23*m14));this.rawData[7]=d*(m11*(m23*m34-m33*m24)-m21*(m13*m34-m33*m14)+m31*(m13*m24-m23*m14));this.rawData[8]=d*(m21*(m32*m44-m42*m34)-m31*(m22*m44-m42*m24)+m41*(m22*m34-m32*m24));this.rawData[9]=-d*(m11*(m32*m44-m42*m34)-m31*(m12*m44-m42*m14)+m41*(m12*m34-m32*m14));this.rawData[10]=d*(m11*(m22*m44-m42*m24)-m21*(m12*m44-m42*m14)+m41*(m12*m24-m22*m14));this.rawData[11]=-d*(m11*(m22*m34-m32*m24)-m21*(m12*m34-
m32*m14)+m31*(m12*m24-m22*m14));this.rawData[12]=-d*(m21*(m32*m43-m42*m33)-m31*(m22*m43-m42*m23)+m41*(m22*m33-m32*m23));this.rawData[13]=d*(m11*(m32*m43-m42*m33)-m31*(m12*m43-m42*m13)+m41*(m12*m33-m32*m13));this.rawData[14]=-d*(m11*(m22*m43-m42*m23)-m21*(m12*m43-m42*m13)+m41*(m12*m23-m22*m13));this.rawData[15]=d*(m11*(m22*m33-m32*m23)-m21*(m12*m33-m32*m13)+m31*(m12*m23-m22*m13))}return invertable};
flash.geom.Matrix3D.prototype.pointAt=function(pos,at,up){at=typeof at!=='undefined'?at:null;up=typeof up!=='undefined'?up:null;if(at==null)at=new flash.geom.Vector3D(0,0,-1);if(up==null)up=new flash.geom.Vector3D(0,-1,0);var dir=at.subtract(pos);var vup=up.clone();var right;dir.normalize();vup.normalize();var dir2=dir.clone();dir2.scaleBy(vup.dotProduct(dir));vup=vup.subtract(dir2);if(vup.length>0)vup.normalize();else if(dir.x!=0)vup=new flash.geom.Vector3D(-dir.y,dir.x,0);else vup=new flash.geom.Vector3D(1,
0,0);right=vup.crossProduct(dir);right.normalize();this.rawData[0]=right.x;this.rawData[4]=right.y;this.rawData[8]=right.z;this.rawData[12]=0;this.rawData[1]=vup.x;this.rawData[5]=vup.y;this.rawData[9]=vup.z;this.rawData[13]=0;this.rawData[2]=dir.x;this.rawData[6]=dir.y;this.rawData[10]=dir.z;this.rawData[14]=0;this.rawData[3]=pos.x;this.rawData[7]=pos.y;this.rawData[11]=pos.z;this.rawData[15]=1};
flash.geom.Matrix3D.prototype.prepend=function(rhs){var m111=rhs.rawData[0];var m121=rhs.rawData[4];var m131=rhs.rawData[8];var m141=rhs.rawData[12];var m112=rhs.rawData[1];var m122=rhs.rawData[5];var m132=rhs.rawData[9];var m142=rhs.rawData[13];var m113=rhs.rawData[2];var m123=rhs.rawData[6];var m133=rhs.rawData[10];var m143=rhs.rawData[14];var m114=rhs.rawData[3];var m124=rhs.rawData[7];var m134=rhs.rawData[11];var m144=rhs.rawData[15];var m211=this.rawData[0];var m221=this.rawData[4];var m231=
this.rawData[8];var m241=this.rawData[12];var m212=this.rawData[1];var m222=this.rawData[5];var m232=this.rawData[9];var m242=this.rawData[13];var m213=this.rawData[2];var m223=this.rawData[6];var m233=this.rawData[10];var m243=this.rawData[14];var m214=this.rawData[3];var m224=this.rawData[7];var m234=this.rawData[11];var m244=this.rawData[15];this.rawData[0]=m111*m211+m112*m221+m113*m231+m114*m241;this.rawData[1]=m111*m212+m112*m222+m113*m232+m114*m242;this.rawData[2]=m111*m213+m112*m223+m113*m233+
m114*m243;this.rawData[3]=m111*m214+m112*m224+m113*m234+m114*m244;this.rawData[4]=m121*m211+m122*m221+m123*m231+m124*m241;this.rawData[5]=m121*m212+m122*m222+m123*m232+m124*m242;this.rawData[6]=m121*m213+m122*m223+m123*m233+m124*m243;this.rawData[7]=m121*m214+m122*m224+m123*m234+m124*m244;this.rawData[8]=m131*m211+m132*m221+m133*m231+m134*m241;this.rawData[9]=m131*m212+m132*m222+m133*m232+m134*m242;this.rawData[10]=m131*m213+m132*m223+m133*m233+m134*m243;this.rawData[11]=m131*m214+m132*m224+m133*
m234+m134*m244;this.rawData[12]=m141*m211+m142*m221+m143*m231+m144*m241;this.rawData[13]=m141*m212+m142*m222+m143*m232+m144*m242;this.rawData[14]=m141*m213+m142*m223+m143*m233+m144*m243;this.rawData[15]=m141*m214+m142*m224+m143*m234+m144*m244};
flash.geom.Matrix3D.prototype.prependRotation=function(degrees,axis,pivotPoint){pivotPoint=typeof pivotPoint!=='undefined'?pivotPoint:null;var m=flash.geom.Matrix3D.getAxisRotation(axis.x,axis.y,axis.z,degrees);if(pivotPoint!=null){var p=pivotPoint;m.appendTranslation(p.x,p.y,p.z)}this.prepend(m)};
flash.geom.Matrix3D.prototype.prependScale=function(xScale,yScale,zScale){this.rawData[0]*=xScale;this.rawData[1]*=yScale;this.rawData[2]*=zScale;this.rawData[4]*=xScale;this.rawData[5]*=yScale;this.rawData[6]*=zScale;this.rawData[8]*=xScale;this.rawData[9]*=yScale;this.rawData[10]*=zScale;this.rawData[12]*=xScale;this.rawData[13]*=yScale;this.rawData[14]*=zScale};
flash.geom.Matrix3D.prototype.prependTranslation=function(x,y,z){var m=flash.geom.Matrix3D.TEMP;m.identity();m.position=new flash.geom.Vector3D(x,y,z);this.prepend(m)};
flash.geom.Matrix3D.prototype.recompose=function(components,orientationStyle){orientationStyle=typeof orientationStyle!=='undefined'?orientationStyle:null;if(components.length<3||components[2].x==0||components[2].y==0||components[2].z==0)return false;if(orientationStyle==null)orientationStyle=flash.geom.Orientation3D.EULER_ANGLES;this.identity();var scale=[];scale[0]=scale[1]=scale[2]=components[2].x;scale[4]=scale[5]=scale[6]=components[2].y;scale[8]=scale[9]=scale[10]=components[2].z;switch(orientationStyle){case flash.geom.Orientation3D.EULER_ANGLES:var cx=
Math.cos(components[1].x);var cy=Math.cos(components[1].y);var cz=Math.cos(components[1].z);var sx=Math.sin(components[1].x);var sy=Math.sin(components[1].y);var sz=Math.sin(components[1].z);this.rawData[0]=cy*cz*scale[0];this.rawData[1]=cy*sz*scale[1];this.rawData[2]=-sy*scale[2];this.rawData[3]=0;this.rawData[4]=(sx*sy*cz-cx*sz)*scale[4];this.rawData[5]=(sx*sy*sz+cx*cz)*scale[5];this.rawData[6]=sx*cy*scale[6];this.rawData[7]=0;this.rawData[8]=(cx*sy*cz+sx*sz)*scale[8];this.rawData[9]=(cx*sy*sz-
sx*cz)*scale[9];this.rawData[10]=cx*cy*scale[10];this.rawData[11]=0;this.rawData[12]=components[0].x;this.rawData[13]=components[0].y;this.rawData[14]=components[0].z;this.rawData[15]=1;break;default:var x=components[1].x;var y=components[1].y;var z=components[1].z;var w=components[1].w;if(orientationStyle==flash.geom.Orientation3D.AXIS_ANGLE){x*=Math.sin(w/2);y*=Math.sin(w/2);z*=Math.sin(w/2);w=Math.cos(w/2)}this.rawData[0]=(1-2*y*y-2*z*z)*scale[0];this.rawData[1]=(2*x*y+2*w*z)*scale[1];this.rawData[2]=
(2*x*z-2*w*y)*scale[2];this.rawData[3]=0;this.rawData[4]=(2*x*y-2*w*z)*scale[4];this.rawData[5]=(1-2*x*x-2*z*z)*scale[5];this.rawData[6]=(2*y*z+2*w*x)*scale[6];this.rawData[7]=0;this.rawData[8]=(2*x*z+2*w*y)*scale[8];this.rawData[9]=(2*y*z-2*w*x)*scale[9];this.rawData[10]=(1-2*x*x-2*y*y)*scale[10];this.rawData[11]=0;this.rawData[12]=components[0].x;this.rawData[13]=components[0].y;this.rawData[14]=components[0].z;this.rawData[15]=1;break}if(components[2].x===0)this.rawData[0]=1E-15;if(components[2].y===
0)this.rawData[5]=1E-15;if(components[2].z===0)this.rawData[10]=1E-15;return!(components[2].x===0||components[2].y===0||components[2].y===0)};
flash.geom.Matrix3D.prototype.transformVector=function(v){var x=v.x;var y=v.y;var z=v.z;return new flash.geom.Vector3D(x*this.rawData[0]+y*this.rawData[4]+z*this.rawData[8]+this.rawData[12],x*this.rawData[1]+y*this.rawData[5]+z*this.rawData[9]+this.rawData[13],x*this.rawData[2]+y*this.rawData[6]+z*this.rawData[10]+this.rawData[14],x*this.rawData[3]+y*this.rawData[7]+z*this.rawData[11]+this.rawData[15])};
flash.geom.Matrix3D.prototype.transformVectors=function(vin,vout){var i=0;while(i+3<=vin.length){var x=vin[i];var y=vin[i+1];var z=vin[i+2];vout[i]=x*this.rawData[0]+y*this.rawData[4]+z*this.rawData[8]+this.rawData[12];vout[i+1]=x*this.rawData[1]+y*this.rawData[5]+z*this.rawData[9]+this.rawData[13];vout[i+2]=x*this.rawData[2]+y*this.rawData[6]+z*this.rawData[10]+this.rawData[14];i+=3}};
flash.geom.Matrix3D.prototype.transpose=function(){var oRawData=this.rawData.concat();this.rawData[1]=oRawData[4];this.rawData[2]=oRawData[8];this.rawData[3]=oRawData[12];this.rawData[4]=oRawData[1];this.rawData[6]=oRawData[9];this.rawData[7]=oRawData[13];this.rawData[8]=oRawData[2];this.rawData[9]=oRawData[6];this.rawData[11]=oRawData[14];this.rawData[12]=oRawData[3];this.rawData[13]=oRawData[7];this.rawData[14]=oRawData[11]};
flash.geom.Matrix3D.interpolate=function(thisMat,toMat,percent){var m=new flash.geom.Matrix3D;var _g=0;while(_g<16){var i=_g++;m.rawData[i]=thisMat.rawData[i]+(toMat.rawData[i]-thisMat.rawData[i])*percent}return m};
flash.geom.Matrix3D.getAxisRotation=function(x,y,z,degrees,target){target=typeof target!=='undefined'?target:null;var m=target||new flash.geom.Matrix3D;var rad=-degrees*(Math.PI/180);var c=Math.cos(rad);var s=Math.sin(rad);var t=1-c;m.rawData[0]=c+x*x*t;m.rawData[5]=c+y*y*t;m.rawData[10]=c+z*z*t;var tmp1=x*y*t;var tmp2=z*s;m.rawData[4]=tmp1+tmp2;m.rawData[1]=tmp1-tmp2;tmp1=x*z*t;tmp2=y*s;m.rawData[8]=tmp1-tmp2;m.rawData[2]=tmp1+tmp2;tmp1=y*z*t;tmp2=x*s;m.rawData[9]=tmp1+tmp2;m.rawData[6]=tmp1-tmp2;
return m};
Object.defineProperties(flash.geom.Matrix3D.prototype,{determinant:{get:function(){return(this.rawData[0]*this.rawData[5]-this.rawData[4]*this.rawData[1])*(this.rawData[10]*this.rawData[15]-this.rawData[14]*this.rawData[11])-(this.rawData[0]*this.rawData[9]-this.rawData[8]*this.rawData[1])*(this.rawData[6]*this.rawData[15]-this.rawData[14]*this.rawData[7])+(this.rawData[0]*this.rawData[13]-this.rawData[12]*this.rawData[1])*(this.rawData[6]*this.rawData[11]-this.rawData[10]*this.rawData[7])+(this.rawData[4]*
this.rawData[9]-this.rawData[8]*this.rawData[5])*(this.rawData[2]*this.rawData[15]-this.rawData[14]*this.rawData[3])-(this.rawData[4]*this.rawData[13]-this.rawData[12]*this.rawData[5])*(this.rawData[2]*this.rawData[11]-this.rawData[10]*this.rawData[3])+(this.rawData[8]*this.rawData[13]-this.rawData[12]*this.rawData[9])*(this.rawData[2]*this.rawData[7]-this.rawData[6]*this.rawData[3])}},position:{get:function(){return new flash.geom.Vector3D(this.rawData[12],this.rawData[13],this.rawData[14])},set:function(val){this.rawData[12]=
val.x;this.rawData[13]=val.y;this.rawData[14]=val.z}}});flash.geom.Matrix3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Matrix3D',qName:'flash.geom.Matrix3D'}]};goog.exportSymbol('flash.geom.Matrix3D',flash.geom.Matrix3D);
flash.geom.Matrix3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'rawData':{type:'Vector.\x3cNumber\x3e'}}},accessors:function(){return{'determinant':{type:'Number',declaredBy:'flash.geom.Matrix3D'},'position':{type:'flash.geom.Vector3D',declaredBy:'flash.geom.Matrix3D'}}},methods:function(){return{'Matrix3D':{type:'void',declaredBy:'flash.geom.Matrix3D'},'append':{type:'void',declaredBy:'flash.geom.Matrix3D'},'appendRotation':{type:'void',declaredBy:'flash.geom.Matrix3D'},
'appendScale':{type:'void',declaredBy:'flash.geom.Matrix3D'},'appendTranslation':{type:'void',declaredBy:'flash.geom.Matrix3D'},'clone':{type:'Matrix3D',declaredBy:'flash.geom.Matrix3D'},'copyColumnFrom':{type:'void',declaredBy:'flash.geom.Matrix3D'},'copyColumnTo':{type:'void',declaredBy:'flash.geom.Matrix3D'},'copyFrom':{type:'void',declaredBy:'flash.geom.Matrix3D'},'copyRawDataFrom':{type:'void',declaredBy:'flash.geom.Matrix3D'},'copyRawDataTo':{type:'void',declaredBy:'flash.geom.Matrix3D'},'copyRowFrom':{type:'void',
declaredBy:'flash.geom.Matrix3D'},'copyRowTo':{type:'void',declaredBy:'flash.geom.Matrix3D'},'copyToMatrix3D':{type:'void',declaredBy:'flash.geom.Matrix3D'},'decompose':{type:'Vector.\x3cflash.geom.Vector3D\x3e',declaredBy:'flash.geom.Matrix3D'},'deltaTransformVector':{type:'flash.geom.Vector3D',declaredBy:'flash.geom.Matrix3D'},'identity':{type:'void',declaredBy:'flash.geom.Matrix3D'},'interpolateTo':{type:'void',declaredBy:'flash.geom.Matrix3D'},'invert':{type:'Boolean',declaredBy:'flash.geom.Matrix3D'},
'pointAt':{type:'void',declaredBy:'flash.geom.Matrix3D'},'prepend':{type:'void',declaredBy:'flash.geom.Matrix3D'},'prependRotation':{type:'void',declaredBy:'flash.geom.Matrix3D'},'prependScale':{type:'void',declaredBy:'flash.geom.Matrix3D'},'prependTranslation':{type:'void',declaredBy:'flash.geom.Matrix3D'},'recompose':{type:'Boolean',declaredBy:'flash.geom.Matrix3D'},'transformVector':{type:'flash.geom.Vector3D',declaredBy:'flash.geom.Matrix3D'},'transformVectors':{type:'void',declaredBy:'flash.geom.Matrix3D'},
'transpose':{type:'void',declaredBy:'flash.geom.Matrix3D'}}}}};goog.provide('flash.utils.Endian');flash.utils.Endian=function(){};flash.utils.Endian.BIG_ENDIAN='bigEndian';flash.utils.Endian.LITTLE_ENDIAN='littleEndian';flash.utils.Endian.prototype.FLEXJS_CLASS_INFO={names:[{name:'Endian',qName:'flash.utils.Endian'}]};goog.exportSymbol('flash.utils.Endian',flash.utils.Endian);flash.utils.Endian.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Endian':{type:'',declaredBy:'flash.utils.Endian'}}}}};goog.provide('flash.utils.ByteArray');goog.require('flash.utils.Endian');flash.utils.ByteArray=function(){this._endian=flash.utils.Endian.BIG_ENDIAN;this.dataView=new DataView(new ArrayBuffer(0))};flash.utils.ByteArray._defaultObjectEncoding;flash.utils.ByteArray.prototype.dataView;flash.utils.ByteArray.prototype._endian;flash.utils.ByteArray.prototype.isLittleEndian=false;flash.utils.ByteArray.prototype._position=0;flash.utils.ByteArray.prototype._length=0;
flash.utils.ByteArray.prototype.readBytes=function(b,offset,length){offset=typeof offset!=='undefined'?offset:0;length=typeof length!=='undefined'?length:0;b.position=offset;b.writeBytes(this,this.position,length)};flash.utils.ByteArray.prototype.writeBytes=function(b,offset,length){offset=typeof offset!=='undefined'?offset:0;length=typeof length!=='undefined'?length:0;if(length===0)length=b.length-offset;this.beforWrite(length);b.position=offset;for(var i=0;i<length;i++)this.writeByte(b.readByte())};
flash.utils.ByteArray.prototype.writeBoolean=function(v){this.beforWrite(1);this.dataView.setInt8(this._position,v?1:0);this._position++};flash.utils.ByteArray.prototype.writeByte=function(v){this.beforWrite(1);this.dataView.setInt8(this._position,v);this._position++};flash.utils.ByteArray.prototype.writeShort=function(v){this.beforWrite(2);this.dataView.setInt16(this._position,v,this.isLittleEndian);this._position+=2};
flash.utils.ByteArray.prototype.writeInt=function(v){this.beforWrite(4);this.dataView.setInt32(this._position,v,this.isLittleEndian);this._position+=4};flash.utils.ByteArray.prototype.writeUnsignedInt=function(v){this.beforWrite(4);this.dataView.setUint32(this._position,v,this.isLittleEndian);this._position+=4};flash.utils.ByteArray.prototype.writeFloat=function(v){this.beforWrite(4);this.dataView.setFloat32(this._position,v,this.isLittleEndian);this._position+=4};
flash.utils.ByteArray.prototype.writeDouble=function(v){this.beforWrite(8);this.dataView.setFloat64(this._position,v,this.isLittleEndian);this._position+=8};flash.utils.ByteArray.prototype.writeMultiByte=function(str,charSet){var self=this;var __localFn0__=function(char){return char.charCodeAt(0)};try{var encoder=new TextEncoder(charSet);var u8=encoder.encode(str)}catch(err){u8=new Uint8Array(str.split('').map(__localFn0__))}for(var i=0;i<u8.length;i++)this.writeByte(u8[i])};
flash.utils.ByteArray.prototype.writeUTF=function(v){this._position+=2;var start=this._position;this.writeUTFBytes(v);var end=this._position;this._position=start-2;this.writeShort(start-end);this._position=end};flash.utils.ByteArray.prototype.writeUTFBytes=function(v){this.writeMultiByte(v,'utf-8')};flash.utils.ByteArray.prototype.readBoolean=function(){var v=this.dataView.getInt8(this._position)!=0;this._position++;return v};
flash.utils.ByteArray.prototype.readByte=function(){var v=this.dataView.getInt8(this._position);this._position++;return v};flash.utils.ByteArray.prototype.readUnsignedByte=function(){var v=this.dataView.getUint8(this._position);this._position++;return v};flash.utils.ByteArray.prototype.readShort=function(){var v=this.dataView.getInt16(this._position,this.isLittleEndian);this._position+=2;return v};
flash.utils.ByteArray.prototype.readUnsignedShort=function(){var v=this.dataView.getUint16(this._position,this.isLittleEndian);this._position+=2;return v};flash.utils.ByteArray.prototype.readInt=function(){var v=this.dataView.getInt32(this._position,this.isLittleEndian);this._position+=4;return v};flash.utils.ByteArray.prototype.readUnsignedInt=function(){var v=this.dataView.getUint32(this._position,this.isLittleEndian);this._position+=4;return v};
flash.utils.ByteArray.prototype.readFloat=function(){var v=this.dataView.getFloat32(this._position,this.isLittleEndian);this._position+=4;return v};flash.utils.ByteArray.prototype.readDouble=function(){var v=this.dataView.getFloat64(this._position,this.isLittleEndian);this._position+=8;return v};
flash.utils.ByteArray.prototype.readMultiByte=function(length,charSet){var u8=new Uint8Array(length);u8.set(new Uint8Array(this.dataView.buffer.slice(this._position,this._position+length)));this._position+=length;try{var decoder=new TextDecoder(charSet);var str=decoder.decode(u8)}catch(err){str=String.fromCharCode.apply(null,u8)}return str};flash.utils.ByteArray.prototype.readUTF=function(){return this.readUTFBytes(this.readUnsignedShort())};
flash.utils.ByteArray.prototype.readUTFBytes=function(length){return this.readMultiByte(length,'utf-8')};flash.utils.ByteArray.prototype.beforWrite=function(len){if(this._position+len>this.length)this.length=this._position+len};flash.utils.ByteArray.prototype.writeObject=function(param1){};flash.utils.ByteArray.prototype.readObject=function(){return null};flash.utils.ByteArray.prototype.deflate=function(){this._compress('deflate')};flash.utils.ByteArray.prototype._compress=function(param1){};
flash.utils.ByteArray.prototype.compress=function(algorithm){algorithm=typeof algorithm!=='undefined'?algorithm:'zlib';this._compress(algorithm)};flash.utils.ByteArray.prototype.inflate=function(){this._uncompress('deflate')};flash.utils.ByteArray.prototype._uncompress=function(param1){};flash.utils.ByteArray.prototype.uncompress=function(algorithm){algorithm=typeof algorithm!=='undefined'?algorithm:'zlib';this._uncompress(algorithm)};flash.utils.ByteArray.prototype.toString=function(){return this._toString()};
flash.utils.ByteArray.prototype._toString=function(){this.position=0;return this.readUTFBytes(this.length)};flash.utils.ByteArray.prototype.clear=function(){this.position=0;this.length=0};flash.utils.ByteArray.prototype.atomicCompareAndSwapIntAt=function(param1,param2,param3){return 0};flash.utils.ByteArray.prototype.atomicCompareAndSwapLength=function(param1,param2){return 0};
Object.defineProperties(flash.utils.ByteArray.prototype,{length:{get:function(){return this._length},set:function(v){this._length=v;var u8=new Uint8Array(v);u8.set(new Uint8Array(this.dataView.buffer.byteLength>v?this.dataView.buffer.slice(0,v):this.dataView.buffer));this.dataView=new DataView(u8.buffer)}},bytesAvailable:{get:function(){return this.length-this.position}},position:{get:function(){return this._position},set:function(p){this._position=p}},objectEncoding:{get:function(){return 0},set:function(param1){}},
endian:{get:function(){return this._endian},set:function(v){this._endian=v;this.isLittleEndian=v===flash.utils.Endian.LITTLE_ENDIAN}},shareable:{get:function(){return false},set:function(param1){}}});Object.defineProperties(flash.utils.ByteArray,{defaultObjectEncoding:{get:function(){return 0},set:function(param1){}}});flash.utils.ByteArray.prototype.FLEXJS_CLASS_INFO={names:[{name:'ByteArray',qName:'flash.utils.ByteArray'}]};goog.exportSymbol('flash.utils.ByteArray',flash.utils.ByteArray);
flash.utils.ByteArray.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'dataView':{type:'DataView'}}},accessors:function(){return{'length':{type:'uint',declaredBy:'flash.utils.ByteArray'},'bytesAvailable':{type:'uint',declaredBy:'flash.utils.ByteArray'},'position':{type:'uint',declaredBy:'flash.utils.ByteArray'},'objectEncoding':{type:'uint',declaredBy:'flash.utils.ByteArray'},'endian':{type:'String',declaredBy:'flash.utils.ByteArray'},'shareable':{type:'Boolean',declaredBy:'flash.utils.ByteArray'}}},
methods:function(){return{'ByteArray':{type:'',declaredBy:'flash.utils.ByteArray'},'readBytes':{type:'void',declaredBy:'flash.utils.ByteArray'},'writeBytes':{type:'void',declaredBy:'flash.utils.ByteArray'},'writeBoolean':{type:'void',declaredBy:'flash.utils.ByteArray'},'writeByte':{type:'void',declaredBy:'flash.utils.ByteArray'},'writeShort':{type:'void',declaredBy:'flash.utils.ByteArray'},'writeInt':{type:'void',declaredBy:'flash.utils.ByteArray'},'writeUnsignedInt':{type:'void',declaredBy:'flash.utils.ByteArray'},
'writeFloat':{type:'void',declaredBy:'flash.utils.ByteArray'},'writeDouble':{type:'void',declaredBy:'flash.utils.ByteArray'},'writeMultiByte':{type:'void',declaredBy:'flash.utils.ByteArray'},'writeUTF':{type:'void',declaredBy:'flash.utils.ByteArray'},'writeUTFBytes':{type:'void',declaredBy:'flash.utils.ByteArray'},'readBoolean':{type:'Boolean',declaredBy:'flash.utils.ByteArray'},'readByte':{type:'int',declaredBy:'flash.utils.ByteArray'},'readUnsignedByte':{type:'uint',declaredBy:'flash.utils.ByteArray'},
'readShort':{type:'int',declaredBy:'flash.utils.ByteArray'},'readUnsignedShort':{type:'uint',declaredBy:'flash.utils.ByteArray'},'readInt':{type:'int',declaredBy:'flash.utils.ByteArray'},'readUnsignedInt':{type:'uint',declaredBy:'flash.utils.ByteArray'},'readFloat':{type:'Number',declaredBy:'flash.utils.ByteArray'},'readDouble':{type:'Number',declaredBy:'flash.utils.ByteArray'},'readMultiByte':{type:'String',declaredBy:'flash.utils.ByteArray'},'readUTF':{type:'String',declaredBy:'flash.utils.ByteArray'},
'readUTFBytes':{type:'String',declaredBy:'flash.utils.ByteArray'},'writeObject':{type:'void',declaredBy:'flash.utils.ByteArray'},'readObject':{type:'*',declaredBy:'flash.utils.ByteArray'},'deflate':{type:'void',declaredBy:'flash.utils.ByteArray'},'compress':{type:'void',declaredBy:'flash.utils.ByteArray'},'inflate':{type:'void',declaredBy:'flash.utils.ByteArray'},'uncompress':{type:'void',declaredBy:'flash.utils.ByteArray'},'toString':{type:'String',declaredBy:'flash.utils.ByteArray'},'clear':{type:'void',
declaredBy:'flash.utils.ByteArray'},'atomicCompareAndSwapIntAt':{type:'int',declaredBy:'flash.utils.ByteArray'},'atomicCompareAndSwapLength':{type:'int',declaredBy:'flash.utils.ByteArray'}}}}};goog.provide('flash.__native.GLCanvasRenderingContext2D');goog.require('flash.__native.BitmapTexture');goog.require('flash.__native.GLCanvasPattern');goog.require('flash.__native.GLDrawable');goog.require('flash.__native.GLIndexBufferSet');goog.require('flash.__native.GLPath2D');goog.require('flash.__native.GLVertexBufferSet');goog.require('flash.display.BitmapData');goog.require('flash.display3D.Context3D');goog.require('flash.display3D.Context3DBlendFactor');goog.require('flash.display3D.Context3DProgramType');
goog.require('flash.display3D.Context3DTextureFormat');goog.require('flash.display3D.Context3DTriangleFace');goog.require('flash.display3D.Context3DVertexBufferFormat');goog.require('flash.utils.ByteArray');
flash.__native.GLCanvasRenderingContext2D=function(stage,isBatch){isBatch=typeof isBatch!=='undefined'?isBatch:false;this.text2img={};this.matr3d=new flash.geom.Matrix3D;this.uvmatr3d=new flash.geom.Matrix3D;this.matr=new flash.geom.Matrix;this.matrhelp=new flash.geom.Matrix;this.batchs=[];this.states=[];this.posPool={};this.uvPool={};this.colorPool={};this.indexPool={};this.newDrawable=new flash.__native.GLDrawable(null,null,null,WebGLRenderingContext.DYNAMIC_DRAW);this.isBatch=isBatch;this.stage=
stage;this.canvas=stage.canvas;this.ctx=new flash.display3D.Context3D;this.ctx.canvas=this.canvas;this.ctx.gl=org.apache.flex.utils.Language.as(this.canvas.getContext('webgl',{alpha:false,antialias:false})||this.canvas.getContext('experimental-webgl',{alpha:false,antialias:false}),WebGLRenderingContext);this.stage_resize(null);this.ctx.setBlendFactors(flash.display3D.Context3DBlendFactor.SOURCE_ALPHA,flash.display3D.Context3DBlendFactor.ONE_MINUS_SOURCE_ALPHA);this.ctx.setCulling(flash.display3D.Context3DTriangleFace.NONE);
var posData=new Float32Array([0,0,1,0,0,1,1,1]);var iData=new Uint16Array([0,2,1,2,1,3]);this.bitmapDrawable=new flash.__native.GLDrawable(posData,posData,iData,this.ctx.gl.STATIC_DRAW);var vcode='attribute vec2 va0;'+'attribute vec4 va1;'+'attribute vec2 va2;'+'varying vec4 vColor;'+'varying vec2 vUV;'+'uniform mat4 vc0;'+'uniform mat4 vc4;'+'void main(void) {'+'vColor\x3dva1;'+'vUV\x3d(vc4*vec4(va2,0.0,1.0)).xy;'+'gl_Position \x3dvc0*vec4(va0, 0.0,1.0);'+'}';var fcode='precision lowp float;'+'varying vec4 vColor;'+
'varying vec2 vUV;'+'uniform sampler2D fs0;'+'void main(void) {'+'gl_FragColor \x3d texture2D(fs0,vUV)*vColor;'+'}';this.bitmapProg=this.ctx.createProgram();var vb=new flash.utils.ByteArray;vb.writeUTFBytes(vcode);var fb=new flash.utils.ByteArray;fb.writeUTFBytes(fcode);this.bitmapProg.upload(vb,fb);vcode='attribute vec2 va0;'+'attribute vec4 va1;'+'varying vec4 vColor;'+'uniform mat4 vc0;'+'void main(void) {'+'vColor\x3dva1;'+'gl_Position \x3dvc0*vec4(va0, 0.0,1.0);'+'}';fcode='precision lowp float;'+
'varying vec4 vColor;'+'void main(void) {'+'gl_FragColor \x3d vColor;'+'}';this.colorProg=this.ctx.createProgram();vb=new flash.utils.ByteArray;vb.writeUTFBytes(vcode);fb=new flash.utils.ByteArray;fb.writeUTFBytes(fcode);this.colorProg.upload(vb,fb);stage.addEventListener(flash.events.Event.RESIZE,org.apache.flex.utils.Language.closure(this.stage_resize,this,'stage_resize'))};flash.__native.GLCanvasRenderingContext2D.prototype.canvas;flash.__native.GLCanvasRenderingContext2D.prototype.fillColor;flash.__native.GLCanvasRenderingContext2D.prototype.fillStyle;
flash.__native.GLCanvasRenderingContext2D.prototype.fillStyleIsImage;flash.__native.GLCanvasRenderingContext2D.prototype.font;flash.__native.GLCanvasRenderingContext2D.prototype.getLineDash;flash.__native.GLCanvasRenderingContext2D.prototype.globalAlpha=1;flash.__native.GLCanvasRenderingContext2D.prototype.colorTransform;flash.__native.GLCanvasRenderingContext2D.prototype.globalCompositeOperation;flash.__native.GLCanvasRenderingContext2D.prototype.lineCap;flash.__native.GLCanvasRenderingContext2D.prototype.lineJoin;
flash.__native.GLCanvasRenderingContext2D.prototype.lineWidth;flash.__native.GLCanvasRenderingContext2D.prototype.miterLimit;flash.__native.GLCanvasRenderingContext2D.prototype.setFillColor;flash.__native.GLCanvasRenderingContext2D.prototype.setLineDash;flash.__native.GLCanvasRenderingContext2D.prototype.setStrokeColor;flash.__native.GLCanvasRenderingContext2D.prototype.shadowBlur;flash.__native.GLCanvasRenderingContext2D.prototype.shadowColor;flash.__native.GLCanvasRenderingContext2D.prototype.shadowOffsetX;
flash.__native.GLCanvasRenderingContext2D.prototype.shadowOffsetY;flash.__native.GLCanvasRenderingContext2D.prototype.strokeColor;flash.__native.GLCanvasRenderingContext2D.prototype.strokeStyle;flash.__native.GLCanvasRenderingContext2D.prototype.textAlign;flash.__native.GLCanvasRenderingContext2D.prototype.textBaseline;flash.__native.GLCanvasRenderingContext2D.prototype.ctx;flash.__native.GLCanvasRenderingContext2D.prototype.currentPath;flash.__native.GLCanvasRenderingContext2D.prototype.text2img;
flash.__native.GLCanvasRenderingContext2D.prototype.bitmapDrawable;flash.__native.GLCanvasRenderingContext2D.prototype.bitmapProg;flash.__native.GLCanvasRenderingContext2D.prototype.colorProg;flash.__native.GLCanvasRenderingContext2D.prototype.matr3d;flash.__native.GLCanvasRenderingContext2D.prototype.uvmatr3d;flash.__native.GLCanvasRenderingContext2D.prototype.matr;flash.__native.GLCanvasRenderingContext2D.prototype.matrhelp;flash.__native.GLCanvasRenderingContext2D.prototype.stage;flash.__native.GLCanvasRenderingContext2D.prototype.isBatch;
flash.__native.GLCanvasRenderingContext2D.prototype.batchs;flash.__native.GLCanvasRenderingContext2D.prototype.batchsLen=0;flash.__native.GLCanvasRenderingContext2D.prototype.states;flash.__native.GLCanvasRenderingContext2D.prototype.statesPos=-1;flash.__native.GLCanvasRenderingContext2D.prototype.posPool;flash.__native.GLCanvasRenderingContext2D.prototype.uvPool;flash.__native.GLCanvasRenderingContext2D.prototype.colorPool;flash.__native.GLCanvasRenderingContext2D.prototype.indexPool;flash.__native.GLCanvasRenderingContext2D.prototype.newDrawable;
flash.__native.GLCanvasRenderingContext2D.prototype.lastImage;flash.__native.GLCanvasRenderingContext2D.prototype.lastImageIsImage;flash.__native.GLCanvasRenderingContext2D.prototype.numPos=0;flash.__native.GLCanvasRenderingContext2D.prototype.numIndex=0;flash.__native.GLCanvasRenderingContext2D.prototype.updateColor=true;flash.__native.GLCanvasRenderingContext2D.prototype.stage_resize=function(e){this.ctx.configureBackBuffer(this.stage.stageWidth,this.stage.stageHeight,0,false)};
flash.__native.GLCanvasRenderingContext2D.prototype.arc=function(x,y,radius,startAngle,endAngle){this.currentPath.path.arc(x,y,radius,startAngle,endAngle);return null};flash.__native.GLCanvasRenderingContext2D.prototype.arcTo=function(x1,y1,x2,y2,radius){return null};flash.__native.GLCanvasRenderingContext2D.prototype.beginPath=function(){this.currentPath=new flash.__native.GLPath2D;this.currentPath.path=SpriteFlexjs.renderer.createPath();this.currentPath.matr=this.matr;return null};
flash.__native.GLCanvasRenderingContext2D.prototype.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){this.currentPath.path.cubicCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);return null};flash.__native.GLCanvasRenderingContext2D.prototype.clearRect=function(x,y,w,h){this.ctx.clear(1,1,1);this.batchsLen=0;return null};flash.__native.GLCanvasRenderingContext2D.prototype.clip=function(opt_fillRule){opt_fillRule=typeof opt_fillRule!=='undefined'?opt_fillRule:'';return null};
flash.__native.GLCanvasRenderingContext2D.prototype.closePath=function(){return null};flash.__native.GLCanvasRenderingContext2D.prototype.createImageData=function(sw,sh){return null};flash.__native.GLCanvasRenderingContext2D.prototype.createLinearGradient=function(x0,y0,x1,y1){return null};flash.__native.GLCanvasRenderingContext2D.prototype.createPattern=function(image,repetition){return new flash.__native.GLCanvasPattern(image,repetition)};
flash.__native.GLCanvasRenderingContext2D.prototype.createRadialGradient=function(x0,y0,r0,x1,y1,r1){return null};flash.__native.GLCanvasRenderingContext2D.prototype.drawImage=function(image,dx,dy){this.drawImageInternal(image,this.bitmapDrawable,this.matr,null,true,this.colorTransform.tint,true,true);return null};
flash.__native.GLCanvasRenderingContext2D.prototype.drawPath=function(path,colorTransform){this.currentPath=path['glpath2d'];if(path['glpath2d']==null)this.currentPath=path['glpath2d']=new flash.__native.GLPath2D;this.currentPath.path=path;this.currentPath.matr=this.matr;return null};
flash.__native.GLCanvasRenderingContext2D.prototype.drawImageInternal=function(image,drawable,posmatr,uvmatr,scaleWithImage,color,scaleWithImageUV,isImage){if(!this.isBatch){if(image){var colorb=drawable.color;colorb.dirty=true;var data=colorb.data;var len=data.length;for(var i=0;i<len;i++)data[i]=color;this.renderImage(image,drawable,posmatr,uvmatr,scaleWithImage,scaleWithImageUV,isImage)}}else{if(!isImage&&!this.lastImageIsImage);else if(image==null||this.lastImage!=image){if(this.numPos>0)this.batchFinish();
this.numPos=0;this.numIndex=0;this.lastImage=image;this.lastImageIsImage=isImage}if(drawable){this.numPos+=drawable.pos.data.length/2;this.numIndex+=drawable.index.data.length/3}var batch=this.batchs[this.batchsLen];if(batch==null)batch=this.batchs[this.batchsLen]=[];this.batchsLen++;batch[0]=image;batch[1]=drawable;batch[2]=posmatr;batch[3]=uvmatr;batch[4]=scaleWithImage;batch[5]=color;batch[6]=scaleWithImageUV;batch[7]=isImage}};
flash.__native.GLCanvasRenderingContext2D.prototype.renderImage=function(image,drawable,posmatr,uvmatr,scaleWithImage,scaleWithImageUV,isImage){SpriteFlexjs.batDrawCounter++;if(!isImage)this.ctx.setProgram(this.colorProg);else{var texture=this.getTexture(image);this.ctx.setProgram(this.bitmapProg);this.ctx.setTextureAt(0,texture.texture);this.ctx.setVertexBufferAt(2,drawable.uv.getBuff(this.ctx),0,flash.display3D.Context3DVertexBufferFormat.FLOAT_2)}this.ctx.setVertexBufferAt(0,drawable.pos.getBuff(this.ctx),
0,flash.display3D.Context3DVertexBufferFormat.FLOAT_2);this.ctx.setVertexBufferAt(1,drawable.color.getBuff(this.ctx),0,flash.display3D.Context3DVertexBufferFormat.BYTES_4);if(posmatr){this.matr3d.rawData[0]=posmatr.a*2/this.stage.stageWidth;this.matr3d.rawData[1]=-posmatr.b*2/this.stage.stageHeight;this.matr3d.rawData[4]=posmatr.c*2/this.stage.stageWidth;this.matr3d.rawData[5]=-posmatr.d*2/this.stage.stageHeight;this.matr3d.rawData[12]=posmatr.tx*2/this.stage.stageWidth-1;this.matr3d.rawData[13]=
1-posmatr.ty*2/this.stage.stageHeight}else{this.matr3d.rawData[0]=2/this.stage.stageWidth;this.matr3d.rawData[1]=0;this.matr3d.rawData[4]=0;this.matr3d.rawData[5]=-2/this.stage.stageHeight;this.matr3d.rawData[12]=-1;this.matr3d.rawData[13]=1}if(scaleWithImage){this.matr3d.rawData[0]*=image.width;this.matr3d.rawData[1]*=image.width;this.matr3d.rawData[4]*=image.height;this.matr3d.rawData[5]*=image.height}this.ctx.setProgramConstantsFromMatrix(flash.display3D.Context3DProgramType.VERTEX,0,this.matr3d);
if(isImage){if(uvmatr){if(posmatr){this.matrhelp.copyFrom(posmatr);this.matrhelp.invert();this.matrhelp.concat(uvmatr)}else this.matrhelp.copyFrom(uvmatr);this.uvmatr3d.rawData[0]=this.matrhelp.a/texture.width;this.uvmatr3d.rawData[1]=-this.matrhelp.b/texture.width;this.uvmatr3d.rawData[4]=-this.matrhelp.c/texture.height;this.uvmatr3d.rawData[5]=this.matrhelp.d/texture.height;this.uvmatr3d.rawData[12]=-this.matrhelp.tx/texture.width;this.uvmatr3d.rawData[13]=-this.matrhelp.ty/texture.height;if(scaleWithImageUV){this.uvmatr3d.rawData[0]*=
image.width;this.uvmatr3d.rawData[1]*=image.width;this.uvmatr3d.rawData[4]*=image.height;this.uvmatr3d.rawData[5]*=image.height}}else{this.uvmatr3d.rawData[0]=1/texture.width;this.uvmatr3d.rawData[1]=0;this.uvmatr3d.rawData[4]=0;this.uvmatr3d.rawData[5]=1/texture.height;this.uvmatr3d.rawData[12]=0;this.uvmatr3d.rawData[13]=0;if(scaleWithImageUV){this.uvmatr3d.rawData[0]*=image.width;this.uvmatr3d.rawData[5]*=image.height}}this.ctx.setProgramConstantsFromMatrix(flash.display3D.Context3DProgramType.VERTEX,
4,this.uvmatr3d)}this.ctx.drawTriangles(drawable.index.getBuff(this.ctx),0,drawable.numTriangles)};
flash.__native.GLCanvasRenderingContext2D.prototype.batchFinish=function(){var posKey=this.getNextPow2(this.numPos);var indexKey=this.getNextPow2(this.numIndex);var newpos=this.posPool[posKey];var newuv=this.uvPool[posKey];var newcolor=this.colorPool[posKey];var newi=this.indexPool[indexKey];if(newpos==null){newpos=this.posPool[posKey]=new flash.__native.GLVertexBufferSet(new Float32Array(posKey*2),2,this.ctx.gl.DYNAMIC_DRAW);org.apache.flex.utils.Language.trace('bat new pos',posKey,this.numPos)}if(newuv==
null&&this.lastImageIsImage)newuv=this.uvPool[posKey]=new flash.__native.GLVertexBufferSet(new Float32Array(posKey*2),2,this.ctx.gl.DYNAMIC_DRAW);if(newcolor==null&&this.updateColor)newcolor=this.colorPool[posKey]=new flash.__native.GLVertexBufferSet(new Uint32Array(posKey),4,this.ctx.gl.DYNAMIC_DRAW);if(newi==null){newi=this.indexPool[indexKey]=new flash.__native.GLIndexBufferSet(new Uint16Array(indexKey*3),this.ctx.gl.DYNAMIC_DRAW);org.apache.flex.utils.Language.trace('bat new index',indexKey,this.numIndex)}var newposdata=
newpos.data;if(this.lastImageIsImage)var newuvdata=newuv.data;if(this.updateColor)var newcolordata=newcolor.data;var newidata=newi.data;this.newDrawable.index=newi;this.newDrawable.pos=newpos;this.newDrawable.uv=newuv;this.newDrawable.color=newcolor;this.newDrawable.numTriangles=this.numIndex;var si=0;var il=0;if(this.lastImageIsImage){var iw=this.lastImage.width;var ih=this.lastImage.height}var len=this.batchsLen;for(var i=0;i<len;i++){var batch=this.batchs[i];var drawable2=batch[1];var posmatr=
batch[2];var scaleWithImage=batch[4];var scaleWithImageUV=batch[6];var color=batch[5];if(this.lastImageIsImage){var uvmatr=batch[3];if(uvmatr){this.matrhelp.copyFrom(posmatr);this.matrhelp.invert();this.matrhelp.concat(uvmatr);this.matrhelp.b*=-1;this.matrhelp.c*=-1;this.matrhelp.tx*=-1;this.matrhelp.ty*=-1}}var data=drawable2.pos.data;if(this.lastImageIsImage)var uvdata=drawable2.uv.data;var len2=data.length/2;for(var j=0;j<len2;j++){var x=data[j*2];var y=data[j*2+1];if(scaleWithImage){x*=iw;y*=
ih}var x2=posmatr.a*x+posmatr.c*y+posmatr.tx;var y2=posmatr.d*y+posmatr.b*x+posmatr.ty;newposdata[(si+j)*2]=x2;newposdata[(si+j)*2+1]=y2;if(this.lastImageIsImage){x=uvdata[j*2];y=uvdata[j*2+1];if(scaleWithImageUV){x*=iw;y*=ih}if(uvmatr){x2=this.matrhelp.a*x+this.matrhelp.c*y+this.matrhelp.tx;y2=this.matrhelp.d*y+this.matrhelp.b*x+this.matrhelp.ty;newuvdata[(si+j)*2]=x2;newuvdata[(si+j)*2+1]=y2}else{newuvdata[(si+j)*2]=x;newuvdata[(si+j)*2+1]=y}}if(this.updateColor)newcolordata[si+j]=color}var did=
drawable2.index.data;var didl=did.length;for(j=0;j<didl;j++){var vi=did[j];newidata[il+j]=vi+si}si+=len2;il+=didl}this.newDrawable.index.dirty=true;this.newDrawable.pos.dirty=true;if(this.lastImageIsImage)this.newDrawable.uv.dirty=true;if(this.updateColor)this.newDrawable.color.dirty=true;this.renderImage(this.lastImage,this.newDrawable,null,null,false,false,this.lastImageIsImage);this.batchsLen=0};
flash.__native.GLCanvasRenderingContext2D.prototype.fill=function(){if(this.fillStyleIsImage){var glcp=this.fillStyle;this.drawImageInternal(glcp.image,this.currentPath.drawable,this.currentPath.matr,this.matr,false,this.colorTransform.tint,this.currentPath.path.tris.length>0,true)}else if(this.currentPath)this.drawImageInternal(this.fillStyle,this.currentPath.drawable,this.currentPath.matr,null,false,this.fillStyle,false,false);return null};
flash.__native.GLCanvasRenderingContext2D.prototype.fillRect=function(x,y,w,h){return null};
flash.__native.GLCanvasRenderingContext2D.prototype.fillText=function(text,x,y){var image=this.text2img[text];if(image==null){image=this.text2img[text]=org.apache.flex.utils.Language.as(document.createElement('canvas'),HTMLCanvasElement);var ctx=org.apache.flex.utils.Language.as(image.getContext('2d'),CanvasRenderingContext2D);ctx.font=this.font;var measure=ctx.measureText(text);image.width=measure.width;image.height=org.apache.flex.utils.Language._int(this.font.substr(0,this.font.indexOf('px')));
ctx.font=this.font;ctx.textBaseline='top';ctx.fillStyle=this.fillStyle;ctx.fillText(text,0,0)}this.matrhelp.copyFrom(this.matr);this.matrhelp.translate(x,y);this.drawImageInternal(image,this.bitmapDrawable,this.matrhelp.clone(),null,true,this.colorTransform.tint,true,true);return null};flash.__native.GLCanvasRenderingContext2D.prototype.getImageData=function(sx,sy,sw,sh){return null};
flash.__native.GLCanvasRenderingContext2D.prototype.isPointInPath=function(x,y,opt_fillRule){opt_fillRule=typeof opt_fillRule!=='undefined'?opt_fillRule:'';return false};flash.__native.GLCanvasRenderingContext2D.prototype.lineTo=function(x,y){this.currentPath.path.lineTo(x,y);return null};flash.__native.GLCanvasRenderingContext2D.prototype.measureText=function(text){return null};flash.__native.GLCanvasRenderingContext2D.prototype.moveTo=function(x,y){this.currentPath.path.moveTo(x,y);return null};
flash.__native.GLCanvasRenderingContext2D.prototype.putImageData=function(imagedata,dx,dy,opt_dirtyX,opt_dirtyY,opt_dirtyWidth,opt_dirtyHeight){opt_dirtyX=typeof opt_dirtyX!=='undefined'?opt_dirtyX:0;opt_dirtyY=typeof opt_dirtyY!=='undefined'?opt_dirtyY:0;opt_dirtyWidth=typeof opt_dirtyWidth!=='undefined'?opt_dirtyWidth:0;opt_dirtyHeight=typeof opt_dirtyHeight!=='undefined'?opt_dirtyHeight:0;return null};
flash.__native.GLCanvasRenderingContext2D.prototype.quadraticCurveTo=function(cpx,cpy,x,y){this.currentPath.path.curveTo(cpx,cpy,x,y);return null};flash.__native.GLCanvasRenderingContext2D.prototype.rect=function(x,y,w,h){this.currentPath.path.moveTo(x,y);this.currentPath.path.lineTo(x+w,y);this.currentPath.path.lineTo(x+w,y+h);this.currentPath.path.lineTo(x,y+h);this.currentPath.path.closePath();return null};
flash.__native.GLCanvasRenderingContext2D.prototype.setTransform=function(m11,m12,m21,m22,dx,dy){return null};flash.__native.GLCanvasRenderingContext2D.prototype.setTransform2=function(m){this.matr=m;return null};flash.__native.GLCanvasRenderingContext2D.prototype.stroke=function(){return null};flash.__native.GLCanvasRenderingContext2D.prototype.strokeRect=function(x,y,w,h){return null};
flash.__native.GLCanvasRenderingContext2D.prototype.strokeText=function(text,x,y,opt_maxWidth){opt_maxWidth=typeof opt_maxWidth!=='undefined'?opt_maxWidth:0;return null};
flash.__native.GLCanvasRenderingContext2D.prototype.transform2=function(m){var result_a=this.matr.a/m.a;var result_b=0;var result_c=0;var result_d=this.matr.d/m.d;var result_tx=this.matr.tx/m.a+m.tx/m.a;var result_ty=this.matr.ty/m.d+m.ty/m.d;if(this.matr.b!=0||this.matr.c!=0||m.b!=0||m.c!=0){result_a=result_a+this.matr.b*m.c;result_d=result_d+this.matr.c*m.b;result_b=result_b+(this.matr.a*m.b+this.matr.b*m.d);result_c=result_c+(this.matr.c*m.a+this.matr.d*m.c);result_tx=result_tx+this.matr.ty*m.c;
result_ty=result_ty+this.matr.tx*m.b}m.a=result_a;m.b=result_b;m.c=result_c;m.d=result_d;m.tx=result_tx;m.ty=result_ty;this.matr=m;return null};
flash.__native.GLCanvasRenderingContext2D.prototype.getTexture=function(img){var btexture=img._texture;if(btexture==null){var w=this.getNextPow2(img.width);var h=this.getNextPow2(img.height);var bmd=new flash.display.BitmapData(w,h,true,0);bmd.fromImage(img);var texture=this.ctx.createTexture(w,h,flash.display3D.Context3DTextureFormat.BGRA,false);texture.uploadFromBitmapData(bmd,1);btexture=new flash.__native.BitmapTexture;btexture.img=img;btexture.texture=texture;btexture.width=w;btexture.height=
h;img._texture=btexture}return btexture};flash.__native.GLCanvasRenderingContext2D.prototype.getNextPow2=function(v){var r=1;while(r<v)r*=2;return r};flash.__native.GLCanvasRenderingContext2D.prototype.FLEXJS_CLASS_INFO={names:[{name:'GLCanvasRenderingContext2D',qName:'flash.__native.GLCanvasRenderingContext2D'}]};goog.exportSymbol('flash.__native.GLCanvasRenderingContext2D',flash.__native.GLCanvasRenderingContext2D);
flash.__native.GLCanvasRenderingContext2D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'canvas':{type:'HTMLCanvasElement'},'fillColor':{type:'String'},'fillStyle':{type:'String'},'fillStyleIsImage':{type:'Boolean'},'font':{type:'String'},'getLineDash':{type:'Object'},'globalAlpha':{type:'Number'},'colorTransform':{type:'ColorTransform'},'globalCompositeOperation':{type:'String'},'lineCap':{type:'String'},'lineJoin':{type:'String'},'lineWidth':{type:'Number'},'miterLimit':{type:'Number'},
'setFillColor':{type:'Object'},'setLineDash':{type:'Object'},'setStrokeColor':{type:'Object'},'shadowBlur':{type:'Number'},'shadowColor':{type:'String'},'shadowOffsetX':{type:'Number'},'shadowOffsetY':{type:'Number'},'strokeColor':{type:'String'},'strokeStyle':{type:'String'},'textAlign':{type:'String'},'textBaseline':{type:'String'},'ctx':{type:'Context3D'},'currentPath':{type:'GLPath2D'},'bitmapDrawable':{type:'GLDrawable'},'matr':{type:'Matrix'}}},accessors:function(){return{}},methods:function(){return{'GLCanvasRenderingContext2D':{type:'',
declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'arc':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'arcTo':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'beginPath':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'bezierCurveTo':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'clearRect':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'clip':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},
'closePath':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'createImageData':{type:'ImageData',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'createLinearGradient':{type:'CanvasGradient',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'createPattern':{type:'CanvasPattern',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'createRadialGradient':{type:'CanvasGradient',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'drawImage':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},
'drawPath':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'drawImageInternal':{type:'void',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'fill':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'fillRect':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'fillText':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'getImageData':{type:'ImageData',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},
'isPointInPath':{type:'Boolean',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'lineTo':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'measureText':{type:'TextMetrics',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'moveTo':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'putImageData':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'quadraticCurveTo':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},
'rect':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'setTransform':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'setTransform2':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'stroke':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'strokeRect':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'strokeText':{type:'Object',declaredBy:'flash.__native.GLCanvasRenderingContext2D'},'transform2':{type:'Object',
declaredBy:'flash.__native.GLCanvasRenderingContext2D'}}}}};goog.provide('flash.__native.MemArray');flash.__native.MemArray=function(){this.array=[]};flash.__native.MemArray.prototype.array;flash.__native.MemArray.prototype.length=0;flash.__native.MemArray.prototype.push=function(v){this.array[this.length++]=v};flash.__native.MemArray.prototype.FLEXJS_CLASS_INFO={names:[{name:'MemArray',qName:'flash.__native.MemArray'}]};goog.exportSymbol('flash.__native.MemArray',flash.__native.MemArray);
flash.__native.MemArray.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'array':{type:'Array'},'length':{type:'int'}}},accessors:function(){return{}},methods:function(){return{'MemArray':{type:'',declaredBy:'flash.__native.MemArray'},'push':{type:'void',declaredBy:'flash.__native.MemArray'}}}}};goog.provide('flash.__native.GLGraphicsPath');goog.require('flash.__native.MemArray');goog.require('flash.display.GraphicsPath');flash.__native.GLGraphicsPath=function(){flash.__native.GLGraphicsPath.base(this,'constructor');this.polys=new flash.__native.MemArray};goog.inherits(flash.__native.GLGraphicsPath,flash.display.GraphicsPath);flash.__native.GLGraphicsPath.prototype.polys;flash.__native.GLGraphicsPath.prototype.poly;
flash.__native.GLGraphicsPath.prototype.clear=function(){var len=this.polys.array.length;for(var i=0;i<len;i++)this.polys.array[i].length=0;this.polys.length=0;this.tris.length=0};flash.__native.GLGraphicsPath.prototype.moveTo=function(x,y){this.makePoly();this.poly.push(x);this.poly.push(y)};flash.__native.GLGraphicsPath.prototype.lineTo=function(x,y){if(this.poly==null)this.makePoly();this.poly.push(x);this.poly.push(y)};
flash.__native.GLGraphicsPath.prototype.curveTo=function(controlX,controlY,anchorX,anchorY){if(this.poly==null)this.makePoly();this.poly.push(controlX);this.poly.push(controlY);this.poly.push(anchorX);this.poly.push(anchorY)};
flash.__native.GLGraphicsPath.prototype.cubicCurveTo=function(controlX1,controlY1,controlX2,controlY2,anchorX,anchorY){if(this.poly==null)this.makePoly();this.poly.push(controlX1);this.poly.push(controlY1);this.poly.push(controlX2);this.poly.push(controlY2);this.poly.push(anchorX);this.poly.push(anchorY)};flash.__native.GLGraphicsPath.prototype.wideLineTo=function(x,y){this.lineTo(x,y)};flash.__native.GLGraphicsPath.prototype.wideMoveTo=function(x,y){this.moveTo(x,y)};
flash.__native.GLGraphicsPath.prototype.arc=function(x,y,r,a0,a1){var da=Math.PI/4;var x0=r;var y0=0;var sin=Math.sin(da);var cos=Math.cos(da);this.moveTo(x0+x,y0+y);for(var a=a0;a<a1;a+=da){var x_=x0;x0=x0*cos-y0*sin;y0=x_*sin+y0*cos;this.lineTo(x0+x,y0+y)}};flash.__native.GLGraphicsPath.prototype.rect=function(x,y,w,h){this.moveTo(x,y);this.lineTo(x+w,y);this.lineTo(x+w,y+h);this.lineTo(x,y+h)};
flash.__native.GLGraphicsPath.prototype.makePoly=function(){this.poly=this.polys.array[this.polys.length];if(this.poly==null)this.poly=this.polys.array[this.polys.length]=new flash.__native.MemArray;this.polys.length++};flash.__native.GLGraphicsPath.prototype.FLEXJS_CLASS_INFO={names:[{name:'GLGraphicsPath',qName:'flash.__native.GLGraphicsPath'}]};goog.exportSymbol('flash.__native.GLGraphicsPath',flash.__native.GLGraphicsPath);
flash.__native.GLGraphicsPath.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'polys':{type:'MemArray'}}},accessors:function(){return{}},methods:function(){return{'GLGraphicsPath':{type:'',declaredBy:'flash.__native.GLGraphicsPath'},'clear':{type:'void',declaredBy:'flash.__native.GLGraphicsPath'},'moveTo':{type:'void',declaredBy:'flash.__native.GLGraphicsPath'},'lineTo':{type:'void',declaredBy:'flash.__native.GLGraphicsPath'},'curveTo':{type:'void',declaredBy:'flash.__native.GLGraphicsPath'},
'cubicCurveTo':{type:'void',declaredBy:'flash.__native.GLGraphicsPath'},'wideLineTo':{type:'void',declaredBy:'flash.__native.GLGraphicsPath'},'wideMoveTo':{type:'void',declaredBy:'flash.__native.GLGraphicsPath'},'arc':{type:'void',declaredBy:'flash.__native.GLGraphicsPath'}}}}};goog.provide('flash.__native.WebGLRenderer');goog.require('flash.__native.BaseRenderer');goog.require('flash.__native.GLGraphicsPath');flash.__native.WebGLRenderer=function(){flash.__native.WebGLRenderer.base(this,'constructor')};goog.inherits(flash.__native.WebGLRenderer,flash.__native.BaseRenderer);flash.__native.WebGLRenderer.prototype.createPath=function(){return new flash.__native.GLGraphicsPath};
flash.__native.WebGLRenderer.prototype.getCssColor=function(color,alpha,ct,toarr){var r=(color>>16&255)*ct.redMultiplier+ct.redOffset;var g=(color>>8&255)*ct.greenMultiplier+ct.greenOffset;var b=(color&255)*ct.greenMultiplier+ct.greenOffset;var a=(alpha*ct.alphaMultiplier+ct.alphaOffset)*255;var c=(r<<0|g<<8|b<<16|a<<24)>>>0;return c};
flash.__native.WebGLRenderer.prototype.renderImage=function(ctx,img,m,blendMode,colorTransform){var glctx=ctx;glctx.drawImageInternal(img.image,glctx.bitmapDrawable,m,null,true,colorTransform.tint,true,true)};
flash.__native.WebGLRenderer.prototype.renderGraphics=function(ctx,g,m,blendMode,colorTransform){var glctx=ctx;glctx.setTransform2(m);ctx.globalCompositeOperation=blendMode;glctx.colorTransform=colorTransform;var len=g.graphicsData.length;for(var i=0;i<len;i++){var igd=g.graphicsData[i];igd.gldraw(glctx,colorTransform)}if(g.lastFill){this.endFillInstance.fill=g.lastFill;this.endFillInstance._worldMatrix=g._worldMatrix;this.endFillInstance.gldraw(glctx,colorTransform)}if(g.lastStroke)ctx.stroke();
ctx.fillStyle=null;ctx.strokeStyle=null};flash.__native.WebGLRenderer.prototype.renderText=function(ctx,txt,textFormat,m,blendMode,colorTransform,x,y){var glctx=ctx;glctx.colorTransform=colorTransform;ctx.globalCompositeOperation=blendMode;glctx.setTransform2(m);ctx.font=textFormat.css;ctx.fillStyle=textFormat.csscolor;ctx.textBaseline='top';ctx.fillText(txt,x,y)};flash.__native.WebGLRenderer.prototype.finish=function(ctx){var glctx=ctx;glctx.drawImageInternal(null,null,null,null,true,null,true,true)};
flash.__native.WebGLRenderer.prototype.FLEXJS_CLASS_INFO={names:[{name:'WebGLRenderer',qName:'flash.__native.WebGLRenderer'}]};goog.exportSymbol('flash.__native.WebGLRenderer',flash.__native.WebGLRenderer);
flash.__native.WebGLRenderer.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'WebGLRenderer':{type:'',declaredBy:'flash.__native.WebGLRenderer'},'createPath':{type:'GraphicsPath',declaredBy:'flash.__native.WebGLRenderer'},'getCssColor':{type:'Object',declaredBy:'flash.__native.WebGLRenderer'},'renderImage':{type:'void',declaredBy:'flash.__native.WebGLRenderer'},'renderGraphics':{type:'void',declaredBy:'flash.__native.WebGLRenderer'},
'renderText':{type:'void',declaredBy:'flash.__native.WebGLRenderer'},'finish':{type:'void',declaredBy:'flash.__native.WebGLRenderer'}}}}};goog.provide('flash.display.LoaderInfo');goog.require('flash.events.EventDispatcher');flash.display.LoaderInfo=function(){flash.display.LoaderInfo.base(this,'constructor')};goog.inherits(flash.display.LoaderInfo,flash.events.EventDispatcher);flash.display.LoaderInfo.prototype._content;flash.display.LoaderInfo.getLoaderInfoByDefinition=function(param1){return null};flash.display.LoaderInfo.prototype._getArgs=function(){return null};
Object.defineProperties(flash.display.LoaderInfo.prototype,{loaderURL:{get:function(){return null}},url:{get:function(){return null}},isURLInaccessible:{get:function(){return false}},bytesLoaded:{get:function(){return 0}},bytesTotal:{get:function(){return 0}},swfVersion:{get:function(){return 0}},actionScriptVersion:{get:function(){return 0}},frameRate:{get:function(){return 0}},parameters:{get:function(){var k=null;var args=this._getArgs();var rtn={};for(k in args)rtn[k]=args[k];return rtn}},width:{get:function(){return 0}},
height:{get:function(){return 0}},contentType:{get:function(){return null}},sharedEvents:{get:function(){return null}},parentSandboxBridge:{get:function(){return null},set:function(param1){}},childSandboxBridge:{get:function(){return null},set:function(param1){}},sameDomain:{get:function(){return false}},childAllowsParent:{get:function(){return false}},parentAllowsChild:{get:function(){return false}},loader:{get:function(){return null}},content:{get:function(){return this._content},set:function(bmp){this._content=
bmp}},bytes:{get:function(){return null}}});flash.display.LoaderInfo.prototype.FLEXJS_CLASS_INFO={names:[{name:'LoaderInfo',qName:'flash.display.LoaderInfo'}]};goog.exportSymbol('flash.display.LoaderInfo',flash.display.LoaderInfo);
flash.display.LoaderInfo.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'loaderURL':{type:'String',declaredBy:'flash.display.LoaderInfo'},'url':{type:'String',declaredBy:'flash.display.LoaderInfo'},'isURLInaccessible':{type:'Boolean',declaredBy:'flash.display.LoaderInfo'},'bytesLoaded':{type:'uint',declaredBy:'flash.display.LoaderInfo'},'bytesTotal':{type:'uint',declaredBy:'flash.display.LoaderInfo'},'swfVersion':{type:'uint',declaredBy:'flash.display.LoaderInfo'},
'actionScriptVersion':{type:'uint',declaredBy:'flash.display.LoaderInfo'},'frameRate':{type:'Number',declaredBy:'flash.display.LoaderInfo'},'parameters':{type:'Object',declaredBy:'flash.display.LoaderInfo'},'width':{type:'int',declaredBy:'flash.display.LoaderInfo'},'height':{type:'int',declaredBy:'flash.display.LoaderInfo'},'contentType':{type:'String',declaredBy:'flash.display.LoaderInfo'},'sharedEvents':{type:'EventDispatcher',declaredBy:'flash.display.LoaderInfo'},'parentSandboxBridge':{type:'Object',
declaredBy:'flash.display.LoaderInfo'},'childSandboxBridge':{type:'Object',declaredBy:'flash.display.LoaderInfo'},'sameDomain':{type:'Boolean',declaredBy:'flash.display.LoaderInfo'},'childAllowsParent':{type:'Boolean',declaredBy:'flash.display.LoaderInfo'},'parentAllowsChild':{type:'Boolean',declaredBy:'flash.display.LoaderInfo'},'loader':{type:'Loader',declaredBy:'flash.display.LoaderInfo'},'content':{type:'Bitmap',declaredBy:'flash.display.LoaderInfo'},'bytes':{type:'ByteArray',declaredBy:'flash.display.LoaderInfo'}}},
methods:function(){return{'LoaderInfo':{type:'',declaredBy:'flash.display.LoaderInfo'}}}}};goog.provide('flash.display.Stage3D');goog.require('flash.events.EventDispatcher');flash.display.Stage3D=function(){flash.display.Stage3D.base(this,'constructor')};goog.inherits(flash.display.Stage3D,flash.events.EventDispatcher);flash.display.Stage3D.prototype._context3D;
flash.display.Stage3D.prototype.requestContext3D=function(param1,param2){param1=typeof param1!=='undefined'?param1:'auto';param2=typeof param2!=='undefined'?param2:'baseline';this._context3D=new flash.display3D.Context3D;var canvas=org.apache.flex.utils.Language.as(document.createElement('canvas'),HTMLCanvasElement);this._context3D.canvas=canvas;canvas.style.position='absolute';canvas.style.left=0;canvas.style.top=0;canvas.style.zIndex=0;document.body.appendChild(canvas);this._context3D.gl=org.apache.flex.utils.Language.as(canvas.getContext('webgl',
{alpha:false,antialias:false})||canvas.getContext('experimental-webgl',{alpha:false,antialias:false}),WebGLRenderingContext);this.dispatchEvent(new flash.events.Event(flash.events.Event.CONTEXT3D_CREATE))};flash.display.Stage3D.prototype.requestContext3DMatchingProfiles=function(param1){this.requestContext3D()};
Object.defineProperties(flash.display.Stage3D.prototype,{context3D:{get:function(){return this._context3D}},x:{get:function(){return 0},set:function(param1){}},y:{get:function(){return 0},set:function(param1){}},visible:{get:function(){return false},set:function(param1){}}});flash.display.Stage3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Stage3D',qName:'flash.display.Stage3D'}]};goog.exportSymbol('flash.display.Stage3D',flash.display.Stage3D);
flash.display.Stage3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'context3D':{type:'Context3D',declaredBy:'flash.display.Stage3D'},'x':{type:'Number',declaredBy:'flash.display.Stage3D'},'y':{type:'Number',declaredBy:'flash.display.Stage3D'},'visible':{type:'Boolean',declaredBy:'flash.display.Stage3D'}}},methods:function(){return{'Stage3D':{type:'',declaredBy:'flash.display.Stage3D'},'requestContext3D':{type:'void',declaredBy:'flash.display.Stage3D'},
'requestContext3DMatchingProfiles':{type:'void',declaredBy:'flash.display.Stage3D'}}}}};goog.provide('flash.events.KeyboardEvent');goog.require('flash.events.Event');
flash.events.KeyboardEvent=function(type,bubbles,cancelable,charCodeValue,keyCodeValue,keyLocationValue,ctrlKeyValue,altKeyValue,shiftKeyValue){bubbles=typeof bubbles!=='undefined'?bubbles:true;cancelable=typeof cancelable!=='undefined'?cancelable:false;charCodeValue=typeof charCodeValue!=='undefined'?charCodeValue:0;keyCodeValue=typeof keyCodeValue!=='undefined'?keyCodeValue:0;keyLocationValue=typeof keyLocationValue!=='undefined'?keyLocationValue:0;ctrlKeyValue=typeof ctrlKeyValue!=='undefined'?
ctrlKeyValue:false;altKeyValue=typeof altKeyValue!=='undefined'?altKeyValue:false;shiftKeyValue=typeof shiftKeyValue!=='undefined'?shiftKeyValue:false;flash.events.KeyboardEvent.base(this,'constructor',type,bubbles,cancelable);this.charCode=charCodeValue;this.keyCode=keyCodeValue;this.keyLocation=keyLocationValue;this.ctrlKey=ctrlKeyValue;this.altKey=altKeyValue;this.shiftKey=shiftKeyValue};goog.inherits(flash.events.KeyboardEvent,flash.events.Event);flash.events.KeyboardEvent.KEY_DOWN='keyDown';
flash.events.KeyboardEvent.KEY_UP='keyUp';flash.events.KeyboardEvent.prototype.m_keyLocation;flash.events.KeyboardEvent.prototype.m_keyCode;flash.events.KeyboardEvent.prototype.m_ctrlKey;flash.events.KeyboardEvent.prototype.m_altKey;flash.events.KeyboardEvent.prototype.m_shiftKey;flash.events.KeyboardEvent.prototype.clone=function(){return new flash.events.KeyboardEvent(this.type,this.bubbles,this.cancelable,this.charCode,this.keyCode,this.keyLocation,this.ctrlKey,this.altKey,this.shiftKey)};
flash.events.KeyboardEvent.prototype.toString=function(){return this.formatToString('KeyboardEvent','type','bubbles','cancelable','eventPhase','charCode','keyCode','keyLocation','ctrlKey','altKey','shiftKey')};flash.events.KeyboardEvent.prototype.updateAfterEvent=function(){};
Object.defineProperties(flash.events.KeyboardEvent.prototype,{charCode:{get:function(){return 0},set:function(param1){}},keyCode:{get:function(){return this.m_keyCode},set:function(value){this.m_keyCode=value}},keyLocation:{get:function(){return this.m_keyLocation},set:function(value){this.m_keyLocation=value}},ctrlKey:{get:function(){return this.m_ctrlKey},set:function(param1){this.m_ctrlKey=param1}},altKey:{get:function(){return this.m_altKey},set:function(param1){this.m_altKey=param1}},shiftKey:{get:function(){return this.m_shiftKey},
set:function(param1){this.m_shiftKey=param1}}});flash.events.KeyboardEvent.prototype.FLEXJS_CLASS_INFO={names:[{name:'KeyboardEvent',qName:'flash.events.KeyboardEvent'}]};goog.exportSymbol('flash.events.KeyboardEvent',flash.events.KeyboardEvent);
flash.events.KeyboardEvent.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'charCode':{type:'uint',declaredBy:'flash.events.KeyboardEvent'},'keyCode':{type:'uint',declaredBy:'flash.events.KeyboardEvent'},'keyLocation':{type:'uint',declaredBy:'flash.events.KeyboardEvent'},'ctrlKey':{type:'Boolean',declaredBy:'flash.events.KeyboardEvent'},'altKey':{type:'Boolean',declaredBy:'flash.events.KeyboardEvent'},'shiftKey':{type:'Boolean',declaredBy:'flash.events.KeyboardEvent'}}},
methods:function(){return{'KeyboardEvent':{type:'',declaredBy:'flash.events.KeyboardEvent'},'clone':{type:'Event',declaredBy:'flash.events.KeyboardEvent'},'toString':{type:'String',declaredBy:'flash.events.KeyboardEvent'},'updateAfterEvent':{type:'void',declaredBy:'flash.events.KeyboardEvent'}}}}};goog.provide('flash.events.MouseEvent');goog.require('flash.events.Event');
flash.events.MouseEvent=function(type,bubbles,cancelable,localX,localY,relatedObject,ctrlKey,altKey,shiftKey,buttonDown,delta){bubbles=typeof bubbles!=='undefined'?bubbles:true;cancelable=typeof cancelable!=='undefined'?cancelable:false;localX=typeof localX!=='undefined'?localX:undefined;localY=typeof localY!=='undefined'?localY:undefined;relatedObject=typeof relatedObject!=='undefined'?relatedObject:null;ctrlKey=typeof ctrlKey!=='undefined'?ctrlKey:false;altKey=typeof altKey!=='undefined'?altKey:
false;shiftKey=typeof shiftKey!=='undefined'?shiftKey:false;buttonDown=typeof buttonDown!=='undefined'?buttonDown:false;delta=typeof delta!=='undefined'?delta:0;flash.events.MouseEvent.base(this,'constructor',type,bubbles,cancelable);this._localX=localX;this._localY=localY;this.m_relatedObject=relatedObject;this.m_ctrlKey=ctrlKey;this.m_altKey=altKey;this.m_shiftKey=shiftKey;this.m_buttonDown=buttonDown;this.m_delta=delta};goog.inherits(flash.events.MouseEvent,flash.events.Event);
flash.events.MouseEvent.CLICK='click';flash.events.MouseEvent.DOUBLE_CLICK='doubleClick';flash.events.MouseEvent.MOUSE_DOWN='mouseDown';flash.events.MouseEvent.MOUSE_MOVE='mouseMove';flash.events.MouseEvent.MOUSE_OUT='mouseOut';flash.events.MouseEvent.MOUSE_OVER='mouseOver';flash.events.MouseEvent.MOUSE_UP='mouseUp';flash.events.MouseEvent.RELEASE_OUTSIDE='releaseOutside';flash.events.MouseEvent.MOUSE_WHEEL='mouseWheel';flash.events.MouseEvent.ROLL_OUT='rollOut';
flash.events.MouseEvent.ROLL_OVER='rollOver';flash.events.MouseEvent.MIDDLE_CLICK='middleClick';flash.events.MouseEvent.MIDDLE_MOUSE_DOWN='middleMouseDown';flash.events.MouseEvent.MIDDLE_MOUSE_UP='middleMouseUp';flash.events.MouseEvent.RIGHT_CLICK='rightClick';flash.events.MouseEvent.RIGHT_MOUSE_DOWN='rightMouseDown';flash.events.MouseEvent.RIGHT_MOUSE_UP='rightMouseUp';flash.events.MouseEvent.CONTEXT_MENU='contextMenu';flash.events.MouseEvent.prototype.m_relatedObject;flash.events.MouseEvent.prototype.m_ctrlKey;
flash.events.MouseEvent.prototype.m_altKey;flash.events.MouseEvent.prototype.m_shiftKey;flash.events.MouseEvent.prototype.m_buttonDown;flash.events.MouseEvent.prototype.m_delta;flash.events.MouseEvent.prototype.m_isRelatedObjectInaccessible;flash.events.MouseEvent.prototype._localX=0;flash.events.MouseEvent.prototype._localY=0;
flash.events.MouseEvent.prototype.clone=function(){return new flash.events.MouseEvent(this.type,this.bubbles,this.cancelable,this.localX,this.localY,this.m_relatedObject,this.m_ctrlKey,this.m_altKey,this.m_shiftKey,this.m_buttonDown,this.m_delta)};flash.events.MouseEvent.prototype.toString=function(){return this.formatToString('MouseEvent','type','bubbles','cancelable','eventPhase','localX','localY','stageX','stageY','relatedObject','ctrlKey','altKey','shiftKey','buttonDown','delta')};
flash.events.MouseEvent.prototype.updateAfterEvent=function(){};flash.events.MouseEvent.prototype.getStageX=function(){return 0};flash.events.MouseEvent.prototype.getStageY=function(){return 0};
Object.defineProperties(flash.events.MouseEvent.prototype,{localX:{get:function(){return this._localX},set:function(v){this._localX=v}},localY:{get:function(){return this._localY},set:function(v){this._localY=v}},relatedObject:{get:function(){return this.m_relatedObject},set:function(value){this.m_relatedObject=value}},ctrlKey:{get:function(){return this.m_ctrlKey},set:function(value){this.m_ctrlKey=value}},altKey:{get:function(){return this.m_altKey},set:function(value){this.m_altKey=value}},shiftKey:{get:function(){return this.m_shiftKey},
set:function(value){this.m_shiftKey=value}},buttonDown:{get:function(){return this.m_buttonDown},set:function(value){this.m_buttonDown=value}},delta:{get:function(){return this.m_delta},set:function(value){this.m_delta=value}},stageX:{get:function(){if(isNaN(this.localX)||isNaN(this.localY))return Number.NaN;return this.getStageX()}},stageY:{get:function(){if(isNaN(this.localX)||isNaN(this.localY))return Number.NaN;return this.getStageY()}},isRelatedObjectInaccessible:{get:function(){return this.m_isRelatedObjectInaccessible},
set:function(value){this.m_isRelatedObjectInaccessible=value}},movementX:{get:function(){return 0},set:function(param1){}},movementY:{get:function(){return 0},set:function(param1){}}});flash.events.MouseEvent.prototype.FLEXJS_CLASS_INFO={names:[{name:'MouseEvent',qName:'flash.events.MouseEvent'}]};goog.exportSymbol('flash.events.MouseEvent',flash.events.MouseEvent);
flash.events.MouseEvent.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'localX':{type:'Number',declaredBy:'flash.events.MouseEvent'},'localY':{type:'Number',declaredBy:'flash.events.MouseEvent'},'relatedObject':{type:'Object',declaredBy:'flash.events.MouseEvent'},'ctrlKey':{type:'Boolean',declaredBy:'flash.events.MouseEvent'},'altKey':{type:'Boolean',declaredBy:'flash.events.MouseEvent'},'shiftKey':{type:'Boolean',declaredBy:'flash.events.MouseEvent'},
'buttonDown':{type:'Boolean',declaredBy:'flash.events.MouseEvent'},'delta':{type:'int',declaredBy:'flash.events.MouseEvent'},'stageX':{type:'Number',declaredBy:'flash.events.MouseEvent'},'stageY':{type:'Number',declaredBy:'flash.events.MouseEvent'},'isRelatedObjectInaccessible':{type:'Boolean',declaredBy:'flash.events.MouseEvent'},'movementX':{type:'Number',declaredBy:'flash.events.MouseEvent'},'movementY':{type:'Number',declaredBy:'flash.events.MouseEvent'}}},methods:function(){return{'MouseEvent':{type:'',
declaredBy:'flash.events.MouseEvent'},'clone':{type:'Event',declaredBy:'flash.events.MouseEvent'},'toString':{type:'String',declaredBy:'flash.events.MouseEvent'},'updateAfterEvent':{type:'void',declaredBy:'flash.events.MouseEvent'}}}}};goog.provide('flash.events.TouchEvent');goog.require('flash.events.Event');
flash.events.TouchEvent=function(type,bubbles,cancelable,touchPointID,isPrimaryTouchPoint,localX,localY,sizeX,sizeY,pressure,relatedObject,ctrlKey,altKey,shiftKey){bubbles=typeof bubbles!=='undefined'?bubbles:true;cancelable=typeof cancelable!=='undefined'?cancelable:false;touchPointID=typeof touchPointID!=='undefined'?touchPointID:0;isPrimaryTouchPoint=typeof isPrimaryTouchPoint!=='undefined'?isPrimaryTouchPoint:false;localX=typeof localX!=='undefined'?localX:NaN;localY=typeof localY!=='undefined'?
localY:NaN;sizeX=typeof sizeX!=='undefined'?sizeX:NaN;sizeY=typeof sizeY!=='undefined'?sizeY:NaN;pressure=typeof pressure!=='undefined'?pressure:NaN;relatedObject=typeof relatedObject!=='undefined'?relatedObject:null;ctrlKey=typeof ctrlKey!=='undefined'?ctrlKey:false;altKey=typeof altKey!=='undefined'?altKey:false;shiftKey=typeof shiftKey!=='undefined'?shiftKey:false;flash.events.TouchEvent.base(this,'constructor',type,bubbles,cancelable);this.m_touchPointID=touchPointID;this.m_isPrimaryTouchPoint=
isPrimaryTouchPoint;this.localX=localX;this.localY=localY;this.m_sizeX=sizeX;this.m_sizeY=sizeY;this.m_pressure=pressure;this.m_relatedObject=relatedObject;this.m_ctrlKey=ctrlKey;this.m_altKey=altKey;this.m_shiftKey=shiftKey};goog.inherits(flash.events.TouchEvent,flash.events.Event);flash.events.TouchEvent.TOUCH_BEGIN='touchBegin';flash.events.TouchEvent.TOUCH_END='touchEnd';flash.events.TouchEvent.TOUCH_MOVE='touchMove';flash.events.TouchEvent.TOUCH_OVER='touchOver';
flash.events.TouchEvent.TOUCH_OUT='touchOut';flash.events.TouchEvent.TOUCH_ROLL_OVER='touchRollOver';flash.events.TouchEvent.TOUCH_ROLL_OUT='touchRollOut';flash.events.TouchEvent.TOUCH_TAP='touchTap';flash.events.TouchEvent.PROXIMITY_BEGIN='proximityBegin';flash.events.TouchEvent.PROXIMITY_END='proximityEnd';flash.events.TouchEvent.PROXIMITY_MOVE='proximityMove';flash.events.TouchEvent.PROXIMITY_OUT='proximityOut';flash.events.TouchEvent.PROXIMITY_OVER='proximityOver';
flash.events.TouchEvent.PROXIMITY_ROLL_OUT='proximityRollOut';flash.events.TouchEvent.PROXIMITY_ROLL_OVER='proximityRollOver';flash.events.TouchEvent.prototype.m_touchPointID;flash.events.TouchEvent.prototype.m_isPrimaryTouchPoint;flash.events.TouchEvent.prototype.m_sizeY;flash.events.TouchEvent.prototype.m_sizeX;flash.events.TouchEvent.prototype.m_pressure;flash.events.TouchEvent.prototype.m_relatedObject;flash.events.TouchEvent.prototype.m_isRelatedObjectInaccessible;flash.events.TouchEvent.prototype.m_ctrlKey;
flash.events.TouchEvent.prototype.m_altKey;flash.events.TouchEvent.prototype.m_shiftKey;flash.events.TouchEvent.prototype.clone=function(){return new flash.events.TouchEvent(this.type,this.bubbles,this.cancelable,this.m_touchPointID,this.m_isPrimaryTouchPoint,this.localX,this.localY,this.m_sizeX,this.m_sizeY,this.m_pressure,this.m_relatedObject,this.m_ctrlKey,this.m_altKey,this.m_shiftKey)};
flash.events.TouchEvent.prototype.toString=function(){return this.formatToString('TouchEvent','type','bubbles','cancelable','eventPhase','touchPointID','isPrimaryTouchPoint','localX','localY','stageX','stageY','sizeX','sizeY','pressure','relatedObject','ctrlKey','altKey','shiftKey')};flash.events.TouchEvent.prototype.updateAfterEvent=function(){};flash.events.TouchEvent.prototype.getStageX=function(){return 0};flash.events.TouchEvent.prototype.getStageY=function(){return 0};
Object.defineProperties(flash.events.TouchEvent.prototype,{localX:{get:function(){return 0},set:function(param1){}},localY:{get:function(){return 0},set:function(param1){}},touchPointID:{get:function(){return this.m_touchPointID},set:function(value){this.m_touchPointID=value}},isPrimaryTouchPoint:{get:function(){return this.m_isPrimaryTouchPoint},set:function(value){this.m_isPrimaryTouchPoint=value}},sizeX:{get:function(){return this.m_sizeX},set:function(value){this.m_sizeX=value}},sizeY:{get:function(){return this.m_sizeY},
set:function(value){this.m_sizeY=value}},pressure:{get:function(){return this.m_pressure},set:function(value){this.m_pressure=value}},relatedObject:{get:function(){return this.m_relatedObject},set:function(value){this.m_relatedObject=value}},ctrlKey:{get:function(){return this.m_ctrlKey},set:function(value){this.m_ctrlKey=value}},altKey:{get:function(){return this.m_altKey},set:function(value){this.m_altKey=value}},shiftKey:{get:function(){return this.m_shiftKey},set:function(value){this.m_shiftKey=
value}},stageX:{get:function(){if(isNaN(this.localX)||isNaN(this.localY))return Number.NaN;return this.getStageX()}},stageY:{get:function(){if(isNaN(this.localX)||isNaN(this.localY))return Number.NaN;return this.getStageY()}},isRelatedObjectInaccessible:{get:function(){return this.m_isRelatedObjectInaccessible},set:function(value){this.m_isRelatedObjectInaccessible=value}}});flash.events.TouchEvent.prototype.FLEXJS_CLASS_INFO={names:[{name:'TouchEvent',qName:'flash.events.TouchEvent'}]};
goog.exportSymbol('flash.events.TouchEvent',flash.events.TouchEvent);
flash.events.TouchEvent.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'localX':{type:'Number',declaredBy:'flash.events.TouchEvent'},'localY':{type:'Number',declaredBy:'flash.events.TouchEvent'},'touchPointID':{type:'int',declaredBy:'flash.events.TouchEvent'},'isPrimaryTouchPoint':{type:'Boolean',declaredBy:'flash.events.TouchEvent'},'sizeX':{type:'Number',declaredBy:'flash.events.TouchEvent'},'sizeY':{type:'Number',declaredBy:'flash.events.TouchEvent'},
'pressure':{type:'Number',declaredBy:'flash.events.TouchEvent'},'relatedObject':{type:'Object',declaredBy:'flash.events.TouchEvent'},'ctrlKey':{type:'Boolean',declaredBy:'flash.events.TouchEvent'},'altKey':{type:'Boolean',declaredBy:'flash.events.TouchEvent'},'shiftKey':{type:'Boolean',declaredBy:'flash.events.TouchEvent'},'stageX':{type:'Number',declaredBy:'flash.events.TouchEvent'},'stageY':{type:'Number',declaredBy:'flash.events.TouchEvent'},'isRelatedObjectInaccessible':{type:'Boolean',declaredBy:'flash.events.TouchEvent'}}},
methods:function(){return{'TouchEvent':{type:'',declaredBy:'flash.events.TouchEvent'},'clone':{type:'Event',declaredBy:'flash.events.TouchEvent'},'toString':{type:'String',declaredBy:'flash.events.TouchEvent'},'updateAfterEvent':{type:'void',declaredBy:'flash.events.TouchEvent'}}}}};goog.provide('flash.display.Stage');goog.require('flash.__native.GLCanvasRenderingContext2D');goog.require('flash.__native.WebGLRenderer');goog.require('flash.display.LoaderInfo');goog.require('flash.display.Stage3D');goog.require('flash.events.EventDispatcher');goog.require('flash.events.KeyboardEvent');goog.require('flash.events.MouseEvent');goog.require('flash.events.TouchEvent');
flash.display.Stage=function(){flash.display.Stage.base(this,'constructor');this.window_resize(null);this._loaderInfo=new flash.display.LoaderInfo;if(SpriteFlexjs.startTime===0)SpriteFlexjs.startTime=Date.now();this.frameRate=60;this.__update();this._stage3Ds=[new flash.display.Stage3D,new flash.display.Stage3D,new flash.display.Stage3D,new flash.display.Stage3D].slice();window.addEventListener('resize',org.apache.flex.utils.Language.closure(this.window_resize,this,'window_resize'),false)};
goog.inherits(flash.display.Stage,flash.events.EventDispatcher);flash.display.Stage.prototype._frameRate;flash.display.Stage.prototype._stage3Ds;flash.display.Stage.kInvalidParamError=2004;flash.display.Stage.prototype._canvas;flash.display.Stage.prototype._ctx;flash.display.Stage.prototype._ctx2d;flash.display.Stage.prototype._mouseX=0;flash.display.Stage.prototype._mouseY=0;flash.display.Stage.prototype.needSendMouseMove=false;flash.display.Stage.prototype.needSendTouchMove=false;
flash.display.Stage.prototype.lastUpdateTime=-1E3;flash.display.Stage.prototype._loaderInfo;flash.display.Stage.prototype._stageWidth;flash.display.Stage.prototype._stageHeight;flash.display.Stage.prototype.window_resize=function(e){this._stageWidth=window.innerWidth;this._stageHeight=window.innerHeight;this.canvas.width=this._stageWidth;this.canvas.height=this._stageHeight;this.canvas.style.width=this._stageWidth+'px';this.canvas.style.height=this._stageHeight+'px';this.dispatchEvent(new flash.events.Event(flash.events.Event.RESIZE))};
flash.display.Stage.prototype.__update=function(){SpriteFlexjs.requestAnimationFrame.call(window,org.apache.flex.utils.Language.closure(this.__update,this,'__update'));if(this.needSendMouseMove){this.dispatchEvent(new flash.events.MouseEvent(flash.events.MouseEvent.MOUSE_MOVE,true,false,this._mouseX,this._mouseY));this.needSendMouseMove=false}if(this.needSendTouchMove){this.dispatchEvent(new flash.events.TouchEvent(flash.events.TouchEvent.TOUCH_MOVE,true,false,0,true,this._mouseX,this._mouseY));this.needSendTouchMove=
false}this.dispatchEvent(new flash.events.Event(flash.events.Event.ENTER_FRAME))};flash.display.Stage.prototype.invalidate=function(){};flash.display.Stage.prototype.isFocusInaccessible=function(){return false};flash.display.Stage.prototype.requireOwnerPermissions=function(){};
flash.display.Stage.prototype.canvas_touchevent=function(e){var jsType=e.type;var flashType;var flashType2;switch(jsType){case 'touchcancel':flashType=flash.events.TouchEvent.TOUCH_END;flashType2=flash.events.MouseEvent.MOUSE_UP;break;case 'touchend':flashType=flash.events.TouchEvent.TOUCH_END;flashType2=flash.events.MouseEvent.MOUSE_UP;break;case 'touchmove':flashType=flash.events.TouchEvent.TOUCH_MOVE;flashType2=flash.events.MouseEvent.MOUSE_MOVE;break;case 'touchstart':flashType=flash.events.TouchEvent.TOUCH_BEGIN;
flashType2=flash.events.MouseEvent.MOUSE_DOWN;e.preventDefault();break}if(flashType){if(e.targetTouches.length){this._mouseX=e.targetTouches[0].pageX-this.canvas.offsetLeft;this._mouseY=e.targetTouches[0].pageY-this.canvas.offsetTop}if(this.hasEventListener(flashType))if(flashType!=flash.events.TouchEvent.TOUCH_MOVE)this.dispatchEvent(new flash.events.TouchEvent(flashType,true,false,0,true,this._mouseX,this._mouseY));else this.needSendTouchMove=true;if(this.hasEventListener(flashType2))if(flashType2!=
flash.events.MouseEvent.MOUSE_MOVE)this.dispatchEvent(new flash.events.MouseEvent(flashType2,true,false,this._mouseX,this._mouseY));else this.needSendMouseMove=true;if(flashType===flash.events.TouchEvent.TOUCH_END&&this.hasEventListener(flash.events.MouseEvent.CLICK))this.dispatchEvent(new flash.events.MouseEvent(flash.events.MouseEvent.CLICK,true,false,this._mouseX,this._mouseY))}};
flash.display.Stage.prototype.canvas_keyevent=function(e){var jsType=e.type;var flashType;switch(jsType){case 'keydown':flashType=flash.events.KeyboardEvent.KEY_DOWN;break;case 'keyup':flashType=flash.events.KeyboardEvent.KEY_UP;break}if(this.hasEventListener(flashType))this.dispatchEvent(new flash.events.KeyboardEvent(flashType,true,false,e.charCode,e.keyCode,e.location,e.ctrlKey,e.altKey,e.shiftKey))};
flash.display.Stage.prototype.canvas_mouseevent=function(e){var jsType=e.type;var flashType;switch(jsType){case 'click':flashType=flash.events.MouseEvent.CLICK;break;case 'contextmenu':flashType=flash.events.MouseEvent.CONTEXT_MENU;break;case 'dblclick':flashType=flash.events.MouseEvent.DOUBLE_CLICK;break;case 'mousedown':flashType=flash.events.MouseEvent.MOUSE_DOWN;break;case 'mouseenter':flashType=flash.events.MouseEvent.ROLL_OVER;break;case 'mouseleave':flashType=flash.events.MouseEvent.MOUSE_OUT;
break;case 'mousemove':flashType=flash.events.MouseEvent.MOUSE_MOVE;break;case 'mouseover':flashType=flash.events.MouseEvent.MOUSE_OVER;break;case 'mouseout':flashType=flash.events.MouseEvent.MOUSE_OUT;break;case 'mouseup':flashType=flash.events.MouseEvent.MOUSE_UP;break;case 'mousewheel':flashType=flash.events.MouseEvent.MOUSE_WHEEL;break}if(flashType){this._mouseX=e.pageX-this.canvas.offsetLeft;this._mouseY=e.pageY-this.canvas.offsetTop;if(this.hasEventListener(flashType))if(flashType!=flash.events.MouseEvent.MOUSE_MOVE)this.dispatchEvent(new flash.events.MouseEvent(flashType,
true,false,this._mouseX,this._mouseY,null,e.ctrlKey,e.altKey,e.shiftKey,e.button>0,e.wheelDelta));else this.needSendMouseMove=true}};
Object.defineProperties(flash.display.Stage.prototype,{frameRate:{get:function(){return this._frameRate},set:function(v){this._frameRate=v}},loaderInfo:{get:function(){return this._loaderInfo}},scaleMode:{get:function(){return null},set:function(param1){}},align:{get:function(){return null},set:function(param1){}},stageWidth:{get:function(){return this._stageWidth},set:function(param1){}},stageHeight:{get:function(){return this._stageHeight},set:function(param1){}},showDefaultContextMenu:{get:function(){return false},
set:function(param1){}},colorCorrection:{get:function(){return null},set:function(param1){}},colorCorrectionSupport:{get:function(){return null}},stageFocusRect:{get:function(){return false},set:function(param1){}},quality:{get:function(){return null},set:function(param1){}},displayState:{get:function(){return document['fullscreen']||document['webkitIsFullScreen']||document['mozFullScreen']?'fullScreen':'normal'},set:function(param1){if(param1.indexOf('fullScreen')!=-1){var requestFunc=this._canvas['requestFullscreen']||
this._canvas['webkitRequestFullScreen']||this._canvas['mozRequestFullScreen']||this._canvas['msRequestFullscreen'];requestFunc.call(this._canvas)}else{var cancelFunc=document['exitFullscreen']||document['webkitExitFullScreen']||document['mozCancelFullScreen']||document['msExitFullscreen'];cancelFunc.call(document)}}},fullScreenSourceRect:{get:function(){return null},set:function(param1){}},mouseLock:{get:function(){return false},set:function(param1){}},stage3Ds:{get:function(){return this._stage3Ds}},
color:{get:function(){return 0},set:function(param1){}},fullScreenWidth:{get:function(){return 0}},fullScreenHeight:{get:function(){return 0}},wmodeGPU:{get:function(){return false}},softKeyboardRect:{get:function(){return null}},allowsFullScreen:{get:function(){return false}},allowsFullScreenInteractive:{get:function(){return false}},contentsScaleFactor:{get:function(){return 0}},browserZoomFactor:{get:function(){return 0}},canvas:{get:function(){if(!this._canvas){this._canvas=org.apache.flex.utils.Language.as(document.createElement('canvas'),
HTMLCanvasElement);this._canvas.addEventListener('click',org.apache.flex.utils.Language.closure(this.canvas_mouseevent,this,'canvas_mouseevent'),false);this._canvas.addEventListener('contextmenu',org.apache.flex.utils.Language.closure(this.canvas_mouseevent,this,'canvas_mouseevent'),false);this._canvas.addEventListener('dblclick',org.apache.flex.utils.Language.closure(this.canvas_mouseevent,this,'canvas_mouseevent'),false);this._canvas.addEventListener('mousedown',org.apache.flex.utils.Language.closure(this.canvas_mouseevent,
this,'canvas_mouseevent'),false);this._canvas.addEventListener('mouseenter',org.apache.flex.utils.Language.closure(this.canvas_mouseevent,this,'canvas_mouseevent'),false);this._canvas.addEventListener('mouseleave',org.apache.flex.utils.Language.closure(this.canvas_mouseevent,this,'canvas_mouseevent'),false);this._canvas.addEventListener('mousemove',org.apache.flex.utils.Language.closure(this.canvas_mouseevent,this,'canvas_mouseevent'),false);this._canvas.addEventListener('mouseover',org.apache.flex.utils.Language.closure(this.canvas_mouseevent,
this,'canvas_mouseevent'),false);this._canvas.addEventListener('mouseout',org.apache.flex.utils.Language.closure(this.canvas_mouseevent,this,'canvas_mouseevent'),false);this._canvas.addEventListener('mouseup',org.apache.flex.utils.Language.closure(this.canvas_mouseevent,this,'canvas_mouseevent'),false);this._canvas.addEventListener('mousewheel',org.apache.flex.utils.Language.closure(this.canvas_mouseevent,this,'canvas_mouseevent'),false);this._canvas.addEventListener('touchcancel',org.apache.flex.utils.Language.closure(this.canvas_touchevent,
this,'canvas_touchevent'),false);this._canvas.addEventListener('touchend',org.apache.flex.utils.Language.closure(this.canvas_touchevent,this,'canvas_touchevent'),false);this._canvas.addEventListener('touchmove',org.apache.flex.utils.Language.closure(this.canvas_touchevent,this,'canvas_touchevent'),false);this._canvas.addEventListener('touchstart',org.apache.flex.utils.Language.closure(this.canvas_touchevent,this,'canvas_touchevent'),false);document.addEventListener('keydown',org.apache.flex.utils.Language.closure(this.canvas_keyevent,
this,'canvas_keyevent'),false);document.addEventListener('keyup',org.apache.flex.utils.Language.closure(this.canvas_keyevent,this,'canvas_keyevent'),false);this._canvas.style.position='absolute';this._canvas.style.left=0;this._canvas.style.top=0;this._canvas.style.zIndex=1;document.body.appendChild(org.apache.flex.utils.Language.as(this._canvas,HTMLCanvasElement))}return this._canvas}},ctx:{get:function(){if(!this._ctx)if(SpriteFlexjs.wmode==='gpu'){this._ctx=new flash.__native.GLCanvasRenderingContext2D(this);
SpriteFlexjs.renderer=new flash.__native.WebGLRenderer}else if(SpriteFlexjs.wmode==='gpu batch'){this._ctx=new flash.__native.GLCanvasRenderingContext2D(this,true);SpriteFlexjs.renderer=new flash.__native.WebGLRenderer}else this._ctx=this.canvas.getContext('2d');return this._ctx}},ctx2d:{get:function(){if(!this._ctx2d){var can=org.apache.flex.utils.Language.as(document.createElement('canvas'),HTMLCanvasElement);this._ctx2d=org.apache.flex.utils.Language.as(can.getContext('2d'),CanvasRenderingContext2D)}return this._ctx2d}},
displayContextInfo:{get:function(){return null}},mouseX:{get:function(){return this._mouseX}},mouseY:{get:function(){return this._mouseY}}});flash.display.Stage.prototype.FLEXJS_CLASS_INFO={names:[{name:'Stage',qName:'flash.display.Stage'}]};goog.exportSymbol('flash.display.Stage',flash.display.Stage);
flash.display.Stage.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'frameRate':{type:'Number',declaredBy:'flash.display.Stage'},'loaderInfo':{type:'LoaderInfo',declaredBy:'flash.display.Stage'},'scaleMode':{type:'String',declaredBy:'flash.display.Stage'},'align':{type:'String',declaredBy:'flash.display.Stage'},'stageWidth':{type:'int',declaredBy:'flash.display.Stage'},'stageHeight':{type:'int',declaredBy:'flash.display.Stage'},'showDefaultContextMenu':{type:'Boolean',
declaredBy:'flash.display.Stage'},'colorCorrection':{type:'String',declaredBy:'flash.display.Stage'},'colorCorrectionSupport':{type:'String',declaredBy:'flash.display.Stage'},'stageFocusRect':{type:'Boolean',declaredBy:'flash.display.Stage'},'quality':{type:'String',declaredBy:'flash.display.Stage'},'displayState':{type:'String',declaredBy:'flash.display.Stage'},'fullScreenSourceRect':{type:'Rectangle',declaredBy:'flash.display.Stage'},'mouseLock':{type:'Boolean',declaredBy:'flash.display.Stage'},
'stage3Ds':{type:'Vector.\x3cStage3D\x3e',declaredBy:'flash.display.Stage'},'color':{type:'uint',declaredBy:'flash.display.Stage'},'fullScreenWidth':{type:'uint',declaredBy:'flash.display.Stage'},'fullScreenHeight':{type:'uint',declaredBy:'flash.display.Stage'},'wmodeGPU':{type:'Boolean',declaredBy:'flash.display.Stage'},'softKeyboardRect':{type:'Rectangle',declaredBy:'flash.display.Stage'},'allowsFullScreen':{type:'Boolean',declaredBy:'flash.display.Stage'},'allowsFullScreenInteractive':{type:'Boolean',
declaredBy:'flash.display.Stage'},'contentsScaleFactor':{type:'Number',declaredBy:'flash.display.Stage'},'browserZoomFactor':{type:'Number',declaredBy:'flash.display.Stage'},'canvas':{type:'HTMLCanvasElement',declaredBy:'flash.display.Stage'},'ctx':{type:'CanvasRenderingContext2D',declaredBy:'flash.display.Stage'},'ctx2d':{type:'CanvasRenderingContext2D',declaredBy:'flash.display.Stage'},'displayContextInfo':{type:'String',declaredBy:'flash.display.Stage'},'mouseX':{type:'Number',declaredBy:'flash.display.Stage'},
'mouseY':{type:'Number',declaredBy:'flash.display.Stage'}}},methods:function(){return{'Stage':{type:'',declaredBy:'flash.display.Stage'},'invalidate':{type:'void',declaredBy:'flash.display.Stage'},'isFocusInaccessible':{type:'Boolean',declaredBy:'flash.display.Stage'}}}}};goog.provide('flash.geom.ColorTransform');
flash.geom.ColorTransform=function(redMultiplier,greenMultiplier,blueMultiplier,alphaMultiplier,redOffset,greenOffset,blueOffset,alphaOffset){redMultiplier=typeof redMultiplier!=='undefined'?redMultiplier:1;greenMultiplier=typeof greenMultiplier!=='undefined'?greenMultiplier:1;blueMultiplier=typeof blueMultiplier!=='undefined'?blueMultiplier:1;alphaMultiplier=typeof alphaMultiplier!=='undefined'?alphaMultiplier:1;redOffset=typeof redOffset!=='undefined'?redOffset:0;greenOffset=typeof greenOffset!==
'undefined'?greenOffset:0;blueOffset=typeof blueOffset!=='undefined'?blueOffset:0;alphaOffset=typeof alphaOffset!=='undefined'?alphaOffset:0;this.redMultiplier=redMultiplier;this.greenMultiplier=greenMultiplier;this.blueMultiplier=blueMultiplier;this.alphaMultiplier=alphaMultiplier;this.redOffset=redOffset;this.greenOffset=greenOffset;this.blueOffset=blueOffset;this.alphaOffset=alphaOffset};flash.geom.ColorTransform.prototype._redMultiplier;flash.geom.ColorTransform.prototype._greenMultiplier;flash.geom.ColorTransform.prototype._blueMultiplier;
flash.geom.ColorTransform.prototype._alphaMultiplier;flash.geom.ColorTransform.prototype.redOffset;flash.geom.ColorTransform.prototype.greenOffset;flash.geom.ColorTransform.prototype.blueOffset;flash.geom.ColorTransform.prototype.alphaOffset;flash.geom.ColorTransform.prototype.tint=4294967295;
flash.geom.ColorTransform.prototype.concat=function(second){this.alphaOffset=this.alphaOffset+this.alphaMultiplier*second.alphaOffset;this.alphaMultiplier=this.alphaMultiplier*second.alphaMultiplier;this.redOffset=this.redOffset+this.redMultiplier*second.redOffset;this.redMultiplier=this.redMultiplier*second.redMultiplier;this.greenOffset=this.greenOffset+this.greenMultiplier*second.greenOffset;this.greenMultiplier=this.greenMultiplier*second.greenMultiplier;this.blueOffset=this.blueOffset+this.blueMultiplier*
second.blueOffset;this.blueMultiplier=this.blueMultiplier*second.blueMultiplier};flash.geom.ColorTransform.prototype.toString=function(){return'(redMultiplier\x3d'+this.redMultiplier+', greenMultiplier\x3d'+this.greenMultiplier+', blueMultiplier\x3d'+this.blueMultiplier+', alphaMultiplier\x3d'+this.alphaMultiplier+', redOffset\x3d'+this.redOffset+', greenOffset\x3d'+this.greenOffset+', blueOffset\x3d'+this.blueOffset+', alphaOffset\x3d'+this.alphaOffset+')'};
Object.defineProperties(flash.geom.ColorTransform.prototype,{color:{get:function(){return this.redOffset<<16|this.greenOffset<<8|this.blueOffset},set:function(newColor){this.redMultiplier=this.greenMultiplier=this.blueMultiplier=0;this.redOffset=newColor>>16&255;this.greenOffset=newColor>>8&255;this.blueOffset=newColor&255}},redMultiplier:{get:function(){return this._redMultiplier},set:function(value){this._redMultiplier=value;this.tint=this._redMultiplier*255<<0|this._greenMultiplier*255<<8|this._blueMultiplier*
255<<16|this._alphaMultiplier*255<<24}},greenMultiplier:{get:function(){return this._greenMultiplier},set:function(value){this._greenMultiplier=value;this.tint=this._redMultiplier*255<<0|this._greenMultiplier*255<<8|this._blueMultiplier*255<<16|this._alphaMultiplier*255<<24}},blueMultiplier:{get:function(){return this._blueMultiplier},set:function(value){this._blueMultiplier=value;this.tint=this._redMultiplier*255<<0|this._greenMultiplier*255<<8|this._blueMultiplier*255<<16|this._alphaMultiplier*
255<<24}},alphaMultiplier:{get:function(){return this._alphaMultiplier},set:function(value){this._alphaMultiplier=value;this.tint=this._redMultiplier*255<<0|this._greenMultiplier*255<<8|this._blueMultiplier*255<<16|this._alphaMultiplier*255<<24}}});flash.geom.ColorTransform.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColorTransform',qName:'flash.geom.ColorTransform'}]};goog.exportSymbol('flash.geom.ColorTransform',flash.geom.ColorTransform);
flash.geom.ColorTransform.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'redOffset':{type:'Number'},'greenOffset':{type:'Number'},'blueOffset':{type:'Number'},'alphaOffset':{type:'Number'},'tint':{type:'uint'}}},accessors:function(){return{'color':{type:'uint',declaredBy:'flash.geom.ColorTransform'},'redMultiplier':{type:'Number',declaredBy:'flash.geom.ColorTransform'},'greenMultiplier':{type:'Number',declaredBy:'flash.geom.ColorTransform'},'blueMultiplier':{type:'Number',
declaredBy:'flash.geom.ColorTransform'},'alphaMultiplier':{type:'Number',declaredBy:'flash.geom.ColorTransform'}}},methods:function(){return{'ColorTransform':{type:'',declaredBy:'flash.geom.ColorTransform'},'concat':{type:'void',declaredBy:'flash.geom.ColorTransform'},'toString':{type:'String',declaredBy:'flash.geom.ColorTransform'}}}}};goog.provide('flash.geom.Transform');goog.require('flash.geom.ColorTransform');flash.geom.Transform=function(displayObject){this._matrix=new flash.geom.Matrix;this._colorTransform=new flash.geom.ColorTransform;this._concatenatedColorTransform=new flash.geom.ColorTransform;this._concatenatedMatrix=new flash.geom.Matrix;this._invMatrix=new flash.geom.Matrix;this.ctor(displayObject)};flash.geom.Transform.prototype._matrix;flash.geom.Transform.prototype._colorTransform;flash.geom.Transform.prototype._concatenatedColorTransform;
flash.geom.Transform.prototype.colorDirty=true;flash.geom.Transform.prototype.dirty=true;flash.geom.Transform.prototype._concatenatedMatrix;flash.geom.Transform.prototype.invDirty=true;flash.geom.Transform.prototype._invMatrix;flash.geom.Transform.prototype.displayObject;flash.geom.Transform.prototype.ctor=function(displayObject){this.displayObject=displayObject};flash.geom.Transform.prototype.getRelativeMatrix3D=function(param1){return null};
flash.geom.Transform.prototype.updateTransforms=function(){this.dirty=true;this.invDirty=true};flash.geom.Transform.prototype.updateColorTransforms=function(){this.colorDirty=true};
Object.defineProperties(flash.geom.Transform.prototype,{matrix:{get:function(){return this._matrix},set:function(v){this._matrix=v;this.updateTransforms()}},colorTransform:{get:function(){return this._colorTransform},set:function(v){this._colorTransform=v;this.updateColorTransforms()}},concatenatedMatrix:{get:function(){if(this.dirty){this._concatenatedMatrix.copyFrom(this.matrix);if(this.displayObject.parent)this._concatenatedMatrix.concat(this.displayObject.parent.transform.concatenatedMatrix);
this.dirty=false}return this._concatenatedMatrix}},concatenatedColorTransform:{get:function(){if(this.colorDirty){this._concatenatedColorTransform.alphaOffset=this._colorTransform.alphaOffset;this._concatenatedColorTransform.alphaMultiplier=this._colorTransform.alphaMultiplier;this._concatenatedColorTransform.redOffset=this._colorTransform.redOffset;this._concatenatedColorTransform.redMultiplier=this._colorTransform.redMultiplier;this._concatenatedColorTransform.greenOffset=this._colorTransform.greenOffset;
this._concatenatedColorTransform.greenMultiplier=this._colorTransform.greenMultiplier;this._concatenatedColorTransform.blueOffset=this._colorTransform.blueOffset;this._concatenatedColorTransform.blueMultiplier=this._colorTransform.blueMultiplier;if(this.displayObject.parent)this._concatenatedColorTransform.concat(this.displayObject.parent.transform.concatenatedColorTransform);this.colorDirty=false}return this._concatenatedColorTransform}},pixelBounds:{get:function(){return null}},matrix3D:{get:function(){return null},
set:function(param1){}},perspectiveProjection:{get:function(){return null},set:function(param1){}},invMatrix:{get:function(){if(this.invDirty){this._invMatrix.copyFrom(this.concatenatedMatrix);this._invMatrix.invert();this.invDirty=false}return this._invMatrix}}});flash.geom.Transform.prototype.FLEXJS_CLASS_INFO={names:[{name:'Transform',qName:'flash.geom.Transform'}]};goog.exportSymbol('flash.geom.Transform',flash.geom.Transform);
flash.geom.Transform.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'matrix':{type:'Matrix',declaredBy:'flash.geom.Transform'},'colorTransform':{type:'ColorTransform',declaredBy:'flash.geom.Transform'},'concatenatedMatrix':{type:'Matrix',declaredBy:'flash.geom.Transform'},'concatenatedColorTransform':{type:'ColorTransform',declaredBy:'flash.geom.Transform'},'pixelBounds':{type:'Rectangle',declaredBy:'flash.geom.Transform'},'matrix3D':{type:'Matrix3D',
declaredBy:'flash.geom.Transform'},'perspectiveProjection':{type:'PerspectiveProjection',declaredBy:'flash.geom.Transform'},'invMatrix':{type:'Matrix',declaredBy:'flash.geom.Transform'}}},methods:function(){return{'Transform':{type:'',declaredBy:'flash.geom.Transform'},'getRelativeMatrix3D':{type:'Matrix3D',declaredBy:'flash.geom.Transform'},'updateTransforms':{type:'void',declaredBy:'flash.geom.Transform'},'updateColorTransforms':{type:'void',declaredBy:'flash.geom.Transform'}}}}};goog.provide('flash.utils.getTimer');flash.utils.getTimer=function(){return Date.now()-SpriteFlexjs.startTime};goog.provide('flash.display.DisplayObject');goog.require('SpriteFlexjs');goog.require('flash.display.Stage');goog.require('flash.events.EventDispatcher');goog.require('flash.events.MouseEvent');goog.require('flash.geom.Point');goog.require('flash.geom.Transform');goog.require('flash.utils.getTimer');goog.require('flash.display.IBitmapDrawable');goog.require('org.apache.flex.utils.Language');
flash.display.DisplayObject=function(){flash.display.DisplayObject.base(this,'constructor');this.transform=new flash.geom.Transform(this);this.innerID=flash.display.DisplayObject.ID++;this.name='instance'+this.innerID;if(this.innerID===0){this._stage=new flash.display.Stage;this._stage.addEventListener(flash.events.Event.ENTER_FRAME,org.apache.flex.utils.Language.closure(this.__enterFrame,this,'__enterFrame'));this._stage.addEventListener(flash.events.MouseEvent.CLICK,org.apache.flex.utils.Language.closure(this.__mouseevent,
this,'__mouseevent'));this._stage.addEventListener(flash.events.MouseEvent.CONTEXT_MENU,org.apache.flex.utils.Language.closure(this.__mouseevent,this,'__mouseevent'));this._stage.addEventListener(flash.events.MouseEvent.DOUBLE_CLICK,org.apache.flex.utils.Language.closure(this.__mouseevent,this,'__mouseevent'));this._stage.addEventListener(flash.events.MouseEvent.MOUSE_DOWN,org.apache.flex.utils.Language.closure(this.__mouseevent,this,'__mouseevent'));this._stage.addEventListener(flash.events.MouseEvent.MOUSE_MOVE,
org.apache.flex.utils.Language.closure(this.__mouseevent,this,'__mouseevent'));this._stage.addEventListener(flash.events.MouseEvent.MOUSE_UP,org.apache.flex.utils.Language.closure(this.__mouseevent,this,'__mouseevent'))}};goog.inherits(flash.display.DisplayObject,flash.events.EventDispatcher);flash.display.DisplayObject.ID=0;flash.display.DisplayObject.prototype.innerID;flash.display.DisplayObject.prototype._name;flash.display.DisplayObject.prototype._stage;
flash.display.DisplayObject.prototype._rotation=0;flash.display.DisplayObject.prototype.rsin=0;flash.display.DisplayObject.prototype.rcos=1;flash.display.DisplayObject.prototype.transform;flash.display.DisplayObject.prototype._parent;flash.display.DisplayObject.prototype._visible=true;flash.display.DisplayObject.prototype.lastMouseOverObj;flash.display.DisplayObject.prototype._blendMode;flash.display.DisplayObject.prototype.updateTransforms=function(){this.transform.updateTransforms()};
flash.display.DisplayObject.prototype.globalToLocal=function(v){return this.transform.invMatrix.transformPoint(v)};flash.display.DisplayObject.prototype.localToGlobal=function(v){return this.transform.concatenatedMatrix.transformPoint(v)};flash.display.DisplayObject.prototype.getBounds=function(v){return this.getRect(v)};flash.display.DisplayObject.prototype.getRect=function(v){var rect=this.__getRect();if(rect){if(v==null||v==this)return rect;var ps=[rect.topLeft,rect.bottomRight]}return this.__getRect()};
flash.display.DisplayObject.prototype.__getRect=function(){return null};flash.display.DisplayObject.prototype.hitTestObject=function(obj){return false};flash.display.DisplayObject.prototype.hitTestPoint=function(x,y,shapeFlag){shapeFlag=typeof shapeFlag!=='undefined'?shapeFlag:false;var rect=this.__getRect();if(rect)return rect.containsPoint(this.globalToLocal(new flash.geom.Point(x,y)));return false};flash.display.DisplayObject.prototype.globalToLocal3D=function(param1){return null};
flash.display.DisplayObject.prototype.local3DToGlobal=function(param1){return null};flash.display.DisplayObject.prototype.__update=function(ctx){};flash.display.DisplayObject.prototype.__enterFrame=function(e){var ctx=this.stage.ctx;ctx.setTransform(1,0,0,1,0,0);ctx.clearRect(0,0,this.stage.stageWidth,this.stage.stageHeight);SpriteFlexjs.drawCounter=0;SpriteFlexjs.renderer.start(ctx);this.__update(ctx);SpriteFlexjs.renderer.finish(ctx)};
flash.display.DisplayObject.prototype.__mouseevent=function(e){var time=flash.utils.getTimer();var obj=this.__doMouse(e);time=flash.utils.getTimer();if(e.type===flash.events.MouseEvent.MOUSE_MOVE){var t=this.lastMouseOverObj;while(t){if(t==obj)break;else{t.dispatchEvent(new flash.events.MouseEvent(flash.events.MouseEvent.MOUSE_OUT,false,false,e.localX,e.localY));t.dispatchEvent(new flash.events.MouseEvent(flash.events.MouseEvent.ROLL_OVER,false,false,e.localX,e.localY))}t=t.parent}var over=new flash.events.MouseEvent(flash.events.MouseEvent.MOUSE_OVER,
true,false,e.localX,e.localY);var rollover=new flash.events.MouseEvent(flash.events.MouseEvent.ROLL_OVER,true,false,e.localX,e.localY);if(obj&&obj!=t){obj.dispatchEvent(over);obj.dispatchEvent(rollover)}this.lastMouseOverObj=obj}if(obj)obj.dispatchEvent(e);if(SpriteFlexjs.debug)org.apache.flex.utils.Language.trace('__dispatchmouseevent',flash.utils.getTimer()-time)};flash.display.DisplayObject.prototype.__doMouse=function(e){return null};
flash.display.DisplayObject.prototype.dispatchEvent=function(event){var b=flash.display.DisplayObject.base(this,'dispatchEvent',event);if(event.bubbles&&this.parent)this.parent.dispatchEvent(event);return b};
Object.defineProperties(flash.display.DisplayObject.prototype,{stage:{get:function(){return this._stage},set:function(v){if(this._stage!=v){this._stage=v;if(this._stage)this.dispatchEvent(new flash.events.Event(flash.events.Event.ADDED_TO_STAGE));else this.dispatchEvent(new flash.events.Event(flash.events.Event.REMOVED_FROM_STAGE))}}},root:{get:function(){return null}},name:{get:function(){return this._name},set:function(v){this._name=v}},parent:{get:function(){return this._parent}},mask:{get:function(){return null},
set:function(param1){}},visible:{get:function(){return this._visible},set:function(v){this._visible=v}},x:{get:function(){return this.transform.matrix.tx},set:function(v){this.transform.matrix.tx=v;this.updateTransforms()}},y:{get:function(){return this.transform.matrix.ty},set:function(v){this.transform.matrix.ty=v;this.updateTransforms()}},z:{get:function(){return 0},set:function(v){}},scaleX:{get:function(){var m=this.transform.matrix;if(m.b===0)return m.a;return Math.sqrt(m.a*m.a+m.b*m.b)},set:function(v){var m=
this.transform.matrix;if(m.c===0)m.a=v;else{m.a=this.rcos*v;m.b=this.rsin*v}this.updateTransforms()}},scaleY:{get:function(){var m=this.transform.matrix;if(m.c===0)return m.d;return Math.sqrt(m.c*m.c+m.d*m.d)},set:function(v){var m=this.transform.matrix;if(m.c===0)m.d=v;else{m.c=-this.rsin*v;m.d=this.rcos*v}this.updateTransforms()}},scaleZ:{get:function(){return 1},set:function(v){}},mouseX:{get:function(){if(this.stage)return this.transform.invMatrix.transformPoint(new flash.geom.Point(this.stage.mouseX,
this.stage.mouseY)).x;return 0}},mouseY:{get:function(){if(this.stage)return this.transform.invMatrix.transformPoint(new flash.geom.Point(this.stage.mouseX,this.stage.mouseY)).y;return 0}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v;var m=this.transform.matrix;var r=v*Math.PI/180;this.rsin=Math.sin(r);this.rcos=Math.cos(r);var sx=m.b===0?m.a:Math.sqrt(m.a*m.a+m.b*m.b);var sy=m.c===0?m.d:Math.sqrt(m.c*m.c+m.d*m.d);m.a=this.rcos*sx;m.b=this.rsin*sx;m.c=-this.rsin*
sy;m.d=this.rcos*sy;this.updateTransforms()}},rotationX:{get:function(){return 0},set:function(v){}},rotationY:{get:function(){return 0},set:function(v){}},rotationZ:{get:function(){return 0},set:function(v){}},alpha:{get:function(){return this.transform.colorTransform.alphaMultiplier},set:function(v){this.transform.colorTransform.alphaMultiplier=v;this.transform.updateColorTransforms()}},width:{get:function(){var rect=this.getRect(this.parent);if(rect)return rect.width;return 0},set:function(v){}},
height:{get:function(){var rect=this.getRect(this.parent);if(rect)return rect.height;return 0},set:function(v){}},cacheAsBitmap:{get:function(){return false},set:function(v){}},opaqueBackground:{get:function(){return null},set:function(v){}},scrollRect:{get:function(){return null},set:function(v){}},filters:{get:function(){return null},set:function(v){}},blendMode:{get:function(){return this._blendMode},set:function(v){this._blendMode=v}},scale9Grid:{get:function(){return null},set:function(v){}},
metaData:{get:function(){return null},set:function(param1){}}});flash.display.DisplayObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'DisplayObject',qName:'flash.display.DisplayObject'}],interfaces:[flash.display.IBitmapDrawable]};goog.exportSymbol('flash.display.DisplayObject',flash.display.DisplayObject);
flash.display.DisplayObject.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'innerID':{type:'int'},'transform':{type:'Transform'},'_parent':{type:'DisplayObjectContainer'}}},accessors:function(){return{'stage':{type:'Stage',declaredBy:'flash.display.DisplayObject'},'root':{type:'DisplayObject',declaredBy:'flash.display.DisplayObject'},'name':{type:'String',declaredBy:'flash.display.DisplayObject'},'parent':{type:'DisplayObjectContainer',declaredBy:'flash.display.DisplayObject'},
'mask':{type:'DisplayObject',declaredBy:'flash.display.DisplayObject'},'visible':{type:'Boolean',declaredBy:'flash.display.DisplayObject'},'x':{type:'Number',declaredBy:'flash.display.DisplayObject'},'y':{type:'Number',declaredBy:'flash.display.DisplayObject'},'z':{type:'Number',declaredBy:'flash.display.DisplayObject'},'scaleX':{type:'Number',declaredBy:'flash.display.DisplayObject'},'scaleY':{type:'Number',declaredBy:'flash.display.DisplayObject'},'scaleZ':{type:'Number',declaredBy:'flash.display.DisplayObject'},
'mouseX':{type:'Number',declaredBy:'flash.display.DisplayObject'},'mouseY':{type:'Number',declaredBy:'flash.display.DisplayObject'},'rotation':{type:'Number',declaredBy:'flash.display.DisplayObject'},'rotationX':{type:'Number',declaredBy:'flash.display.DisplayObject'},'rotationY':{type:'Number',declaredBy:'flash.display.DisplayObject'},'rotationZ':{type:'Number',declaredBy:'flash.display.DisplayObject'},'alpha':{type:'Number',declaredBy:'flash.display.DisplayObject'},'width':{type:'Number',declaredBy:'flash.display.DisplayObject'},
'height':{type:'Number',declaredBy:'flash.display.DisplayObject'},'cacheAsBitmap':{type:'Boolean',declaredBy:'flash.display.DisplayObject'},'opaqueBackground':{type:'Object',declaredBy:'flash.display.DisplayObject'},'scrollRect':{type:'Rectangle',declaredBy:'flash.display.DisplayObject'},'filters':{type:'Array',declaredBy:'flash.display.DisplayObject'},'blendMode':{type:'String',declaredBy:'flash.display.DisplayObject'},'scale9Grid':{type:'Rectangle',declaredBy:'flash.display.DisplayObject'},'metaData':{type:'Object',
declaredBy:'flash.display.DisplayObject'}}},methods:function(){return{'DisplayObject':{type:'',declaredBy:'flash.display.DisplayObject'},'updateTransforms':{type:'void',declaredBy:'flash.display.DisplayObject'},'globalToLocal':{type:'Point',declaredBy:'flash.display.DisplayObject'},'localToGlobal':{type:'Point',declaredBy:'flash.display.DisplayObject'},'getBounds':{type:'Rectangle',declaredBy:'flash.display.DisplayObject'},'getRect':{type:'Rectangle',declaredBy:'flash.display.DisplayObject'},'__getRect':{type:'Rectangle',
declaredBy:'flash.display.DisplayObject'},'hitTestObject':{type:'Boolean',declaredBy:'flash.display.DisplayObject'},'hitTestPoint':{type:'Boolean',declaredBy:'flash.display.DisplayObject'},'globalToLocal3D':{type:'Vector3D',declaredBy:'flash.display.DisplayObject'},'local3DToGlobal':{type:'Point',declaredBy:'flash.display.DisplayObject'},'__update':{type:'void',declaredBy:'flash.display.DisplayObject'},'dispatchEvent':{type:'Boolean',declaredBy:'flash.display.DisplayObject'}}}}};goog.provide('flash.display.InteractiveObject');goog.require('flash.display.DisplayObject');goog.require('org.apache.flex.utils.Language');flash.display.InteractiveObject=function(){flash.display.InteractiveObject.base(this,'constructor')};goog.inherits(flash.display.InteractiveObject,flash.display.DisplayObject);flash.display.InteractiveObject.prototype._mouseEnabled=true;flash.display.InteractiveObject.prototype._doubleClickEnabled=false;
flash.display.InteractiveObject.prototype.requestSoftKeyboard=function(){return false};
Object.defineProperties(flash.display.InteractiveObject.prototype,{tabEnabled:{get:function(){return true},set:function(param1){}},tabIndex:{get:function(){return 0},set:function(param1){}},focusRect:{get:function(){return null},set:function(param1){}},mouseEnabled:{get:function(){return this._mouseEnabled},set:function(v){this._mouseEnabled=v}},doubleClickEnabled:{get:function(){return this._doubleClickEnabled},set:function(v){this._doubleClickEnabled=v}},softKeyboardInputAreaOfInterest:{get:function(){return null},
set:function(param1){}},needsSoftKeyboard:{get:function(){return false},set:function(param1){}}});flash.display.InteractiveObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'InteractiveObject',qName:'flash.display.InteractiveObject'}]};goog.exportSymbol('flash.display.InteractiveObject',flash.display.InteractiveObject);
flash.display.InteractiveObject.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'tabEnabled':{type:'Boolean',declaredBy:'flash.display.InteractiveObject'},'tabIndex':{type:'int',declaredBy:'flash.display.InteractiveObject'},'focusRect':{type:'Object',declaredBy:'flash.display.InteractiveObject'},'mouseEnabled':{type:'Boolean',declaredBy:'flash.display.InteractiveObject'},'doubleClickEnabled':{type:'Boolean',declaredBy:'flash.display.InteractiveObject'},
'softKeyboardInputAreaOfInterest':{type:'Rectangle',declaredBy:'flash.display.InteractiveObject'},'needsSoftKeyboard':{type:'Boolean',declaredBy:'flash.display.InteractiveObject'}}},methods:function(){return{'InteractiveObject':{type:'',declaredBy:'flash.display.InteractiveObject'},'requestSoftKeyboard':{type:'Boolean',declaredBy:'flash.display.InteractiveObject'}}}}};goog.provide('flash.display.DisplayObjectContainer');goog.require('flash.display.InteractiveObject');goog.require('org.apache.flex.utils.Language');flash.display.DisplayObjectContainer=function(){this.children=[];flash.display.DisplayObjectContainer.base(this,'constructor')};goog.inherits(flash.display.DisplayObjectContainer,flash.display.InteractiveObject);flash.display.DisplayObjectContainer.prototype.children;flash.display.DisplayObjectContainer.prototype._mouseChildren=true;
flash.display.DisplayObjectContainer.prototype.addChild=function(child){return this.addChildAt(child,this.children.length)};flash.display.DisplayObjectContainer.prototype.addChildAt=function(child,index){var i=this.children.indexOf(child);if(i!=-1)this.children.splice(i,1);this.children.splice(index,0,child);child.stage=this.stage;child._parent=this;return child};
flash.display.DisplayObjectContainer.prototype.removeChild=function(child){var i=this.children.indexOf(child);if(i!=-1)return this.removeChildAt(i);return child};flash.display.DisplayObjectContainer.prototype.removeChildAt=function(i){var child=this.children[i];if(child){child._parent=null;child.stage=null}this.children.splice(i,1);return child};flash.display.DisplayObjectContainer.prototype.getChildIndex=function(child){return this.children.indexOf(child)};
flash.display.DisplayObjectContainer.prototype.setChildIndex=function(child,index){this.removeChild(child);this.addChildAt(child,index)};flash.display.DisplayObjectContainer.prototype.getChildAt=function(index){return this.children[index]};flash.display.DisplayObjectContainer.prototype.getChildByName=function(name){var len=this.children.length;for(var i=0;i<len;i++){var c=this.children[i];if(c.name===name)return c}return null};flash.display.DisplayObjectContainer.prototype.getObjectsUnderPoint=function(p){return null};
flash.display.DisplayObjectContainer.prototype.areInaccessibleObjectsUnderPoint=function(p){return false};flash.display.DisplayObjectContainer.prototype.contains=function(child){return this.children.indexOf(child)!=-1};flash.display.DisplayObjectContainer.prototype.swapChildrenAt=function(i1,i2){var temp=this.children[i1];this.children[i1]=this.children[i2];this.children[i2]=temp};
flash.display.DisplayObjectContainer.prototype.swapChildren=function(c1,c2){this.swapChildrenAt(this.getChildIndex(c1),this.getChildIndex(c2))};flash.display.DisplayObjectContainer.prototype.removeChildren=function(start,len){start=typeof start!=='undefined'?start:0;len=typeof len!=='undefined'?len:2147483647;for(var i=Math.min(this.numChildren-1,start+len-1);i>=start;i--)this.removeChildAt(i)};flash.display.DisplayObjectContainer.prototype.stopAllMovieClips=function(){};
flash.display.DisplayObjectContainer.prototype.__update=function(ctx){if(this.visible){var len=this.children.length;for(var i=0;i<len;i++){var c=this.children[i];c.__update(ctx)}}};flash.display.DisplayObjectContainer.prototype.updateTransforms=function(){flash.display.DisplayObjectContainer.base(this,'updateTransforms');var len=this.children.length;for(var i=0;i<len;i++){var c=this.children[i];c.updateTransforms()}};
flash.display.DisplayObjectContainer.prototype.__doMouse=function(e){if(this.mouseEnabled&&this.mouseChildren&&this.visible)for(var i=this.children.length-1;i>=0;i--){var obj=this.children[i].__doMouse(e);if(obj)return obj}return null};flash.display.DisplayObjectContainer.prototype.getRect=function(v){var rect=flash.display.DisplayObjectContainer.base(this,'getRect',v);var len=this.children.length;for(var i=0;i<len;i++){var c=this.children[i];var rect1=c.getRect(v);if(rect==null)rect=rect1;else if(rect1)rect.union(rect1)}return rect};
Object.defineProperties(flash.display.DisplayObjectContainer.prototype,{numChildren:{get:function(){return this.children.length}},stage:{get:function(){return this._stage},set:function(v){if(this._stage!=v){this._stage=v;if(this._stage)this.dispatchEvent(new flash.events.Event(flash.events.Event.ADDED_TO_STAGE));else this.dispatchEvent(new flash.events.Event(flash.events.Event.REMOVED_FROM_STAGE))}var len=this.children.length;for(var i=0;i<len;i++){var c=this.children[i];c.stage=v}}},tabChildren:{get:function(){return false},
set:function(v){}},mouseChildren:{get:function(){return this._mouseChildren},set:function(v){this._mouseChildren=v}}});flash.display.DisplayObjectContainer.prototype.FLEXJS_CLASS_INFO={names:[{name:'DisplayObjectContainer',qName:'flash.display.DisplayObjectContainer'}]};goog.exportSymbol('flash.display.DisplayObjectContainer',flash.display.DisplayObjectContainer);
flash.display.DisplayObjectContainer.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'numChildren':{type:'int',declaredBy:'flash.display.DisplayObjectContainer'},'stage':{type:'Stage',declaredBy:'flash.display.DisplayObjectContainer'},'tabChildren':{type:'Boolean',declaredBy:'flash.display.DisplayObjectContainer'},'mouseChildren':{type:'Boolean',declaredBy:'flash.display.DisplayObjectContainer'}}},methods:function(){return{'DisplayObjectContainer':{type:'',
declaredBy:'flash.display.DisplayObjectContainer'},'addChild':{type:'DisplayObject',declaredBy:'flash.display.DisplayObjectContainer'},'addChildAt':{type:'DisplayObject',declaredBy:'flash.display.DisplayObjectContainer'},'removeChild':{type:'DisplayObject',declaredBy:'flash.display.DisplayObjectContainer'},'removeChildAt':{type:'DisplayObject',declaredBy:'flash.display.DisplayObjectContainer'},'getChildIndex':{type:'int',declaredBy:'flash.display.DisplayObjectContainer'},'setChildIndex':{type:'void',
declaredBy:'flash.display.DisplayObjectContainer'},'getChildAt':{type:'DisplayObject',declaredBy:'flash.display.DisplayObjectContainer'},'getChildByName':{type:'DisplayObject',declaredBy:'flash.display.DisplayObjectContainer'},'getObjectsUnderPoint':{type:'Array',declaredBy:'flash.display.DisplayObjectContainer'},'areInaccessibleObjectsUnderPoint':{type:'Boolean',declaredBy:'flash.display.DisplayObjectContainer'},'contains':{type:'Boolean',declaredBy:'flash.display.DisplayObjectContainer'},'swapChildrenAt':{type:'void',
declaredBy:'flash.display.DisplayObjectContainer'},'swapChildren':{type:'void',declaredBy:'flash.display.DisplayObjectContainer'},'removeChildren':{type:'void',declaredBy:'flash.display.DisplayObjectContainer'},'stopAllMovieClips':{type:'void',declaredBy:'flash.display.DisplayObjectContainer'},'__update':{type:'void',declaredBy:'flash.display.DisplayObjectContainer'},'updateTransforms':{type:'void',declaredBy:'flash.display.DisplayObjectContainer'},'getRect':{type:'Rectangle',declaredBy:'flash.display.DisplayObjectContainer'}}}}};goog.provide('flash.display.GradientType');flash.display.GradientType=function(){};flash.display.GradientType.LINEAR='linear';flash.display.GradientType.RADIAL='radial';flash.display.GradientType.prototype.FLEXJS_CLASS_INFO={names:[{name:'GradientType',qName:'flash.display.GradientType'}]};goog.exportSymbol('flash.display.GradientType',flash.display.GradientType);
flash.display.GradientType.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'GradientType':{type:'',declaredBy:'flash.display.GradientType'}}}}};goog.provide('flash.display.GraphicsGradientFill');goog.require('flash.display.GradientType');goog.require('flash.display.IGraphicsData');goog.require('flash.display.IGraphicsFill');
flash.display.GraphicsGradientFill=function(type,colors,alphas,ratios,matrix,spreadMethod,interpolationMethod,focalPointRatio){type=typeof type!=='undefined'?type:'linear';colors=typeof colors!=='undefined'?colors:null;alphas=typeof alphas!=='undefined'?alphas:null;ratios=typeof ratios!=='undefined'?ratios:null;matrix=typeof matrix!=='undefined'?matrix:null;spreadMethod=typeof spreadMethod!=='undefined'?spreadMethod:'pad';interpolationMethod=typeof interpolationMethod!=='undefined'?interpolationMethod:
'rgb';focalPointRatio=typeof focalPointRatio!=='undefined'?focalPointRatio:0;this._type=type;this.colors=colors;this.alphas=alphas;this.ratios=ratios;this.matrix=matrix;this._spreadMethod=spreadMethod;this._interpolationMethod=interpolationMethod;this.focalPointRatio=focalPointRatio};flash.display.GraphicsGradientFill.prototype._type;flash.display.GraphicsGradientFill.prototype.colors;flash.display.GraphicsGradientFill.prototype.alphas;flash.display.GraphicsGradientFill.prototype.ratios;flash.display.GraphicsGradientFill.prototype.matrix;
flash.display.GraphicsGradientFill.prototype._spreadMethod;flash.display.GraphicsGradientFill.prototype._interpolationMethod;flash.display.GraphicsGradientFill.prototype.focalPointRatio;flash.display.GraphicsGradientFill.prototype.gradient;
flash.display.GraphicsGradientFill.prototype.draw=function(ctx,colorTransform){if(this.gradient==null)if(this.type===flash.display.GradientType.LINEAR)this.gradient=ctx.createLinearGradient(0,0,1,1);else this.gradient=ctx.createRadialGradient(0,0,1,0,0,1);ctx.fillStyle=this.gradient};
flash.display.GraphicsGradientFill.prototype.gldraw=function(ctx,colorTransform){if(this.gradient==null)if(this.type==flash.display.GradientType.LINEAR)this.gradient=ctx.createLinearGradient(0,0,1,1);else this.gradient=ctx.createRadialGradient(0,0,1,0,0,1);ctx.fillStyle=org.apache.flex.utils.Language.as(this.gradient,String);ctx.fillStyleIsImage=false};
Object.defineProperties(flash.display.GraphicsGradientFill.prototype,{type:{get:function(){return this._type},set:function(value){this._type=value}},spreadMethod:{get:function(){return this._spreadMethod},set:function(value){this._spreadMethod=value}},interpolationMethod:{get:function(){return this._interpolationMethod},set:function(value){this._interpolationMethod=value}}});
flash.display.GraphicsGradientFill.prototype.FLEXJS_CLASS_INFO={names:[{name:'GraphicsGradientFill',qName:'flash.display.GraphicsGradientFill'}],interfaces:[flash.display.IGraphicsFill,flash.display.IGraphicsData]};goog.exportSymbol('flash.display.GraphicsGradientFill',flash.display.GraphicsGradientFill);
flash.display.GraphicsGradientFill.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'colors':{type:'Array'},'alphas':{type:'Array'},'ratios':{type:'Array'},'matrix':{type:'Matrix'},'focalPointRatio':{type:'Number'}}},accessors:function(){return{'type':{type:'String',declaredBy:'flash.display.GraphicsGradientFill'},'spreadMethod':{type:'String',declaredBy:'flash.display.GraphicsGradientFill'},'interpolationMethod':{type:'String',declaredBy:'flash.display.GraphicsGradientFill'}}},
methods:function(){return{'GraphicsGradientFill':{type:'',declaredBy:'flash.display.GraphicsGradientFill'},'draw':{type:'void',declaredBy:'flash.display.GraphicsGradientFill'},'gldraw':{type:'void',declaredBy:'flash.display.GraphicsGradientFill'}}}}};goog.provide('flash.display.GraphicsSolidFill');goog.require('flash.display.IGraphicsData');goog.require('flash.display.IGraphicsFill');flash.display.GraphicsSolidFill=function(color,alpha){color=typeof color!=='undefined'?color:0;alpha=typeof alpha!=='undefined'?alpha:1;this._glcolor=[];this.color=color;this.alpha=alpha;this.cssColor='rgba('+(color>>16&255)+','+(color>>8&255)+','+(color&255)+','+this.alpha+')'};flash.display.GraphicsSolidFill.prototype.color=0;
flash.display.GraphicsSolidFill.prototype.alpha=1;flash.display.GraphicsSolidFill.prototype.cssColor;flash.display.GraphicsSolidFill.prototype._glcolor;flash.display.GraphicsSolidFill.prototype.draw=function(ctx,colorTransform){ctx.fillStyle=SpriteFlexjs.renderer.getCssColor(this.color,this.alpha,colorTransform,null)};
flash.display.GraphicsSolidFill.prototype.gldraw=function(ctx,colorTransform){ctx.fillStyle=SpriteFlexjs.renderer.getCssColor(this.color,this.alpha,colorTransform,this._glcolor);ctx.fillStyleIsImage=false};flash.display.GraphicsSolidFill.prototype.FLEXJS_CLASS_INFO={names:[{name:'GraphicsSolidFill',qName:'flash.display.GraphicsSolidFill'}],interfaces:[flash.display.IGraphicsFill,flash.display.IGraphicsData]};goog.exportSymbol('flash.display.GraphicsSolidFill',flash.display.GraphicsSolidFill);
flash.display.GraphicsSolidFill.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'color':{type:'uint'},'alpha':{type:'Number'},'_glcolor':{type:'Array'}}},accessors:function(){return{}},methods:function(){return{'GraphicsSolidFill':{type:'',declaredBy:'flash.display.GraphicsSolidFill'},'draw':{type:'void',declaredBy:'flash.display.GraphicsSolidFill'},'gldraw':{type:'void',declaredBy:'flash.display.GraphicsSolidFill'}}}}};goog.provide('flash.display.IGraphicsStroke');flash.display.IGraphicsStroke=function(){};flash.display.IGraphicsStroke.prototype.FLEXJS_CLASS_INFO={names:[{name:'IGraphicsStroke',qName:'flash.display.IGraphicsStroke'}]};flash.display.IGraphicsStroke.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('flash.display.GraphicsStroke');goog.require('flash.display.IGraphicsData');goog.require('flash.display.IGraphicsStroke');
flash.display.GraphicsStroke=function(thickness,pixelHinting,scaleMode,caps,joints,miterLimit,fill){thickness=typeof thickness!=='undefined'?thickness:NaN;pixelHinting=typeof pixelHinting!=='undefined'?pixelHinting:false;scaleMode=typeof scaleMode!=='undefined'?scaleMode:'normal';caps=typeof caps!=='undefined'?caps:'none';joints=typeof joints!=='undefined'?joints:'round';miterLimit=typeof miterLimit!=='undefined'?miterLimit:3;fill=typeof fill!=='undefined'?fill:null;this.thickness=thickness;this.pixelHinting=
pixelHinting;this._caps=caps;this._joints=joints;this.miterLimit=miterLimit;this._scaleMode=scaleMode;this.fill=fill};flash.display.GraphicsStroke.prototype.thickness;flash.display.GraphicsStroke.prototype.pixelHinting;flash.display.GraphicsStroke.prototype._caps;flash.display.GraphicsStroke.prototype._joints;flash.display.GraphicsStroke.prototype.miterLimit;flash.display.GraphicsStroke.prototype._scaleMode;flash.display.GraphicsStroke.prototype.fill;
flash.display.GraphicsStroke.prototype.draw=function(ctx,colorTransform){if(isNaN(this.thickness))ctx.stroke();else{ctx.lineWidth=this.thickness;if(org.apache.flex.utils.Language.is(this.fill,flash.display.GraphicsSolidFill)){var sf=org.apache.flex.utils.Language.as(this.fill,flash.display.GraphicsSolidFill);ctx.strokeStyle=SpriteFlexjs.renderer.getCssColor(sf.color,sf.alpha,colorTransform,null)}}};
flash.display.GraphicsStroke.prototype.gldraw=function(ctx,colorTransform){if(isNaN(this.thickness))ctx.stroke();else{ctx.lineWidth=this.thickness;if(org.apache.flex.utils.Language.is(this.fill,flash.display.GraphicsSolidFill)){var sf=this.fill;SpriteFlexjs.renderer.getCssColor(sf.color,sf.alpha,colorTransform,sf._glcolor);ctx.strokeStyle=sf._glcolor}}};
Object.defineProperties(flash.display.GraphicsStroke.prototype,{caps:{get:function(){return this._caps},set:function(value){this._caps=value}},joints:{get:function(){return this._joints},set:function(value){this._joints=value}},scaleMode:{get:function(){return this._scaleMode},set:function(value){this._scaleMode=value}}});flash.display.GraphicsStroke.prototype.FLEXJS_CLASS_INFO={names:[{name:'GraphicsStroke',qName:'flash.display.GraphicsStroke'}],interfaces:[flash.display.IGraphicsStroke,flash.display.IGraphicsData]};
goog.exportSymbol('flash.display.GraphicsStroke',flash.display.GraphicsStroke);
flash.display.GraphicsStroke.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'thickness':{type:'Number'},'pixelHinting':{type:'Boolean'},'miterLimit':{type:'Number'},'fill':{type:'IGraphicsFill'}}},accessors:function(){return{'caps':{type:'String',declaredBy:'flash.display.GraphicsStroke'},'joints':{type:'String',declaredBy:'flash.display.GraphicsStroke'},'scaleMode':{type:'String',declaredBy:'flash.display.GraphicsStroke'}}},methods:function(){return{'GraphicsStroke':{type:'',
declaredBy:'flash.display.GraphicsStroke'},'draw':{type:'void',declaredBy:'flash.display.GraphicsStroke'},'gldraw':{type:'void',declaredBy:'flash.display.GraphicsStroke'}}}}};goog.provide('flash.display.GraphicsTrianglePath');goog.require('flash.display.IGraphicsData');goog.require('flash.display.IGraphicsPath');
flash.display.GraphicsTrianglePath=function(vertices,indices,uvtData,culling){vertices=typeof vertices!=='undefined'?vertices:null;indices=typeof indices!=='undefined'?indices:null;uvtData=typeof uvtData!=='undefined'?uvtData:null;culling=typeof culling!=='undefined'?culling:'none';this.vertices=vertices;this.indices=indices;this.uvtData=uvtData;this._culling=culling};flash.display.GraphicsTrianglePath.prototype.indices;flash.display.GraphicsTrianglePath.prototype.vertices;flash.display.GraphicsTrianglePath.prototype.uvtData;
flash.display.GraphicsTrianglePath.prototype._culling;flash.display.GraphicsTrianglePath.prototype.draw=function(ctx,colorTransform){org.apache.flex.utils.Language.trace('tripath')};flash.display.GraphicsTrianglePath.prototype.gldraw=function(ctx,colorTransform){};Object.defineProperties(flash.display.GraphicsTrianglePath.prototype,{culling:{get:function(){return this._culling},set:function(value){this._culling=value}}});
flash.display.GraphicsTrianglePath.prototype.FLEXJS_CLASS_INFO={names:[{name:'GraphicsTrianglePath',qName:'flash.display.GraphicsTrianglePath'}],interfaces:[flash.display.IGraphicsPath,flash.display.IGraphicsData]};goog.exportSymbol('flash.display.GraphicsTrianglePath',flash.display.GraphicsTrianglePath);
flash.display.GraphicsTrianglePath.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'indices':{type:'Vector.\x3cint\x3e'},'vertices':{type:'Vector.\x3cNumber\x3e'},'uvtData':{type:'Vector.\x3cNumber\x3e'}}},accessors:function(){return{'culling':{type:'String',declaredBy:'flash.display.GraphicsTrianglePath'}}},methods:function(){return{'GraphicsTrianglePath':{type:'',declaredBy:'flash.display.GraphicsTrianglePath'},'draw':{type:'void',declaredBy:'flash.display.GraphicsTrianglePath'},
'gldraw':{type:'void',declaredBy:'flash.display.GraphicsTrianglePath'}}}}};goog.provide('flash.display.Graphics');goog.require('flash.display.GraphicsGradientFill');goog.require('flash.display.GraphicsSolidFill');goog.require('flash.display.GraphicsStroke');goog.require('flash.display.GraphicsTrianglePath');flash.display.Graphics=function(){this.graphicsData=new Array;this.pathPool=[];this._worldMatrix=new flash.geom.Matrix};flash.display.Graphics.prototype.graphicsData;flash.display.Graphics.prototype.lastStroke;flash.display.Graphics.prototype.lastFill;flash.display.Graphics.prototype.pathPool;
flash.display.Graphics.prototype.pathPoolPos=0;flash.display.Graphics.prototype.lastPath;flash.display.Graphics.prototype.bound;flash.display.Graphics.prototype.lockBound=false;flash.display.Graphics.debug=false;flash.display.Graphics.prototype._worldMatrix;flash.display.Graphics.prototype.clear=function(){this.lastStroke=null;this.lastPath=null;this.pathPoolPos=0;this.graphicsData=new Array;this.bound=null};
flash.display.Graphics.prototype.beginFill=function(color,alpha){alpha=typeof alpha!=='undefined'?alpha:1;this.endStrokAndFill();this.lastFill=new flash.display.GraphicsSolidFill(color,alpha);this.graphicsData.push(this.lastFill)};
flash.display.Graphics.prototype.beginGradientFill=function(type,colors,alphas,ratios,matrix,spreadMethod,interpolationMethod,focalPointRatio){matrix=typeof matrix!=='undefined'?matrix:null;spreadMethod=typeof spreadMethod!=='undefined'?spreadMethod:'pad';interpolationMethod=typeof interpolationMethod!=='undefined'?interpolationMethod:'rgb';focalPointRatio=typeof focalPointRatio!=='undefined'?focalPointRatio:0;this.endStrokAndFill();this.lastFill=new flash.display.GraphicsGradientFill(type,colors,
alphas,ratios,matrix,spreadMethod,interpolationMethod,focalPointRatio);this.graphicsData.push(this.lastFill)};flash.display.Graphics.prototype.beginBitmapFill=function(bitmap,matrix,repeat,smooth){matrix=typeof matrix!=='undefined'?matrix:null;repeat=typeof repeat!=='undefined'?repeat:true;smooth=typeof smooth!=='undefined'?smooth:false;this.endStrokAndFill();this.lastFill=new flash.display.GraphicsBitmapFill(bitmap,matrix,repeat,smooth);this.graphicsData.push(this.lastFill)};
flash.display.Graphics.prototype.endStrokAndFill=function(){if(this.lastPath){if(this.lastFill){var efill=new flash.display.GraphicsEndFill;efill.fill=this.lastFill;this.graphicsData.push(efill);this.lastFill=null}if(this.lastStroke&&!isNaN(this.lastStroke.thickness)){this.lastStroke=new flash.display.GraphicsStroke(NaN);this.graphicsData.push(this.lastStroke)}this.lastPath=null}};
flash.display.Graphics.prototype.lineGradientStyle=function(type,colors,alphas,ratios,matrix,spreadMethod,interpolationMethod,focalPointRatio){matrix=typeof matrix!=='undefined'?matrix:null;spreadMethod=typeof spreadMethod!=='undefined'?spreadMethod:'pad';interpolationMethod=typeof interpolationMethod!=='undefined'?interpolationMethod:'rgb';focalPointRatio=typeof focalPointRatio!=='undefined'?focalPointRatio:0;if(this.lastStroke){var gs=this.lastStroke;gs.fill=new flash.display.GraphicsGradientFill(type,
colors,alphas,ratios,matrix,spreadMethod,interpolationMethod,focalPointRatio)}};
flash.display.Graphics.prototype.lineStyle=function(thickness,color,alpha,pixelHinting,scaleMode,caps,joints,miterLimit){thickness=typeof thickness!=='undefined'?thickness:NaN;color=typeof color!=='undefined'?color:0;alpha=typeof alpha!=='undefined'?alpha:1;pixelHinting=typeof pixelHinting!=='undefined'?pixelHinting:false;scaleMode=typeof scaleMode!=='undefined'?scaleMode:'normal';caps=typeof caps!=='undefined'?caps:null;joints=typeof joints!=='undefined'?joints:null;miterLimit=typeof miterLimit!==
'undefined'?miterLimit:3;this.endStrokAndFill();if(!isNaN(thickness)){this.lastStroke=new flash.display.GraphicsStroke(thickness===0?1:thickness,pixelHinting,scaleMode,caps,joints,miterLimit,new flash.display.GraphicsSolidFill(color,alpha));this.graphicsData.push(this.lastStroke)}};
flash.display.Graphics.prototype.drawRect=function(x,y,width,height){this.lockBound=true;this.moveTo(x,y);this.lineTo(x+width,y);this.lineTo(x+width,y+height);this.lineTo(x,y+height);this.lastPath.closePath();this.lockBound=false;this.inflateBound(x,y);this.inflateBound(x+width,y+height)};
flash.display.Graphics.prototype.drawRoundRect=function(x,y,width,height,ellipseWidth,ellipseHeight){ellipseHeight=typeof ellipseHeight!=='undefined'?ellipseHeight:NaN;this.lockBound=true;if(isNaN(ellipseHeight))ellipseHeight=ellipseWidth;this.moveTo(x+ellipseWidth,y);this.lineTo(x+width-ellipseWidth,y);this.curveTo(x+width,y,x+width,y+ellipseHeight);this.lineTo(x+width,y+height-ellipseHeight);this.curveTo(x+width,y+height,x+width-ellipseWidth,y+height);this.lineTo(x+ellipseWidth,y+height);this.curveTo(x,
y+height,x,y+height-ellipseHeight);this.lineTo(x,y+ellipseHeight);this.curveTo(x,y,x+ellipseWidth,y);this.lockBound=false;this.inflateBound(x,y);this.inflateBound(x+width,y+height)};
flash.display.Graphics.prototype.drawRoundRectComplex=function(x,y,width,height,topLeftRadius,topRightRadius,bottomLeftRadius,bottomRightRadius){this.lockBound=true;this.moveTo(x+topLeftRadius,y);this.lineTo(x+width-topRightRadius,y);this.curveTo(x+width,y,x+width,y+topRightRadius);this.lineTo(x+width,y+height-bottomRightRadius);this.curveTo(x+width,y+height,x+width-bottomRightRadius,y+height);this.lineTo(x+bottomLeftRadius,y+height);this.curveTo(x,y+height,x,y+height-bottomLeftRadius);this.lineTo(x,
y+topLeftRadius);this.curveTo(x,y,x+topLeftRadius,y);this.lockBound=false;this.inflateBound(x,y);this.inflateBound(x+width,y+height)};flash.display.Graphics.prototype.drawCircle=function(x,y,radius){this.makePath();this.lastPath.moveTo(x+radius,y);this.lastPath.arc(x,y,radius,0,Math.PI*2);this.inflateBound(x-radius,y-radius);this.inflateBound(x+radius,y+radius)};
flash.display.Graphics.prototype.drawEllipse=function(x,y,w,h){this.lockBound=true;var kappa=.5522848,ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,xm=x+w/2,ym=y+h/2;this.moveTo(x,ym);this.cubicCurveTo(x,ym-oy,xm-ox,y,xm,y);this.cubicCurveTo(xm+ox,y,xe,ym-oy,xe,ym);this.cubicCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);this.cubicCurveTo(xm-ox,ye,x,ym+oy,x,ym);this.lockBound=false;this.inflateBound(x,y);this.inflateBound(x+w,y+h)};
flash.display.Graphics.prototype.moveTo=function(x,y){this.makePath();this.lastPath.moveTo(x,y);this.inflateBound(x,y)};flash.display.Graphics.prototype.lineTo=function(x,y){this.makePath();this.lastPath.lineTo(x,y);this.inflateBound(x,y)};flash.display.Graphics.prototype.curveTo=function(controlX,controlY,anchorX,anchorY){this.makePath();this.lastPath.curveTo(controlX,controlY,anchorX,anchorY);this.inflateBound(controlX,controlY);this.inflateBound(anchorX,anchorY)};
flash.display.Graphics.prototype.cubicCurveTo=function(controlX1,controlY1,controlX2,controlY2,anchorX,anchorY){this.makePath();this.lastPath.cubicCurveTo(controlX1,controlY1,controlX2,controlY2,anchorX,anchorY);this.inflateBound(controlX1,controlY1);this.inflateBound(controlX2,controlY2);this.inflateBound(anchorX,anchorY)};
flash.display.Graphics.prototype.inflateBound=function(x,y){if(this.lockBound)return;if(this.bound==null)this.bound=new flash.geom.Rectangle(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);if(this.bound.left>x)this.bound.left=x;if(this.bound.right<x)this.bound.right=x;if(this.bound.top>y)this.bound.top=y;if(this.bound.bottom<y)this.bound.bottom=y};
flash.display.Graphics.prototype.makePath=function(){if(this.lastPath==null){this.lastPath=this.pathPool[this.pathPoolPos];if(this.lastPath==null)this.lastPath=this.pathPool[this.pathPoolPos]=SpriteFlexjs.renderer.createPath();this.lastPath.clear();this.lastPath.gpuPath2DDirty=true;this.pathPoolPos++;this.graphicsData.push(this.lastPath)}};flash.display.Graphics.prototype.endFill=function(){this.endStrokAndFill()};flash.display.Graphics.prototype.copyFrom=function(g){this.graphicsData=g.graphicsData.slice()};
flash.display.Graphics.prototype.lineBitmapStyle=function(bitmap,matrix,repeat,smooth){matrix=typeof matrix!=='undefined'?matrix:null;repeat=typeof repeat!=='undefined'?repeat:true;smooth=typeof smooth!=='undefined'?smooth:false;if(this.lastStroke&&org.apache.flex.utils.Language.is(this.lastStroke,flash.display.GraphicsStroke)){var gs=org.apache.flex.utils.Language.as(this.lastStroke,flash.display.GraphicsStroke);gs.fill=new flash.display.GraphicsBitmapFill(bitmap,matrix,repeat,smooth)}};
flash.display.Graphics.prototype.drawPath=function(commands,data,winding){winding=typeof winding!=='undefined'?winding:'evenOdd';this.makePath();this.lastPath.commands.push.apply(null,commands);this.lastPath.data.push.apply(null,data)};
flash.display.Graphics.prototype.drawTriangles=function(vertices,indices,uvtData,culling){indices=typeof indices!=='undefined'?indices:null;uvtData=typeof uvtData!=='undefined'?uvtData:null;culling=typeof culling!=='undefined'?culling:'none';this.makePath();this.lastPath.drawTriangles(vertices,indices,uvtData)};
flash.display.Graphics.prototype.drawPathObject=function(path){var graphicsPath=null;var graphicsTrianglePath=null;if(org.apache.flex.utils.Language.is(path,flash.display.GraphicsPath)){graphicsPath=org.apache.flex.utils.Language.as(path,flash.display.GraphicsPath,true);this.drawPath(graphicsPath.commands,graphicsPath.data,graphicsPath.winding)}else if(org.apache.flex.utils.Language.is(path,flash.display.GraphicsTrianglePath)){graphicsTrianglePath=org.apache.flex.utils.Language.as(path,flash.display.GraphicsTrianglePath,
true);this.drawTriangles(graphicsTrianglePath.vertices,graphicsTrianglePath.indices,graphicsTrianglePath.uvtData,graphicsTrianglePath.culling)}};
flash.display.Graphics.prototype.beginFillObject=function(fill){var solidFill=null;var gradientFill=null;var bitmapFill=null;if(fill==null)this.endFill();else if(org.apache.flex.utils.Language.is(fill,flash.display.GraphicsEndFill))this.endFill();else if(org.apache.flex.utils.Language.is(fill,flash.display.GraphicsSolidFill)){solidFill=org.apache.flex.utils.Language.as(fill,flash.display.GraphicsSolidFill,true);this.beginFill(solidFill.color,solidFill.alpha)}else if(org.apache.flex.utils.Language.is(fill,
flash.display.GraphicsGradientFill)){gradientFill=org.apache.flex.utils.Language.as(fill,flash.display.GraphicsGradientFill,true);this.beginGradientFill(gradientFill.type,gradientFill.colors,gradientFill.alphas,gradientFill.ratios,gradientFill.matrix,gradientFill.spreadMethod,gradientFill.interpolationMethod,gradientFill.focalPointRatio)}else if(org.apache.flex.utils.Language.is(fill,flash.display.GraphicsBitmapFill)){bitmapFill=org.apache.flex.utils.Language.as(fill,flash.display.GraphicsBitmapFill,
true);this.beginBitmapFill(bitmapFill.bitmapData,bitmapFill.matrix,bitmapFill.repeat,bitmapFill.smooth)}};
flash.display.Graphics.prototype.beginStrokeObject=function(istroke){var solidFill=null;var gradientFill=null;var bitmapFill=null;var stroke=null;var fill=null;if(istroke!=null&&org.apache.flex.utils.Language.is(istroke,flash.display.GraphicsStroke))stroke=org.apache.flex.utils.Language.as(istroke,flash.display.GraphicsStroke);if(stroke&&stroke.fill&&org.apache.flex.utils.Language.is(stroke.fill,flash.display.IGraphicsFill))fill=stroke.fill;if(stroke==null||fill==null)this.lineStyle();else if(org.apache.flex.utils.Language.is(fill,
flash.display.GraphicsSolidFill)){solidFill=org.apache.flex.utils.Language.as(fill,flash.display.GraphicsSolidFill,true);this.lineStyle(stroke.thickness,solidFill.color,solidFill.alpha,stroke.pixelHinting,stroke.scaleMode,stroke.caps,stroke.joints,stroke.miterLimit)}else if(org.apache.flex.utils.Language.is(fill,flash.display.GraphicsGradientFill)){gradientFill=org.apache.flex.utils.Language.as(fill,flash.display.GraphicsGradientFill,true);this.lineStyle(stroke.thickness,0,1,stroke.pixelHinting,stroke.scaleMode,
stroke.caps,stroke.joints,stroke.miterLimit);this.lineGradientStyle(gradientFill.type,gradientFill.colors,gradientFill.alphas,gradientFill.ratios,gradientFill.matrix,gradientFill.spreadMethod,gradientFill.interpolationMethod,gradientFill.focalPointRatio)}else if(org.apache.flex.utils.Language.is(fill,flash.display.GraphicsBitmapFill)){bitmapFill=org.apache.flex.utils.Language.as(fill,flash.display.GraphicsBitmapFill,true);this.lineStyle(stroke.thickness,0,1,stroke.pixelHinting,stroke.scaleMode,stroke.caps,
stroke.joints,stroke.miterLimit);this.lineBitmapStyle(bitmapFill.bitmapData,bitmapFill.matrix,bitmapFill.repeat,bitmapFill.smooth)}};
flash.display.Graphics.prototype.drawGraphicsData=function(graphicsData){var item=null;var path=null;var fill=null;var stroke=null;if(graphicsData==null)return;for(var i=0;i<graphicsData.length;i++){item=graphicsData[i];if(org.apache.flex.utils.Language.is(item,flash.display.IGraphicsPath)){path=org.apache.flex.utils.Language.as(item,flash.display.IGraphicsPath,true);this.drawPathObject(path)}else if(org.apache.flex.utils.Language.is(item,flash.display.IGraphicsFill)){fill=org.apache.flex.utils.Language.as(item,
flash.display.IGraphicsFill,true);this.beginFillObject(fill)}else if(org.apache.flex.utils.Language.is(item,flash.display.IGraphicsStroke)){stroke=org.apache.flex.utils.Language.as(item,flash.display.IGraphicsStroke,true);this.beginStrokeObject(stroke)}}};flash.display.Graphics.prototype.readGraphicsData=function(recurse){recurse=typeof recurse!=='undefined'?recurse:true;return this.graphicsData.slice()};
flash.display.Graphics.prototype.draw=function(ctx,m,blendMode,colorTransform){if(this.graphicsData.length){SpriteFlexjs.renderer.renderGraphics(ctx,this,m,blendMode,colorTransform);SpriteFlexjs.drawCounter++}};flash.display.Graphics.prototype.FLEXJS_CLASS_INFO={names:[{name:'Graphics',qName:'flash.display.Graphics'}]};goog.exportSymbol('flash.display.Graphics',flash.display.Graphics);
flash.display.Graphics.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'graphicsData':{type:'Vector.\x3cIGraphicsData\x3e'},'lastStroke':{type:'GraphicsStroke'},'lastFill':{type:'IGraphicsFill'},'bound':{type:'Rectangle'},'_worldMatrix':{type:'Matrix'}}},accessors:function(){return{}},methods:function(){return{'Graphics':{type:'',declaredBy:'flash.display.Graphics'},'clear':{type:'void',declaredBy:'flash.display.Graphics'},'beginFill':{type:'void',declaredBy:'flash.display.Graphics'},
'beginGradientFill':{type:'void',declaredBy:'flash.display.Graphics'},'beginBitmapFill':{type:'void',declaredBy:'flash.display.Graphics'},'endStrokAndFill':{type:'void',declaredBy:'flash.display.Graphics'},'lineGradientStyle':{type:'void',declaredBy:'flash.display.Graphics'},'lineStyle':{type:'void',declaredBy:'flash.display.Graphics'},'drawRect':{type:'void',declaredBy:'flash.display.Graphics'},'drawRoundRect':{type:'void',declaredBy:'flash.display.Graphics'},'drawRoundRectComplex':{type:'void',
declaredBy:'flash.display.Graphics'},'drawCircle':{type:'void',declaredBy:'flash.display.Graphics'},'drawEllipse':{type:'void',declaredBy:'flash.display.Graphics'},'moveTo':{type:'void',declaredBy:'flash.display.Graphics'},'lineTo':{type:'void',declaredBy:'flash.display.Graphics'},'curveTo':{type:'void',declaredBy:'flash.display.Graphics'},'cubicCurveTo':{type:'void',declaredBy:'flash.display.Graphics'},'endFill':{type:'void',declaredBy:'flash.display.Graphics'},'copyFrom':{type:'void',declaredBy:'flash.display.Graphics'},
'lineBitmapStyle':{type:'void',declaredBy:'flash.display.Graphics'},'drawPath':{type:'void',declaredBy:'flash.display.Graphics'},'drawTriangles':{type:'void',declaredBy:'flash.display.Graphics'},'drawGraphicsData':{type:'void',declaredBy:'flash.display.Graphics'},'readGraphicsData':{type:'Vector.\x3cIGraphicsData\x3e',declaredBy:'flash.display.Graphics'},'draw':{type:'void',declaredBy:'flash.display.Graphics'}}}}};goog.provide('flash.display.Sprite');goog.require('flash.display.DisplayObjectContainer');goog.require('flash.display.Graphics');goog.require('org.apache.flex.utils.Language');flash.display.Sprite=function(){flash.display.Sprite.base(this,'constructor');this.graphics=new flash.display.Graphics};goog.inherits(flash.display.Sprite,flash.display.DisplayObjectContainer);flash.display.Sprite.prototype.graphics;flash.display.Sprite.prototype.tempPos;
flash.display.Sprite.prototype.startDrag=function(param1,param2){param1=typeof param1!=='undefined'?param1:false;param2=typeof param2!=='undefined'?param2:null};flash.display.Sprite.prototype.stopDrag=function(){};flash.display.Sprite.prototype.startTouchDrag=function(param1,param2,param3){param2=typeof param2!=='undefined'?param2:false;param3=typeof param3!=='undefined'?param3:null};flash.display.Sprite.prototype.stopTouchDrag=function(param1){};flash.display.Sprite.prototype.__getRect=function(){return this.graphics.bound};
flash.display.Sprite.prototype.__update=function(ctx){if(this.visible&&this.graphics.graphicsData.length)this.graphics.draw(ctx,this.transform.concatenatedMatrix,this.blendMode,this.transform.concatenatedColorTransform);if(this.hasEventListener(flash.events.Event.ENTER_FRAME))this.dispatchEvent(new flash.events.Event(flash.events.Event.ENTER_FRAME));flash.display.Sprite.base(this,'__update',ctx)};
flash.display.Sprite.prototype.__doMouse=function(e){if(this.mouseEnabled&&this.visible){var obj=flash.display.Sprite.base(this,'__doMouse',e);if(obj)return obj;if(this.hitTestPoint(this.stage.mouseX,this.stage.mouseY))return this}return null};
Object.defineProperties(flash.display.Sprite.prototype,{buttonMode:{get:function(){return false},set:function(param1){}},dropTarget:{get:function(){return null}},hitArea:{get:function(){return null},set:function(param1){}},useHandCursor:{get:function(){return false},set:function(param1){}}});flash.display.Sprite.prototype.FLEXJS_CLASS_INFO={names:[{name:'Sprite',qName:'flash.display.Sprite'}]};goog.exportSymbol('flash.display.Sprite',flash.display.Sprite);
flash.display.Sprite.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'graphics':{type:'Graphics'}}},accessors:function(){return{'buttonMode':{type:'Boolean',declaredBy:'flash.display.Sprite'},'dropTarget':{type:'DisplayObject',declaredBy:'flash.display.Sprite'},'hitArea':{type:'Sprite',declaredBy:'flash.display.Sprite'},'useHandCursor':{type:'Boolean',declaredBy:'flash.display.Sprite'}}},methods:function(){return{'Sprite':{type:'',declaredBy:'flash.display.Sprite'},
'startDrag':{type:'void',declaredBy:'flash.display.Sprite'},'stopDrag':{type:'void',declaredBy:'flash.display.Sprite'},'startTouchDrag':{type:'void',declaredBy:'flash.display.Sprite'},'stopTouchDrag':{type:'void',declaredBy:'flash.display.Sprite'},'__getRect':{type:'Rectangle',declaredBy:'flash.display.Sprite'},'__update':{type:'void',declaredBy:'flash.display.Sprite'}}}}};goog.provide('flash.display.BlendMode');flash.display.BlendMode=function(){};flash.display.BlendMode.NORMAL='normal';flash.display.BlendMode.LAYER='layer';flash.display.BlendMode.MULTIPLY='multiply';flash.display.BlendMode.SCREEN='screen';flash.display.BlendMode.LIGHTEN='lighten';flash.display.BlendMode.DARKEN='darken';flash.display.BlendMode.ADD='add';flash.display.BlendMode.SUBTRACT='subtract';flash.display.BlendMode.DIFFERENCE='difference';flash.display.BlendMode.INVERT='invert';
flash.display.BlendMode.OVERLAY='overlay';flash.display.BlendMode.HARDLIGHT='hard-light';flash.display.BlendMode.ALPHA='alpha';flash.display.BlendMode.ERASE='erase';flash.display.BlendMode.SHADER='shader';flash.display.BlendMode.prototype.FLEXJS_CLASS_INFO={names:[{name:'BlendMode',qName:'flash.display.BlendMode'}]};goog.exportSymbol('flash.display.BlendMode',flash.display.BlendMode);
flash.display.BlendMode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'BlendMode':{type:'',declaredBy:'flash.display.BlendMode'}}}}};goog.provide('gl3d.core.MaterialBase');goog.require('flash.display.BlendMode');
gl3d.core.MaterialBase=function(){this.ambient=new flash.geom.Vector3D(.1,.1,.1,.1);this.terrainTextureSets=[];this.color=new flash.geom.Vector3D(1,1,1,1);this.wireframeColor=new flash.geom.Vector3D(.5,0,.5,0);this.sourceFactor=flash.display3D.Context3DBlendFactor.ONE;this.destinationFactor=flash.display3D.Context3DBlendFactor.ZERO;this.passCompareMode=flash.display3D.Context3DCompareMode.LESS;this.culling=flash.display3D.Context3DTriangleFace.FRONT;this.borderColor=new flash.geom.Vector3D(1,0,0,
1)};gl3d.core.MaterialBase.prototype.castShadow=true;gl3d.core.MaterialBase.prototype.gpuSkin=false;gl3d.core.MaterialBase.prototype.lightAble=true;gl3d.core.MaterialBase.prototype.fogAble=true;gl3d.core.MaterialBase.prototype._writeDepth=false;gl3d.core.MaterialBase.prototype.ambientAble=true;gl3d.core.MaterialBase.prototype.specularAble=true;gl3d.core.MaterialBase.prototype.ambient;gl3d.core.MaterialBase.prototype.specularPower=50;gl3d.core.MaterialBase.prototype._toonAble=false;
gl3d.core.MaterialBase.prototype.toonStep=2;gl3d.core.MaterialBase.prototype.receiveShadows=true;gl3d.core.MaterialBase.prototype.alphaThreshold=0;gl3d.core.MaterialBase.prototype.view;gl3d.core.MaterialBase.prototype.camera;gl3d.core.MaterialBase.prototype.materialCamera;gl3d.core.MaterialBase.prototype.node;gl3d.core.MaterialBase.prototype.diffTexture;gl3d.core.MaterialBase.prototype.normalmapTexture;gl3d.core.MaterialBase.prototype.lightmapTexture;gl3d.core.MaterialBase.prototype.reflectTexture;
gl3d.core.MaterialBase.prototype.terrainTextureSets;gl3d.core.MaterialBase.prototype.color;gl3d.core.MaterialBase.prototype.gray=false;gl3d.core.MaterialBase.prototype.uvMuler;gl3d.core.MaterialBase.prototype.uvAdder;gl3d.core.MaterialBase.prototype._wireframeAble=false;gl3d.core.MaterialBase.prototype.isDistanceField=false;gl3d.core.MaterialBase.prototype.wireframeColor;gl3d.core.MaterialBase.prototype.invalid=true;gl3d.core.MaterialBase.prototype._normalMapAble;gl3d.core.MaterialBase.prototype.sourceFactor;
gl3d.core.MaterialBase.prototype.destinationFactor;gl3d.core.MaterialBase.prototype.passCompareMode;gl3d.core.MaterialBase.prototype.culling;gl3d.core.MaterialBase.prototype.depthMask=true;gl3d.core.MaterialBase.prototype.border=false;gl3d.core.MaterialBase.prototype.borderColor;gl3d.core.MaterialBase.prototype.draw=function(node,view){};
Object.defineProperties(gl3d.core.MaterialBase.prototype,{normalMapAble:{get:function(){return this._normalMapAble},set:function(value){this._normalMapAble=value}},wireframeAble:{get:function(){return this._wireframeAble},set:function(value){this._wireframeAble=value;this.invalid=true}},blendModel:{set:function(value){switch(value){case flash.display.BlendMode.NORMAL:this.sourceFactor=flash.display3D.Context3DBlendFactor.ONE;this.destinationFactor=flash.display3D.Context3DBlendFactor.ZERO;break;case flash.display.BlendMode.LAYER:this.sourceFactor=
flash.display3D.Context3DBlendFactor.SOURCE_ALPHA;this.destinationFactor=flash.display3D.Context3DBlendFactor.ONE_MINUS_SOURCE_ALPHA;break;case flash.display.BlendMode.MULTIPLY:this.sourceFactor=flash.display3D.Context3DBlendFactor.ZERO;this.destinationFactor=flash.display3D.Context3DBlendFactor.SOURCE_COLOR;break;case flash.display.BlendMode.ADD:this.sourceFactor=flash.display3D.Context3DBlendFactor.SOURCE_ALPHA;this.destinationFactor=flash.display3D.Context3DBlendFactor.ONE;break;case flash.display.BlendMode.ALPHA:this.sourceFactor=
flash.display3D.Context3DBlendFactor.ZERO;this.destinationFactor=flash.display3D.Context3DBlendFactor.SOURCE_ALPHA;break}}},toonAble:{get:function(){return this._toonAble},set:function(value){this._toonAble=value;this.invalid=true}},alpha:{get:function(){return this.color.w},set:function(value){this.color.w=value}},writeDepth:{get:function(){return this._writeDepth},set:function(value){this._writeDepth=value;if(value){this.lightAble=false;this.fogAble=false}}}});
gl3d.core.MaterialBase.prototype.FLEXJS_CLASS_INFO={names:[{name:'MaterialBase',qName:'gl3d.core.MaterialBase'}]};goog.exportSymbol('gl3d.core.MaterialBase',gl3d.core.MaterialBase);
gl3d.core.MaterialBase.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'castShadow':{type:'Boolean'},'gpuSkin':{type:'Boolean'},'lightAble':{type:'Boolean'},'fogAble':{type:'Boolean'},'ambientAble':{type:'Boolean'},'specularAble':{type:'Boolean'},'ambient':{type:'Vector3D'},'specularPower':{type:'Number'},'toonStep':{type:'Number'},'receiveShadows':{type:'Boolean'},'alphaThreshold':{type:'Number'},'view':{type:'View3D'},'camera':{type:'Camera3D'},'materialCamera':{type:'Camera3D'},
'node':{type:'Node3D'},'diffTexture':{type:'TextureSet'},'normalmapTexture':{type:'TextureSet'},'lightmapTexture':{type:'TextureSet'},'reflectTexture':{type:'TextureSet'},'terrainTextureSets':{type:'Array'},'color':{type:'Vector3D'},'gray':{type:'Boolean'},'uvMuler':{type:'Array'},'uvAdder':{type:'Array'},'isDistanceField':{type:'Boolean'},'wireframeColor':{type:'Vector3D'},'invalid':{type:'Boolean'},'sourceFactor':{type:'String'},'destinationFactor':{type:'String'},'passCompareMode':{type:'String'},
'culling':{type:'String'},'depthMask':{type:'Boolean'},'border':{type:'Boolean'},'borderColor':{type:'Vector3D'}}},accessors:function(){return{'normalMapAble':{type:'Boolean',declaredBy:'gl3d.core.MaterialBase'},'wireframeAble':{type:'Boolean',declaredBy:'gl3d.core.MaterialBase'},'blendModel':{type:'String',declaredBy:'gl3d.core.MaterialBase'},'toonAble':{type:'Boolean',declaredBy:'gl3d.core.MaterialBase'},'alpha':{type:'Number',declaredBy:'gl3d.core.MaterialBase'},'writeDepth':{type:'Boolean',declaredBy:'gl3d.core.MaterialBase'}}},
methods:function(){return{'MaterialBase':{type:'',declaredBy:'gl3d.core.MaterialBase'},'draw':{type:'void',declaredBy:'gl3d.core.MaterialBase'}}}}};goog.provide('as3Shader.Creator');as3Shader.Creator=function(){};as3Shader.Creator.prototype.data;as3Shader.Creator.prototype.creat=function(shader){};as3Shader.Creator.prototype.FLEXJS_CLASS_INFO={names:[{name:'Creator',qName:'as3Shader.Creator'}]};goog.exportSymbol('as3Shader.Creator',as3Shader.Creator);
as3Shader.Creator.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'data':{type:'Object'}}},accessors:function(){return{}},methods:function(){return{'Creator':{type:'',declaredBy:'as3Shader.Creator'},'creat':{type:'void',declaredBy:'as3Shader.Creator'}}}}};goog.provide('flash.utils.Proxy');goog.require('flash.events.EventDispatcher');flash.utils.Proxy=function(){flash.utils.Proxy.base(this,'constructor');this.valueMap={}};goog.inherits(flash.utils.Proxy,flash.events.EventDispatcher);flash.utils.Proxy.prototype.valueMap;flash.utils.Proxy.prototype.getProperty=function(propName){return this.valueMap[propName]};flash.utils.Proxy.prototype.setProperty=function(propName,value){this.valueMap[propName]=value};flash.utils.Proxy.prototype.hasProperty=function(propName){return this.valueMap.hasOwnProperty(propName)};
flash.utils.Proxy.prototype.deleteProperty=function(propName){delete this.valueMap[propName]};flash.utils.Proxy.prototype.elementNames=function(){var names=[];for(var p in this.valueMap)names.push(p);return names};flash.utils.Proxy.prototype.FLEXJS_CLASS_INFO={names:[{name:'Proxy',qName:'flash.utils.Proxy'}]};goog.exportSymbol('flash.utils.Proxy',flash.utils.Proxy);
flash.utils.Proxy.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getProperty':{type:'*',declaredBy:'flash.utils.Proxy'},'setProperty':{type:'void',declaredBy:'flash.utils.Proxy'},'hasProperty':{type:'Boolean',declaredBy:'flash.utils.Proxy'},'deleteProperty':{type:'void',declaredBy:'flash.utils.Proxy'},'elementNames':{type:'Array',declaredBy:'flash.utils.Proxy'}}}}};goog.provide('as3Shader.Var');goog.require('flash.utils.Proxy');as3Shader.Var=function(type,index){as3Shader.Var.base(this,'constructor');index=typeof index!=='undefined'?index:0;this.type=type;this.index=index};goog.inherits(as3Shader.Var,flash.utils.Proxy);as3Shader.Var.TYPE_C=1;as3Shader.Var.TYPE_T=2;as3Shader.Var.TYPE_VA=3;as3Shader.Var.TYPE_V=4;as3Shader.Var.TYPE_FS=5;as3Shader.Var.TYPE_OC=6;as3Shader.Var.TYPE_OP=7;as3Shader.Var.prototype.index;as3Shader.Var.prototype.type;as3Shader.Var.prototype.component;
as3Shader.Var.prototype.componentOffset;as3Shader.Var.prototype.data;as3Shader.Var.prototype.constLenght=1;as3Shader.Var.prototype.used=false;as3Shader.Var.prototype.name;as3Shader.Var.prototype.parent;
as3Shader.Var.prototype.c=function(value,offset){offset=typeof offset!=='undefined'?offset:0;var v=new as3Shader.Var(this.type,this.index);v.parent=this;if(this.component)if(org.apache.flex.utils.Language.is(this.component,String)&&org.apache.flex.utils.Language.is(value,String)){var v0=org.apache.flex.utils.Language.as(value,String);var v1=org.apache.flex.utils.Language.as(this.component,String);var value2='';for(var i=0;i<v0.length;i++){var d=this.charCodeAt(v0,i)-this.charCodeAt('x',0);if(d<v1.length)value2+=
v1.charAt(d);else value2+=v0.charAt(i)}value=value2}else throw'error';v.component=value;v.componentOffset=offset;v.constLenght=this.constLenght;return v};as3Shader.Var.prototype.charCodeAt=function(txt,i){if(txt.charAt(i)=='w')return 123;return txt.charCodeAt(i)};as3Shader.Var.prototype.toString=function(){return[this.type,this.index]+''};Object.defineProperties(as3Shader.Var.prototype,{root:{get:function(){if(this.parent==null)return this;return this.parent.root}}});
as3Shader.Var.prototype.FLEXJS_CLASS_INFO={names:[{name:'Var',qName:'as3Shader.Var'}]};goog.exportSymbol('as3Shader.Var',as3Shader.Var);
as3Shader.Var.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'index':{type:'int'},'type':{type:'int'},'component':{type:'Object'},'componentOffset':{type:'int'},'data':{type:'Object'},'constLenght':{type:'int'},'used':{type:'Boolean'},'name':{type:'String'},'parent':{type:'Var'}}},accessors:function(){return{'root':{type:'Var',declaredBy:'as3Shader.Var'}}},methods:function(){return{'Var':{type:'',declaredBy:'as3Shader.Var'},'c':{type:'Var',declaredBy:'as3Shader.Var'},
'toString':{type:'String',declaredBy:'as3Shader.Var'}}}}};goog.provide('org.apache.flex.events.IEventDispatcher');org.apache.flex.events.IEventDispatcher=function(){};org.apache.flex.events.IEventDispatcher.prototype.addEventListener=function(type,handler,opt_capture,opt_handlerScope){};org.apache.flex.events.IEventDispatcher.prototype.removeEventListener=function(type,handler,opt_capture,opt_handlerScope){};org.apache.flex.events.IEventDispatcher.prototype.dispatchEvent=function(event){};
org.apache.flex.events.IEventDispatcher.prototype.FLEXJS_CLASS_INFO={names:[{name:'IEventDispatcher',qName:'org.apache.flex.events.IEventDispatcher'}]};
org.apache.flex.events.IEventDispatcher.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'addEventListener':{type:'void',declaredBy:'org.apache.flex.events.IEventDispatcher'},'removeEventListener':{type:'void',declaredBy:'org.apache.flex.events.IEventDispatcher'},'dispatchEvent':{type:'Boolean',declaredBy:'org.apache.flex.events.IEventDispatcher'}}}}};goog.provide('as3Shader.AGALCodeCreator');goog.require('as3Shader.Creator');as3Shader.AGALCodeCreator=function(){as3Shader.AGALCodeCreator.base(this,'constructor')};goog.inherits(as3Shader.AGALCodeCreator,as3Shader.Creator);as3Shader.AGALCodeCreator.prototype.programTypeName;
as3Shader.AGALCodeCreator.prototype.creat=function(shader){var lines=shader.lines;var logs=shader.logs;if(shader.programType==flash.display3D.Context3DProgramType.VERTEX)this.programTypeName='v';else this.programTypeName='f';var txt='';for(var i=0;i<lines.length;i++){var log=logs[i];if(log){var foreachiter0_target=log;for(var foreachiter0 in foreachiter0_target){var lb=foreachiter0_target[foreachiter0];txt+='//'+lb+'\n'}}var line=lines[i];txt+=line[0];for(var j=1;j<line.length;j++){var v=line[j];
txt+=' '+this.var2String(v)}if(line['flag'])txt+=',\x3c'+line['flag']+'\x3e';txt+='\n'}log=logs[i];if(log){var foreachiter1_target=log;for(var foreachiter1 in foreachiter1_target){lb=foreachiter1_target[foreachiter1];txt+='//'+lb+'\n'}}this.data=txt};
as3Shader.AGALCodeCreator.prototype.var2StringNoIndex=function(v){var vtxt;switch(v.type){case as3Shader.Var.TYPE_C:vtxt=this.programTypeName+'c';break;case as3Shader.Var.TYPE_FS:vtxt=this.programTypeName+'s';break;case as3Shader.Var.TYPE_OC:vtxt='oc';break;case as3Shader.Var.TYPE_OP:vtxt='op';break;case as3Shader.Var.TYPE_T:vtxt=this.programTypeName+'t';break;case as3Shader.Var.TYPE_V:vtxt='v';break;case as3Shader.Var.TYPE_VA:vtxt=this.programTypeName+'a';break}return vtxt};
as3Shader.AGALCodeCreator.prototype.var2String=function(v){var vtxt=this.var2StringNoIndex(v);if(v.component&&org.apache.flex.utils.Language.is(v.component,as3Shader.Var));else switch(v.type){case as3Shader.Var.TYPE_C:case as3Shader.Var.TYPE_FS:case as3Shader.Var.TYPE_T:case as3Shader.Var.TYPE_V:case as3Shader.Var.TYPE_VA:vtxt+=v.index}if(v.component)if(org.apache.flex.utils.Language.is(v.component,as3Shader.Var)){var cv=org.apache.flex.utils.Language.as(v.component,as3Shader.Var);vtxt+='['+this.var2String(cv)+
'+'+(v.index+v.componentOffset)+']'}else vtxt+='.'+v.component;return vtxt};as3Shader.AGALCodeCreator.prototype.FLEXJS_CLASS_INFO={names:[{name:'AGALCodeCreator',qName:'as3Shader.AGALCodeCreator'}]};goog.exportSymbol('as3Shader.AGALCodeCreator',as3Shader.AGALCodeCreator);
as3Shader.AGALCodeCreator.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'AGALCodeCreator':{type:'',declaredBy:'as3Shader.AGALCodeCreator'},'creat':{type:'void',declaredBy:'as3Shader.AGALCodeCreator'}}}}};goog.provide('as3Shader.GLCodeCreator');goog.require('as3Shader.Creator');as3Shader.GLCodeCreator=function(){as3Shader.GLCodeCreator.base(this,'constructor');this.initedvar={}};goog.inherits(as3Shader.GLCodeCreator,as3Shader.Creator);as3Shader.GLCodeCreator.prototype.programTypeName;as3Shader.GLCodeCreator.simpleOps1={mul:'*',m44:'*',m33:'*',m34:'*',add:'+',sub:'-',div:'/'};as3Shader.GLCodeCreator.simpleOps2={mov:['',''],neg:['-',''],rcp:['1/',''],sat:['clamp(',',0,1)']};
as3Shader.GLCodeCreator.simpleOps3={frc:'fract',sqt:'sqrt',rsq:'inversesqrt',nrm:'normalize',crs:'cross',dp3:'dot',dp4:'dot',tex:'texture2D',sge:'greaterThanEqual',slt:'lessThan',sgn:'greaterThan',seq:'equal',sne:'notEqual'};as3Shader.GLCodeCreator.prototype.initedvar;
as3Shader.GLCodeCreator.prototype.creat=function(shader){var lines=shader.lines;var logs=shader.logs;if(shader.programType==flash.display3D.Context3DProgramType.VERTEX)this.programTypeName='v';else this.programTypeName='f';var uniformTxt='';var varyingTxt='';var attributeTxt='';var txt='void main(){\n';for(var i=0;i<lines.length;i++){var log=logs[i];if(log){var foreachiter0_target=log;for(var foreachiter0 in foreachiter0_target){var lb=foreachiter0_target[foreachiter0];txt+='\t//'+lb+'\n'}}var line=
lines[i];var op=line[0];var v1var=org.apache.flex.utils.Language.as(line[1],as3Shader.Var);var v1=this.var2String(v1var);if(this.initedvar[v1]==null){this.initedvar[v1]=true;if(v1var.type==as3Shader.Var.TYPE_T)v1=this.var2type(v1var)+' '+v1;else if(v1var.type==as3Shader.Var.TYPE_V)varyingTxt+='varying '+this.var2type(v1var)+' '+v1+';\n'}var ps=[];for(var j=2;j<line.length;j++){var v=line[j];var vtxt=this.var2String(v.root,false);var vtype=this.var2type(v);ps.push(vtxt);if(this.initedvar[vtxt]==null){this.initedvar[vtxt]=
true;if(v.type==as3Shader.Var.TYPE_FS||v.type==as3Shader.Var.TYPE_C)uniformTxt+='uniform '+vtype+' '+vtxt+';\n';else if(v.type==as3Shader.Var.TYPE_V)varyingTxt+='varying '+vtype+' '+vtxt+';\n';else if(v.type==as3Shader.Var.TYPE_VA)attributeTxt+='attribute '+vtype+' '+vtxt+';\n'}}if(this.op2simple1(op)){txt+='\t'+v1+' \x3d '+ps.join(' '+this.op2simple1(op)+' ');if(line['flag'])txt+=',\x3c'+line['flag']+'\x3e';txt+=';'}else if(this.op2simple2(op))txt+='\t'+v1+' \x3d '+this.op2simple2(op)[0]+ps+this.op2simple2(op)[1]+
';';else{txt+='\t'+v1+' \x3d '+this.op2simple3(op)+'('+ps;if(line['flag'])txt+=',\x3c'+line['flag']+'\x3e';txt+=');'}txt+='\n'}log=logs[i];if(log){var foreachiter1_target=log;for(var foreachiter1 in foreachiter1_target){lb=foreachiter1_target[foreachiter1];txt+='//'+lb+'\n'}}txt=uniformTxt+varyingTxt+attributeTxt+txt;this.data=txt+'}';if(shader.programType==flash.display3D.Context3DProgramType.FRAGMENT)this.data='precision mediump float;\n'+this.data};
as3Shader.GLCodeCreator.prototype.var2type=function(v){if(v.type==as3Shader.Var.TYPE_FS)return'sampler2D';if(v.constLenght==1)return'vec4';return'mat'+v.constLenght};
as3Shader.GLCodeCreator.prototype.var2StringNoIndex=function(v){var vtxt;switch(v.type){case as3Shader.Var.TYPE_C:vtxt=this.programTypeName+'c';break;case as3Shader.Var.TYPE_FS:vtxt=this.programTypeName+'s';break;case as3Shader.Var.TYPE_OC:vtxt='gl_FragColor';break;case as3Shader.Var.TYPE_OP:vtxt='gl_Position';break;case as3Shader.Var.TYPE_T:vtxt=this.programTypeName+'t';break;case as3Shader.Var.TYPE_V:vtxt='v';break;case as3Shader.Var.TYPE_VA:vtxt=this.programTypeName+'a';break}return vtxt};
as3Shader.GLCodeCreator.prototype.var2String=function(v,hasComponent){hasComponent=typeof hasComponent!=='undefined'?hasComponent:true;var vtxt=this.var2StringNoIndex(v);if(v.component&&org.apache.flex.utils.Language.is(v.component,as3Shader.Var));else switch(v.type){case as3Shader.Var.TYPE_C:case as3Shader.Var.TYPE_FS:case as3Shader.Var.TYPE_T:case as3Shader.Var.TYPE_V:case as3Shader.Var.TYPE_VA:vtxt+=v.index}if(hasComponent&&v.component)if(org.apache.flex.utils.Language.is(v.component,as3Shader.Var)){var cv=
org.apache.flex.utils.Language.as(v.component,as3Shader.Var);vtxt+='['+this.var2String(cv)+'+'+(v.index+v.componentOffset)+']'}else vtxt+='.'+v.component;return vtxt};as3Shader.GLCodeCreator.prototype.op2simple1=function(op){return as3Shader.GLCodeCreator.simpleOps1[op]};as3Shader.GLCodeCreator.prototype.op2simple2=function(op){return as3Shader.GLCodeCreator.simpleOps2[op]};as3Shader.GLCodeCreator.prototype.op2simple3=function(op){return as3Shader.GLCodeCreator.simpleOps3[op]||op};
as3Shader.GLCodeCreator.prototype.FLEXJS_CLASS_INFO={names:[{name:'GLCodeCreator',qName:'as3Shader.GLCodeCreator'}]};goog.exportSymbol('as3Shader.GLCodeCreator',as3Shader.GLCodeCreator);as3Shader.GLCodeCreator.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'GLCodeCreator':{type:'',declaredBy:'as3Shader.GLCodeCreator'},'creat':{type:'void',declaredBy:'as3Shader.GLCodeCreator'}}}}};goog.provide('flash.system.Capabilities');flash.system.Capabilities=function(){};flash.system.Capabilities.hasMultiChannelAudio=function(param1){return false};
Object.defineProperties(flash.system.Capabilities,{isEmbeddedInAcrobat:{get:function(){return false}},hasEmbeddedVideo:{get:function(){return false}},hasAudio:{get:function(){return false}},avHardwareDisable:{get:function(){return false}},hasAccessibility:{get:function(){return false}},hasAudioEncoder:{get:function(){return false}},hasMP3:{get:function(){return false}},hasPrinting:{get:function(){return false}},hasScreenBroadcast:{get:function(){return false}},hasScreenPlayback:{get:function(){return false}},
hasStreamingAudio:{get:function(){return false}},hasStreamingVideo:{get:function(){return false}},hasVideoEncoder:{get:function(){return false}},isDebugger:{get:function(){return false}},localFileReadDisable:{get:function(){return false}},language:{get:function(){return null}},manufacturer:{get:function(){return null}},os:{get:function(){return null}},cpuArchitecture:{get:function(){return null}},playerType:{get:function(){return'spriteflexjs'}},serverString:{get:function(){return null}},version:{get:function(){return null}},
screenColor:{get:function(){return null}},pixelAspectRatio:{get:function(){return 0}},screenDPI:{get:function(){return 0}},screenResolutionX:{get:function(){return 0}},screenResolutionY:{get:function(){return 0}},touchscreenType:{get:function(){return null}},hasIME:{get:function(){return false}},hasTLS:{get:function(){return false}},maxLevelIDC:{get:function(){return null}},supports32BitProcesses:{get:function(){return false}},supports64BitProcesses:{get:function(){return false}}});
flash.system.Capabilities.prototype.FLEXJS_CLASS_INFO={names:[{name:'Capabilities',qName:'flash.system.Capabilities'}]};goog.exportSymbol('flash.system.Capabilities',flash.system.Capabilities);flash.system.Capabilities.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Capabilities':{type:'',declaredBy:'flash.system.Capabilities'}}}}};goog.provide('gl3d.core.ProgramSet');gl3d.core.ProgramSet=function(vcode,fcode){this.fcode=fcode;this.vcode=vcode};gl3d.core.ProgramSet.prototype.vcode;gl3d.core.ProgramSet.prototype.fcode;gl3d.core.ProgramSet.prototype.invalid=true;gl3d.core.ProgramSet.prototype.context;gl3d.core.ProgramSet.prototype.program;
gl3d.core.ProgramSet.prototype.update=function(context){if(this.invalid||this.context!=context){this.program=context.createProgram();if(org.apache.flex.utils.Language.is(this.vcode,String)){var vbyte=new flash.utils.ByteArray;vbyte.writeUTFBytes(this.vcode);var fbyte=new flash.utils.ByteArray;fbyte.writeUTFBytes(this.fcode)}else{vbyte=this.vcode;fbyte=this.fcode}this.program.upload(vbyte,fbyte);this.invalid=false;this.context=context}};
gl3d.core.ProgramSet.prototype.FLEXJS_CLASS_INFO={names:[{name:'ProgramSet',qName:'gl3d.core.ProgramSet'}]};goog.exportSymbol('gl3d.core.ProgramSet',gl3d.core.ProgramSet);gl3d.core.ProgramSet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'vcode':{type:'Object'},'fcode':{type:'Object'},'program':{type:'Program3D'}}},accessors:function(){return{}},methods:function(){return{'ProgramSet':{type:'',declaredBy:'gl3d.core.ProgramSet'},'update':{type:'void',declaredBy:'gl3d.core.ProgramSet'}}}}};goog.provide('gl3d.core.Fog');gl3d.core.Fog=function(){this.mode=gl3d.core.Fog.FOG_NONE;this.fogColor=[1,1,1]};gl3d.core.Fog.FOG_NONE=0;gl3d.core.Fog.FOG_EXP=1;gl3d.core.Fog.FOG_EXP2=2;gl3d.core.Fog.FOG_LINEAR=3;gl3d.core.Fog.prototype.mode;gl3d.core.Fog.prototype.density=.03;gl3d.core.Fog.prototype.start=10;gl3d.core.Fog.prototype.end=100;gl3d.core.Fog.prototype.fogColor;gl3d.core.Fog.prototype.FLEXJS_CLASS_INFO={names:[{name:'Fog',qName:'gl3d.core.Fog'}]};goog.exportSymbol('gl3d.core.Fog',gl3d.core.Fog);
gl3d.core.Fog.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'mode':{type:'int'},'density':{type:'Number'},'start':{type:'Number'},'end':{type:'Number'},'fogColor':{type:'Array'}}},accessors:function(){return{}},methods:function(){return{'Fog':{type:'',declaredBy:'gl3d.core.Fog'}}}}};goog.provide('com.adobe.utils.PerspectiveMatrix3D');goog.require('flash.geom.Matrix3D');com.adobe.utils.PerspectiveMatrix3D=function(v){v=typeof v!=='undefined'?v:null;this._x=new flash.geom.Vector3D;this._y=new flash.geom.Vector3D;this._z=new flash.geom.Vector3D;this._w=new flash.geom.Vector3D;com.adobe.utils.PerspectiveMatrix3D.base(this,'constructor',v)};goog.inherits(com.adobe.utils.PerspectiveMatrix3D,flash.geom.Matrix3D);
com.adobe.utils.PerspectiveMatrix3D.prototype.lookAtLH=function(eye,at,up){this._z.copyFrom(at);this._z.subtract(eye);this._z.normalize();this._z.w=0;this._x.copyFrom(up);this._crossProductTo(this._x,this._z);this._x.normalize();this._x.w=0;this._y.copyFrom(this._z);this._crossProductTo(this._y,this._x);this._y.w=0;this._w.x=this._x.dotProduct(eye);this._w.y=this._y.dotProduct(eye);this._w.z=this._z.dotProduct(eye);this._w.w=1;this.copyRowFrom(0,this._x);this.copyRowFrom(1,this._y);this.copyRowFrom(2,
this._z);this.copyRowFrom(3,this._w)};
com.adobe.utils.PerspectiveMatrix3D.prototype.lookAtRH=function(eye,at,up){this._z.copyFrom(eye);this._z.subtract(at);this._z.normalize();this._z.w=0;this._x.copyFrom(up);this._crossProductTo(this._x,this._z);this._x.normalize();this._x.w=0;this._y.copyFrom(this._z);this._crossProductTo(this._y,this._x);this._y.w=0;this._w.x=this._x.dotProduct(eye);this._w.y=this._y.dotProduct(eye);this._w.z=this._z.dotProduct(eye);this._w.w=1;this.copyRowFrom(0,this._x);this.copyRowFrom(1,this._y);this.copyRowFrom(2,
this._z);this.copyRowFrom(3,this._w)};com.adobe.utils.PerspectiveMatrix3D.prototype.perspectiveLH=function(width,height,zNear,zFar){this.copyRawDataFrom([2*zNear/width,0,0,0,0,2*zNear/height,0,0,0,0,zFar/(zFar-zNear),1,0,0,zNear*zFar/(zNear-zFar),0].slice())};com.adobe.utils.PerspectiveMatrix3D.prototype.perspectiveRH=function(width,height,zNear,zFar){this.copyRawDataFrom([2*zNear/width,0,0,0,0,2*zNear/height,0,0,0,0,zFar/(zNear-zFar),-1,0,0,zNear*zFar/(zNear-zFar),0].slice())};
com.adobe.utils.PerspectiveMatrix3D.prototype.perspectiveFieldOfViewLH=function(fieldOfViewY,aspectRatio,zNear,zFar){var yScale=1/Math.tan(fieldOfViewY/2);var xScale=yScale/aspectRatio;this.copyRawDataFrom([xScale,0,0,0,0,yScale,0,0,0,0,zFar/(zFar-zNear),1,0,0,zNear*zFar/(zNear-zFar),0].slice())};
com.adobe.utils.PerspectiveMatrix3D.prototype.perspectiveFieldOfViewRH=function(fieldOfViewY,aspectRatio,zNear,zFar){var yScale=1/Math.tan(fieldOfViewY/2);var xScale=yScale/aspectRatio;this.copyRawDataFrom([xScale,0,0,0,0,yScale,0,0,0,0,zFar/(zNear-zFar),-1,0,0,zNear*zFar/(zNear-zFar),0].slice())};
com.adobe.utils.PerspectiveMatrix3D.prototype.perspectiveOffCenterLH=function(left,right,bottom,top,zNear,zFar){this.copyRawDataFrom([2*zNear/(right-left),0,0,0,0,-2*zNear/(bottom-top),0,0,-1-2*left/(right-left),1+2*top/(bottom-top),-zFar/(zNear-zFar),1,0,0,zNear*zFar/(zNear-zFar),0].slice())};
com.adobe.utils.PerspectiveMatrix3D.prototype.perspectiveOffCenterRH=function(left,right,bottom,top,zNear,zFar){this.copyRawDataFrom([2*zNear/(right-left),0,0,0,0,-2*zNear/(bottom-top),0,0,1+2*left/(right-left),-1-2*top/(bottom-top),zFar/(zNear-zFar),-1,0,0,zNear*zFar/(zNear-zFar),0].slice())};com.adobe.utils.PerspectiveMatrix3D.prototype.orthoLH=function(width,height,zNear,zFar){this.copyRawDataFrom([2/width,0,0,0,0,2/height,0,0,0,0,1/(zFar-zNear),0,0,0,zNear/(zNear-zFar),1].slice())};
com.adobe.utils.PerspectiveMatrix3D.prototype.orthoRH=function(width,height,zNear,zFar){this.copyRawDataFrom([2/width,0,0,0,0,2/height,0,0,0,0,1/(zNear-zFar),0,0,0,zNear/(zNear-zFar),1].slice())};com.adobe.utils.PerspectiveMatrix3D.prototype.orthoOffCenterLH=function(left,right,bottom,top,zNear,zFar){this.copyRawDataFrom([2/(right-left),0,0,0,0,2/(top-bottom),0,0,0,0,1/(zFar-zNear),0,(left+right)/(left-right),(top+bottom)/(bottom-top),zNear/(zNear-zFar),1].slice())};
com.adobe.utils.PerspectiveMatrix3D.prototype.orthoOffCenterRH=function(left,right,bottom,top,zNear,zFar){this.copyRawDataFrom([2/(right-left),0,0,0,0,2/(top-bottom),0,0,0,0,1/(zNear-zFar),0,(left+right)/(left-right),(top+bottom)/(bottom-top),zNear/(zNear-zFar),1].slice())};com.adobe.utils.PerspectiveMatrix3D.prototype._x;com.adobe.utils.PerspectiveMatrix3D.prototype._y;com.adobe.utils.PerspectiveMatrix3D.prototype._z;com.adobe.utils.PerspectiveMatrix3D.prototype._w;
com.adobe.utils.PerspectiveMatrix3D.prototype._crossProductTo=function(a,b){this._w.x=a.y*b.z-a.z*b.y;this._w.y=a.z*b.x-a.x*b.z;this._w.z=a.x*b.y-a.y*b.x;this._w.w=1;a.copyFrom(this._w)};com.adobe.utils.PerspectiveMatrix3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'PerspectiveMatrix3D',qName:'com.adobe.utils.PerspectiveMatrix3D'}]};goog.exportSymbol('com.adobe.utils.PerspectiveMatrix3D',com.adobe.utils.PerspectiveMatrix3D);
com.adobe.utils.PerspectiveMatrix3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'PerspectiveMatrix3D':{type:'',declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'lookAtLH':{type:'void',declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'lookAtRH':{type:'void',declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'perspectiveLH':{type:'void',declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'perspectiveRH':{type:'void',
declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'perspectiveFieldOfViewLH':{type:'void',declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'perspectiveFieldOfViewRH':{type:'void',declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'perspectiveOffCenterLH':{type:'void',declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'perspectiveOffCenterRH':{type:'void',declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'orthoLH':{type:'void',declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'orthoRH':{type:'void',
declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'orthoOffCenterLH':{type:'void',declaredBy:'com.adobe.utils.PerspectiveMatrix3D'},'orthoOffCenterRH':{type:'void',declaredBy:'com.adobe.utils.PerspectiveMatrix3D'}}}}};goog.provide('gl3d.pick.Picking');gl3d.pick.Picking=function(){};gl3d.pick.Picking.prototype.pick=function(node,rayOrigin,rayDirection,pixelPos){pixelPos=typeof pixelPos!=='undefined'?pixelPos:null;return false};gl3d.pick.Picking.prototype.FLEXJS_CLASS_INFO={names:[{name:'Picking',qName:'gl3d.pick.Picking'}]};goog.exportSymbol('gl3d.pick.Picking',gl3d.pick.Picking);
gl3d.pick.Picking.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Picking':{type:'',declaredBy:'gl3d.pick.Picking'},'pick':{type:'Boolean',declaredBy:'gl3d.pick.Picking'}}}}};goog.provide('gl3d.pick.AS3Picking');goog.require('gl3d.pick.Picking');gl3d.pick.AS3Picking=function(){gl3d.pick.AS3Picking.base(this,'constructor')};goog.inherits(gl3d.pick.AS3Picking,gl3d.pick.Picking);gl3d.pick.AS3Picking.prototype.inv;
gl3d.pick.AS3Picking.prototype.pick=function(node,rayOrigin,rayDirection,pixelPos){pixelPos=typeof pixelPos!=='undefined'?pixelPos:null;if(node.drawable){this.inv=node.world2local;var localRayOrigin=this.inv.transformVector(rayOrigin);var localRayDirection=this.inv.deltaTransformVector(rayDirection);var rox=localRayOrigin.x;var roy=localRayOrigin.y;var roz=localRayOrigin.z;var rdx=localRayDirection.x;var rdy=localRayDirection.y;var rdz=localRayDirection.z;var ins=node.drawable.index.data;var xyz=
node.drawable.pos.data;for(;i<len;i+=3){var i0=ins[i]*3;var i1=ins[i+1]*3;var i2=ins[i+2]*3;var x0=xyz[i0];var y0=xyz[i0+1];var z0=xyz[i0+2];var x1=xyz[i1];var y1=xyz[i1+1];var z1=xyz[i1+2];var x2=xyz[i2];var y2=xyz[i2+1];var z2=xyz[i2+2];var e1x=x1-x0;var e1y=y1-y0;var e1z=z1-z0;var e2x=x2-x0;var e2y=y2-y0;var e2z=z2-z0;var px=rdy*e2z-rdz*e2y;var py=rdz*e2x-rdx*e2z;var pz=rdx*e2y-rdy*e2x;var det=e1x*px+e1y*py+e1z*pz;if(det>0){var tx=rox-x0;var ty=roy-y0;var tz=roz-z0}else{tx=x0-rox;ty=y0-roy;tz=
z0-roz;det=-det}if(det<1E-4)continue;var u=tx*px+ty*py+tz*pz;if(u<0||u>det)continue;var qx=ty*e1z-tz*e1y;var qy=tz*e1x-tx*e1z;var qz=tx*e1y-ty*e1x;var v=rdx*qx+rdy*qy+rdz*qz;if(v<0||u+v>det)continue;var t2=e2x*qx+e2y*qy+e2z*qz;var fInvDet=1/det;t2*=fInvDet;u*=fInvDet;v*=fInvDet;if(pixelPos){pixelPos.x=rayOrigin.x+t2*rayDirection.x;pixelPos.y=rayOrigin.y+t2*rayDirection.y;pixelPos.z=rayOrigin.z+t2*rayDirection.z}return true}}return false};
gl3d.pick.AS3Picking.prototype.FLEXJS_CLASS_INFO={names:[{name:'AS3Picking',qName:'gl3d.pick.AS3Picking'}]};goog.exportSymbol('gl3d.pick.AS3Picking',gl3d.pick.AS3Picking);gl3d.pick.AS3Picking.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'AS3Picking':{type:'',declaredBy:'gl3d.pick.AS3Picking'},'pick':{type:'Boolean',declaredBy:'gl3d.pick.AS3Picking'}}}}};goog.provide('gl3d.util.Matrix3DUtils');gl3d.util.Matrix3DUtils=function(){};gl3d.util.Matrix3DUtils._raw=new Array(16,true);gl3d.util.Matrix3DUtils._toRad=Math.PI/180;gl3d.util.Matrix3DUtils._toAng=180/Math.PI;gl3d.util.Matrix3DUtils._vector=new flash.geom.Vector3D;gl3d.util.Matrix3DUtils._right=new flash.geom.Vector3D;gl3d.util.Matrix3DUtils._up=new flash.geom.Vector3D;gl3d.util.Matrix3DUtils._dir=new flash.geom.Vector3D;gl3d.util.Matrix3DUtils._scale=new flash.geom.Vector3D;
gl3d.util.Matrix3DUtils._pos=new flash.geom.Vector3D;gl3d.util.Matrix3DUtils._x;gl3d.util.Matrix3DUtils._y;gl3d.util.Matrix3DUtils._z;gl3d.util.Matrix3DUtils.getRight=function(m,out){out=typeof out!=='undefined'?out:null;if(!out)out=new flash.geom.Vector3D;m.copyColumnTo(0,out);return out};gl3d.util.Matrix3DUtils.getUp=function(m,out){out=typeof out!=='undefined'?out:null;if(!out)out=new flash.geom.Vector3D;m.copyColumnTo(1,out);return out};
gl3d.util.Matrix3DUtils.getDir=function(m,out){out=typeof out!=='undefined'?out:null;if(!out)out=new flash.geom.Vector3D;m.copyColumnTo(2,out);return out};gl3d.util.Matrix3DUtils.getLeft=function(m,out){out=typeof out!=='undefined'?out:null;if(!out)out=new flash.geom.Vector3D;m.copyColumnTo(0,out);out.negate();return out};gl3d.util.Matrix3DUtils.getDown=function(m,out){out=typeof out!=='undefined'?out:null;if(!out)out=new flash.geom.Vector3D;m.copyColumnTo(1,out);out.negate();return out};
gl3d.util.Matrix3DUtils.getBackward=function(m,out){out=typeof out!=='undefined'?out:null;if(!out)out=new flash.geom.Vector3D;m.copyColumnTo(2,out);out.negate();return out};gl3d.util.Matrix3DUtils.getPosition=function(m,out){out=typeof out!=='undefined'?out:null;if(!out)out=new flash.geom.Vector3D;m.copyColumnTo(3,out);return out};
gl3d.util.Matrix3DUtils.getScale=function(m,out){out=typeof out!=='undefined'?out:null;if(!out)out=new flash.geom.Vector3D;m.copyColumnTo(0,gl3d.util.Matrix3DUtils._right);m.copyColumnTo(1,gl3d.util.Matrix3DUtils._up);m.copyColumnTo(2,gl3d.util.Matrix3DUtils._dir);out.x=gl3d.util.Matrix3DUtils._right.length;out.y=gl3d.util.Matrix3DUtils._up.length;out.z=gl3d.util.Matrix3DUtils._dir.length;return out};
gl3d.util.Matrix3DUtils.setPosition=function(m,x,y,z,smooth){smooth=typeof smooth!=='undefined'?smooth:1;if(smooth==1){gl3d.util.Matrix3DUtils._vector.setTo(x,y,z);gl3d.util.Matrix3DUtils._vector.w=1;m.copyColumnFrom(3,gl3d.util.Matrix3DUtils._vector)}else{m.copyColumnTo(3,gl3d.util.Matrix3DUtils._pos);gl3d.util.Matrix3DUtils._pos.x=gl3d.util.Matrix3DUtils._pos.x+(x-gl3d.util.Matrix3DUtils._pos.x)*smooth;gl3d.util.Matrix3DUtils._pos.y=gl3d.util.Matrix3DUtils._pos.y+(y-gl3d.util.Matrix3DUtils._pos.y)*
smooth;gl3d.util.Matrix3DUtils._pos.z=gl3d.util.Matrix3DUtils._pos.z+(z-gl3d.util.Matrix3DUtils._pos.z)*smooth;m.copyColumnFrom(3,gl3d.util.Matrix3DUtils._pos)}};
gl3d.util.Matrix3DUtils.setOrientation=function(m,dir,up,smooth){up=typeof up!=='undefined'?up:null;smooth=typeof smooth!=='undefined'?smooth:1;gl3d.util.Matrix3DUtils.getScale(m,gl3d.util.Matrix3DUtils._scale);if(up==null)if(dir.x==0&&Math.abs(dir.y)==1&&dir.z==0)up=flash.geom.Vector3D.Z_AXIS;else up=flash.geom.Vector3D.Y_AXIS;if(smooth!=1){gl3d.util.Matrix3DUtils.getDir(m,gl3d.util.Matrix3DUtils._dir);gl3d.util.Matrix3DUtils._dir.x=gl3d.util.Matrix3DUtils._dir.x+(dir.x-gl3d.util.Matrix3DUtils._dir.x)*
smooth;gl3d.util.Matrix3DUtils._dir.y=gl3d.util.Matrix3DUtils._dir.y+(dir.y-gl3d.util.Matrix3DUtils._dir.y)*smooth;gl3d.util.Matrix3DUtils._dir.z=gl3d.util.Matrix3DUtils._dir.z+(dir.z-gl3d.util.Matrix3DUtils._dir.z)*smooth;dir=gl3d.util.Matrix3DUtils._dir;gl3d.util.Matrix3DUtils.getUp(m,gl3d.util.Matrix3DUtils._up);gl3d.util.Matrix3DUtils._up.x=gl3d.util.Matrix3DUtils._up.x+(up.x-gl3d.util.Matrix3DUtils._up.x)*smooth;gl3d.util.Matrix3DUtils._up.y=gl3d.util.Matrix3DUtils._up.y+(up.y-gl3d.util.Matrix3DUtils._up.y)*
smooth;gl3d.util.Matrix3DUtils._up.z=gl3d.util.Matrix3DUtils._up.z+(up.z-gl3d.util.Matrix3DUtils._up.z)*smooth;up=gl3d.util.Matrix3DUtils._up}dir.normalize();var rVec=up.crossProduct(dir);rVec.normalize();var uVec=dir.crossProduct(rVec);rVec.scaleBy(gl3d.util.Matrix3DUtils._scale.x);uVec.scaleBy(gl3d.util.Matrix3DUtils._scale.y);dir.scaleBy(gl3d.util.Matrix3DUtils._scale.z);gl3d.util.Matrix3DUtils.setVectors(m,rVec,uVec,dir)};
gl3d.util.Matrix3DUtils.setNormalOrientation=function(m,normal,smooth){smooth=typeof smooth!=='undefined'?smooth:1;if(normal.x==0&&normal.y==0&&normal.z==0)return;gl3d.util.Matrix3DUtils.getScale(m,gl3d.util.Matrix3DUtils._scale);gl3d.util.Matrix3DUtils.getDir(m,gl3d.util.Matrix3DUtils._dir);if(smooth!=1){gl3d.util.Matrix3DUtils.getUp(m,gl3d.util.Matrix3DUtils._up);gl3d.util.Matrix3DUtils._up.x=gl3d.util.Matrix3DUtils._up.x+(normal.x-gl3d.util.Matrix3DUtils._up.x)*smooth;gl3d.util.Matrix3DUtils._up.y=
gl3d.util.Matrix3DUtils._up.y+(normal.y-gl3d.util.Matrix3DUtils._up.y)*smooth;gl3d.util.Matrix3DUtils._up.z=gl3d.util.Matrix3DUtils._up.z+(normal.z-gl3d.util.Matrix3DUtils._up.z)*smooth;normal=gl3d.util.Matrix3DUtils._up}normal.normalize();var dir=Math.abs(gl3d.util.Matrix3DUtils._dir.dotProduct(normal))==1?gl3d.util.Matrix3DUtils.getRight(m,gl3d.util.Matrix3DUtils._right):gl3d.util.Matrix3DUtils._dir;var rVec=normal.crossProduct(dir);rVec.normalize();var dVec=rVec.crossProduct(normal);rVec.scaleBy(gl3d.util.Matrix3DUtils._scale.x);
normal.scaleBy(gl3d.util.Matrix3DUtils._scale.y);dVec.scaleBy(gl3d.util.Matrix3DUtils._scale.z);gl3d.util.Matrix3DUtils.setVectors(m,rVec,normal,dVec)};gl3d.util.Matrix3DUtils.setVectors=function(m,right,up,dir){right.w=0;up.w=0;dir.w=0;m.copyColumnFrom(0,right);m.copyColumnFrom(1,up);m.copyColumnFrom(2,dir)};
gl3d.util.Matrix3DUtils.lookAt=function(m,x,y,z,up,smooth){up=typeof up!=='undefined'?up:null;smooth=typeof smooth!=='undefined'?smooth:1;m.copyColumnTo(3,gl3d.util.Matrix3DUtils._pos);gl3d.util.Matrix3DUtils._vector.x=x-gl3d.util.Matrix3DUtils._pos.x;gl3d.util.Matrix3DUtils._vector.y=y-gl3d.util.Matrix3DUtils._pos.y;gl3d.util.Matrix3DUtils._vector.z=z-gl3d.util.Matrix3DUtils._pos.z;gl3d.util.Matrix3DUtils.setOrientation(m,gl3d.util.Matrix3DUtils._vector,up,smooth)};
gl3d.util.Matrix3DUtils.setTranslation=function(m,x,y,z,local){x=typeof x!=='undefined'?x:0;y=typeof y!=='undefined'?y:0;z=typeof z!=='undefined'?z:0;local=typeof local!=='undefined'?local:true;if(local)m.prependTranslation(x,y,z);else m.appendTranslation(x,y,z)};
gl3d.util.Matrix3DUtils.translateX=function(m,distance,local){local=typeof local!=='undefined'?local:true;m.copyColumnTo(3,gl3d.util.Matrix3DUtils._pos);m.copyColumnTo(0,gl3d.util.Matrix3DUtils._right);if(local){gl3d.util.Matrix3DUtils._pos.x=gl3d.util.Matrix3DUtils._pos.x+distance*gl3d.util.Matrix3DUtils._right.x;gl3d.util.Matrix3DUtils._pos.y=gl3d.util.Matrix3DUtils._pos.y+distance*gl3d.util.Matrix3DUtils._right.y;gl3d.util.Matrix3DUtils._pos.z=gl3d.util.Matrix3DUtils._pos.z+distance*gl3d.util.Matrix3DUtils._right.z}else gl3d.util.Matrix3DUtils._pos.x=
gl3d.util.Matrix3DUtils._pos.x+distance;m.copyColumnFrom(3,gl3d.util.Matrix3DUtils._pos)};
gl3d.util.Matrix3DUtils.translateY=function(m,distance,local){local=typeof local!=='undefined'?local:true;m.copyColumnTo(3,gl3d.util.Matrix3DUtils._pos);m.copyColumnTo(1,gl3d.util.Matrix3DUtils._up);if(local){gl3d.util.Matrix3DUtils._pos.x=gl3d.util.Matrix3DUtils._pos.x+distance*gl3d.util.Matrix3DUtils._up.x;gl3d.util.Matrix3DUtils._pos.y=gl3d.util.Matrix3DUtils._pos.y+distance*gl3d.util.Matrix3DUtils._up.y;gl3d.util.Matrix3DUtils._pos.z=gl3d.util.Matrix3DUtils._pos.z+distance*gl3d.util.Matrix3DUtils._up.z}else gl3d.util.Matrix3DUtils._pos.y=
gl3d.util.Matrix3DUtils._pos.y+distance;m.copyColumnFrom(3,gl3d.util.Matrix3DUtils._pos)};
gl3d.util.Matrix3DUtils.translateZ=function(m,distance,local){local=typeof local!=='undefined'?local:true;m.copyColumnTo(3,gl3d.util.Matrix3DUtils._pos);m.copyColumnTo(2,gl3d.util.Matrix3DUtils._dir);if(local){gl3d.util.Matrix3DUtils._pos.x=gl3d.util.Matrix3DUtils._pos.x+distance*gl3d.util.Matrix3DUtils._dir.x;gl3d.util.Matrix3DUtils._pos.y=gl3d.util.Matrix3DUtils._pos.y+distance*gl3d.util.Matrix3DUtils._dir.y;gl3d.util.Matrix3DUtils._pos.z=gl3d.util.Matrix3DUtils._pos.z+distance*gl3d.util.Matrix3DUtils._dir.z}else gl3d.util.Matrix3DUtils._pos.z=
gl3d.util.Matrix3DUtils._pos.z+distance;m.copyColumnFrom(3,gl3d.util.Matrix3DUtils._pos)};gl3d.util.Matrix3DUtils.translateAxis=function(m,distance,axis){m.copyColumnTo(3,gl3d.util.Matrix3DUtils._pos);gl3d.util.Matrix3DUtils._pos.x=gl3d.util.Matrix3DUtils._pos.x+distance*axis.x;gl3d.util.Matrix3DUtils._pos.y=gl3d.util.Matrix3DUtils._pos.y+distance*axis.y;gl3d.util.Matrix3DUtils._pos.z=gl3d.util.Matrix3DUtils._pos.z+distance*axis.z;m.copyColumnFrom(3,gl3d.util.Matrix3DUtils._pos)};
gl3d.util.Matrix3DUtils.setScale=function(m,x,y,z,smooth){smooth=typeof smooth!=='undefined'?smooth:1;gl3d.util.Matrix3DUtils.getScale(m,gl3d.util.Matrix3DUtils._scale);gl3d.util.Matrix3DUtils._x=gl3d.util.Matrix3DUtils._scale.x;gl3d.util.Matrix3DUtils._y=gl3d.util.Matrix3DUtils._scale.y;gl3d.util.Matrix3DUtils._z=gl3d.util.Matrix3DUtils._scale.z;gl3d.util.Matrix3DUtils._scale.x=gl3d.util.Matrix3DUtils._scale.x+(x-gl3d.util.Matrix3DUtils._scale.x)*smooth;gl3d.util.Matrix3DUtils._scale.y=gl3d.util.Matrix3DUtils._scale.y+
(y-gl3d.util.Matrix3DUtils._scale.y)*smooth;gl3d.util.Matrix3DUtils._scale.z=gl3d.util.Matrix3DUtils._scale.z+(z-gl3d.util.Matrix3DUtils._scale.z)*smooth;gl3d.util.Matrix3DUtils._right.scaleBy(gl3d.util.Matrix3DUtils._scale.x/gl3d.util.Matrix3DUtils._x);gl3d.util.Matrix3DUtils._up.scaleBy(gl3d.util.Matrix3DUtils._scale.y/gl3d.util.Matrix3DUtils._y);gl3d.util.Matrix3DUtils._dir.scaleBy(gl3d.util.Matrix3DUtils._scale.z/gl3d.util.Matrix3DUtils._z);gl3d.util.Matrix3DUtils.setVectors(m,gl3d.util.Matrix3DUtils._right,
gl3d.util.Matrix3DUtils._up,gl3d.util.Matrix3DUtils._dir)};gl3d.util.Matrix3DUtils.scaleX=function(m,scale){m.copyColumnTo(0,gl3d.util.Matrix3DUtils._right);gl3d.util.Matrix3DUtils._right.normalize();gl3d.util.Matrix3DUtils._right.x=gl3d.util.Matrix3DUtils._right.x*scale;gl3d.util.Matrix3DUtils._right.y=gl3d.util.Matrix3DUtils._right.y*scale;gl3d.util.Matrix3DUtils._right.z=gl3d.util.Matrix3DUtils._right.z*scale;m.copyColumnFrom(0,gl3d.util.Matrix3DUtils._right)};
gl3d.util.Matrix3DUtils.scaleY=function(m,scale){m.copyColumnTo(1,gl3d.util.Matrix3DUtils._up);gl3d.util.Matrix3DUtils._up.normalize();gl3d.util.Matrix3DUtils._up.x=gl3d.util.Matrix3DUtils._up.x*scale;gl3d.util.Matrix3DUtils._up.y=gl3d.util.Matrix3DUtils._up.y*scale;gl3d.util.Matrix3DUtils._up.z=gl3d.util.Matrix3DUtils._up.z*scale;m.copyColumnFrom(1,gl3d.util.Matrix3DUtils._up)};
gl3d.util.Matrix3DUtils.scaleZ=function(m,scale){m.copyColumnTo(2,gl3d.util.Matrix3DUtils._dir);gl3d.util.Matrix3DUtils._dir.normalize();gl3d.util.Matrix3DUtils._dir.x=gl3d.util.Matrix3DUtils._dir.x*scale;gl3d.util.Matrix3DUtils._dir.y=gl3d.util.Matrix3DUtils._dir.y*scale;gl3d.util.Matrix3DUtils._dir.z=gl3d.util.Matrix3DUtils._dir.z*scale;m.copyColumnFrom(2,gl3d.util.Matrix3DUtils._dir)};
gl3d.util.Matrix3DUtils.getRotation=function(m,out){out=typeof out!=='undefined'?out:null;out=out||new flash.geom.Vector3D;gl3d.util.Matrix3DUtils._vector=m.decompose(flash.geom.Orientation3D.EULER_ANGLES)[1];out.x=gl3d.util.Matrix3DUtils._vector.x*gl3d.util.Matrix3DUtils._toAng;out.y=gl3d.util.Matrix3DUtils._vector.y*gl3d.util.Matrix3DUtils._toAng;out.z=gl3d.util.Matrix3DUtils._vector.z*gl3d.util.Matrix3DUtils._toAng;return out};
gl3d.util.Matrix3DUtils.setRotation=function(m,x,y,z){var v=m.decompose(flash.geom.Orientation3D.EULER_ANGLES);v[1].x=x*gl3d.util.Matrix3DUtils._toRad;v[1].y=y*gl3d.util.Matrix3DUtils._toRad;v[1].z=z*gl3d.util.Matrix3DUtils._toRad;m.recompose(v,flash.geom.Orientation3D.EULER_ANGLES)};
gl3d.util.Matrix3DUtils.rotateX=function(m,angle,local,pivotPoint){local=typeof local!=='undefined'?local:true;pivotPoint=typeof pivotPoint!=='undefined'?pivotPoint:null;gl3d.util.Matrix3DUtils.rotateAxis(m,angle,local?gl3d.util.Matrix3DUtils.getRight(m,gl3d.util.Matrix3DUtils._vector):flash.geom.Vector3D.X_AXIS,pivotPoint)};
gl3d.util.Matrix3DUtils.rotateY=function(m,angle,local,pivotPoint){local=typeof local!=='undefined'?local:true;pivotPoint=typeof pivotPoint!=='undefined'?pivotPoint:null;gl3d.util.Matrix3DUtils.rotateAxis(m,angle,local?gl3d.util.Matrix3DUtils.getUp(m,gl3d.util.Matrix3DUtils._vector):flash.geom.Vector3D.Y_AXIS,pivotPoint)};
gl3d.util.Matrix3DUtils.rotateZ=function(m,angle,local,pivotPoint){local=typeof local!=='undefined'?local:true;pivotPoint=typeof pivotPoint!=='undefined'?pivotPoint:null;gl3d.util.Matrix3DUtils.rotateAxis(m,angle,local?gl3d.util.Matrix3DUtils.getDir(m,gl3d.util.Matrix3DUtils._vector):flash.geom.Vector3D.Z_AXIS,pivotPoint)};
gl3d.util.Matrix3DUtils.rotateAxis=function(m,angle,axis,pivotPoint){pivotPoint=typeof pivotPoint!=='undefined'?pivotPoint:null;gl3d.util.Matrix3DUtils._vector.x=axis.x;gl3d.util.Matrix3DUtils._vector.y=axis.y;gl3d.util.Matrix3DUtils._vector.z=axis.z;gl3d.util.Matrix3DUtils._vector.normalize();m.copyColumnTo(3,gl3d.util.Matrix3DUtils._pos);m.appendRotation(angle,gl3d.util.Matrix3DUtils._vector,pivotPoint||gl3d.util.Matrix3DUtils._pos)};
gl3d.util.Matrix3DUtils.transformVector=function(m,vector,out){out=typeof out!=='undefined'?out:null;if(!out)out=new flash.geom.Vector3D;var x=vector.x;var y=vector.y;var z=vector.z;m.copyRawDataTo(gl3d.util.Matrix3DUtils._raw);out.x=x*gl3d.util.Matrix3DUtils._raw[0]+y*gl3d.util.Matrix3DUtils._raw[4]+z*gl3d.util.Matrix3DUtils._raw[8]+gl3d.util.Matrix3DUtils._raw[12];out.y=x*gl3d.util.Matrix3DUtils._raw[1]+y*gl3d.util.Matrix3DUtils._raw[5]+z*gl3d.util.Matrix3DUtils._raw[9]+gl3d.util.Matrix3DUtils._raw[13];
out.z=x*gl3d.util.Matrix3DUtils._raw[2]+y*gl3d.util.Matrix3DUtils._raw[6]+z*gl3d.util.Matrix3DUtils._raw[10]+gl3d.util.Matrix3DUtils._raw[14];return out};
gl3d.util.Matrix3DUtils.deltaTransformVector=function(m,vector,out){out=typeof out!=='undefined'?out:null;if(!out)out=new flash.geom.Vector3D;var x=vector.x;var y=vector.y;var z=vector.z;m.copyRawDataTo(gl3d.util.Matrix3DUtils._raw);out.x=x*gl3d.util.Matrix3DUtils._raw[0]+y*gl3d.util.Matrix3DUtils._raw[4]+z*gl3d.util.Matrix3DUtils._raw[8];out.y=x*gl3d.util.Matrix3DUtils._raw[1]+y*gl3d.util.Matrix3DUtils._raw[5]+z*gl3d.util.Matrix3DUtils._raw[9];out.z=x*gl3d.util.Matrix3DUtils._raw[2]+y*gl3d.util.Matrix3DUtils._raw[6]+
z*gl3d.util.Matrix3DUtils._raw[10];return out};gl3d.util.Matrix3DUtils.invert=function(m,out){out=typeof out!=='undefined'?out:null;if(!out)out=new flash.geom.Matrix3D;out.copyFrom(m);out.invert();return out};gl3d.util.Matrix3DUtils.equal=function(a,b){var v0=a.rawData;var v1=b.rawData;var i=0;while(i<16){if(v0[i]!=v1[i])return false;i++}return true};gl3d.util.Matrix3DUtils._scaleSrc=new flash.geom.Vector3D;gl3d.util.Matrix3DUtils._scaleDest=new flash.geom.Vector3D;
gl3d.util.Matrix3DUtils.interpolateTo=function(src,dest,percent){src.copyRawDataTo(gl3d.util.Matrix3DUtils._raw);gl3d.util.Matrix3DUtils._right.x=gl3d.util.Matrix3DUtils._raw[0];gl3d.util.Matrix3DUtils._right.y=gl3d.util.Matrix3DUtils._raw[1];gl3d.util.Matrix3DUtils._right.z=gl3d.util.Matrix3DUtils._raw[2];gl3d.util.Matrix3DUtils._up.x=gl3d.util.Matrix3DUtils._raw[4];gl3d.util.Matrix3DUtils._up.y=gl3d.util.Matrix3DUtils._raw[5];gl3d.util.Matrix3DUtils._up.z=gl3d.util.Matrix3DUtils._raw[6];gl3d.util.Matrix3DUtils._dir.x=
gl3d.util.Matrix3DUtils._raw[8];gl3d.util.Matrix3DUtils._dir.y=gl3d.util.Matrix3DUtils._raw[9];gl3d.util.Matrix3DUtils._dir.z=gl3d.util.Matrix3DUtils._raw[10];gl3d.util.Matrix3DUtils._scaleSrc.x=gl3d.util.Matrix3DUtils._right.length;gl3d.util.Matrix3DUtils._scaleSrc.y=gl3d.util.Matrix3DUtils._up.length;gl3d.util.Matrix3DUtils._scaleSrc.z=gl3d.util.Matrix3DUtils._dir.length;var sx=1/gl3d.util.Matrix3DUtils._scaleSrc.x;var sy=1/gl3d.util.Matrix3DUtils._scaleSrc.y;var sz=1/gl3d.util.Matrix3DUtils._scaleSrc.z;
gl3d.util.Matrix3DUtils._raw[0]=gl3d.util.Matrix3DUtils._raw[0]*sx;gl3d.util.Matrix3DUtils._raw[1]=gl3d.util.Matrix3DUtils._raw[1]*sx;gl3d.util.Matrix3DUtils._raw[2]=gl3d.util.Matrix3DUtils._raw[2]*sx;gl3d.util.Matrix3DUtils._raw[4]=gl3d.util.Matrix3DUtils._raw[4]*sy;gl3d.util.Matrix3DUtils._raw[5]=gl3d.util.Matrix3DUtils._raw[5]*sy;gl3d.util.Matrix3DUtils._raw[6]=gl3d.util.Matrix3DUtils._raw[6]*sy;gl3d.util.Matrix3DUtils._raw[8]=gl3d.util.Matrix3DUtils._raw[8]*sz;gl3d.util.Matrix3DUtils._raw[9]=
gl3d.util.Matrix3DUtils._raw[9]*sz;gl3d.util.Matrix3DUtils._raw[10]=gl3d.util.Matrix3DUtils._raw[10]*sz;src.copyRawDataFrom(gl3d.util.Matrix3DUtils._raw);dest.copyRawDataTo(gl3d.util.Matrix3DUtils._raw);gl3d.util.Matrix3DUtils._right.x=gl3d.util.Matrix3DUtils._raw[0];gl3d.util.Matrix3DUtils._right.y=gl3d.util.Matrix3DUtils._raw[1];gl3d.util.Matrix3DUtils._right.z=gl3d.util.Matrix3DUtils._raw[2];gl3d.util.Matrix3DUtils._up.x=gl3d.util.Matrix3DUtils._raw[4];gl3d.util.Matrix3DUtils._up.y=gl3d.util.Matrix3DUtils._raw[5];
gl3d.util.Matrix3DUtils._up.z=gl3d.util.Matrix3DUtils._raw[6];gl3d.util.Matrix3DUtils._dir.x=gl3d.util.Matrix3DUtils._raw[8];gl3d.util.Matrix3DUtils._dir.y=gl3d.util.Matrix3DUtils._raw[9];gl3d.util.Matrix3DUtils._dir.z=gl3d.util.Matrix3DUtils._raw[10];gl3d.util.Matrix3DUtils._scaleDest.x=gl3d.util.Matrix3DUtils._right.length;gl3d.util.Matrix3DUtils._scaleDest.y=gl3d.util.Matrix3DUtils._up.length;gl3d.util.Matrix3DUtils._scaleDest.z=gl3d.util.Matrix3DUtils._dir.length;sx=1/gl3d.util.Matrix3DUtils._scaleDest.x;
sy=1/gl3d.util.Matrix3DUtils._scaleDest.y;sz=1/gl3d.util.Matrix3DUtils._scaleDest.z;gl3d.util.Matrix3DUtils._raw[0]=gl3d.util.Matrix3DUtils._raw[0]*sx;gl3d.util.Matrix3DUtils._raw[1]=gl3d.util.Matrix3DUtils._raw[1]*sx;gl3d.util.Matrix3DUtils._raw[2]=gl3d.util.Matrix3DUtils._raw[2]*sx;gl3d.util.Matrix3DUtils._raw[4]=gl3d.util.Matrix3DUtils._raw[4]*sy;gl3d.util.Matrix3DUtils._raw[5]=gl3d.util.Matrix3DUtils._raw[5]*sy;gl3d.util.Matrix3DUtils._raw[6]=gl3d.util.Matrix3DUtils._raw[6]*sy;gl3d.util.Matrix3DUtils._raw[8]=
gl3d.util.Matrix3DUtils._raw[8]*sz;gl3d.util.Matrix3DUtils._raw[9]=gl3d.util.Matrix3DUtils._raw[9]*sz;gl3d.util.Matrix3DUtils._raw[10]=gl3d.util.Matrix3DUtils._raw[10]*sz;dest.copyRawDataFrom(gl3d.util.Matrix3DUtils._raw);src.interpolateTo(dest,percent);gl3d.util.Matrix3DUtils._scaleSrc.x=gl3d.util.Matrix3DUtils._scaleSrc.x+(gl3d.util.Matrix3DUtils._scaleDest.x-gl3d.util.Matrix3DUtils._scaleSrc.x)*percent;gl3d.util.Matrix3DUtils._scaleSrc.y=gl3d.util.Matrix3DUtils._scaleSrc.y+(gl3d.util.Matrix3DUtils._scaleDest.y-
gl3d.util.Matrix3DUtils._scaleSrc.y)*percent;gl3d.util.Matrix3DUtils._scaleSrc.z=gl3d.util.Matrix3DUtils._scaleSrc.z+(gl3d.util.Matrix3DUtils._scaleDest.z-gl3d.util.Matrix3DUtils._scaleSrc.z)*percent;src.prependScale(gl3d.util.Matrix3DUtils._scaleSrc.x,gl3d.util.Matrix3DUtils._scaleSrc.y,gl3d.util.Matrix3DUtils._scaleSrc.z);dest.prependScale(gl3d.util.Matrix3DUtils._scaleDest.x,gl3d.util.Matrix3DUtils._scaleDest.y,gl3d.util.Matrix3DUtils._scaleDest.z)};
gl3d.util.Matrix3DUtils.resetPosition=function(m){gl3d.util.Matrix3DUtils.setPosition(m,0,0,0)};gl3d.util.Matrix3DUtils.resetRotation=function(m){gl3d.util.Matrix3DUtils.setRotation(m,0,0,0)};gl3d.util.Matrix3DUtils.resetScale=function(m){gl3d.util.Matrix3DUtils.setScale(m,1,1,1)};
gl3d.util.Matrix3DUtils.buildOrthoProjection=function(left,right,bottom,top,near,far,out){out=typeof out!=='undefined'?out:null;var scaleX=NaN;var scaleY=NaN;var scaleZ=NaN;var offsX=NaN;var offsY=NaN;var offsZ=NaN;if(out==null)out=new flash.geom.Matrix3D;scaleX=2/(right-left);scaleY=2/(top-bottom);scaleZ=1/(far-near);offsX=-.5*(right+left)*scaleX;offsY=-.5*(top+bottom)*scaleY;offsZ=-near*scaleZ;gl3d.util.Matrix3DUtils._raw[0]=scaleX;gl3d.util.Matrix3DUtils._raw[5]=scaleY;gl3d.util.Matrix3DUtils._raw[10]=
scaleZ;gl3d.util.Matrix3DUtils._raw[12]=offsX;gl3d.util.Matrix3DUtils._raw[13]=offsY;gl3d.util.Matrix3DUtils._raw[14]=offsZ;gl3d.util.Matrix3DUtils._raw[1]=gl3d.util.Matrix3DUtils._raw[2]=gl3d.util.Matrix3DUtils._raw[4]=gl3d.util.Matrix3DUtils._raw[6]=gl3d.util.Matrix3DUtils._raw[8]=gl3d.util.Matrix3DUtils._raw[9]=gl3d.util.Matrix3DUtils._raw[3]=gl3d.util.Matrix3DUtils._raw[7]=gl3d.util.Matrix3DUtils._raw[11]=0;gl3d.util.Matrix3DUtils._raw[15]=1;out.copyRawDataFrom(gl3d.util.Matrix3DUtils._raw);return out};
gl3d.util.Matrix3DUtils.decompose=function(m,orientationStyle,vec){orientationStyle=typeof orientationStyle!=='undefined'?orientationStyle:null;vec=typeof vec!=='undefined'?vec:null;if(orientationStyle==null)orientationStyle=flash.geom.Orientation3D.EULER_ANGLES;if(vec==null)vec=[new flash.geom.Vector3D,new flash.geom.Vector3D,new flash.geom.Vector3D].slice();var mr=gl3d.util.Matrix3DUtils._raw;m.copyRawDataTo(mr);var pos=vec[0];pos.setTo(mr[12],mr[13],mr[14]);var scale=vec[2];scale.x=Math.sqrt(mr[0]*
mr[0]+mr[1]*mr[1]+mr[2]*mr[2]);scale.y=Math.sqrt(mr[4]*mr[4]+mr[5]*mr[5]+mr[6]*mr[6]);scale.z=Math.sqrt(mr[8]*mr[8]+mr[9]*mr[9]+mr[10]*mr[10]);if(mr[0]*(mr[5]*mr[10]-mr[6]*mr[9])-mr[1]*(mr[4]*mr[10]-mr[6]*mr[8])+mr[2]*(mr[4]*mr[9]-mr[5]*mr[8])<0)scale.z=-scale.z;mr[0]/=scale.x;mr[1]/=scale.x;mr[2]/=scale.x;mr[4]/=scale.y;mr[5]/=scale.y;mr[6]/=scale.y;mr[8]/=scale.z;mr[9]/=scale.z;mr[10]/=scale.z;var rot=vec[1];switch(orientationStyle){case flash.geom.Orientation3D.AXIS_ANGLE:rot.w=Math.acos((mr[0]+
mr[5]+mr[10]-1)/2);var len=Math.sqrt((mr[6]-mr[9])*(mr[6]-mr[9])+(mr[8]-mr[2])*(mr[8]-mr[2])+(mr[1]-mr[4])*(mr[1]-mr[4]));if(len!=0){rot.x=(mr[6]-mr[9])/len;rot.y=(mr[8]-mr[2])/len;rot.z=(mr[1]-mr[4])/len}else rot.x=rot.y=rot.z=0;break;case flash.geom.Orientation3D.QUATERNION:var tr=mr[0]+mr[5]+mr[10];if(tr>0){rot.w=Math.sqrt(1+tr)/2;rot.x=(mr[6]-mr[9])/(4*rot.w);rot.y=(mr[8]-mr[2])/(4*rot.w);rot.z=(mr[1]-mr[4])/(4*rot.w)}else if(mr[0]>mr[5]&&mr[0]>mr[10]){rot.x=Math.sqrt(1+mr[0]-mr[5]-mr[10])/2;
rot.w=(mr[6]-mr[9])/(4*rot.x);rot.y=(mr[1]+mr[4])/(4*rot.x);rot.z=(mr[8]+mr[2])/(4*rot.x)}else if(mr[5]>mr[10]){rot.y=Math.sqrt(1+mr[5]-mr[0]-mr[10])/2;rot.x=(mr[1]+mr[4])/(4*rot.y);rot.w=(mr[8]-mr[2])/(4*rot.y);rot.z=(mr[6]+mr[9])/(4*rot.y)}else{rot.z=Math.sqrt(1+mr[10]-mr[0]-mr[5])/2;rot.x=(mr[8]+mr[2])/(4*rot.z);rot.y=(mr[6]+mr[9])/(4*rot.z);rot.w=(mr[1]-mr[4])/(4*rot.z)}break;case flash.geom.Orientation3D.EULER_ANGLES:rot.y=Math.asin(-mr[2]);if(mr[2]!=1&&mr[2]!=-1){rot.x=Math.atan2(mr[6],mr[10]);
rot.z=Math.atan2(mr[1],mr[0])}else{rot.z=0;rot.x=Math.atan2(mr[4],mr[5])}break}return vec};gl3d.util.Matrix3DUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'Matrix3DUtils',qName:'gl3d.util.Matrix3DUtils'}]};goog.exportSymbol('gl3d.util.Matrix3DUtils',gl3d.util.Matrix3DUtils);gl3d.util.Matrix3DUtils.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Matrix3DUtils':{type:'',declaredBy:'gl3d.util.Matrix3DUtils'}}}}};goog.provide('gl3d.core.Node3D');goog.require('gl3d.pick.AS3Picking');goog.require('gl3d.util.Matrix3DUtils');gl3d.core.Node3D=function(name){name=typeof name!=='undefined'?name:null;this._world=new flash.geom.Matrix3D;this._world2local=new flash.geom.Matrix3D;this._matrix=new flash.geom.Matrix3D;this.children=new Array;this.renderChildren=new Array;this.picking=new gl3d.pick.AS3Picking;this.name=name};gl3d.core.Node3D.prototype.parent;gl3d.core.Node3D.prototype._world;gl3d.core.Node3D.prototype._world2local;
gl3d.core.Node3D.prototype._matrix;gl3d.core.Node3D.prototype.children;gl3d.core.Node3D.prototype.renderChildren;gl3d.core.Node3D.prototype.drawable;gl3d.core.Node3D.prototype.material;gl3d.core.Node3D.prototype.name;gl3d.core.Node3D.prototype.picking;gl3d.core.Node3D.prototype.controllers;gl3d.core.Node3D.prototype.skin;gl3d.core.Node3D.prototype.type;gl3d.core.Node3D.prototype.copyfrom;gl3d.core.Node3D.prototype.dirty=true;gl3d.core.Node3D.prototype.dirtyInv=true;
gl3d.core.Node3D.prototype.visible=true;gl3d.core.Node3D._temp0=new flash.geom.Vector3D;gl3d.core.Node3D._temp1=new flash.geom.Vector3D;gl3d.core.Node3D._temp2=new flash.geom.Vector3D;gl3d.core.Node3D.prototype.addChild=function(n){if(n.parent)n.parent.removeChild(n);this.children.push(n);n.parent=this;if(n==this)throw'error';n.updateTransforms(true)};gl3d.core.Node3D.prototype.removeChild=function(n){var i=this.children.indexOf(n);if(i!=-1)this.children.splice(i,1);n.parent=null;n.updateTransforms(true)};
gl3d.core.Node3D.prototype.update=function(view,material){material=typeof material!=='undefined'?material:null;if(this.controllers){var foreachiter0_target=this.controllers;for(var foreachiter0 in foreachiter0_target){var c=foreachiter0_target[foreachiter0];if(c)c.update(view.time)}}if(material||this.material)(material||this.material).draw(this,view);var foreachiter1_target=this.renderChildren;for(var foreachiter1 in foreachiter1_target){var child=foreachiter1_target[foreachiter1];child.update(view,
material)}};gl3d.core.Node3D.prototype.setRotation=function(x,y,z){gl3d.util.Matrix3DUtils.setRotation(this._matrix,x,y,z);this.updateTransforms(true)};gl3d.core.Node3D.prototype.getRotation=function(local,out){local=typeof local!=='undefined'?local:true;out=typeof out!=='undefined'?out:null;if(out==null)out=new flash.geom.Vector3D;out=gl3d.util.Matrix3DUtils.getRotation(local?this._matrix:this.world,out);return out};
gl3d.core.Node3D.prototype.updateTransforms=function(includeChildren){includeChildren=typeof includeChildren!=='undefined'?includeChildren:false;if(includeChildren){var foreachiter2_target=this.children;for(var foreachiter2 in foreachiter2_target){var c=foreachiter2_target[foreachiter2];c.updateTransforms(true)}}this.dirty=true};
gl3d.core.Node3D.prototype.rayMeshTest=function(rayOrigin,rayDirection,pixelPos){pixelPos=typeof pixelPos!=='undefined'?pixelPos:null;if(this.picking)return this.picking.pick(this,rayOrigin,rayDirection,pixelPos);return false};
gl3d.core.Node3D.prototype.clone=function(addRender){addRender=typeof addRender!=='undefined'?addRender:false;var node=new gl3d.core.Node3D;node.copyfrom=this;node.drawable=this.drawable;node.material=this.material;node.matrix=this.matrix.clone();node.skin=this.skin;var foreachiter3_target=this.children;for(var foreachiter3 in foreachiter3_target){var child=foreachiter3_target[foreachiter3];if(child.type!='JOINT')node.addChild(child.clone(addRender))}if(addRender&&this.drawable)this.renderChildren.push(node);
return node};gl3d.core.Node3D.prototype.dispose=function(){};
Object.defineProperties(gl3d.core.Node3D.prototype,{x:{get:function(){this._matrix.copyColumnTo(3,gl3d.core.Node3D._temp0);return gl3d.core.Node3D._temp0.x},set:function(val){this._matrix.copyColumnTo(3,gl3d.core.Node3D._temp0);gl3d.core.Node3D._temp0.x=val;this._matrix.copyColumnFrom(3,gl3d.core.Node3D._temp0);this.updateTransforms(true)}},y:{get:function(){this._matrix.copyColumnTo(3,gl3d.core.Node3D._temp0);return gl3d.core.Node3D._temp0.y},set:function(val){this._matrix.copyColumnTo(3,gl3d.core.Node3D._temp0);
gl3d.core.Node3D._temp0.y=val;this._matrix.copyColumnFrom(3,gl3d.core.Node3D._temp0);this.updateTransforms(true)}},z:{get:function(){this._matrix.copyColumnTo(3,gl3d.core.Node3D._temp0);return gl3d.core.Node3D._temp0.z},set:function(val){this._matrix.copyColumnTo(3,gl3d.core.Node3D._temp0);gl3d.core.Node3D._temp0.z=val;this._matrix.copyColumnFrom(3,gl3d.core.Node3D._temp0);this.updateTransforms(true)}},scaleX:{get:function(){return gl3d.util.Matrix3DUtils.getRight(this._matrix,gl3d.core.Node3D._temp0).length},
set:function(val){gl3d.util.Matrix3DUtils.scaleX(this._matrix,val);this.updateTransforms(true)}},scaleY:{get:function(){return gl3d.util.Matrix3DUtils.getUp(this._matrix,gl3d.core.Node3D._temp0).length},set:function(val){gl3d.util.Matrix3DUtils.scaleY(this._matrix,val);this.updateTransforms(true)}},scaleZ:{get:function(){return gl3d.util.Matrix3DUtils.getDir(this._matrix,gl3d.core.Node3D._temp0).length},set:function(val){gl3d.util.Matrix3DUtils.scaleZ(this._matrix,val);this.updateTransforms(true)}},
world:{get:function(){if(this.dirty){this._matrix.copyToMatrix3D(this._world);if(this.parent&&this.parent.parent)this._world.append(this.parent.world);this.dirty=false;this.dirtyInv=true}return this._world},set:function(value){this._matrix.copyFrom(value);if(this.parent)this._matrix.append(this.parent.world2local);this.matrix=this._matrix}},world2local:{get:function(){if(this.dirty||this.dirtyInv){this._world2local.copyFrom(this.world);this._world2local.invert();this.dirtyInv=false}return this._world2local}},
matrix:{get:function(){return this._matrix},set:function(value){this._matrix=value;this.updateTransforms(true)}}});gl3d.core.Node3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Node3D',qName:'gl3d.core.Node3D'}]};goog.exportSymbol('gl3d.core.Node3D',gl3d.core.Node3D);
gl3d.core.Node3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'parent':{type:'Node3D'},'_world':{type:'Matrix3D'},'_world2local':{type:'Matrix3D'},'children':{type:'Vector.\x3cNode3D\x3e'},'renderChildren':{type:'Vector.\x3cNode3D\x3e'},'drawable':{type:'Drawable'},'material':{type:'MaterialBase'},'name':{type:'String'},'picking':{type:'Picking'},'controllers':{type:'Vector.\x3cCtrl\x3e'},'skin':{type:'Skin'},'type':{type:'String'},'copyfrom':{type:'Node3D'},'visible':{type:'Boolean'}}},
accessors:function(){return{'x':{type:'Number',declaredBy:'gl3d.core.Node3D'},'y':{type:'Number',declaredBy:'gl3d.core.Node3D'},'z':{type:'Number',declaredBy:'gl3d.core.Node3D'},'scaleX':{type:'Number',declaredBy:'gl3d.core.Node3D'},'scaleY':{type:'Number',declaredBy:'gl3d.core.Node3D'},'scaleZ':{type:'Number',declaredBy:'gl3d.core.Node3D'},'world':{type:'Matrix3D',declaredBy:'gl3d.core.Node3D'},'world2local':{type:'Matrix3D',declaredBy:'gl3d.core.Node3D'},'matrix':{type:'Matrix3D',declaredBy:'gl3d.core.Node3D'}}},
methods:function(){return{'Node3D':{type:'',declaredBy:'gl3d.core.Node3D'},'addChild':{type:'void',declaredBy:'gl3d.core.Node3D'},'removeChild':{type:'void',declaredBy:'gl3d.core.Node3D'},'update':{type:'void',declaredBy:'gl3d.core.Node3D'},'setRotation':{type:'void',declaredBy:'gl3d.core.Node3D'},'getRotation':{type:'Vector3D',declaredBy:'gl3d.core.Node3D'},'updateTransforms':{type:'void',declaredBy:'gl3d.core.Node3D'},'rayMeshTest':{type:'Boolean',declaredBy:'gl3d.core.Node3D'},'clone':{type:'Node3D',
declaredBy:'gl3d.core.Node3D'},'dispose':{type:'void',declaredBy:'gl3d.core.Node3D'}}}}};goog.provide('gl3d.core.Camera3D');goog.require('com.adobe.utils.PerspectiveMatrix3D');goog.require('gl3d.core.Node3D');gl3d.core.Camera3D=function(name){name=typeof name!=='undefined'?name:null;this.perspective=new com.adobe.utils.PerspectiveMatrix3D;this._view=new flash.geom.Matrix3D;gl3d.core.Camera3D.base(this,'constructor',name)};goog.inherits(gl3d.core.Camera3D,gl3d.core.Node3D);gl3d.core.Camera3D.prototype.perspective;gl3d.core.Camera3D.prototype._view;
gl3d.core.Camera3D.prototype.computePickRayDirectionMouse=function(mouseX,mouseY,viewWidth,viewHeight,rayOrigin,rayDirection,pixelPos){pixelPos=typeof pixelPos!=='undefined'?pixelPos:null;var x=(mouseX-viewWidth*.5)/viewWidth*2;var y=-(mouseY-viewHeight*.5)/viewHeight*2;return this.computePickRayDirection(x,y,rayOrigin,rayDirection,pixelPos)};
gl3d.core.Camera3D.prototype.computePickRayDirection=function(x,y,rayOrigin,rayDirection,pixelPos){pixelPos=typeof pixelPos!=='undefined'?pixelPos:null;var prjPos=new flash.geom.Vector3D(x,y,0);var unprjMatrix=this.perspective.clone();unprjMatrix.invert();unprjMatrix.append(this.world);var pos=unprjMatrix.transformVector(prjPos);pos.project();if(pixelPos!=null)pixelPos.setTo(pos.x,pos.y,pos.z);rayOrigin.setTo(this.x,this.y,this.z);rayDirection.setTo(pos.x-this.x,pos.y-this.y,pos.z-this.z);rayDirection.normalize()};
gl3d.core.Camera3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Camera3D',qName:'gl3d.core.Camera3D'}]};goog.exportSymbol('gl3d.core.Camera3D',gl3d.core.Camera3D);
gl3d.core.Camera3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'perspective':{type:'PerspectiveMatrix3D'}}},accessors:function(){return{}},methods:function(){return{'Camera3D':{type:'',declaredBy:'gl3d.core.Camera3D'},'computePickRayDirectionMouse':{type:'void',declaredBy:'gl3d.core.Camera3D'},'computePickRayDirection':{type:'void',declaredBy:'gl3d.core.Camera3D'}}}}};goog.provide('flash.media.Camera');goog.require('flash.events.EventDispatcher');flash.media.Camera=function(){flash.media.Camera.base(this,'constructor')};goog.inherits(flash.media.Camera,flash.events.EventDispatcher);flash.media.Camera._scanHardware=function(){};flash.media.Camera.getCamera=function(param1){param1=typeof param1!=='undefined'?param1:null;return null};flash.media.Camera.prototype.setCursor=function(param1){};flash.media.Camera.prototype.setKeyFrameInterval=function(param1){};
flash.media.Camera.prototype.setLoopback=function(param1){param1=typeof param1!=='undefined'?param1:false};flash.media.Camera.prototype.setMode=function(param1,param2,param3,param4){param4=typeof param4!=='undefined'?param4:true};flash.media.Camera.prototype.setMotionLevel=function(param1,param2){param2=typeof param2!=='undefined'?param2:2E3};flash.media.Camera.prototype.setQuality=function(param1,param2){};flash.media.Camera.prototype.drawToBitmapData=function(param1){};
flash.media.Camera.prototype.copyToByteArray=function(param1,param2){};flash.media.Camera.prototype.copyToVector=function(param1,param2){};
Object.defineProperties(flash.media.Camera.prototype,{activityLevel:{get:function(){return 0}},bandwidth:{get:function(){return 0}},currentFPS:{get:function(){return 0}},fps:{get:function(){return 0}},height:{get:function(){return 0}},index:{get:function(){return 0}},keyFrameInterval:{get:function(){return 0}},loopback:{get:function(){return false}},motionLevel:{get:function(){return 0}},motionTimeout:{get:function(){return 0}},muted:{get:function(){return false}},name:{get:function(){return null}},
position:{get:function(){return null}},quality:{get:function(){return 0}},width:{get:function(){return 0}}});Object.defineProperties(flash.media.Camera,{names:{get:function(){return null}},isSupported:{get:function(){return false}}});flash.media.Camera.prototype.FLEXJS_CLASS_INFO={names:[{name:'Camera',qName:'flash.media.Camera'}]};goog.exportSymbol('flash.media.Camera',flash.media.Camera);
flash.media.Camera.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'activityLevel':{type:'Number',declaredBy:'flash.media.Camera'},'bandwidth':{type:'int',declaredBy:'flash.media.Camera'},'currentFPS':{type:'Number',declaredBy:'flash.media.Camera'},'fps':{type:'Number',declaredBy:'flash.media.Camera'},'height':{type:'int',declaredBy:'flash.media.Camera'},'index':{type:'int',declaredBy:'flash.media.Camera'},'keyFrameInterval':{type:'int',
declaredBy:'flash.media.Camera'},'loopback':{type:'Boolean',declaredBy:'flash.media.Camera'},'motionLevel':{type:'int',declaredBy:'flash.media.Camera'},'motionTimeout':{type:'int',declaredBy:'flash.media.Camera'},'muted':{type:'Boolean',declaredBy:'flash.media.Camera'},'name':{type:'String',declaredBy:'flash.media.Camera'},'position':{type:'String',declaredBy:'flash.media.Camera'},'quality':{type:'int',declaredBy:'flash.media.Camera'},'width':{type:'int',declaredBy:'flash.media.Camera'}}},methods:function(){return{'Camera':{type:'',
declaredBy:'flash.media.Camera'},'setCursor':{type:'void',declaredBy:'flash.media.Camera'},'setKeyFrameInterval':{type:'void',declaredBy:'flash.media.Camera'},'setLoopback':{type:'void',declaredBy:'flash.media.Camera'},'setMode':{type:'void',declaredBy:'flash.media.Camera'},'setMotionLevel':{type:'void',declaredBy:'flash.media.Camera'},'setQuality':{type:'void',declaredBy:'flash.media.Camera'},'drawToBitmapData':{type:'void',declaredBy:'flash.media.Camera'},'copyToByteArray':{type:'void',declaredBy:'flash.media.Camera'},
'copyToVector':{type:'void',declaredBy:'flash.media.Camera'}}},metadata:function(){return[]}}};goog.provide('gl3d.util.MathUtil');gl3d.util.MathUtil=function(){};gl3d.util.MathUtil.getNextPow2=function(v){var r=1;while(r<v)r*=2;return r};gl3d.util.MathUtil.prototype.FLEXJS_CLASS_INFO={names:[{name:'MathUtil',qName:'gl3d.util.MathUtil'}]};goog.exportSymbol('gl3d.util.MathUtil',gl3d.util.MathUtil);gl3d.util.MathUtil.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'MathUtil':{type:'',declaredBy:'gl3d.util.MathUtil'}}}}};goog.provide('gl3d.core.TextureSet');goog.require('flash.media.Camera');goog.require('gl3d.util.MathUtil');
gl3d.core.TextureSet=function(data,isRect,repeat,optimizeForRenderToTexture,mipmap,async,filter){data=typeof data!=='undefined'?data:null;isRect=typeof isRect!=='undefined'?isRect:false;repeat=typeof repeat!=='undefined'?repeat:true;optimizeForRenderToTexture=typeof optimizeForRenderToTexture!=='undefined'?optimizeForRenderToTexture:false;mipmap=typeof mipmap!=='undefined'?mipmap:true;async=typeof async!=='undefined'?async:true;filter=typeof filter!=='undefined'?filter:'linear';this.repeat=repeat;
this.filter=filter;this.async=async;this.mipmap=mipmap;this.optimizeForRenderToTexture=optimizeForRenderToTexture;this.isCube=org.apache.flex.utils.Language.is(data,Array);this.isRect=isRect;this.data=data;this.updateATF(null,false);if(org.apache.flex.utils.Language.is(data,String))this.ready=false;if(org.apache.flex.utils.Language.is(data,flash.media.Camera)){this.isCamera=true;this.ready=false}};gl3d.core.TextureSet.prototype.name;gl3d.core.TextureSet.prototype.invalid=true;
gl3d.core.TextureSet.prototype.dataInvalid=true;gl3d.core.TextureSet.prototype.data;gl3d.core.TextureSet.prototype.texture;gl3d.core.TextureSet.prototype.context;gl3d.core.TextureSet.prototype.isRect;gl3d.core.TextureSet.prototype.isCube=false;gl3d.core.TextureSet.prototype.isCamera=false;gl3d.core.TextureSet.prototype.optimizeForRenderToTexture;gl3d.core.TextureSet.prototype.mipmap;gl3d.core.TextureSet.prototype.async;gl3d.core.TextureSet.prototype.filter;gl3d.core.TextureSet.prototype.repeat;gl3d.core.TextureSet.prototype.width;
gl3d.core.TextureSet.prototype.height;gl3d.core.TextureSet.prototype.ready=true;gl3d.core.TextureSet.prototype.isDXT1;gl3d.core.TextureSet.prototype.isDXT5;
gl3d.core.TextureSet.prototype.updateRect=function(context){var bmd=org.apache.flex.utils.Language.as(this.data,flash.display.BitmapData);if(bmd){if(this.texture==null)this.texture=context.createRectangleTexture(bmd.width,bmd.height,flash.display3D.Context3DTextureFormat.BGRA,this.optimizeForRenderToTexture);if(this.dataInvalid){this.uploadFromBitmapData(this.texture,bmd,0);this.dataInvalid=false}}};
gl3d.core.TextureSet.prototype.updateBMDTexture=function(w,h,bmd,texture,side){side=typeof side!=='undefined'?side:0;this.width=w;this.height=h;var temp;var level=0;if(w!=bmd.width||h!=bmd.height){var bak=bmd;bmd=new flash.display.BitmapData(w,h,bak.transparent,0);bmd.draw(bak,new flash.geom.Matrix(w/bak.width,0,0,h/bak.height),null,null,null,true)}while(w>0||h>0){if(level==0){this.uploadFromBitmapData(texture,bmd,side,level);if(!this.mipmap)break}else{temp=new flash.display.BitmapData(Math.max(w,
1),Math.max(h,1),bmd.transparent,0);temp.draw(bmd,new flash.geom.Matrix(temp.width/bmd.width,0,0,temp.height/bmd.height));this.uploadFromBitmapData(texture,temp,side,level);temp.dispose()}level++;w/=2;h/=2}};
gl3d.core.TextureSet.prototype.uploadFromBitmapData=function(texture,source,side,miplevel){miplevel=typeof miplevel!=='undefined'?miplevel:0;var byte=new flash.utils.ByteArray;byte.endian=flash.utils.Endian.LITTLE_ENDIAN;source.copyPixelsToByteArray(source.rect,byte);if(org.apache.flex.utils.Language.is(texture,flash.display3D.textures.Texture))org.apache.flex.utils.Language.as(texture,flash.display3D.textures.Texture).uploadFromByteArray(byte,0,miplevel);else if(org.apache.flex.utils.Language.is(texture,
flash.display3D.textures.CubeTexture))org.apache.flex.utils.Language.as(texture,flash.display3D.textures.CubeTexture).uploadFromByteArray(byte,0,side,miplevel);else if(org.apache.flex.utils.Language.is(texture,flash.display3D.textures.RectangleTexture))org.apache.flex.utils.Language.as(texture,flash.display3D.textures.RectangleTexture).uploadFromByteArray(byte,0)};
gl3d.core.TextureSet.prototype.updateBMD=function(context){var bmd=org.apache.flex.utils.Language.as(this.data,flash.display.BitmapData);if(this.data){if(this.texture==null){var w=gl3d.util.MathUtil.getNextPow2(bmd.width);var h=gl3d.util.MathUtil.getNextPow2(bmd.height);this.texture=context.createTexture(w,h,flash.display3D.Context3DTextureFormat.BGRA,this.optimizeForRenderToTexture)}if(this.dataInvalid){this.updateBMDTexture(w,h,bmd,this.texture);this.dataInvalid=false}}};
gl3d.core.TextureSet.prototype.updateBMDs=function(context){var datas=org.apache.flex.utils.Language.as(this.data,Array);if(datas){var ct=org.apache.flex.utils.Language.as(this.texture,flash.display3D.textures.CubeTexture);if(this.dataInvalid){for(var s=0;s<6;s++){var level=0;var bmd=datas[s];var w=gl3d.util.MathUtil.getNextPow2(Math.max(bmd.width,bmd.height));if(this.texture==null)this.texture=context.createCubeTexture(w,flash.display3D.Context3DTextureFormat.BGRA,this.optimizeForRenderToTexture);
this.updateBMDTexture(w,w,bmd,this.texture,s)}this.dataInvalid=false}}};
gl3d.core.TextureSet.prototype.updateVideo=function(context){var camera=org.apache.flex.utils.Language.as(this.data,flash.media.Camera);if(camera&&flash.display3D.Context3D.supportsVideoTexture)if(this.texture==null){this.texture=org.apache.flex.utils.Language.as(context.createVideoTexture(),flash.display3D.textures.TextureBase);var vt=this.texture;vt.attachCamera(camera);vt.addEventListener(flash.events.Event.TEXTURE_READY,org.apache.flex.utils.Language.closure(this.vt_textureReady,this,'vt_textureReady'))}};
gl3d.core.TextureSet.prototype.vt_textureReady=function(e){this.ready=true};
gl3d.core.TextureSet.prototype.updateATF=function(context,createTexture){var self=this;createTexture=typeof createTexture!=='undefined'?createTexture:true;var __localFn0__=function(){self.ready=true};var atf=org.apache.flex.utils.Language.as(this.data,flash.utils.ByteArray);if(atf){atf.position=0;var sign=atf.readUTFBytes(3);if(sign!='ATF')throw'ATF parsing error, unknown format '+sign;if(atf[6]==255)atf.position=12;else atf.position=6;var tdata=atf.readUnsignedByte();var _type=tdata>>7;var _format=
tdata&127;var format=null;switch(_format){case 0:case 1:format=flash.display3D.Context3DTextureFormat.BGRA;break;case 2:case 3:case 12:format=flash.display3D.Context3DTextureFormat.COMPRESSED;this.isDXT1=true;break;case 4:case 5:case 13:format=flash.display3D.Context3DTextureFormat.COMPRESSED_ALPHA;this.isDXT5=true;break;default:throw'Invalid ATF format';}switch(_type){case 0:this.isCube=false;break;case 1:this.isCube=true}this.width=org.apache.flex.utils.Language._int(Math.pow(2,this.data.readUnsignedByte()));
this.height=org.apache.flex.utils.Language._int(Math.pow(2,this.data.readUnsignedByte()));var numTextures=this.data.readUnsignedByte();if(createTexture){if(this.texture==null)this.texture=this.isCube?context.createCubeTexture(this.width,format,this.optimizeForRenderToTexture,0):context.createTexture(this.width,this.height,format,this.optimizeForRenderToTexture,0);if(this.dataInvalid){if(this.isCube)org.apache.flex.utils.Language.as(this.texture,flash.display3D.textures.CubeTexture).uploadCompressedTextureFromByteArray(atf,
0,this.async);else org.apache.flex.utils.Language.as(this.texture,flash.display3D.textures.Texture).uploadCompressedTextureFromByteArray(atf,0,this.async);this.ready=!this.async;if(this.async)org.apache.flex.utils.Language.as(this.texture,flash.display3D.textures.Texture).addEventListener(flash.events.Event.TEXTURE_READY,__localFn0__);this.dataInvalid=false}}}};
gl3d.core.TextureSet.prototype.update=function(view){var context=view.renderer.gl3d;if(this.invalid||this.context!=context){if(this.texture!=null)this.texture.dispose();this.texture=null;this.dataInvalid=true;this.invalid=false;this.context=context}if(this.isRect)this.updateRect(context);else if(org.apache.flex.utils.Language.is(this.data,Array))this.updateBMDs(context);else if(org.apache.flex.utils.Language.is(this.data,flash.display.BitmapData))this.updateBMD(context);else if(org.apache.flex.utils.Language.is(this.data,
flash.utils.ByteArray))this.updateATF(context);else if(org.apache.flex.utils.Language.is(this.data,flash.media.Camera))this.updateVideo(context);else;};gl3d.core.TextureSet.prototype.bind=function(context,i){context.setTextureAt(i,this.texture)};
Object.defineProperties(gl3d.core.TextureSet.prototype,{flags:{get:function(){var arr=[];if(this.mipmap&&!this.isCamera)arr.push('miplinear');if(this.isCube)arr.push('cube');if(this.repeat&&!this.isCube&&!this.isRect&&!this.isCamera)arr.push('repeat');if(this.isDXT1)arr.push('dxt1');else if(this.isDXT5)arr.push('dxt5');if(this.filter)arr.push(this.filter);return arr}}});gl3d.core.TextureSet.prototype.FLEXJS_CLASS_INFO={names:[{name:'TextureSet',qName:'gl3d.core.TextureSet'}]};
goog.exportSymbol('gl3d.core.TextureSet',gl3d.core.TextureSet);
gl3d.core.TextureSet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'name':{type:'String'},'invalid':{type:'Boolean'},'dataInvalid':{type:'Boolean'},'data':{type:'Object'},'texture':{type:'TextureBase'},'isRect':{type:'Boolean'},'isCube':{type:'Boolean'},'isCamera':{type:'Boolean'},'mipmap':{type:'Boolean'},'width':{type:'int'},'height':{type:'int'},'ready':{type:'Boolean'},'isDXT1':{type:'Boolean'},'isDXT5':{type:'Boolean'}}},accessors:function(){return{'flags':{type:'Array',
declaredBy:'gl3d.core.TextureSet'}}},methods:function(){return{'TextureSet':{type:'',declaredBy:'gl3d.core.TextureSet'},'updateRect':{type:'void',declaredBy:'gl3d.core.TextureSet'},'updateBMDTexture':{type:'void',declaredBy:'gl3d.core.TextureSet'},'updateBMD':{type:'void',declaredBy:'gl3d.core.TextureSet'},'updateBMDs':{type:'void',declaredBy:'gl3d.core.TextureSet'},'updateVideo':{type:'void',declaredBy:'gl3d.core.TextureSet'},'updateATF':{type:'void',declaredBy:'gl3d.core.TextureSet'},'update':{type:'void',
declaredBy:'gl3d.core.TextureSet'},'bind':{type:'void',declaredBy:'gl3d.core.TextureSet'}}}}};goog.provide('gl3d.core.Light');goog.require('gl3d.core.Camera3D');goog.require('gl3d.core.Node3D');goog.require('gl3d.core.TextureSet');
gl3d.core.Light=function(lightType,name){lightType=typeof lightType!=='undefined'?lightType:DISTANT;name=typeof name!=='undefined'?name:'light';this.color=new flash.geom.Vector3D(1,1,1,1);this.shadowMap=new gl3d.core.TextureSet;this._shadowCamera=new gl3d.core.Camera3D;this.innerConeAngle=Math.PI/6;this.outerConeAngle=Math.PI/3;this.lightType=lightType;gl3d.core.Light.base(this,'constructor',name)};goog.inherits(gl3d.core.Light,gl3d.core.Node3D);gl3d.core.Light.AMBIENT=0;gl3d.core.Light.DISTANT=1;
gl3d.core.Light.POINT=2;gl3d.core.Light.SPOT=3;gl3d.core.Light.prototype.lightType;gl3d.core.Light.prototype.color;gl3d.core.Light.prototype.shadowMapEnabled=false;gl3d.core.Light.prototype.shadowMapSize=512;gl3d.core.Light.prototype.shadowMap;gl3d.core.Light.prototype._shadowCamera;gl3d.core.Light.prototype.distance=10;gl3d.core.Light.prototype.innerConeAngle;gl3d.core.Light.prototype.outerConeAngle;
gl3d.core.Light.prototype.dispose=function(){gl3d.core.Light.base(this,'dispose');if(this.shadowMap&&this.shadowMap.texture)this.shadowMap.texture.dispose()};Object.defineProperties(gl3d.core.Light.prototype,{shadowCamera:{get:function(){this._shadowCamera.matrix.pointAt(new flash.geom.Vector3D(this.x,this.y,this.z),flash.geom.Vector3D.Z_AXIS,new flash.geom.Vector3D(0,-1,0));this._shadowCamera.updateTransforms();this._shadowCamera.perspective.orthoLH(10,10,-5,5);return this._shadowCamera}}});
gl3d.core.Light.prototype.FLEXJS_CLASS_INFO={names:[{name:'Light',qName:'gl3d.core.Light'}]};goog.exportSymbol('gl3d.core.Light',gl3d.core.Light);
gl3d.core.Light.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'lightType':{type:'int'},'color':{type:'Vector3D'},'shadowMapEnabled':{type:'Boolean'},'shadowMapSize':{type:'int'},'shadowMap':{type:'TextureSet'},'distance':{type:'Number'},'innerConeAngle':{type:'Number'},'outerConeAngle':{type:'Number'}}},accessors:function(){return{'shadowCamera':{type:'Camera3D',declaredBy:'gl3d.core.Light'}}},methods:function(){return{'Light':{type:'',declaredBy:'gl3d.core.Light'},
'dispose':{type:'void',declaredBy:'gl3d.core.Light'}}}}};goog.provide('as3Shader.NativeOp');as3Shader.NativeOp=function(shader){this.shader=shader};as3Shader.NativeOp.prototype.shader;as3Shader.NativeOp.prototype.doop=function(op,a,b){var fun=org.apache.flex.utils.Language.as(this[op],Function);if(fun!=null)return fun(a,b);return null};as3Shader.NativeOp.prototype.i_doop1=function(a,b,fun){var v=[];var len=Math.max(a.data.length,b.data.length);for(var i=0;i<len;i++)v[i]=fun(a.data[i%a.data.length],b.data[i%b.data.length]);return this.shader.object2Var(v)};
as3Shader.NativeOp.prototype.mov=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.add=function(a,b){return this.i_doop1(a,b,org.apache.flex.utils.Language.closure(this.i_add,this,'i_add'))};as3Shader.NativeOp.prototype.sub=function(a,b){return this.i_doop1(a,b,org.apache.flex.utils.Language.closure(this.i_sub,this,'i_sub'))};as3Shader.NativeOp.prototype.mul=function(a,b){return this.i_doop1(a,b,org.apache.flex.utils.Language.closure(this.i_mul,this,'i_mul'))};
as3Shader.NativeOp.prototype.div=function(a,b){return this.i_doop1(a,b,org.apache.flex.utils.Language.closure(this.i_div,this,'i_div'))};as3Shader.NativeOp.prototype.rcp=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.min=function(a,b){return this.i_doop1(a,b,org.apache.flex.utils.Language.closure(this.i_min,this,'i_min'))};as3Shader.NativeOp.prototype.max=function(a,b){return this.i_doop1(a,b,org.apache.flex.utils.Language.closure(this.i_max,this,'i_max'))};
as3Shader.NativeOp.prototype.frc=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.sqt=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.rsq=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.pow=function(a,b){return this.i_doop1(a,b,org.apache.flex.utils.Language.closure(this.i_pow,this,'i_pow'))};as3Shader.NativeOp.prototype.log=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.exp=function(a,b){throw'no imp';return null};
as3Shader.NativeOp.prototype.nrm=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.sin=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.cos=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.crs=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.dp3=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.dp4=function(a,b){throw'no imp';return null};
as3Shader.NativeOp.prototype.abs=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.neg=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.sat=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.m33=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.m44=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.m34=function(a,b){throw'no imp';return null};
as3Shader.NativeOp.prototype.ife=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.ine=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.ifg=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.ifl=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.els=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.eif=function(a,b){throw'no imp';return null};
as3Shader.NativeOp.prototype.ted=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.sge=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.slt=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.sgn=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.seq=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.sne=function(a,b){throw'no imp';return null};as3Shader.NativeOp.prototype.i_mov=function(a,b){return 0};
as3Shader.NativeOp.prototype.i_add=function(a,b){return a+b};as3Shader.NativeOp.prototype.i_sub=function(a,b){return a-b};as3Shader.NativeOp.prototype.i_mul=function(a,b){return a*b};as3Shader.NativeOp.prototype.i_div=function(a,b){return a/b};as3Shader.NativeOp.prototype.i_rcp=function(a,b){return 1/a};as3Shader.NativeOp.prototype.i_min=function(a,b){return Math.min(a,b)};as3Shader.NativeOp.prototype.i_max=function(a,b){return Math.max(a,b)};as3Shader.NativeOp.prototype.i_frc=function(a,b){return 0};
as3Shader.NativeOp.prototype.i_sqt=function(a,b){return 0};as3Shader.NativeOp.prototype.i_rsq=function(a,b){return 0};as3Shader.NativeOp.prototype.i_pow=function(a,b){return Math.pow(a,b)};as3Shader.NativeOp.prototype.i_log=function(a,b){return 0};as3Shader.NativeOp.prototype.i_exp=function(a,b){return 0};as3Shader.NativeOp.prototype.i_nrm=function(a,b){return 0};as3Shader.NativeOp.prototype.i_sin=function(a,b){return 0};as3Shader.NativeOp.prototype.i_cos=function(a,b){return 0};
as3Shader.NativeOp.prototype.i_crs=function(a,b){return 0};as3Shader.NativeOp.prototype.i_dp3=function(a,b){return 0};as3Shader.NativeOp.prototype.i_dp4=function(a,b){return 0};as3Shader.NativeOp.prototype.i_abs=function(a,b){return 0};as3Shader.NativeOp.prototype.i_neg=function(a,b){return 0};as3Shader.NativeOp.prototype.i_sat=function(a,b){return 0};as3Shader.NativeOp.prototype.i_m33=function(a,b){return 0};as3Shader.NativeOp.prototype.i_m44=function(a,b){return 0};
as3Shader.NativeOp.prototype.i_m34=function(a,b){return 0};as3Shader.NativeOp.prototype.i_ife=function(a,b){return 0};as3Shader.NativeOp.prototype.i_ine=function(a,b){return 0};as3Shader.NativeOp.prototype.i_ifg=function(a,b){return 0};as3Shader.NativeOp.prototype.i_ifl=function(a,b){return 0};as3Shader.NativeOp.prototype.i_els=function(a,b){return 0};as3Shader.NativeOp.prototype.i_eif=function(a,b){return 0};as3Shader.NativeOp.prototype.i_ted=function(a,b){return 0};
as3Shader.NativeOp.prototype.i_sge=function(a,b){return 0};as3Shader.NativeOp.prototype.i_slt=function(a,b){return 0};as3Shader.NativeOp.prototype.i_sgn=function(a,b){return 0};as3Shader.NativeOp.prototype.i_seq=function(a,b){return 0};as3Shader.NativeOp.prototype.i_sne=function(a,b){return 0};as3Shader.NativeOp.prototype.FLEXJS_CLASS_INFO={names:[{name:'NativeOp',qName:'as3Shader.NativeOp'}]};goog.exportSymbol('as3Shader.NativeOp',as3Shader.NativeOp);
as3Shader.NativeOp.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'NativeOp':{type:'',declaredBy:'as3Shader.NativeOp'},'doop':{type:'Var',declaredBy:'as3Shader.NativeOp'},'i_doop1':{type:'Var',declaredBy:'as3Shader.NativeOp'},'mov':{type:'Var',declaredBy:'as3Shader.NativeOp'},'add':{type:'Var',declaredBy:'as3Shader.NativeOp'},'sub':{type:'Var',declaredBy:'as3Shader.NativeOp'},'mul':{type:'Var',declaredBy:'as3Shader.NativeOp'},
'div':{type:'Var',declaredBy:'as3Shader.NativeOp'},'rcp':{type:'Var',declaredBy:'as3Shader.NativeOp'},'min':{type:'Var',declaredBy:'as3Shader.NativeOp'},'max':{type:'Var',declaredBy:'as3Shader.NativeOp'},'frc':{type:'Var',declaredBy:'as3Shader.NativeOp'},'sqt':{type:'Var',declaredBy:'as3Shader.NativeOp'},'rsq':{type:'Var',declaredBy:'as3Shader.NativeOp'},'pow':{type:'Var',declaredBy:'as3Shader.NativeOp'},'log':{type:'Var',declaredBy:'as3Shader.NativeOp'},'exp':{type:'Var',declaredBy:'as3Shader.NativeOp'},
'nrm':{type:'Var',declaredBy:'as3Shader.NativeOp'},'sin':{type:'Var',declaredBy:'as3Shader.NativeOp'},'cos':{type:'Var',declaredBy:'as3Shader.NativeOp'},'crs':{type:'Var',declaredBy:'as3Shader.NativeOp'},'dp3':{type:'Var',declaredBy:'as3Shader.NativeOp'},'dp4':{type:'Var',declaredBy:'as3Shader.NativeOp'},'abs':{type:'Var',declaredBy:'as3Shader.NativeOp'},'neg':{type:'Var',declaredBy:'as3Shader.NativeOp'},'sat':{type:'Var',declaredBy:'as3Shader.NativeOp'},'m33':{type:'Var',declaredBy:'as3Shader.NativeOp'},
'm44':{type:'Var',declaredBy:'as3Shader.NativeOp'},'m34':{type:'Var',declaredBy:'as3Shader.NativeOp'},'ife':{type:'Var',declaredBy:'as3Shader.NativeOp'},'ine':{type:'Var',declaredBy:'as3Shader.NativeOp'},'ifg':{type:'Var',declaredBy:'as3Shader.NativeOp'},'ifl':{type:'Var',declaredBy:'as3Shader.NativeOp'},'els':{type:'Var',declaredBy:'as3Shader.NativeOp'},'eif':{type:'Var',declaredBy:'as3Shader.NativeOp'},'ted':{type:'Var',declaredBy:'as3Shader.NativeOp'},'sge':{type:'Var',declaredBy:'as3Shader.NativeOp'},
'slt':{type:'Var',declaredBy:'as3Shader.NativeOp'},'sgn':{type:'Var',declaredBy:'as3Shader.NativeOp'},'seq':{type:'Var',declaredBy:'as3Shader.NativeOp'},'sne':{type:'Var',declaredBy:'as3Shader.NativeOp'},'i_mov':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_add':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_sub':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_mul':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_div':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_rcp':{type:'Number',
declaredBy:'as3Shader.NativeOp'},'i_min':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_max':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_frc':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_sqt':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_rsq':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_pow':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_log':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_exp':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_nrm':{type:'Number',
declaredBy:'as3Shader.NativeOp'},'i_sin':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_cos':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_crs':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_dp3':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_dp4':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_abs':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_neg':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_sat':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_m33':{type:'Number',
declaredBy:'as3Shader.NativeOp'},'i_m44':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_m34':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_ife':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_ine':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_ifg':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_ifl':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_els':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_eif':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_ted':{type:'Number',
declaredBy:'as3Shader.NativeOp'},'i_sge':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_slt':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_sgn':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_seq':{type:'Number',declaredBy:'as3Shader.NativeOp'},'i_sne':{type:'Number',declaredBy:'as3Shader.NativeOp'}}}}};goog.provide('as3Shader.AS3Shader');goog.require('as3Shader.NativeOp');as3Shader.AS3Shader=function(programType,creator){programType=typeof programType!=='undefined'?programType:Context3DProgramType.VERTEX;creator=typeof creator!=='undefined'?creator:null;this.lines=[];this.logs={};this.creator=creator||new as3Shader.AGALCodeCreator;this.programType=programType;this.np=new as3Shader.NativeOp(this)};as3Shader.AS3Shader.prototype.lines;as3Shader.AS3Shader.prototype.logs;
as3Shader.AS3Shader.prototype.tempCounter=0;as3Shader.AS3Shader.prototype.np;as3Shader.AS3Shader.prototype.uniformCounter=0;as3Shader.AS3Shader.prototype.samplerCounter=0;as3Shader.AS3Shader.prototype.buffCounter=0;as3Shader.AS3Shader.prototype.varyingCounter=0;as3Shader.AS3Shader.prototype.uniforms;as3Shader.AS3Shader.prototype.samplers;as3Shader.AS3Shader.prototype.buffs;as3Shader.AS3Shader.prototype.varyings;as3Shader.AS3Shader.prototype.uniformVars;as3Shader.AS3Shader.prototype.samplerVars;as3Shader.AS3Shader.prototype.buffVars;
as3Shader.AS3Shader.prototype.varyingVars;as3Shader.AS3Shader.prototype.programType;as3Shader.AS3Shader.prototype.constPoolVec;as3Shader.AS3Shader.prototype.constMemLen=0;as3Shader.AS3Shader.prototype.invalid=true;as3Shader.AS3Shader.prototype.creator;as3Shader.AS3Shader.prototype.clear=function(){this.lines=[];this.tempCounter=0;this.uniformCounter=0;this.samplerCounter=0;this.buffCounter=0;this.varyingCounter=0;this.constMemLen=0};as3Shader.AS3Shader.prototype.build=function(){};
as3Shader.AS3Shader.prototype.optimize=function(){var xyzw='xyzw';var startEnds=[];var ttypePool=[];var tempConsts=[];var constPool=[];this.uniforms=[];this.samplers=[];this.buffs=[];this.varyings=[];for(var i=0;i<this.lines.length;i++){var line=this.lines[i];var len=line.length;for(var j=1;j<len;j++){var v=line[j];this.addVar(v,i,startEnds,ttypePool,tempConsts);if(org.apache.flex.utils.Language.is(v.component,as3Shader.Var))this.addVar(org.apache.flex.utils.Language.as(v.component,as3Shader.Var),
i,startEnds,ttypePool,tempConsts)}}if(this.uniformCounter)this.uniforms=this.optimizeVar(this.uniforms,this.uniformVars);var foreachiter0_target=this.uniforms;for(var foreachiter0 in foreachiter0_target){v=foreachiter0_target[foreachiter0];var theConstMemLen=v.index+v.constLenght;if(theConstMemLen>this.constMemLen)this.constMemLen=theConstMemLen}if(this.programType==flash.display3D.Context3DProgramType.FRAGMENT&&this.samplerCounter)this.samplers=this.optimizeVar(this.samplers,this.samplerVars);if(this.programType==
flash.display3D.Context3DProgramType.VERTEX&&this.buffCounter)this.buffs=this.optimizeVar(this.buffs,this.buffVars);if(this.programType==flash.display3D.Context3DProgramType.VERTEX&&this.varyingCounter)this.varyings=this.optimizeVar(this.varyings,this.varyingVars);len=startEnds.length;for(i=1;i<len;i++){var startEnd=startEnds[i];if(startEnd){var start=startEnd[0];for(j=0;j<i;j++){var startEnd2=startEnds[j];if(startEnd2&&start>startEnd2[1]){var foreachiter1_target=ttypePool[i];for(var foreachiter1 in foreachiter1_target){v=
foreachiter1_target[foreachiter1];v.index=j}startEnd2[1]=startEnd[1];startEnd[0]=0;startEnd[1]=0;break}}}}var foreachiter2_target=tempConsts;for(var foreachiter2 in foreachiter2_target){v=foreachiter2_target[foreachiter2];var floats=org.apache.flex.utils.Language.as(v.data,Array);var floatsLen=floats.length;var floatsLen2=floatsLen;var have=false;if(floatsLen<=4)for(i=0;i<constPool.length;i+=4){for(j=0;j<=4-floatsLen;j++){have=true;for(var k=0;k<floatsLen;k++)if(floats[k]!=constPool[i+j+k]){have=
false;break}if(have)break}if(have)break}else;if(have){v.index=org.apache.flex.utils.Language._int(i/4)+this.constMemLen;if(i%4>0||floatsLen2!=4)v.component=xyzw.substr((i+j+k-floatsLen)%4,floatsLen)}else{if(floatsLen2>4)floatsLen2=4;var startConstIndex=constPool.length;while(true){var startConstLineIndex=startConstIndex%4;if(startConstLineIndex+floatsLen2<=4)break;startConstIndex++}for(k=0;k<floatsLen;k++)constPool[k+startConstIndex]=floats[k];v.index=org.apache.flex.utils.Language._int(startConstIndex/
4)+this.constMemLen;if(startConstLineIndex>0||floatsLen2!=4)v.component=xyzw.substr(startConstLineIndex,floatsLen)}}while(constPool.length%4!=0)constPool.push(0);this.constPoolVec=constPool.slice()};
as3Shader.AS3Shader.prototype.addVar=function(v,i,startEnds,ttypePool,tempConsts){if(v.type==as3Shader.Var.TYPE_T){var startEnd=startEnds[v.index];if(startEnd==null)startEnd=startEnds[v.index]=[i,i];startEnd[1]=i;var vs=ttypePool[v.index];if(vs==null)vs=ttypePool[v.index]=[];vs.push(v)}else if(v.type==as3Shader.Var.TYPE_C)if(v.index!=-1)this.uniforms.push(v);else tempConsts.push(v);else if(v.type==as3Shader.Var.TYPE_FS)this.samplers.push(v);else if(v.type==as3Shader.Var.TYPE_VA)this.buffs.push(v);
else if(v.type==as3Shader.Var.TYPE_V)this.varyings.push(v)};
as3Shader.AS3Shader.prototype.optimizeVar=function(vars,sourceVars){var map={};var newVars=[];var index2newindex={};var len=0;var foreachiter3_target=vars;for(var foreachiter3 in foreachiter3_target){var v=foreachiter3_target[foreachiter3];if(map[v.index]==null){map[v.index]=[];newVars.push(v);index2newindex[v.index]=len;len+=v.constLenght}map[v.index].push(v)}var foreachiter4_target=sourceVars;for(var foreachiter4 in foreachiter4_target){v=foreachiter4_target[foreachiter4];if(map[v.index])map[v.index].push(v)}for(var key in map){var newIndex=
index2newindex[key];var foreachiter5_target=map[key];for(var foreachiter5 in foreachiter5_target){v=foreachiter5_target[foreachiter5];v.index=newIndex;v.used=true}}return newVars};as3Shader.AS3Shader.prototype.createTempVar=function(){var v=new as3Shader.Var(as3Shader.Var.TYPE_T,this.tempCounter);this.tempCounter++;return v};
as3Shader.AS3Shader.prototype.createTempConst=function(data,len){len=typeof len!=='undefined'?len:1;var c=this.C(-1);c.data=data;c.constLenght=len;if(data.length<4){var xyzw='xyzw';c.component=xyzw.substr(0,data.length)}return c};as3Shader.AS3Shader.prototype.createUniform=function(len){len=typeof len!=='undefined'?len:1;var c=this.C(this.uniformCounter++,len);this.uniformVars=this.uniformVars||[];this.uniformVars.push(c);return c};as3Shader.AS3Shader.prototype.uniform=function(){return this.createUniform()};
as3Shader.AS3Shader.prototype.matrix=function(){return this.createUniform(4)};as3Shader.AS3Shader.prototype.matrix34=function(){return this.createUniform(3)};as3Shader.AS3Shader.prototype.floatArray=function(len){return this.createUniform(len)};as3Shader.AS3Shader.prototype.matrixArray=function(len){return this.createUniform(len*4)};as3Shader.AS3Shader.prototype.matrix34Array=function(len){return this.createUniform(len*3)};
as3Shader.AS3Shader.prototype.buff=function(){var va=this.VA(this.buffCounter++);this.buffVars=this.buffVars||[];this.buffVars.push(va);return va};as3Shader.AS3Shader.prototype.sampler=function(){var fs=this.FS(this.samplerCounter++);this.samplerVars=this.samplerVars||[];this.samplerVars.push(fs);return fs};as3Shader.AS3Shader.prototype.varying=function(){var v=this.V(this.varyingCounter++);this.varyingVars=this.varyingVars||[];this.varyingVars.push(v);return v};
as3Shader.AS3Shader.prototype.debug=function(txt){this.logs[this.lines.length]=this.logs[this.lines.length]||[];this.logs[this.lines.length].push(txt)};
as3Shader.AS3Shader.prototype.f=function(op,a,b,t,flag,numParam,component){a=typeof a!=='undefined'?a:null;b=typeof b!=='undefined'?b:null;t=typeof t!=='undefined'?t:null;flag=typeof flag!=='undefined'?flag:null;numParam=typeof numParam!=='undefined'?numParam:3;component=typeof component!=='undefined'?component:null;var line=[op];if(a!=null){var av=this.object2Var(a);line.push(av)}if(b!=null){var bv=this.object2Var(b);line.push(bv)}if(av&&bv&&av.type==as3Shader.Var.TYPE_C&&bv.type==as3Shader.Var.TYPE_C)return this.np.doop(op,
av,bv);if(numParam>1)var c=t||this.createTempVar();if(component)c=c.c(component);if(c)line.splice(1,0,c);line['flag']=flag;this.lines.push(line);return c};as3Shader.AS3Shader.prototype.object2Var=function(v){return org.apache.flex.utils.Language.is(v,as3Shader.Var)?org.apache.flex.utils.Language.as(v,as3Shader.Var):this.F(v)};
as3Shader.AS3Shader.prototype.f2=function(op,arr,t){t=typeof t!=='undefined'?t:null;if(arr.length==0)return t;else if(arr.length==1)return this.mov(arr[0],t);var a=arr[0];for(var i=1;i<arr.length-1;i++)a=this.f(op,a,arr[i]);return this.f(op,a,arr[arr.length-1],t)};as3Shader.AS3Shader.prototype.distance=function(a,b,len,t){len=typeof len!=='undefined'?len:2;t=typeof t!=='undefined'?t:null;return this.length(this.sub(a,b),len,t)};
as3Shader.AS3Shader.prototype.length=function(a,len,t){len=typeof len!=='undefined'?len:2;t=typeof t!=='undefined'?t:null;var c=this.mul(a,a);var arr=[c.x,c.y];if(len>2)arr.push(c.z);if(len>3)arr.push(c.w);return this.sqt(this.add2(arr),t)};as3Shader.AS3Shader.prototype.atan=function(a,t){t=typeof t!=='undefined'?t:null;return this.div(this.mul(Math.PI/2,a),this.add(1,this.abs(a)),t)};
as3Shader.AS3Shader.prototype.atan2=function(y,x,t){t=typeof t!=='undefined'?t:null;return this.mul(2,this.atan(this.div(y,this.add(this.sqt(this.add(this.mul(x,x),this.mul(y,y))),x))),t)};as3Shader.AS3Shader.prototype.smoothstep=function(edge0,edge1,x,t){t=typeof t!=='undefined'?t:null;var x2=this.sat(this.div(this.sub(x,edge0),this.sub(edge1,edge0)));return this.mul2([x2,x2,this.sub(3,this.mul(2,x2))],t)};
as3Shader.AS3Shader.prototype.mix=function(a,b,v,t){t=typeof t!=='undefined'?t:null;return this.add(a,this.mul(v,this.sub(b,a)),t)};as3Shader.AS3Shader.prototype.mod=function(a,b,t){t=typeof t!=='undefined'?t:null;var c=this.div(a,b);return this.mul(this.frc(c),b,t)};as3Shader.AS3Shader.prototype.fwidth=function(a,t){t=typeof t!=='undefined'?t:null;return this.add(this.abs(this.ddx(a)),this.abs(this.ddy(a)),t)};
as3Shader.AS3Shader.prototype.vec2=function(a,b,t){t=typeof t!=='undefined'?t:null;t=t||this.createTempVar();this.mov(a,t.x);this.mov(b,t.y);return t};as3Shader.AS3Shader.prototype.vec3=function(a,b,c,t){t=typeof t!=='undefined'?t:null;t=this.vec2(a,b,t);this.mov(c,t.z);return t};as3Shader.AS3Shader.prototype.vec4=function(a,b,c,d,t){t=typeof t!=='undefined'?t:null;t=this.vec3(a,b,c,t);this.mov(d,t.w);return t};
as3Shader.AS3Shader.prototype.mul2=function(arr,t){t=typeof t!=='undefined'?t:null;return this.f2('mul',arr,t)};as3Shader.AS3Shader.prototype.add2=function(arr,t){t=typeof t!=='undefined'?t:null;return this.f2('add',arr,t)};as3Shader.AS3Shader.prototype.sub2=function(arr,t){t=typeof t!=='undefined'?t:null;return this.f2('sub',arr,t)};as3Shader.AS3Shader.prototype.div2=function(arr,t){t=typeof t!=='undefined'?t:null;return this.f2('div',arr,t)};
as3Shader.AS3Shader.prototype.max2=function(arr,t){t=typeof t!=='undefined'?t:null;return this.f2('max',arr,t)};as3Shader.AS3Shader.prototype.min2=function(arr,t){t=typeof t!=='undefined'?t:null;return this.f2('min',arr,t)};as3Shader.AS3Shader.prototype.clamp=function(a,minValue,maxValue,t){t=typeof t!=='undefined'?t:null;return this.min(maxValue,this.max(a,minValue),t)};as3Shader.AS3Shader.prototype.floor=function(a,t){t=typeof t!=='undefined'?t:null;return this.sub(a,this.frc(a),t)};
as3Shader.AS3Shader.prototype.F=function(data,len){len=typeof len!=='undefined'?len:1;if(org.apache.flex.utils.Language.is(data,Number)||org.apache.flex.utils.Language.is(data,Number)||org.apache.flex.utils.Language.is(data,Number))return this.createTempConst([data],len);else if(org.apache.flex.utils.Language.is(data,Array)&&data.length>=4)return this.createTempConst([data[0],data[1],data[2],data[3]],len);return this.createTempConst(data,len)};
as3Shader.AS3Shader.prototype.M=function(data){return this.createTempConst(data,4)};as3Shader.AS3Shader.prototype.C=function(index,len){index=typeof index!=='undefined'?index:0;len=typeof len!=='undefined'?len:1;var c=new as3Shader.Var(as3Shader.Var.TYPE_C,index);c.constLenght=len;return c};as3Shader.AS3Shader.prototype.T=function(index){index=typeof index!=='undefined'?index:0;return new as3Shader.Var(as3Shader.Var.TYPE_T,index)};
as3Shader.AS3Shader.prototype.VA=function(index){index=typeof index!=='undefined'?index:0;return new as3Shader.Var(as3Shader.Var.TYPE_VA,index)};as3Shader.AS3Shader.prototype.V=function(index){index=typeof index!=='undefined'?index:0;return new as3Shader.Var(as3Shader.Var.TYPE_V,index)};as3Shader.AS3Shader.prototype.FS=function(index){index=typeof index!=='undefined'?index:0;return new as3Shader.Var(as3Shader.Var.TYPE_FS,index)};
as3Shader.AS3Shader.prototype.mov=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('mov',a,null,t)};as3Shader.AS3Shader.prototype.add=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('add',a,b,t)};as3Shader.AS3Shader.prototype.sub=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('sub',a,b,t)};as3Shader.AS3Shader.prototype.mul=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('mul',a,b,t)};
as3Shader.AS3Shader.prototype.div=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('div',a,b,t)};as3Shader.AS3Shader.prototype.rcp=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('rcp',a,null,t)};as3Shader.AS3Shader.prototype.min=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('min',a,b,t)};as3Shader.AS3Shader.prototype.max=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('max',a,b,t)};
as3Shader.AS3Shader.prototype.frc=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('frc',a,null,t)};as3Shader.AS3Shader.prototype.sqt=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('sqt',a,null,t)};as3Shader.AS3Shader.prototype.rsq=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('rsq',a,null,t)};as3Shader.AS3Shader.prototype.pow=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('pow',a,b,t)};
as3Shader.AS3Shader.prototype.log=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('log',a,null,t)};as3Shader.AS3Shader.prototype.exp=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('exp',a,null,t)};as3Shader.AS3Shader.prototype.nrm=function(a,t,component){t=typeof t!=='undefined'?t:null;component=typeof component!=='undefined'?component:null;return this.f('nrm',a,null,t,null,3,component||'xyz')};
as3Shader.AS3Shader.prototype.sin=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('sin',a,null,t)};as3Shader.AS3Shader.prototype.cos=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('cos',a,null,t)};as3Shader.AS3Shader.prototype.crs=function(a,b,t,component){t=typeof t!=='undefined'?t:null;component=typeof component!=='undefined'?component:null;return this.f('crs',a,b,t,null,3,component||'xyz')};
as3Shader.AS3Shader.prototype.dp3=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('dp3',a,b,t)};as3Shader.AS3Shader.prototype.dp4=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('dp4',a,b,t)};as3Shader.AS3Shader.prototype.abs=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('abs',a,null,t)};as3Shader.AS3Shader.prototype.neg=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('neg',a,null,t)};
as3Shader.AS3Shader.prototype.sat=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('sat',a,null,t)};as3Shader.AS3Shader.prototype.m33=function(a,b,t,component){t=typeof t!=='undefined'?t:null;component=typeof component!=='undefined'?component:null;return this.f('m33',a,b,t,null,3,component||'xyz')};as3Shader.AS3Shader.prototype.m44=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('m44',a,b,t)};
as3Shader.AS3Shader.prototype.m34=function(a,b,t,component){t=typeof t!=='undefined'?t:null;component=typeof component!=='undefined'?component:null;return this.f('m34',a,b,t,null,3,component||'xyz')};as3Shader.AS3Shader.prototype.ddx=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('ddx',a,null,t)};as3Shader.AS3Shader.prototype.ddy=function(a,t){t=typeof t!=='undefined'?t:null;return this.f('ddy',a,null,t)};
as3Shader.AS3Shader.prototype.ife=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('ife',a,b,t)};as3Shader.AS3Shader.prototype.ine=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('ine',a,b,t)};as3Shader.AS3Shader.prototype.ifg=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('ifg',a,b,t)};as3Shader.AS3Shader.prototype.ifl=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('ifl',a,b,t)};
as3Shader.AS3Shader.prototype.els=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('els',a,b,t)};as3Shader.AS3Shader.prototype.eif=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('eif',a,b,t)};as3Shader.AS3Shader.prototype.ted=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('ted',a,b,t)};as3Shader.AS3Shader.prototype.kil=function(a){return this.f('kil',a,null,null,null,1)};
as3Shader.AS3Shader.prototype.tex=function(a,b,t,flags){a=typeof a!=='undefined'?a:null;b=typeof b!=='undefined'?b:null;t=typeof t!=='undefined'?t:null;flags=typeof flags!=='undefined'?flags:null;return this.f('tex',a,b,t,flags)};as3Shader.AS3Shader.prototype.sge=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('sge',a,b,t)};as3Shader.AS3Shader.prototype.slt=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('slt',a,b,t)};
as3Shader.AS3Shader.prototype.sgn=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('sgn',a,b,t)};as3Shader.AS3Shader.prototype.seq=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('seq',a,b,t)};as3Shader.AS3Shader.prototype.sne=function(a,b,t){t=typeof t!=='undefined'?t:null;return this.f('sne',a,b,t)};
Object.defineProperties(as3Shader.AS3Shader.prototype,{code:{get:function(){if(this.invalid){this.invalid=false;this.build();this.optimize();this.creator.creat(this)}if(this.creator.data==null)this.creator.creat(this);return this.creator.data}},op:{get:function(){return new as3Shader.Var(as3Shader.Var.TYPE_OP)},set:function(value){this.mov(value,this.op)}},oc:{get:function(){return new as3Shader.Var(as3Shader.Var.TYPE_OC)},set:function(value){this.mov(value,this.oc)}}});
as3Shader.AS3Shader.prototype.FLEXJS_CLASS_INFO={names:[{name:'AS3Shader',qName:'as3Shader.AS3Shader'}]};goog.exportSymbol('as3Shader.AS3Shader',as3Shader.AS3Shader);
as3Shader.AS3Shader.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'lines':{type:'Array'},'logs':{type:'Object'},'uniforms':{type:'Array'},'samplers':{type:'Array'},'buffs':{type:'Array'},'varyings':{type:'Array'},'programType':{type:'String'},'constPoolVec':{type:'Vector.\x3cNumber\x3e'},'constMemLen':{type:'int'},'invalid':{type:'Boolean'},'creator':{type:'Creator'}}},accessors:function(){return{'code':{type:'Object',declaredBy:'as3Shader.AS3Shader'},'op':{type:'Var',
declaredBy:'as3Shader.AS3Shader'},'oc':{type:'Var',declaredBy:'as3Shader.AS3Shader'}}},methods:function(){return{'AS3Shader':{type:'',declaredBy:'as3Shader.AS3Shader'},'clear':{type:'void',declaredBy:'as3Shader.AS3Shader'},'build':{type:'void',declaredBy:'as3Shader.AS3Shader'},'optimize':{type:'void',declaredBy:'as3Shader.AS3Shader'},'optimizeVar':{type:'Array',declaredBy:'as3Shader.AS3Shader'},'createTempVar':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'uniform':{type:'Var',declaredBy:'as3Shader.AS3Shader'},
'matrix':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'matrix34':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'floatArray':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'matrixArray':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'matrix34Array':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'buff':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'sampler':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'varying':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'debug':{type:'void',declaredBy:'as3Shader.AS3Shader'},
'f':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'object2Var':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'f2':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'distance':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'length':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'atan':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'atan2':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'smoothstep':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'mix':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'mod':{type:'Var',
declaredBy:'as3Shader.AS3Shader'},'fwidth':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'vec2':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'vec3':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'vec4':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'mul2':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'add2':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'sub2':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'div2':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'max2':{type:'Var',declaredBy:'as3Shader.AS3Shader'},
'min2':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'clamp':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'floor':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'F':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'M':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'C':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'T':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'VA':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'V':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'FS':{type:'Var',declaredBy:'as3Shader.AS3Shader'},
'mov':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'add':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'sub':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'mul':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'div':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'rcp':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'min':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'max':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'frc':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'sqt':{type:'Var',declaredBy:'as3Shader.AS3Shader'},
'rsq':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'pow':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'log':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'exp':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'nrm':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'sin':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'cos':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'crs':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'dp3':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'dp4':{type:'Var',declaredBy:'as3Shader.AS3Shader'},
'abs':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'neg':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'sat':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'m33':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'m44':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'m34':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'ddx':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'ddy':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'ife':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'ine':{type:'Var',declaredBy:'as3Shader.AS3Shader'},
'ifg':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'ifl':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'els':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'eif':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'ted':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'kil':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'tex':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'sge':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'slt':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'sgn':{type:'Var',declaredBy:'as3Shader.AS3Shader'},
'seq':{type:'Var',declaredBy:'as3Shader.AS3Shader'},'sne':{type:'Var',declaredBy:'as3Shader.AS3Shader'}}}}};goog.provide('gl3d.core.shaders.GLBinder');gl3d.core.shaders.GLBinder=function(as3shader,v,index){index=typeof index!=='undefined'?index:0;this.as3shader=as3shader;this.index=index;this.v=v};gl3d.core.shaders.GLBinder.prototype.v;gl3d.core.shaders.GLBinder.prototype.index;gl3d.core.shaders.GLBinder.prototype.as3shader;
gl3d.core.shaders.GLBinder.prototype.bindModelUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromMatrix(this.as3shader.programType,this.v.index,material.node.world,true)};gl3d.core.shaders.GLBinder.prototype.bindViewUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromMatrix(this.as3shader.programType,this.v.index,material.camera.world2local,true)};
gl3d.core.shaders.GLBinder.prototype.bindPerspectiveUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromMatrix(this.as3shader.programType,this.v.index,material.camera.perspective,true)};gl3d.core.shaders.GLBinder.prototype.bindWorld2localUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromMatrix(this.as3shader.programType,this.v.index,material.node.world2local,true)};
gl3d.core.shaders.GLBinder.prototype.bindLightPosUniform=function(shader,material){if(this.v.used){var pos=material.view.lights[this.index].world.position;pos.w=1;material.view.renderer.gl3d.setProgramConstantsFromVector3D(this.as3shader.programType,this.v.index,pos)}};
gl3d.core.shaders.GLBinder.prototype.bindLightShadowCameraWorld=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromMatrix(this.as3shader.programType,this.v.index,material.view.lights[this.index].shadowCamera.world,true)};
gl3d.core.shaders.GLBinder.prototype.bindCameraPosUniform=function(shader,material){if(this.v.used){var pos=material.camera.world.position;material.view.renderer.gl3d.setProgramConstantsFromVector3D(this.as3shader.programType,this.v.index,pos)}};gl3d.core.shaders.GLBinder.prototype.bindTimeUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromXYZW(this.as3shader.programType,this.v.index,material.view.time,material.view.time,material.view.time,material.view.time)};
gl3d.core.shaders.GLBinder.prototype.bindPixelSizeUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromXYZW(this.as3shader.programType,this.v.index,material.view.stage3dWidth,material.view.stage3dWidth,1/material.view.stage3dWidth,1/material.view.stage3dHeight)};
gl3d.core.shaders.GLBinder.prototype.bindTextureSizeUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromXYZW(this.as3shader.programType,this.v.index,material.diffTexture.width,material.diffTexture.height)};
gl3d.core.shaders.GLBinder.prototype.bindUVMulAddUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromXYZW(this.as3shader.programType,this.v.index,material.uvMuler?material.uvMuler[0]:1,material.uvMuler?material.uvMuler[1]:1,material.uvAdder?material.uvAdder[0]:0,material.uvAdder?material.uvAdder[1]:0)};
gl3d.core.shaders.GLBinder.prototype.bindJointsQuatUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromVector(this.as3shader.programType,this.v.index,material.node.skin.skinFrame.quaternions)};
gl3d.core.shaders.GLBinder.prototype.bindJointsMatrixUniform=function(shader,material){if(this.v.used){var mats=material.node.skin.skinFrame.matrixs;var start=this.v.index;for(var i=0;i<mats.length;i++)material.view.renderer.gl3d.setProgramConstantsFromMatrix(flash.display3D.Context3DProgramType.VERTEX,start+i*4,mats[i],true)}};
gl3d.core.shaders.GLBinder.prototype.bindMaterialColorUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromVector3D(this.as3shader.programType,this.v.index,material.color)};gl3d.core.shaders.GLBinder.prototype.bindLightColorUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromVector3D(this.as3shader.programType,this.v.index,material.view.lights[this.index].color)};
gl3d.core.shaders.GLBinder.prototype.bindLightColorVar=function(shader,material){var light=material.view.lights[this.index];var factor1=1/(Math.cos(light.innerConeAngle/2)-Math.cos(light.outerConeAngle/2));var factor2=1-Math.cos(light.innerConeAngle/2)*factor1;if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromXYZW(this.as3shader.programType,this.v.index,light.distance,factor1,factor2)};
gl3d.core.shaders.GLBinder.prototype.bindAmbientUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromVector3D(this.as3shader.programType,this.v.index,material.ambient)};gl3d.core.shaders.GLBinder.prototype.bindSpecularUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromXYZW(this.as3shader.programType,this.v.index,material.specularPower)};
gl3d.core.shaders.GLBinder.prototype.bindWireframeColorUniform=function(shader,material){if(this.v.used)material.view.renderer.gl3d.setProgramConstantsFromVector3D(this.as3shader.programType,this.v.index,material.wireframeColor)};gl3d.core.shaders.GLBinder.prototype.bindDiffSampler=function(shader,material){if(this.v.used)shader.textureSets[this.v.index]=material.diffTexture};
gl3d.core.shaders.GLBinder.prototype.bindNormalmapSampler=function(shader,material){if(this.v.used)shader.textureSets[this.v.index]=material.normalmapTexture};gl3d.core.shaders.GLBinder.prototype.bindLightmapSampler=function(shader,material){if(this.v.used)shader.textureSets[this.v.index]=material.lightmapTexture};gl3d.core.shaders.GLBinder.prototype.bindReflectSampler=function(shader,material){if(this.v.used)shader.textureSets[this.v.index]=material.reflectTexture};
gl3d.core.shaders.GLBinder.prototype.bindTerrainsSampler=function(shader,material){if(this.v.used)shader.textureSets[this.v.index]=material.terrainTextureSets[this.index]};gl3d.core.shaders.GLBinder.prototype.bindShadowmapsSampler=function(shader,material){if(this.v.used)shader.textureSets[this.v.index]=material.view.lights[this.index].shadowMap};
gl3d.core.shaders.GLBinder.prototype.bindPosBuff=function(shader,material){if(this.v.used)shader.buffSets[this.v.index]=material.node.skin&&material.node.skin.useCpu&&material.node.drawable.pos.cpuSkin?material.node.drawable.pos.cpuSkin:material.node.drawable.pos};
gl3d.core.shaders.GLBinder.prototype.bindNormBuff=function(shader,material){if(this.v.used)shader.buffSets[this.v.index]=material.node.skin&&material.node.skin.useCpu&&material.node.drawable.norm.cpuSkin?material.node.drawable.norm.cpuSkin:material.node.drawable.norm};gl3d.core.shaders.GLBinder.prototype.bindTangentBuff=function(shader,material){if(this.v.used)shader.buffSets[this.v.index]=material.node.drawable.tangent};
gl3d.core.shaders.GLBinder.prototype.bindUVBuff=function(shader,material){if(this.v.used)shader.buffSets[this.v.index]=material.node.drawable.uv};gl3d.core.shaders.GLBinder.prototype.bindRandomBuff=function(shader,material){if(this.v.used)shader.buffSets[this.v.index]=material.node.drawable.random};gl3d.core.shaders.GLBinder.prototype.bindSphereRandomBuff=function(shader,material){if(this.v.used)shader.buffSets[this.v.index]=material.node.drawable.sphereRandom};
gl3d.core.shaders.GLBinder.prototype.bindTargetPositionBuff=function(shader,material){if(this.v.used)shader.buffSets[this.v.index]=material.node.drawable.targetPosition};gl3d.core.shaders.GLBinder.prototype.bindUV2Buff=function(shader,material){if(this.v.used)shader.buffSets[this.v.index]=material.node.drawable.uv2};gl3d.core.shaders.GLBinder.prototype.bindJointsBuff=function(shader,material){if(this.v.used)shader.buffSets[this.v.index]=material.node.drawable.joint};
gl3d.core.shaders.GLBinder.prototype.bindWeightsBuff=function(shader,material){if(this.v.used)shader.buffSets[this.v.index]=material.node.drawable.weight};gl3d.core.shaders.GLBinder.prototype.FLEXJS_CLASS_INFO={names:[{name:'GLBinder',qName:'gl3d.core.shaders.GLBinder'}]};goog.exportSymbol('gl3d.core.shaders.GLBinder',gl3d.core.shaders.GLBinder);
gl3d.core.shaders.GLBinder.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'GLBinder':{type:'',declaredBy:'gl3d.core.shaders.GLBinder'},'bindModelUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindViewUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindPerspectiveUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindWorld2localUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},
'bindLightPosUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindLightShadowCameraWorld':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindCameraPosUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindTimeUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindPixelSizeUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindTextureSizeUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindUVMulAddUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},
'bindJointsQuatUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindJointsMatrixUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindMaterialColorUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindLightColorUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindLightColorVar':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindAmbientUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindSpecularUniform':{type:'void',
declaredBy:'gl3d.core.shaders.GLBinder'},'bindWireframeColorUniform':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindDiffSampler':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindNormalmapSampler':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindLightmapSampler':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindReflectSampler':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindTerrainsSampler':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindShadowmapsSampler':{type:'void',
declaredBy:'gl3d.core.shaders.GLBinder'},'bindPosBuff':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindNormBuff':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindTangentBuff':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindUVBuff':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindRandomBuff':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindSphereRandomBuff':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindTargetPositionBuff':{type:'void',
declaredBy:'gl3d.core.shaders.GLBinder'},'bindUV2Buff':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindJointsBuff':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'},'bindWeightsBuff':{type:'void',declaredBy:'gl3d.core.shaders.GLBinder'}}}}};goog.provide('gl3d.core.shaders.GLAS3Shader');goog.require('as3Shader.AS3Shader');goog.require('gl3d.core.shaders.GLBinder');gl3d.core.shaders.GLAS3Shader=function(programType,creator){programType=typeof programType!=='undefined'?programType:Context3DProgramType.VERTEX;creator=typeof creator!=='undefined'?creator:null;this.namedVars={};this.binds=new Array;gl3d.core.shaders.GLAS3Shader.base(this,'constructor',programType,creator)};goog.inherits(gl3d.core.shaders.GLAS3Shader,as3Shader.AS3Shader);gl3d.core.shaders.GLAS3Shader.prototype.namedVars;
gl3d.core.shaders.GLAS3Shader.prototype.binds;gl3d.core.shaders.GLAS3Shader.prototype.bind=function(shader,material){var foreachiter0_target=this.binds;for(var foreachiter0 in foreachiter0_target){var binder=foreachiter0_target[foreachiter0];binder(shader,material)}};
gl3d.core.shaders.GLAS3Shader.prototype.uniformModel=function(){var name='umodel';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.matrix();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindModelUniform,binder,'bindModelUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformView=function(){var name='uview';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.matrix();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindViewUniform,binder,'bindViewUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformPerspective=function(){var name='uperspective';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.matrix();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindPerspectiveUniform,binder,'bindPerspectiveUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformWorld2Local=function(){var name='uworld2local';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.matrix();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindWorld2localUniform,binder,'bindWorld2localUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformLightPos=function(index){var name='ulightpos'+index;if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u,index);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindLightPosUniform,binder,'bindLightPosUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformLightShadowCameraWorld=function(index){var name='ulightCameraWorld'+index;if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u,index);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindLightShadowCameraWorld,binder,'bindLightShadowCameraWorld'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformCameraPos=function(){var name='ucamerapos';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindCameraPosUniform,binder,'bindCameraPosUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformTime=function(){var name='utime';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindTimeUniform,binder,'bindTimeUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformPixelSize=function(){var name='upixelsize';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindPixelSizeUniform,binder,'bindPixelSizeUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformTextureSize=function(){var name='utexturesize';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindTextureSizeUniform,binder,'bindTextureSizeUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformUVMulAdder=function(){var name='uvmuladd';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindUVMulAddUniform,binder,'bindUVMulAddUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformJointsQuat=function(numJoints){var name='ujointsquat';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.floatArray(numJoints*2);this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindJointsQuatUniform,binder,'bindJointsQuatUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformJointsMatrix=function(numJoints){var name='ujointsmatrix';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.matrixArray(numJoints);this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindJointsMatrixUniform,binder,'bindJointsMatrixUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformMaterialColor=function(){var name='umaterialcolor';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindMaterialColorUniform,binder,'bindMaterialColorUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformLightColor=function(index){var name='ulightcolor'+index;if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u,index);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindLightColorUniform,binder,'bindLightColorUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformLightVar=function(index){var name='ulightvar'+index;if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u,index);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindLightColorVar,binder,'bindLightColorVar'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformAmbient=function(){var name='uambient';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindAmbientUniform,binder,'bindAmbientUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformSpecular=function(){var name='uspecular';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindSpecularUniform,binder,'bindSpecularUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.uniformWireframeColor=function(){var name='uwireframecolor';if(this.getNamedVar(name))return this.getNamedVar(name);var u=this.uniform();this.setNamedVar(name,u);var binder=new gl3d.core.shaders.GLBinder(this,u);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindWireframeColorUniform,binder,'bindWireframeColorUniform'));return u};
gl3d.core.shaders.GLAS3Shader.prototype.samplerDiff=function(){var name='sdiff';if(this.getNamedVar(name))return this.getNamedVar(name);var samp=this.sampler();this.setNamedVar(name,samp);var binder=new gl3d.core.shaders.GLBinder(this,samp);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindDiffSampler,binder,'bindDiffSampler'));return samp};
gl3d.core.shaders.GLAS3Shader.prototype.samplerNormalmap=function(){var name='snormlmap';if(this.getNamedVar(name))return this.getNamedVar(name);var samp=this.sampler();this.setNamedVar(name,samp);var binder=new gl3d.core.shaders.GLBinder(this,samp);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindNormalmapSampler,binder,'bindNormalmapSampler'));return samp};
gl3d.core.shaders.GLAS3Shader.prototype.samplerLightmap=function(){var name='slightmap';if(this.getNamedVar(name))return this.getNamedVar(name);var samp=this.sampler();this.setNamedVar(name,samp);var binder=new gl3d.core.shaders.GLBinder(this,samp);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindLightmapSampler,binder,'bindLightmapSampler'));return samp};
gl3d.core.shaders.GLAS3Shader.prototype.samplerReflect=function(){var name='sreflect';if(this.getNamedVar(name))return this.getNamedVar(name);var samp=this.sampler();this.setNamedVar(name,samp);var binder=new gl3d.core.shaders.GLBinder(this,samp);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindReflectSampler,binder,'bindReflectSampler'));return samp};
gl3d.core.shaders.GLAS3Shader.prototype.samplerTerrains=function(index){var name='sterrain'+index;if(this.getNamedVar(name))return this.getNamedVar(name);var samp=this.sampler();this.setNamedVar(name,samp);var binder=new gl3d.core.shaders.GLBinder(this,samp,index);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindTerrainsSampler,binder,'bindTerrainsSampler'));return samp};
gl3d.core.shaders.GLAS3Shader.prototype.samplerShadowmaps=function(index){var name='sshadowmap'+index;if(this.getNamedVar(name))return this.getNamedVar(name);var samp=this.sampler();this.setNamedVar(name,samp);var binder=new gl3d.core.shaders.GLBinder(this,samp,index);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindShadowmapsSampler,binder,'bindShadowmapsSampler'));return samp};
gl3d.core.shaders.GLAS3Shader.prototype.buffPos=function(){var name='bpos';var b=this.getNamedVar(name);if(b)return b;b=this.buff();this.setNamedVar(name,b);var binder=new gl3d.core.shaders.GLBinder(this,b);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindPosBuff,binder,'bindPosBuff'));return b};
gl3d.core.shaders.GLAS3Shader.prototype.buffNorm=function(){var name='bnorm';if(this.getNamedVar(name))return this.getNamedVar(name);var b=this.buff();this.setNamedVar(name,b);var binder=new gl3d.core.shaders.GLBinder(this,b);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindNormBuff,binder,'bindNormBuff'));return b};
gl3d.core.shaders.GLAS3Shader.prototype.buffTangent=function(){var name='btangent';if(this.getNamedVar(name))return this.getNamedVar(name);var b=this.buff();this.setNamedVar(name,b);var binder=new gl3d.core.shaders.GLBinder(this,b);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindTangentBuff,binder,'bindTangentBuff'));return b};
gl3d.core.shaders.GLAS3Shader.prototype.buffUV=function(){var name='buv';if(this.getNamedVar(name))return this.getNamedVar(name);var b=this.buff();this.setNamedVar(name,b);var binder=new gl3d.core.shaders.GLBinder(this,b);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindUVBuff,binder,'bindUVBuff'));return b};
gl3d.core.shaders.GLAS3Shader.prototype.buffRandom=function(){var name='brandom';if(this.getNamedVar(name))return this.getNamedVar(name);var b=this.buff();this.setNamedVar(name,b);var binder=new gl3d.core.shaders.GLBinder(this,b);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindRandomBuff,binder,'bindRandomBuff'));return b};
gl3d.core.shaders.GLAS3Shader.prototype.buffSphereRandom=function(){var name='bsrandom';if(this.getNamedVar(name))return this.getNamedVar(name);var b=this.buff();this.setNamedVar(name,b);var binder=new gl3d.core.shaders.GLBinder(this,b);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindSphereRandomBuff,binder,'bindSphereRandomBuff'));return b};
gl3d.core.shaders.GLAS3Shader.prototype.buffTargetPosition=function(){var name='btp';if(this.getNamedVar(name))return this.getNamedVar(name);var b=this.buff();this.setNamedVar(name,b);var binder=new gl3d.core.shaders.GLBinder(this,b);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindTargetPositionBuff,binder,'bindTargetPositionBuff'));return b};
gl3d.core.shaders.GLAS3Shader.prototype.buffUV2=function(){var name='buv2';if(this.getNamedVar(name))return this.getNamedVar(name);var b=this.buff();this.setNamedVar(name,b);var binder=new gl3d.core.shaders.GLBinder(this,b);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindUV2Buff,binder,'bindUV2Buff'));return b};
gl3d.core.shaders.GLAS3Shader.prototype.buffJoints=function(){var name='bjoints';if(this.getNamedVar(name))return this.getNamedVar(name);var b=this.buff();this.setNamedVar(name,b);var binder=new gl3d.core.shaders.GLBinder(this,b);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindJointsBuff,binder,'bindJointsBuff'));return b};
gl3d.core.shaders.GLAS3Shader.prototype.buffWeights=function(){var name='bweights';if(this.getNamedVar(name))return this.getNamedVar(name);var b=this.buff();this.setNamedVar(name,b);var binder=new gl3d.core.shaders.GLBinder(this,b);this.binds.push(org.apache.flex.utils.Language.closure(binder.bindWeightsBuff,binder,'bindWeightsBuff'));return b};gl3d.core.shaders.GLAS3Shader.prototype.getNamedVar=function(name){return this.namedVars[name]};
gl3d.core.shaders.GLAS3Shader.prototype.setNamedVar=function(name,v){this.namedVars[name]=v};gl3d.core.shaders.GLAS3Shader.prototype.FLEXJS_CLASS_INFO={names:[{name:'GLAS3Shader',qName:'gl3d.core.shaders.GLAS3Shader'}]};goog.exportSymbol('gl3d.core.shaders.GLAS3Shader',gl3d.core.shaders.GLAS3Shader);
gl3d.core.shaders.GLAS3Shader.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'namedVars':{type:'Object'}}},accessors:function(){return{}},methods:function(){return{'GLAS3Shader':{type:'',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'bind':{type:'void',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformModel':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformView':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformPerspective':{type:'Var',
declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformWorld2Local':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformLightPos':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformLightShadowCameraWorld':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformCameraPos':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformTime':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformPixelSize':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},
'uniformTextureSize':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformUVMulAdder':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformJointsQuat':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformJointsMatrix':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformMaterialColor':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformLightColor':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformLightVar':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},
'uniformAmbient':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformSpecular':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'uniformWireframeColor':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'samplerDiff':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'samplerNormalmap':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'samplerLightmap':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'samplerReflect':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},
'samplerTerrains':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'samplerShadowmaps':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'buffPos':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'buffNorm':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'buffTangent':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'buffUV':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'buffRandom':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'buffSphereRandom':{type:'Var',
declaredBy:'gl3d.core.shaders.GLAS3Shader'},'buffTargetPosition':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'buffUV2':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'buffJoints':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'buffWeights':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'getNamedVar':{type:'Var',declaredBy:'gl3d.core.shaders.GLAS3Shader'},'setNamedVar':{type:'void',declaredBy:'gl3d.core.shaders.GLAS3Shader'}}}}};goog.provide('gl3d.shaders.PhongFragmentShader');goog.require('gl3d.core.Fog');goog.require('gl3d.core.Light');goog.require('gl3d.core.shaders.GLAS3Shader');
gl3d.shaders.PhongFragmentShader=function(material,vs){gl3d.shaders.PhongFragmentShader.base(this,'constructor',flash.display3D.Context3DProgramType.FRAGMENT);this.vs=vs;this.material=material;this.diffSampler=this.samplerDiff();this.normalmapSampler=this.samplerNormalmap();this.reflectSampler=this.samplerReflect();this.wireframeColor=this.uniformWireframeColor();this.diffColor=this.uniformMaterialColor();this.specular=this.uniformSpecular();this.ambientColor=this.uniformAmbient()};
goog.inherits(gl3d.shaders.PhongFragmentShader,gl3d.core.shaders.GLAS3Shader);gl3d.shaders.PhongFragmentShader.prototype.material;gl3d.shaders.PhongFragmentShader.prototype.e;gl3d.shaders.PhongFragmentShader.prototype.n;gl3d.shaders.PhongFragmentShader.prototype.vs;gl3d.shaders.PhongFragmentShader.prototype.wireframeColor;gl3d.shaders.PhongFragmentShader.prototype.diffColor;gl3d.shaders.PhongFragmentShader.prototype.specular;gl3d.shaders.PhongFragmentShader.prototype.ambientColor;gl3d.shaders.PhongFragmentShader.prototype.diffSampler;
gl3d.shaders.PhongFragmentShader.prototype.normalmapSampler;gl3d.shaders.PhongFragmentShader.prototype.reflectSampler;
gl3d.shaders.PhongFragmentShader.prototype.build=function(){if(!this.material.writeDepth){if(this.material.wireframeAble){var tp=this.mov(this.vs.targetPositionVarying);var a3=this.smoothstep(0,this.fwidth(tp),tp);var wireframeColor=this.mul(this.sub(1,this.min(this.min(a3.x,a3.y),a3.z).xxx),this.wireframeColor)}var diffColor=this.getDiffColor();if(this.material.lightAble&&this.material.view.lights.length){for(var i=0;i<this.material.view.lights.length;i++){var light=this.material.view.lights[i];
var curPhongColor;if(light.lightType==gl3d.core.Light.AMBIENT)curPhongColor=this.uniformLightColor(i);else{curPhongColor=this.getPhongColor(i);if(light.lightType==gl3d.core.Light.POINT||light.lightType==gl3d.core.Light.SPOT)curPhongColor=this.mul(curPhongColor,this.getDistanceColor(i));if(light.lightType==gl3d.core.Light.SPOT)curPhongColor=this.mul(curPhongColor,this.getSmoothColor(i))}if(light.shadowMapEnabled&&this.material.receiveShadows){this.debug('shadowstart');var shadowLightPos=this.vs.shadowLightPoss[i];
var shadowLightXY=this.add(this.mul(this.div(shadowLightPos.xy,shadowLightPos.w),[.5,-.5]),.5);var shadowLightDepth=this.tex(shadowLightXY,this.samplerShadowmaps(i));var curDepth=this.div(shadowLightPos.z,shadowLightPos.w);curPhongColor=this.mul(curPhongColor,this.slt(curDepth,shadowLightDepth));this.debug('shadowend')}if(phongColor==null)var phongColor=curPhongColor;else phongColor=this.add(phongColor,curPhongColor)}if(this.material.toonAble)phongColor=this.div(this.floor(this.add(.5,this.mul(this.material.toonStep,
phongColor))),this.material.toonStep);this.mov(diffColor.w,phongColor.w);if(wireframeColor)this.add(wireframeColor,this.mul(phongColor,diffColor),diffColor);else this.mul(phongColor,diffColor,diffColor)}else if(wireframeColor)this.add(diffColor,wireframeColor,diffColor);if(this.material.reflectTexture){var refc=this.tex(this.vs.reflected,this.reflectSampler,null,this.material.reflectTexture.flags);this.mul(diffColor.xyz,refc.xyz,diffColor.xyz)}if(this.material.fogAble){var fog=this.material.view.fog;
if(fog.mode!=gl3d.core.Fog.FOG_NONE){var d=this.distance(this.uniformCameraPos(),this.vs.modelPosVarying,3);if(fog.mode==gl3d.core.Fog.FOG_EXP)var f=this.rcp(this.exp(this.mul(d,fog.density)));else if(fog.mode==gl3d.core.Fog.FOG_EXP2)f=this.rcp(this.exp(this.pow(this.mul(d,fog.density),2)));else if(fog.mode==gl3d.core.Fog.FOG_LINEAR)f=this.sat(this.div(this.sub(fog.end,d),this.sub(fog.end,fog.start)));this.mix(this.material.view.fog.fogColor,diffColor.xyz,f,diffColor.xyz)}}if(this.material.border){var borderOffsets=
[[1,0],[-1,0],[0,1],[0,-1]];var isBorder;var foreachiter0_target=borderOffsets;for(var foreachiter0 in foreachiter0_target){var borderOffset=foreachiter0_target[foreachiter0];var isBorderV=this.tex(this.add(this.div(borderOffset,this.mov(this.uniformTextureSize())),this.vs.uvVarying),this.diffSampler,null,this.material.diffTexture.flags).w;if(isBorder==null)isBorder=isBorderV;else isBorder=this.add(isBorder,isBorderV)}var c1=this.tex(this.add([1/256,0],this.vs.uvVarying),this.diffSampler,null,this.material.diffTexture.flags);
this.mix(diffColor.xyzw,[1,0,0,.5],this.mul(this.seq(diffColor.w,0),this.sne(isBorder,0)),diffColor.xyzw)}this.oc=diffColor}else this.oc=this.div(this.vs.opVarying.z,this.vs.opVarying.w)};
gl3d.shaders.PhongFragmentShader.prototype.getDiffColor=function(){if(this.material.diffTexture==null)var diffColor=this.mov(this.diffColor);else if(!this.material.isDistanceField){diffColor=this.tex(this.vs.uvVarying,this.diffSampler,null,this.material.diffTexture.flags);if(this.material.alphaThreshold>0)this.kil(this.sub(diffColor.w,this.material.alphaThreshold).x)}else{var distance=this.tex(this.vs.uvVarying,this.diffSampler,null,this.material.diffTexture.flags).w;var smoothing=this.fwidth(distance);
var alpha=this.sat(this.smoothstep(this.sub(.5,smoothing),this.add(.5,smoothing),distance));diffColor=this.sub(1,alpha)}return this.material.gray?diffColor.xxxw:diffColor};gl3d.shaders.PhongFragmentShader.prototype.local2tangent=function(tangent,biTangent,normal,value){var t=this.createTempVar();this.dp3(tangent,value,t.x);this.dp3(biTangent,value,t.y);this.dp3(normal,value,t.z);return this.nrm(t)};
gl3d.shaders.PhongFragmentShader.prototype.getPhongColor=function(i){var lightColor=this.uniformLightColor(i);var lightPower=lightColor.w;var specularPow=this.specular.x;var normal=this.vs.normVarying;if(this.material.normalMapAble){var tangent=this.vs.tangentVarying;var biTangent=this.crs(normal,tangent);var normalMap=this.sub(this.mul(this.tex(this.vs.uvVarying,this.normalmapSampler,null,this.material.normalmapTexture.flags),2),1)}var l=this.vs.posLightVaryings[i];if(this.material.normalMapAble){this.n=
normalMap;l=this.local2tangent(tangent,biTangent,normal,l)}else this.n=normal;var cosTheta=this.sat(this.dp3(this.n,l));if(this.material.specularAble||this.material.reflectTexture){this.e=this.vs.eyeDirectionVarying;if(this.material.normalMapAble)this.e=this.local2tangent(tangent,biTangent,normal,this.e);var r=this.nrm(this.sub(this.mul2([2,this.dp3(l,this.n),this.n]),l));var cosAlpha=this.sat(this.dp3(this.e,r))}if(this.material.specularAble)return this.add(this.ambientColor,this.mul2([lightColor,
this.add(cosTheta,this.pow(cosAlpha,specularPow)),lightPower]));else return this.add(this.ambientColor,this.mul2([lightColor,cosTheta,lightPower]));return null};gl3d.shaders.PhongFragmentShader.prototype.getDistanceColor=function(i){var d=this.sub(this.uniformLightPos(i),this.vs.modelPosVarying);return this.sat(this.sub(1,this.div(this.dp3(d,d),this.mul(this.mov(this.uniformLightVar(i).x),this.uniformLightVar(i).x))))};
gl3d.shaders.PhongFragmentShader.prototype.getSmoothColor=function(i){var factor1=this.uniformLightVar(i).y;var factor2=this.uniformLightVar(i).z;var lightToPoint=this.sub(this.vs.modelPosVarying,this.uniformLightPos(i));var lightAngleCosine=this.dp3(this.nrm(this.mov(this.uniformLightPos(i))),this.nrm(lightToPoint));return this.sat(this.add(this.mul(factor1,lightAngleCosine),factor2))};gl3d.shaders.PhongFragmentShader.prototype.FLEXJS_CLASS_INFO={names:[{name:'PhongFragmentShader',qName:'gl3d.shaders.PhongFragmentShader'}]};
goog.exportSymbol('gl3d.shaders.PhongFragmentShader',gl3d.shaders.PhongFragmentShader);
gl3d.shaders.PhongFragmentShader.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'material':{type:'Material'},'vs':{type:'PhongVertexShader'},'wireframeColor':{type:'Var'},'diffColor':{type:'Var'},'specular':{type:'Var'},'ambientColor':{type:'Var'},'diffSampler':{type:'Var'},'normalmapSampler':{type:'Var'},'reflectSampler':{type:'Var'}}},accessors:function(){return{}},methods:function(){return{'PhongFragmentShader':{type:'',declaredBy:'gl3d.shaders.PhongFragmentShader'},
'build':{type:'void',declaredBy:'gl3d.shaders.PhongFragmentShader'},'getDiffColor':{type:'Var',declaredBy:'gl3d.shaders.PhongFragmentShader'},'getPhongColor':{type:'Var',declaredBy:'gl3d.shaders.PhongFragmentShader'},'getDistanceColor':{type:'Var',declaredBy:'gl3d.shaders.PhongFragmentShader'},'getSmoothColor':{type:'Var',declaredBy:'gl3d.shaders.PhongFragmentShader'}}}}};goog.provide('gl3d.shaders.PhongVertexShader');goog.require('gl3d.core.shaders.GLAS3Shader');
gl3d.shaders.PhongVertexShader=function(material){this.eyeDirectionVarying=this.varying();this.posLightVaryings=new Array;this.shadowLightPoss=new Array;this.normVarying=this.varying();this.tangentVarying=this.varying();this.uvVarying=this.varying();this.targetPositionVarying=this.varying();this.reflected=this.varying();this.modelPosVarying=this.varying();this.opVarying=this.varying();gl3d.shaders.PhongVertexShader.base(this,'constructor',flash.display3D.Context3DProgramType.VERTEX);this.material=
material;this.pos=this.buffPos();this.norm=this.buffNorm();this.uv=this.buffUV();this.tangent=this.buffTangent();this.targetPosition=this.buffTargetPosition();this.weight=this.buffWeights();this.model=this.uniformModel();this.world2local=this.uniformWorld2Local();this.view=this.uniformView();this.perspective=this.uniformPerspective()};goog.inherits(gl3d.shaders.PhongVertexShader,gl3d.core.shaders.GLAS3Shader);gl3d.shaders.PhongVertexShader.prototype.material;gl3d.shaders.PhongVertexShader.prototype.model;
gl3d.shaders.PhongVertexShader.prototype.world2local;gl3d.shaders.PhongVertexShader.prototype.view;gl3d.shaders.PhongVertexShader.prototype.perspective;gl3d.shaders.PhongVertexShader.prototype.joints;gl3d.shaders.PhongVertexShader.prototype.pos;gl3d.shaders.PhongVertexShader.prototype.norm;gl3d.shaders.PhongVertexShader.prototype.uv;gl3d.shaders.PhongVertexShader.prototype.tangent;gl3d.shaders.PhongVertexShader.prototype.targetPosition;gl3d.shaders.PhongVertexShader.prototype.weight;gl3d.shaders.PhongVertexShader.prototype.joint;
gl3d.shaders.PhongVertexShader.prototype.eyeDirectionVarying;gl3d.shaders.PhongVertexShader.prototype.posLightVaryings;gl3d.shaders.PhongVertexShader.prototype.shadowLightPoss;gl3d.shaders.PhongVertexShader.prototype.normVarying;gl3d.shaders.PhongVertexShader.prototype.tangentVarying;gl3d.shaders.PhongVertexShader.prototype.uvVarying;gl3d.shaders.PhongVertexShader.prototype.targetPositionVarying;gl3d.shaders.PhongVertexShader.prototype.reflected;gl3d.shaders.PhongVertexShader.prototype.modelPosVarying;
gl3d.shaders.PhongVertexShader.prototype.opVarying;
gl3d.shaders.PhongVertexShader.prototype.build=function(){var norm=this.norm;var pos=this.pos;if(this.material.gpuSkin){if(this.material.node.skin.useQuat){this.joint=this.mul(2,this.buffJoints());this.joints=this.uniformJointsQuat(this.material.node.skin.joints.length)}else{this.joint=this.mul(4,this.buffJoints());this.joints=this.uniformJointsMatrix(this.material.node.skin.joints.length)}var xyzw='xyzw';for(var i=0;i<this.material.node.skin.maxWeight;i++){var c=xyzw.charAt(i%4);if(this.material.node.skin.useQuat){this.joint=
this.joint.c(c);var value=this.mul(this.weight.c(c),this.q44(pos,this.joints.c(this.joint),this.joints.c(this.joint,1)))}else{this.joint=this.joint.c(c);value=this.mul(this.weight.c(c),this.m44(pos,this.joints.c(this.joint)))}if(i==0)var result=value;else result=this.add(result,value);if(this.material.lightAble){var valueNorm=this.mul(this.weight.c(c),this.material.node.skin.useQuat?this.q33(norm,this.mov(this.joints.c(this.joint))):this.m33(norm,this.joints.c(this.joint)));if(i==0)var resultNorm=
valueNorm;else resultNorm=this.add(resultNorm,valueNorm)}}pos=result;if(this.material.lightAble)norm=this.nrm(resultNorm)}var worldPos=this.m44(pos,this.model);var viewPos=this.m44(worldPos,this.view);var opVar=this.m44(viewPos,this.perspective);this.op=opVar;if(this.material.lightAble||this.material.reflectTexture){var worldNorm=this.nrm(this.m33(norm,this.model));if(this.material.specularAble||this.material.reflectTexture){if(this.material.normalMapAble)var eyeDirection=this.nrm(this.m33(this.neg(viewPos),
this.world2local));else eyeDirection=this.nrm(this.neg(viewPos));this.mov(eyeDirection,this.eyeDirectionVarying)}this.shadowLightPoss.length=this.material.view.lights.length;for(i=0;i<this.material.view.lights.length;i++){var light=this.material.view.lights[i];var lightPos=this.uniformLightPos(i);if(this.material.normalMapAble)var posLight=this.nrm(this.m33(this.sub(this.m44(this.mov(lightPos),this.view),viewPos),this.world2local));else posLight=this.nrm(this.sub(this.m44(this.mov(lightPos),this.view),
viewPos));var posLightVarying=this.varying();this.posLightVaryings.push(posLightVarying);this.mov(posLight,posLightVarying);if(light.shadowMapEnabled&&this.material.receiveShadows){var shadowLightPosVarying=this.varying();this.shadowLightPoss[i]=shadowLightPosVarying;this.mov(this.m44(worldPos,this.uniformLightShadowCameraWorld(i)),shadowLightPosVarying)}}if(this.material.normalMapAble)this.mov(this.nrm(this.m33(this.m33(worldNorm,this.view),this.world2local)),this.normVarying);else{var viewNormal=
this.nrm(this.m33(worldNorm,this.view));this.mov(viewNormal,this.normVarying)}if(this.material.normalMapAble)this.mov(this.tangent,this.tangentVarying);if(this.material.reflectTexture){var w2c=this.nrm(this.sub(worldPos,this.uniformCameraPos()));this.mov(this.sub(w2c,this.mul2([2,worldNorm,this.dp3(worldNorm,w2c)])),this.reflected)}}if(this.material.diffTexture||this.material.normalMapAble){var uv2=this.uv;if(this.material.uvMuler)uv2=this.mul(this.uniformUVMulAdder().xy,uv2);if(this.material.uvAdder)uv2=
this.add(this.uniformUVMulAdder().zw,uv2);this.mov(uv2,this.uvVarying)}if(this.material.wireframeAble)this.mov(this.targetPosition,this.targetPositionVarying);var needModelPos=false;if(this.material.lightAble){var foreachiter0_target=this.material.view.lights;for(var foreachiter0 in foreachiter0_target){light=foreachiter0_target[foreachiter0];if(light.lightType==gl3d.core.Light.POINT||light.lightType==gl3d.core.Light.SPOT)needModelPos=true}}if(this.material.fogAble)if(this.material.view.fog.mode!=
gl3d.core.Fog.FOG_NONE||needModelPos)this.mov(worldPos,this.modelPosVarying);if(this.material.writeDepth)this.mov(opVar,this.opVarying)};gl3d.shaders.PhongVertexShader.prototype.q44=function(pos,quas,tran){var temp=this.add(this.q33(pos,this.mov(quas)),tran);this.mov(1,temp.w);return temp.xyzw};gl3d.shaders.PhongVertexShader.prototype.q33=function(pos,quas){var t=this.mul(2,this.crs(quas,pos));return this.add2([pos,this.mul(quas.w,t),this.crs(quas,t)])};
gl3d.shaders.PhongVertexShader.prototype.FLEXJS_CLASS_INFO={names:[{name:'PhongVertexShader',qName:'gl3d.shaders.PhongVertexShader'}]};goog.exportSymbol('gl3d.shaders.PhongVertexShader',gl3d.shaders.PhongVertexShader);
gl3d.shaders.PhongVertexShader.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'model':{type:'Var'},'world2local':{type:'Var'},'view':{type:'Var'},'perspective':{type:'Var'},'joints':{type:'Var'},'pos':{type:'Var'},'norm':{type:'Var'},'uv':{type:'Var'},'tangent':{type:'Var'},'targetPosition':{type:'Var'},'weight':{type:'Var'},'joint':{type:'Var'},'eyeDirectionVarying':{type:'Var'},'posLightVaryings':{type:'Vector.\x3cVar\x3e'},'shadowLightPoss':{type:'Vector.\x3cVar\x3e'},
'normVarying':{type:'Var'},'tangentVarying':{type:'Var'},'uvVarying':{type:'Var'},'targetPositionVarying':{type:'Var'},'reflected':{type:'Var'},'modelPosVarying':{type:'Var'},'opVarying':{type:'Var'}}},accessors:function(){return{}},methods:function(){return{'PhongVertexShader':{type:'',declaredBy:'gl3d.shaders.PhongVertexShader'},'build':{type:'void',declaredBy:'gl3d.shaders.PhongVertexShader'},'q44':{type:'Var',declaredBy:'gl3d.shaders.PhongVertexShader'},'q33':{type:'Var',declaredBy:'gl3d.shaders.PhongVertexShader'}}}}};goog.provide('flash.display3D.Context3DProfile');flash.display3D.Context3DProfile=function(){};flash.display3D.Context3DProfile.BASELINE='baseline';flash.display3D.Context3DProfile.BASELINE_CONSTRAINED='baselineConstrained';flash.display3D.Context3DProfile.BASELINE_EXTENDED='baselineExtended';flash.display3D.Context3DProfile.STANDARD='standard';flash.display3D.Context3DProfile.STANDARD_CONSTRAINED='standardConstrained';flash.display3D.Context3DProfile.STANDARD_EXTENDED='standardExtended';
flash.display3D.Context3DProfile.prototype.FLEXJS_CLASS_INFO={names:[{name:'Context3DProfile',qName:'flash.display3D.Context3DProfile'}]};goog.exportSymbol('flash.display3D.Context3DProfile',flash.display3D.Context3DProfile);flash.display3D.Context3DProfile.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Context3DProfile':{type:'',declaredBy:'flash.display3D.Context3DProfile'}}}}};goog.provide('flash.display3D.Context3DRenderMode');flash.display3D.Context3DRenderMode=function(){};flash.display3D.Context3DRenderMode.AUTO='auto';flash.display3D.Context3DRenderMode.SOFTWARE='software';flash.display3D.Context3DRenderMode.prototype.FLEXJS_CLASS_INFO={names:[{name:'Context3DRenderMode',qName:'flash.display3D.Context3DRenderMode'}]};goog.exportSymbol('flash.display3D.Context3DRenderMode',flash.display3D.Context3DRenderMode);
flash.display3D.Context3DRenderMode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Context3DRenderMode':{type:'',declaredBy:'flash.display3D.Context3DRenderMode'}}}}};goog.provide('flash.events.TextEvent');goog.require('flash.events.Event');flash.events.TextEvent=function(type,bubbles,cancelable,text){bubbles=typeof bubbles!=='undefined'?bubbles:false;cancelable=typeof cancelable!=='undefined'?cancelable:false;text=typeof text!=='undefined'?text:'';flash.events.TextEvent.base(this,'constructor',type,bubbles,cancelable);this.m_text=text};goog.inherits(flash.events.TextEvent,flash.events.Event);flash.events.TextEvent.LINK='link';
flash.events.TextEvent.TEXT_INPUT='textInput';flash.events.TextEvent.prototype.m_text;flash.events.TextEvent.prototype.clone=function(){var te=new flash.events.TextEvent(this.type,this.bubbles,this.cancelable,this.m_text);te.copyNativeData(this);return te};flash.events.TextEvent.prototype.toString=function(){return this.formatToString('TextEvent','type','bubbles','cancelable','eventPhase','text')};flash.events.TextEvent.prototype.copyNativeData=function(param1){};
Object.defineProperties(flash.events.TextEvent.prototype,{text:{get:function(){return this.m_text},set:function(value){this.m_text=value}}});flash.events.TextEvent.prototype.FLEXJS_CLASS_INFO={names:[{name:'TextEvent',qName:'flash.events.TextEvent'}]};goog.exportSymbol('flash.events.TextEvent',flash.events.TextEvent);
flash.events.TextEvent.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'text':{type:'String',declaredBy:'flash.events.TextEvent'}}},methods:function(){return{'TextEvent':{type:'',declaredBy:'flash.events.TextEvent'},'clone':{type:'Event',declaredBy:'flash.events.TextEvent'},'toString':{type:'String',declaredBy:'flash.events.TextEvent'}}}}};goog.provide('flash.events.ErrorEvent');goog.require('flash.events.TextEvent');flash.events.ErrorEvent=function(type,bubbles,cancelable,text,id){bubbles=typeof bubbles!=='undefined'?bubbles:false;cancelable=typeof cancelable!=='undefined'?cancelable:false;text=typeof text!=='undefined'?text:'';id=typeof id!=='undefined'?id:0;flash.events.ErrorEvent.base(this,'constructor',type,bubbles,cancelable,text);this.m_errorID=id};goog.inherits(flash.events.ErrorEvent,flash.events.TextEvent);
flash.events.ErrorEvent.ERROR='error';flash.events.ErrorEvent.prototype.m_errorID;flash.events.ErrorEvent.prototype.clone=function(){return new flash.events.ErrorEvent(this.type,this.bubbles,this.cancelable,this.text,this.m_errorID)};flash.events.ErrorEvent.prototype.toString=function(){return this.formatToString('ErrorEvent','type','bubbles','cancelable','eventPhase','text')};Object.defineProperties(flash.events.ErrorEvent.prototype,{errorID:{get:function(){return this.m_errorID}}});
flash.events.ErrorEvent.prototype.FLEXJS_CLASS_INFO={names:[{name:'ErrorEvent',qName:'flash.events.ErrorEvent'}]};goog.exportSymbol('flash.events.ErrorEvent',flash.events.ErrorEvent);
flash.events.ErrorEvent.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'errorID':{type:'int',declaredBy:'flash.events.ErrorEvent',metadata:function(){return[]}}}},methods:function(){return{'ErrorEvent':{type:'',declaredBy:'flash.events.ErrorEvent'},'clone':{type:'Event',declaredBy:'flash.events.ErrorEvent'},'toString':{type:'String',declaredBy:'flash.events.ErrorEvent'}}}}};goog.provide('gl3d.core.renders.GL');gl3d.core.renders.GL=function(context){this.tempvec4=new Array(4);this.currentTextures={};this.currentVBufs={};this.context=context};gl3d.core.renders.GL.prototype.context;gl3d.core.renders.GL.prototype.lastBuffMaxIndex=0;gl3d.core.renders.GL.prototype.nowBuffMaxIndex=0;gl3d.core.renders.GL.prototype.lastTexMaxIndex=0;gl3d.core.renders.GL.prototype.nowTexMaxIndex=0;gl3d.core.renders.GL.prototype.drawTriangleCounter=0;
gl3d.core.renders.GL.prototype.drawCounter=0;gl3d.core.renders.GL.prototype.tempvec4;gl3d.core.renders.GL.prototype.currentTextures;gl3d.core.renders.GL.prototype.currentVBufs;
gl3d.core.renders.GL.prototype.clear=function(red,green,blue,alpha,depth,stencil,mask){red=typeof red!=='undefined'?red:0;green=typeof green!=='undefined'?green:0;blue=typeof blue!=='undefined'?blue:0;alpha=typeof alpha!=='undefined'?alpha:1;depth=typeof depth!=='undefined'?depth:1;stencil=typeof stencil!=='undefined'?stencil:0;mask=typeof mask!=='undefined'?mask:4294967295;this.context.clear(red,green,blue,alpha,depth,stencil,mask)};
gl3d.core.renders.GL.prototype.configureBackBuffer=function(width,height,antiAlias,enableDepthAndStencil,wantsBestResolution){enableDepthAndStencil=typeof enableDepthAndStencil!=='undefined'?enableDepthAndStencil:true;wantsBestResolution=typeof wantsBestResolution!=='undefined'?wantsBestResolution:false;this.context.configureBackBuffer(width,height,antiAlias,enableDepthAndStencil)};
gl3d.core.renders.GL.prototype.createCubeTexture=function(size,format,optimizeForRenderToTexture,streamingLevels){streamingLevels=typeof streamingLevels!=='undefined'?streamingLevels:0;return this.context.createCubeTexture(size,format,optimizeForRenderToTexture)};gl3d.core.renders.GL.prototype.createIndexBuffer=function(numIndices){return this.context.createIndexBuffer(numIndices)};gl3d.core.renders.GL.prototype.createProgram=function(){return this.context.createProgram()};
gl3d.core.renders.GL.prototype.createRectangleTexture=function(width,height,format,optimizeForRenderToTexture){return this.context.createRectangleTexture(width,height,format,optimizeForRenderToTexture)};gl3d.core.renders.GL.prototype.createTexture=function(width,height,format,optimizeForRenderToTexture,streamingLevels){streamingLevels=typeof streamingLevels!=='undefined'?streamingLevels:0;return this.context.createTexture(width,height,format,optimizeForRenderToTexture)};
gl3d.core.renders.GL.prototype.createVideoTexture=function(){return this.context.createVideoTexture()};gl3d.core.renders.GL.prototype.createVertexBuffer=function(numVertices,data32PerVertex){return this.context.createVertexBuffer(numVertices,data32PerVertex)};gl3d.core.renders.GL.prototype.dispose=function(recreate){recreate=typeof recreate!=='undefined'?recreate:true;this.context.dispose(recreate)};gl3d.core.renders.GL.prototype.drawToBitmapData=function(destination){this.beginDraw();this.context.drawToBitmapData(destination)};
gl3d.core.renders.GL.prototype.drawTriangles=function(indexBuffer,firstIndex,numTriangles,isBeginDraw){firstIndex=typeof firstIndex!=='undefined'?firstIndex:0;numTriangles=typeof numTriangles!=='undefined'?numTriangles:-1;isBeginDraw=typeof isBeginDraw!=='undefined'?isBeginDraw:true;if(isBeginDraw)this.beginDraw();indexBuffer.update(this);this.drawTriangleCounter+=indexBuffer.data.length/3;this.drawCounter++;this.context.drawTriangles(indexBuffer.buff,firstIndex,numTriangles)};
gl3d.core.renders.GL.prototype.drawToBitmapDataInstance=function(destination){this.context.drawToBitmapData(destination)};
gl3d.core.renders.GL.prototype.beginDraw=function(){while(this.nowBuffMaxIndex<this.lastBuffMaxIndex)this.setVertexBufferAtInternal(++this.nowBuffMaxIndex,null);while(this.nowTexMaxIndex<this.lastTexMaxIndex)this.setTextureInternal(++this.nowTexMaxIndex,null);this.lastBuffMaxIndex=this.nowBuffMaxIndex;this.lastTexMaxIndex=this.nowTexMaxIndex;this.nowBuffMaxIndex=this.nowTexMaxIndex=-1};gl3d.core.renders.GL.prototype.present=function(){this.context.present()};
gl3d.core.renders.GL.prototype.setBlendFactors=function(sourceFactor,destinationFactor){this.context.setBlendFactors(sourceFactor,destinationFactor)};gl3d.core.renders.GL.prototype.setColorMask=function(red,green,blue,alpha){this.context.setColorMask(red,green,blue,alpha)};gl3d.core.renders.GL.prototype.setCulling=function(triangleFaceToCull){this.context.setCulling(triangleFaceToCull)};
gl3d.core.renders.GL.prototype.setDepthTest=function(depthMask,passCompareMode){this.context.setDepthTest(depthMask,passCompareMode)};gl3d.core.renders.GL.prototype.setProgram=function(program){this.context.setProgram(program)};gl3d.core.renders.GL.prototype.setProgramConstantsFromByteArray=function(programType,firstRegister,numRegisters,data,byteArrayOffset){this.context.setProgramConstantsFromByteArray(programType,firstRegister,numRegisters,data,byteArrayOffset)};
gl3d.core.renders.GL.prototype.setProgramConstantsFromMatrix=function(programType,firstRegister,matrix,transposedMatrix){transposedMatrix=typeof transposedMatrix!=='undefined'?transposedMatrix:false;this.context.setProgramConstantsFromMatrix(programType,firstRegister,matrix,transposedMatrix)};
gl3d.core.renders.GL.prototype.setProgramConstantsFromVector=function(programType,firstRegister,data,numRegisters){numRegisters=typeof numRegisters!=='undefined'?numRegisters:-1;this.context.setProgramConstantsFromVector(programType,firstRegister,data,numRegisters)};
gl3d.core.renders.GL.prototype.setProgramConstantsFromVector3D=function(programType,firstRegister,data){this.tempvec4[0]=data.x;this.tempvec4[1]=data.y;this.tempvec4[2]=data.z;this.tempvec4[3]=data.w;this.context.setProgramConstantsFromVector(programType,firstRegister,this.tempvec4)};
gl3d.core.renders.GL.prototype.setProgramConstantsFromXYZW=function(programType,firstRegister,x,y,z,w){x=typeof x!=='undefined'?x:0;y=typeof y!=='undefined'?y:0;z=typeof z!=='undefined'?z:0;w=typeof w!=='undefined'?w:0;this.tempvec4[0]=x;this.tempvec4[1]=y;this.tempvec4[2]=z;this.tempvec4[3]=w;this.context.setProgramConstantsFromVector(programType,firstRegister,this.tempvec4)};gl3d.core.renders.GL.prototype.setRenderToBackBuffer=function(){this.context.setRenderToBackBuffer()};
gl3d.core.renders.GL.prototype.setRenderToTexture=function(texture,enableDepthAndStencil,antiAlias,surfaceSelector){enableDepthAndStencil=typeof enableDepthAndStencil!=='undefined'?enableDepthAndStencil:false;antiAlias=typeof antiAlias!=='undefined'?antiAlias:0;surfaceSelector=typeof surfaceSelector!=='undefined'?surfaceSelector:0;this.context.setRenderToTexture(texture,enableDepthAndStencil,antiAlias,surfaceSelector)};
gl3d.core.renders.GL.prototype.setSamplerStateAt=function(sampler,wrap,filter,mipfilter){};gl3d.core.renders.GL.prototype.setScissorRectangle=function(rectangle){this.context.setScissorRectangle(rectangle)};gl3d.core.renders.GL.prototype.setStencilActions=function(triangleFace,compareMode,actionOnBothPass,actionOnDepthFail,actionOnDepthPassStencilFail){this.context.setStencilActions(triangleFace,compareMode,actionOnBothPass,actionOnDepthFail,actionOnDepthPassStencilFail)};
gl3d.core.renders.GL.prototype.setStencilReferenceValue=function(referenceValue,readMask,writeMask){readMask=typeof readMask!=='undefined'?readMask:255;writeMask=typeof writeMask!=='undefined'?writeMask:255;this.context.setStencilReferenceValue(referenceValue,readMask,writeMask)};gl3d.core.renders.GL.prototype.setTextureAt=function(sampler,texture){this.setTextureInternal(sampler,texture);if(this.nowTexMaxIndex<sampler)this.nowTexMaxIndex=sampler};
gl3d.core.renders.GL.prototype.setTextureInternal=function(sampler,texture){if(this.currentTextures[sampler]!=texture){this.currentTextures[sampler]=texture;this.context.setTextureAt(sampler,texture)}};
gl3d.core.renders.GL.prototype.setVertexBufferAt=function(index,buffer,bufferOffset,format){bufferOffset=typeof bufferOffset!=='undefined'?bufferOffset:0;format=typeof format!=='undefined'?format:'float4';this.setVertexBufferAtInternal(index,buffer,bufferOffset,format);if(this.nowBuffMaxIndex<index)this.nowBuffMaxIndex=index};
gl3d.core.renders.GL.prototype.setVertexBufferAtInternal=function(sampler,buffer,bufferOffset,format){bufferOffset=typeof bufferOffset!=='undefined'?bufferOffset:0;format=typeof format!=='undefined'?format:null;if(this.currentVBufs[sampler]!=buffer){this.currentVBufs[sampler]=buffer;this.context.setVertexBufferAt(sampler,buffer,bufferOffset,format)}};
Object.defineProperties(gl3d.core.renders.GL.prototype,{driverInfo:{get:function(){return this.context.driverInfo}},enableErrorChecking:{get:function(){return this.context.enableErrorChecking},set:function(v){this.context.enableErrorChecking=v}}});gl3d.core.renders.GL.prototype.FLEXJS_CLASS_INFO={names:[{name:'GL',qName:'gl3d.core.renders.GL'}]};goog.exportSymbol('gl3d.core.renders.GL',gl3d.core.renders.GL);
gl3d.core.renders.GL.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'lastBuffMaxIndex':{type:'int'},'nowBuffMaxIndex':{type:'int'},'lastTexMaxIndex':{type:'int'},'nowTexMaxIndex':{type:'int'},'drawTriangleCounter':{type:'int'},'drawCounter':{type:'int'}}},accessors:function(){return{'driverInfo':{type:'String',declaredBy:'gl3d.core.renders.GL'},'enableErrorChecking':{type:'Boolean',declaredBy:'gl3d.core.renders.GL'}}},methods:function(){return{'GL':{type:'',declaredBy:'gl3d.core.renders.GL'},
'clear':{type:'void',declaredBy:'gl3d.core.renders.GL'},'configureBackBuffer':{type:'void',declaredBy:'gl3d.core.renders.GL'},'createCubeTexture':{type:'CubeTexture',declaredBy:'gl3d.core.renders.GL'},'createIndexBuffer':{type:'IndexBuffer3D',declaredBy:'gl3d.core.renders.GL'},'createProgram':{type:'Program3D',declaredBy:'gl3d.core.renders.GL'},'createRectangleTexture':{type:'RectangleTexture',declaredBy:'gl3d.core.renders.GL'},'createTexture':{type:'Texture',declaredBy:'gl3d.core.renders.GL'},'createVideoTexture':{type:'Object',
declaredBy:'gl3d.core.renders.GL'},'createVertexBuffer':{type:'VertexBuffer3D',declaredBy:'gl3d.core.renders.GL'},'dispose':{type:'void',declaredBy:'gl3d.core.renders.GL'},'drawToBitmapData':{type:'void',declaredBy:'gl3d.core.renders.GL'},'drawTriangles':{type:'void',declaredBy:'gl3d.core.renders.GL'},'drawToBitmapDataInstance':{type:'void',declaredBy:'gl3d.core.renders.GL'},'beginDraw':{type:'void',declaredBy:'gl3d.core.renders.GL'},'present':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setBlendFactors':{type:'void',
declaredBy:'gl3d.core.renders.GL'},'setColorMask':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setCulling':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setDepthTest':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setProgram':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setProgramConstantsFromByteArray':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setProgramConstantsFromMatrix':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setProgramConstantsFromVector':{type:'void',declaredBy:'gl3d.core.renders.GL'},
'setProgramConstantsFromVector3D':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setProgramConstantsFromXYZW':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setRenderToBackBuffer':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setRenderToTexture':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setSamplerStateAt':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setScissorRectangle':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setStencilActions':{type:'void',declaredBy:'gl3d.core.renders.GL'},
'setStencilReferenceValue':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setTextureAt':{type:'void',declaredBy:'gl3d.core.renders.GL'},'setVertexBufferAt':{type:'void',declaredBy:'gl3d.core.renders.GL'}}}}};goog.provide('gl3d.core.renders.Render');gl3d.core.renders.Render=function(view){this.collects=new Array;this.view=view};gl3d.core.renders.Render.prototype.gl3d;gl3d.core.renders.Render.prototype.view;gl3d.core.renders.Render.prototype.agalVersion;gl3d.core.renders.Render.prototype.collects;gl3d.core.renders.Render.prototype._visible=true;gl3d.core.renders.Render.prototype.init=function(){};gl3d.core.renders.Render.prototype.render=function(camera,scene){};
gl3d.core.renders.Render.prototype.collect=function(node){if(node.visible){this.collects.push(node);if(org.apache.flex.utils.Language.is(node,gl3d.core.Light))this.view.lights.push(node);var foreachiter0_target=node.children;for(var foreachiter0 in foreachiter0_target){var c=foreachiter0_target[foreachiter0];this.collect(c)}}};gl3d.core.renders.Render.prototype.sort=function(){};
Object.defineProperties(gl3d.core.renders.Render.prototype,{visible:{get:function(){return this._visible},set:function(value){this._visible=value}}});gl3d.core.renders.Render.prototype.FLEXJS_CLASS_INFO={names:[{name:'Render',qName:'gl3d.core.renders.Render'}]};goog.exportSymbol('gl3d.core.renders.Render',gl3d.core.renders.Render);
gl3d.core.renders.Render.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'gl3d':{type:'GL'},'view':{type:'View3D'},'agalVersion':{type:'int'},'collects':{type:'Vector.\x3cNode3D\x3e'}}},accessors:function(){return{'visible':{type:'Boolean',declaredBy:'gl3d.core.renders.Render'}}},methods:function(){return{'Render':{type:'',declaredBy:'gl3d.core.renders.Render'},'init':{type:'void',declaredBy:'gl3d.core.renders.Render'},'render':{type:'void',declaredBy:'gl3d.core.renders.Render'},
'collect':{type:'void',declaredBy:'gl3d.core.renders.Render'},'sort':{type:'void',declaredBy:'gl3d.core.renders.Render'}}}}};goog.provide('gl3d.core.renders.Stage3DRender');goog.require('flash.display3D.Context3DProfile');goog.require('flash.display3D.Context3DRenderMode');goog.require('flash.events.ErrorEvent');goog.require('gl3d.core.renders.GL');goog.require('gl3d.core.renders.Render');gl3d.core.renders.Stage3DRender=function(view){gl3d.core.renders.Stage3DRender.base(this,'constructor',view)};goog.inherits(gl3d.core.renders.Stage3DRender,gl3d.core.renders.Render);gl3d.core.renders.Stage3DRender.prototype.renderTarget;
gl3d.core.renders.Stage3DRender.prototype.stage3d;gl3d.core.renders.Stage3DRender.prototype.depthMaterial;
gl3d.core.renders.Stage3DRender.prototype.init=function(){gl3d.core.renders.Stage3DRender.base(this,'init');this.stage3d=this.view.stage.stage3Ds[this.view.id];this.stage3d.visible=this.visible;this.stage3d.addEventListener(flash.events.Event.CONTEXT3D_CREATE,org.apache.flex.utils.Language.closure(this.stage_context3dCreate,this,'stage_context3dCreate'));this.stage3d.addEventListener(flash.events.ErrorEvent.ERROR,org.apache.flex.utils.Language.closure(this.stage3Ds_error,this,'stage3Ds_error'));var pfs=
[flash.display3D.Context3DProfile.STANDARD,flash.display3D.Context3DProfile.STANDARD_CONSTRAINED,flash.display3D.Context3DProfile.BASELINE_EXTENDED,flash.display3D.Context3DProfile.BASELINE,flash.display3D.Context3DProfile.BASELINE_CONSTRAINED];for(var i=pfs.length-1;i>=0;i--)if(pfs[i]==null)pfs.splice(i,1);this.stage3d.requestContext3DMatchingProfiles(pfs)};gl3d.core.renders.Stage3DRender.prototype.stage3Ds_error=function(e){this.stage3d.requestContext3D(flash.display3D.Context3DRenderMode.AUTO)};
gl3d.core.renders.Stage3DRender.prototype.stage_context3dCreate=function(e){this.gl3d=new gl3d.core.renders.GL(this.stage3d.context3D);this.gl3d.enableErrorChecking=this.view.enableErrorChecking;this.view.profile=this.stage3d.context3D.profile;this.view.driverInfo=this.gl3d.driverInfo;if(this.view.profile==flash.display3D.Context3DProfile.STANDARD||this.view.profile==flash.display3D.Context3DProfile.STANDARD_CONSTRAINED)this.agalVersion=2;else this.agalVersion=1};
gl3d.core.renders.Stage3DRender.prototype.render=function(camera,scene){if(!this.visible)return;gl3d.core.renders.Stage3DRender.base(this,'render',camera,scene);if(this.gl3d){if(this.gl3d.driverInfo=='Disposed'){this.view.invalid=true;return}if(this.view.invalid){this.stage3d.x=this.view.x;this.stage3d.y=this.view.y;this.gl3d.configureBackBuffer(this.view.stage3dWidth,this.view.stage3dHeight,this.view.antiAlias)}this.view.invalid=false;this.collects.length=0;this.view.lights.length=0;this.gl3d.drawTriangleCounter=
0;this.gl3d.drawCounter=0;this.collect(scene);this.sort();var foreachiter0_target=this.view.lights;for(var foreachiter0 in foreachiter0_target){var light=foreachiter0_target[foreachiter0];if(light.shadowMapEnabled){light.shadowMap.update(this.view);if(light.shadowMap.texture==null)light.shadowMap.texture=this.gl3d.createTexture(light.shadowMapSize,light.shadowMapSize,flash.display3D.Context3DTextureFormat.RGBA_HALF_FLOAT,true);this.gl3d.setRenderToTexture(light.shadowMap.texture,true);this.gl3d.clear(1,
1,1);if(this.depthMaterial==null){this.depthMaterial=new gl3d.core.Material;this.depthMaterial.writeDepth=true}this.depthMaterial.materialCamera=light.shadowCamera;var foreachiter1_target=this.collects;for(var foreachiter1 in foreachiter1_target){var node=foreachiter1_target[foreachiter1];if(node.material&&node.material.castShadow)node.update(this.view,this.depthMaterial)}}}if(this.view.posts.length){var len=this.view.posts.length>1?2:1;for(var i=0;i<len;i++){this.view.postRTTs[i].update(this.view);
if(this.view.postRTTs[i].texture==null)this.view.postRTTs[i].texture=this.gl3d.createRectangleTexture(this.view.stage3dWidth,this.view.stage3dHeight,flash.display3D.Context3DTextureFormat.BGRA,true)}this.renderTarget=this.view.postRTTs[0]}else this.renderTarget=null;if(this.renderTarget)this.gl3d.setRenderToTexture(this.renderTarget.texture,true,this.view.antiAlias);else this.gl3d.setRenderToBackBuffer();this.gl3d.clear((this.view.background>>16&255)/255,(this.view.background>>8&255)/255,(this.view.background&
255)/255);var foreachiter2_target=this.collects;for(var foreachiter2 in foreachiter2_target){node=foreachiter2_target[foreachiter2];node.update(this.view)}if(this.view.posts.length)for(i=0;i<this.view.posts.length;i++){var post=this.view.posts[i];post.update(this.view,i==this.view.posts.length-1);if(len==2){var temp=this.view.postRTTs[0];this.view.postRTTs[0]=this.view.postRTTs[1];this.view.postRTTs[1]=temp}}this.gl3d.present()}};
Object.defineProperties(gl3d.core.renders.Stage3DRender.prototype,{visible:{get:function(){return org.apache.flex.utils.Language.superGetter(gl3d.core.renders.Stage3DRender,this,'visible')},set:function(value){org.apache.flex.utils.Language.superSetter(gl3d.core.renders.Stage3DRender,this,'visible',value);if(this.stage3d)this.stage3d.visible=value}}});gl3d.core.renders.Stage3DRender.prototype.FLEXJS_CLASS_INFO={names:[{name:'Stage3DRender',qName:'gl3d.core.renders.Stage3DRender'}]};
goog.exportSymbol('gl3d.core.renders.Stage3DRender',gl3d.core.renders.Stage3DRender);
gl3d.core.renders.Stage3DRender.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'renderTarget':{type:'TextureSet'},'stage3d':{type:'Stage3D'}}},accessors:function(){return{'visible':{type:'Boolean',declaredBy:'gl3d.core.renders.Stage3DRender'}}},methods:function(){return{'Stage3DRender':{type:'',declaredBy:'gl3d.core.renders.Stage3DRender'},'init':{type:'void',declaredBy:'gl3d.core.renders.Stage3DRender'},'render':{type:'void',declaredBy:'gl3d.core.renders.Stage3DRender'}}}}};goog.provide('gl3d.core.View3D');goog.require('flash.display.Sprite');goog.require('gl3d.core.renders.Stage3DRender');
gl3d.core.View3D=function(id){gl3d.core.View3D.base(this,'constructor');id=typeof id!=='undefined'?id:0;this.scene=new gl3d.core.Node3D('scene');this.camera=new gl3d.core.Camera3D;this.lights=[];this.fog=new gl3d.core.Fog;this.ctrls=new Array;this.posts=new Array;this.postRTTs=[new gl3d.core.TextureSet(null,true,false,false),new gl3d.core.TextureSet(null,true,false,false)].slice();this.id=id;this.scene.addChild(this.camera);this.renderer=new gl3d.core.renders.Stage3DRender(this);if(this.stage)this.init();
else this.addEventListener(flash.events.Event.ADDED_TO_STAGE,org.apache.flex.utils.Language.closure(this.init,this,'init'))};goog.inherits(gl3d.core.View3D,flash.display.Sprite);gl3d.core.View3D.prototype._enableErrorChecking=false;gl3d.core.View3D.prototype.scene;gl3d.core.View3D.prototype.camera;gl3d.core.View3D.prototype.renderer;gl3d.core.View3D.prototype.lights;gl3d.core.View3D.prototype.fog;gl3d.core.View3D.prototype.ctrls;gl3d.core.View3D.prototype.posts;gl3d.core.View3D.prototype.postRTTs;
gl3d.core.View3D.prototype._antiAlias=2;gl3d.core.View3D.prototype.id;gl3d.core.View3D.prototype.stage3dWidth=200;gl3d.core.View3D.prototype.stage3dHeight=200;gl3d.core.View3D.prototype.time=0;gl3d.core.View3D.prototype.driverInfo;gl3d.core.View3D.prototype.profile;gl3d.core.View3D.prototype.background=0;gl3d.core.View3D.prototype.invalid=true;
gl3d.core.View3D.prototype.init=function(e){e=typeof e!=='undefined'?e:null;this.removeEventListener(flash.events.Event.ADDED_TO_STAGE,org.apache.flex.utils.Language.closure(this.init,this,'init'));this.renderer.init()};gl3d.core.View3D.prototype.updateCtrl=function(){var foreachiter0_target=this.ctrls;for(var foreachiter0 in foreachiter0_target){var ctrl=foreachiter0_target[foreachiter0];ctrl.update(this.time)}};
gl3d.core.View3D.prototype.render=function(time){time=typeof time!=='undefined'?time:0;this.time=time;this.renderer.render(this.camera,this.scene)};
Object.defineProperties(gl3d.core.View3D.prototype,{antiAlias:{get:function(){return this._antiAlias},set:function(value){this._antiAlias=value;this.invalid=true}},x:{get:function(){return org.apache.flex.utils.Language.superGetter(gl3d.core.View3D,this,'x')},set:function(value){org.apache.flex.utils.Language.superSetter(gl3d.core.View3D,this,'x',value);this.invalid=true}},y:{get:function(){return org.apache.flex.utils.Language.superGetter(gl3d.core.View3D,this,'y')},set:function(value){org.apache.flex.utils.Language.superSetter(gl3d.core.View3D,
this,'y',value);this.invalid=true}},enableErrorChecking:{get:function(){return this._enableErrorChecking},set:function(v){this._enableErrorChecking=v;if(this.renderer.gl3d)this.renderer.gl3d.enableErrorChecking=v}}});gl3d.core.View3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'View3D',qName:'gl3d.core.View3D'}]};goog.exportSymbol('gl3d.core.View3D',gl3d.core.View3D);
gl3d.core.View3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'_enableErrorChecking':{type:'Boolean'},'scene':{type:'Node3D'},'camera':{type:'Camera3D'},'renderer':{type:'Render'},'lights':{type:'Vector.\x3cLight\x3e'},'fog':{type:'Fog'},'ctrls':{type:'Vector.\x3cCtrl\x3e'},'posts':{type:'Vector.\x3cPostEffect\x3e'},'postRTTs':{type:'Vector.\x3cTextureSet\x3e'},'id':{type:'Object'},'stage3dWidth':{type:'Number'},'stage3dHeight':{type:'Number'},'time':{type:'Number'},
'driverInfo':{type:'String'},'profile':{type:'String'},'background':{type:'uint'},'invalid':{type:'Boolean'}}},accessors:function(){return{'antiAlias':{type:'int',declaredBy:'gl3d.core.View3D'},'x':{type:'Number',declaredBy:'gl3d.core.View3D'},'y':{type:'Number',declaredBy:'gl3d.core.View3D'},'enableErrorChecking':{type:'Boolean',declaredBy:'gl3d.core.View3D'}}},methods:function(){return{'View3D':{type:'',declaredBy:'gl3d.core.View3D'},'updateCtrl':{type:'void',declaredBy:'gl3d.core.View3D'},'render':{type:'void',
declaredBy:'gl3d.core.View3D'}}}}};goog.provide('gl3d.core.IndexBufferSet');gl3d.core.IndexBufferSet=function(data){this.data=data};gl3d.core.IndexBufferSet.prototype.data;gl3d.core.IndexBufferSet.prototype.invalid=true;gl3d.core.IndexBufferSet.prototype.dataInvalid=true;gl3d.core.IndexBufferSet.prototype.context;gl3d.core.IndexBufferSet.prototype.buff;gl3d.core.IndexBufferSet.prototype.numTriangles=-1;
gl3d.core.IndexBufferSet.prototype.update=function(context){if(this.invalid||this.context!=context){var num=this.data.length;this.buff=context.createIndexBuffer(num);this.invalid=false;this.dataInvalid=true;this.context=context}if(this.dataInvalid){this.dataInvalid=false;this.buff.uploadFromVector(this.data,0,this.data.length)}};gl3d.core.IndexBufferSet.prototype.dispose=function(){if(this.buff)this.buff.dispose()};
gl3d.core.IndexBufferSet.prototype.FLEXJS_CLASS_INFO={names:[{name:'IndexBufferSet',qName:'gl3d.core.IndexBufferSet'}]};goog.exportSymbol('gl3d.core.IndexBufferSet',gl3d.core.IndexBufferSet);
gl3d.core.IndexBufferSet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'data':{type:'Vector.\x3cuint\x3e'},'dataInvalid':{type:'Boolean'},'buff':{type:'IndexBuffer3D'},'numTriangles':{type:'int'}}},accessors:function(){return{}},methods:function(){return{'IndexBufferSet':{type:'',declaredBy:'gl3d.core.IndexBufferSet'},'update':{type:'void',declaredBy:'gl3d.core.IndexBufferSet'},'dispose':{type:'void',declaredBy:'gl3d.core.IndexBufferSet'}}}}};goog.provide('gl3d.core.VertexBufferSet');gl3d.core.VertexBufferSet=function(data,data32PerVertex){this.data=data;this.data32PerVertex=data32PerVertex;if(data32PerVertex>4)throw'error';};gl3d.core.VertexBufferSet.prototype.data32PerVertex;gl3d.core.VertexBufferSet.prototype.data;gl3d.core.VertexBufferSet.prototype.buff;gl3d.core.VertexBufferSet.prototype.invalid=true;gl3d.core.VertexBufferSet.prototype.dataInvalid=true;gl3d.core.VertexBufferSet.prototype.context;
gl3d.core.VertexBufferSet.FORMATS=[null,'float1','float2','float3','float4'];gl3d.core.VertexBufferSet.prototype.cpuSkin;
gl3d.core.VertexBufferSet.prototype.update=function(context){if(this.invalid||this.context!=context){if(this.data){var num=this.data.length/this.data32PerVertex;this.buff=context.createVertexBuffer(num,this.data32PerVertex);this.invalid=false;this.context=context}this.dataInvalid=true}if(this.data&&this.dataInvalid){this.dataInvalid=false;this.buff.uploadFromVector(this.data,0,this.data.length/this.data32PerVertex)}};
gl3d.core.VertexBufferSet.prototype.bind=function(context,i,offset,format){offset=typeof offset!=='undefined'?offset:0;format=typeof format!=='undefined'?format:null;context.setVertexBufferAt(i,this.buff,offset,format||gl3d.core.VertexBufferSet.FORMATS[this.data32PerVertex])};gl3d.core.VertexBufferSet.prototype.dispose=function(){if(this.buff)this.buff.dispose()};gl3d.core.VertexBufferSet.prototype.FLEXJS_CLASS_INFO={names:[{name:'VertexBufferSet',qName:'gl3d.core.VertexBufferSet'}]};
goog.exportSymbol('gl3d.core.VertexBufferSet',gl3d.core.VertexBufferSet);
gl3d.core.VertexBufferSet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'data32PerVertex':{type:'int'},'data':{type:'Vector.\x3cNumber\x3e'},'invalid':{type:'Boolean'},'dataInvalid':{type:'Boolean'},'cpuSkin':{type:'VertexBufferSet'}}},accessors:function(){return{}},methods:function(){return{'VertexBufferSet':{type:'',declaredBy:'gl3d.core.VertexBufferSet'},'update':{type:'void',declaredBy:'gl3d.core.VertexBufferSet'},'bind':{type:'void',declaredBy:'gl3d.core.VertexBufferSet'},
'dispose':{type:'void',declaredBy:'gl3d.core.VertexBufferSet'}}}}};goog.provide('gl3d.core.Drawable');goog.require('gl3d.core.IndexBufferSet');goog.require('gl3d.core.VertexBufferSet');gl3d.core.Drawable=function(){};gl3d.core.Drawable.prototype._pos;gl3d.core.Drawable.prototype._norm;gl3d.core.Drawable.prototype._tangent;gl3d.core.Drawable.prototype._uv;gl3d.core.Drawable.prototype._random;gl3d.core.Drawable.prototype._sphereRandom;gl3d.core.Drawable.prototype.randomStep=4;gl3d.core.Drawable.prototype._targetPosition;gl3d.core.Drawable.prototype.uv2;gl3d.core.Drawable.prototype._joint;
gl3d.core.Drawable.prototype._weight;gl3d.core.Drawable.prototype._index;gl3d.core.Drawable.prototype.source;gl3d.core.Drawable.prototype._unpackedDrawable;gl3d.core.Drawable.prototype.oldi2newis;gl3d.core.Drawable.prototype.smooting=true;gl3d.core.Drawable.optimizeSource=function(source){gl3d.core.Drawable.optimzeSourceIndex(source,false);if(source.uvIndex)gl3d.core.Drawable.optimzeSourceIndex(source,true)};
gl3d.core.Drawable.optimzeSourceIndex=function(source,isUV){var index=isUV?source.uvIndex:source.index;var o2n={};var newis=[];if(isUV){if(source.uv){var uv=source.uv;var newUV=[];source.uv=newUV}if(source.uv2){var uv2=source.uv2;var newUV2=[];source.uv2=newUV2}source.uvIndex=newis}else{if(source.pos){var pos=source.pos;var newPos=[];source.pos=newPos}if(source.joint){var maxWeight=source.joint.length*3/pos.length;if(maxWeight==0)org.apache.flex.utils.Language.trace(source.joint.length,pos.length);
var joint=source.joint;var newJoint=[];source.joint=newJoint}if(source.weight){var weight=source.weight;var newWeight=[];source.weight=newWeight}if(source.color){var color=source.color;var newColor=[];source.color=newColor}if(source.alpha){var alpha=source.alpha;var newAlpha=[];source.alpha=newAlpha}if(source.uvIndex==null){if(source.uv){uv=source.uv;newUV=[];source.uv=newUV}if(source.uv2){uv2=source.uv2;newUV2=[];source.uv2=newUV2}}source.index=newis}var max=0;var foreachiter0_target=index;for(var foreachiter0 in foreachiter0_target){var f=
foreachiter0_target[foreachiter0];var newf=[];newis.push(newf);var foreachiter1_target=f;for(var foreachiter1 in foreachiter1_target){var i=foreachiter1_target[foreachiter1];var newi=o2n[i];if(newi==null){newi=max++;o2n[i]=newi;if(newPos)newPos.push(pos[3*i],pos[3*i+1],pos[3*i+2]);if(uv)newUV.push(uv[2*i],uv[2*i+1]);if(newColor)newColor.push(color[3*i],color[3*i+1],color[3*i+2]);if(newAlpha)newAlpha.push(alpha[i]);if(newJoint&&newWeight)for(var j=0;j<maxWeight;j++){newJoint.push(joint[maxWeight*i+
j]);newWeight.push(weight[maxWeight*i+j])}}newf.push(newi)}}};
Object.defineProperties(gl3d.core.Drawable.prototype,{pos:{get:function(){if(this._pos==null&&this.source&&this.source.pos)if(this.source.index&&this.source.uvIndex)this.index;else this._pos=new gl3d.core.VertexBufferSet(this.source.pos.slice(),3);return this._pos},set:function(value){this._pos=value}},norm:{get:function(){if(this._norm==null)this._norm=gl3d.meshs.Meshs.computeNormal(this);return this._norm},set:function(value){this._norm=value}},tangent:{get:function(){if(this._tangent==null)this._tangent=
gl3d.meshs.Meshs.computeTangent(this);return this._tangent},set:function(value){this._tangent=value}},uv:{get:function(){if(this._uv==null&&this.source&&this.source.uv)if(this.source.index&&this.source.uvIndex)this.index;else this._uv=new gl3d.core.VertexBufferSet(this.source.uv.slice(),2);if(this._uv==null)this._uv=gl3d.meshs.Meshs.computeUV(this);return this._uv},set:function(value){this._uv=value}},random:{get:function(){if(this._random==null)this._random=gl3d.meshs.Meshs.computeRandom(this,this.randomStep);
return this._random},set:function(value){this._random=value}},sphereRandom:{get:function(){if(this._sphereRandom==null)this._sphereRandom=gl3d.meshs.Meshs.computeSphereRandom(this,this.randomStep);return this._sphereRandom},set:function(value){this._sphereRandom=value}},targetPosition:{get:function(){if(this._targetPosition==null)this._targetPosition=gl3d.meshs.Meshs.computeTargetPosition(this);return this._targetPosition},set:function(value){this._targetPosition=value}},index:{get:function(){if(this._index==
null&&this.source&&this.source.index){if(this.source.uvIndex!=null){var maxI=0;this.oldi2newis={};var oldh2newi={};var sIndex=[];var face=null;var sPos=[];if(this.source.joint){var sjoint=[];var maxWeight=3*this.source.joint.length/this.source.pos.length}if(this.source.weight)var sweight=[];var sUV=[];var len=this.source.index.length;for(var i=0;i<len;i++){face=null;for(;j<len2;j++){if(face==null){face=[];sIndex.push(face)}var oldI=this.source.index[i][j];var oldUVI=this.source.uvIndex[i][j];if(this.smooting){var hash=
oldI+' '+oldUVI;var newi=oldh2newi[hash]}else newi=null;if(newi==null){newi=maxI++;sPos.push(this.source.pos[oldI*3],this.source.pos[oldI*3+1],this.source.pos[oldI*3+2]);if(sjoint&&sweight)for(var k=0;k<maxWeight;k++){sjoint.push(this.source.joint[oldI*maxWeight+k]);sweight.push(this.source.weight[oldI*maxWeight+k])}sUV.push(this.source.uv[oldUVI*2],this.source.uv[oldUVI*2+1]);if(this.smooting){oldh2newi[hash]=newi;var newis=this.oldi2newis[oldI];if(newis==null)this.oldi2newis[oldI]=newis=[];newis.push(newi)}}face.push(newi)}}this._pos=
new gl3d.core.VertexBufferSet(sPos.slice(),3);if(sjoint)this._joint=new gl3d.core.VertexBufferSet(sjoint.slice(),maxWeight);if(sweight)this._weight=new gl3d.core.VertexBufferSet(sweight.slice(),maxWeight);this._uv=new gl3d.core.VertexBufferSet(sUV.slice(),2)}var sIndex2=[];var foreachiter2_target=sIndex||this.source.index;for(var foreachiter2 in foreachiter2_target){face=foreachiter2_target[foreachiter2];len=face.length;for(i=2;i<len;i++)sIndex2.push(face[0],face[i-1],face[i])}this._index=new gl3d.core.IndexBufferSet(sIndex2.slice())}if(this._index==
null)this._index=gl3d.meshs.Meshs.computeIndex(this);return this._index},set:function(value){this._index=value}},unpackedDrawable:{get:function(){if(this._unpackedDrawable==null)this._unpackedDrawable=gl3d.meshs.Meshs.unpack(this);return this._unpackedDrawable}},joint:{get:function(){if(this._joint==null&&this.source&&this.source.joint)if(this.source.index&&this.source.uvIndex)this.index;else this._joint=new gl3d.core.VertexBufferSet(this.source.joint.slice(),this.source.joint.length/(this.source.pos.length/
3));return this._joint},set:function(value){this._joint=value}},weight:{get:function(){if(this._weight==null&&this.source&&this.source.weight)if(this.source.index&&this.source.uvIndex)this.index;else this._weight=new gl3d.core.VertexBufferSet(this.source.weight.slice(),this.source.weight.length/(this.source.pos.length/3));return this._weight},set:function(value){this._weight=value}}});gl3d.core.Drawable.prototype.FLEXJS_CLASS_INFO={names:[{name:'Drawable',qName:'gl3d.core.Drawable'}]};
goog.exportSymbol('gl3d.core.Drawable',gl3d.core.Drawable);
gl3d.core.Drawable.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'randomStep':{type:'int'},'uv2':{type:'VertexBufferSet'},'source':{type:'DrawableSource'},'oldi2newis':{type:'Object'},'smooting':{type:'Boolean'}}},accessors:function(){return{'pos':{type:'VertexBufferSet',declaredBy:'gl3d.core.Drawable'},'norm':{type:'VertexBufferSet',declaredBy:'gl3d.core.Drawable'},'tangent':{type:'VertexBufferSet',declaredBy:'gl3d.core.Drawable'},'uv':{type:'VertexBufferSet',declaredBy:'gl3d.core.Drawable'},
'random':{type:'VertexBufferSet',declaredBy:'gl3d.core.Drawable'},'sphereRandom':{type:'VertexBufferSet',declaredBy:'gl3d.core.Drawable'},'targetPosition':{type:'VertexBufferSet',declaredBy:'gl3d.core.Drawable'},'index':{type:'IndexBufferSet',declaredBy:'gl3d.core.Drawable'},'unpackedDrawable':{type:'Drawable',declaredBy:'gl3d.core.Drawable'},'joint':{type:'VertexBufferSet',declaredBy:'gl3d.core.Drawable'},'weight':{type:'VertexBufferSet',declaredBy:'gl3d.core.Drawable'}}},methods:function(){return{'Drawable':{type:'',
declaredBy:'gl3d.core.Drawable'}}}}};goog.provide('gl3d.meshs.Meshs');goog.require('gl3d.core.Drawable');goog.require('gl3d.core.IndexBufferSet');goog.require('gl3d.core.VertexBufferSet');gl3d.meshs.Meshs=function(){};gl3d.meshs.Meshs.billboard=function(){var vs=new Array(4*3);var uv=[0,0,1,0,0,1,1,1].slice();var ins=[0,1,2,1,3,2].slice();return gl3d.meshs.Meshs.createDrawable(ins,vs,uv,null)};
gl3d.meshs.Meshs.plane=function(r){r=typeof r!=='undefined'?r:1;var vs=[-r,-r,0,r,-r,0,-r,r,0,r,r,0].slice();var uv=[0,1,1,1,0,0,1,0].slice();var ins=[0,1,2,1,3,2].slice();return gl3d.meshs.Meshs.createDrawable(ins,vs,uv,null)};
gl3d.meshs.Meshs.sphere=function(w,h,size){w=typeof w!=='undefined'?w:20;h=typeof h!=='undefined'?h:20;size=typeof size!=='undefined'?size:.5;var ins=new Array;var vs=new Array;var uv=new Array;for(var i=0;i<=h;i++){var roti=Math.PI/h*i-Math.PI/2;for(var j=0;j<=w;j++){var rotj=Math.PI*2/w*j;vs.push(Math.cos(rotj)*Math.cos(roti)*size,Math.sin(roti)*size,Math.sin(rotj)*Math.cos(roti)*size);uv.push(j/w,i/h);var ni=vs.length/3-1;if(i>0&&j>0)ins.push(ni,ni-1,ni-w-1,ni-1,ni-w-2,ni-w-1)}}return gl3d.meshs.Meshs.createDrawable(ins,
vs,uv,vs)};gl3d.meshs.Meshs.test=function(){return gl3d.meshs.Meshs.createDrawable([1,0,2].slice(),[1,1,0,1,0,0,0,1,0].slice(),null,null)};
gl3d.meshs.Meshs.cube=function(width,heigth,depth){width=typeof width!=='undefined'?width:1;heigth=typeof heigth!=='undefined'?heigth:1;depth=typeof depth!=='undefined'?depth:1;var hw=width/2;var hh=heigth/2;var hd=depth/2;return gl3d.meshs.Meshs.createDrawable([0,1,2,0,2,3,4,6,5,4,7,6,8,10,9,8,11,10,12,13,14,12,14,15,16,17,18,16,18,19,20,22,21,20,23,22].slice(),[hw,hh,hd,hw,-hh,hd,-hw,-hh,hd,-hw,hh,hd,hw,hh,-hd,hw,-hh,-hd,-hw,-hh,-hd,-hw,hh,-hd,hw,hh,hd,hw,hh,-hd,-hw,hh,-hd,-hw,hh,hd,hw,-hh,hd,hw,
-hh,-hd,-hw,-hh,-hd,-hw,-hh,hd,hw,hh,hd,hw,hh,-hd,hw,-hh,-hd,hw,-hh,hd,-hw,hh,hd,-hw,hh,-hd,-hw,-hh,-hd,-hw,-hh,hd].slice(),[1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0].slice(),[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0].slice())};
gl3d.meshs.Meshs.terrainData=function(w,scale,sbmd,tempbmd){w=typeof w!=='undefined'?w:64;scale=typeof scale!=='undefined'?scale:null;sbmd=typeof sbmd!=='undefined'?sbmd:null;tempbmd=typeof tempbmd!=='undefined'?tempbmd:null;var vin=new Array;var bmd=tempbmd||new flash.display.BitmapData(w,w,true,0);if(sbmd==null)bmd.perlinNoise(35,35,3,0,true,true);else bmd.draw(sbmd,new flash.geom.Matrix(w/sbmd.width,0,0,w/sbmd.height),null,null,null,true);bmd.lock();for(var y=0;y<w;y++)for(var x=0;x<w;x++){var px=
x/(w-1)-.5;var py=((255&bmd.getPixel(x,y))/255-.5)*.1;var pz=y/(w-1)-.5;if(scale){px*=scale.x;py*=scale.y;pz*=scale.z}vin.push(px,py,pz)}bmd.unlock();if(tempbmd==null)bmd.dispose();return vin};
gl3d.meshs.Meshs.terrain=function(w,scale,sbmd,tempbmd){w=typeof w!=='undefined'?w:64;scale=typeof scale!=='undefined'?scale:null;sbmd=typeof sbmd!=='undefined'?sbmd:null;tempbmd=typeof tempbmd!=='undefined'?tempbmd:null;var ins=new Array;var vin=new Array;var uv=new Array;var bmd=tempbmd||new flash.display.BitmapData(w,w,true,0);if(sbmd==null)bmd.perlinNoise(10,10,3,0,true,true);else bmd.draw(sbmd,new flash.geom.Matrix(w/sbmd.width,0,0,w/sbmd.height),null,null,null,true);for(var y=0;y<w;y++)for(var x=
0;x<w;x++){var px=x/(w-1)-.5;var py=((255&bmd.getPixel(x,y))/255-.5)*.1;var pz=y/(w-1)-.5;if(scale){px*=scale.x;py*=scale.y;pz*=scale.z}vin.push(px,py,pz);uv.push(x/(w-1),y/(w-1));if(x!=w-1&&y!=w-1){ins.push(y*w+x,y*w+x+1,(y+1)*w+x);ins.push(y*w+x+1,(y+1)*w+1+x,(y+1)*w+x)}}var drawable=gl3d.meshs.Meshs.createDrawable(ins,vin,uv,null);if(tempbmd==null)bmd.dispose();return drawable};
gl3d.meshs.Meshs.createDrawable=function(index,pos,uv,norm,tangent){uv=typeof uv!=='undefined'?uv:null;norm=typeof norm!=='undefined'?norm:null;tangent=typeof tangent!=='undefined'?tangent:null;var drawable=new gl3d.core.Drawable;if(index)drawable.index=new gl3d.core.IndexBufferSet(index);if(pos)drawable.pos=new gl3d.core.VertexBufferSet(pos,3);if(uv)drawable.uv=new gl3d.core.VertexBufferSet(uv,2);if(norm)drawable.norm=new gl3d.core.VertexBufferSet(norm,3);if(tangent)drawable.tangent=new gl3d.core.VertexBufferSet(tangent,
3);return drawable};
gl3d.meshs.Meshs.unpack=function(drawable){var newDrawable=new gl3d.core.Drawable;var idata=drawable.index.data;newDrawable.index=new gl3d.core.IndexBufferSet(new Array);var vbnames=['pos','uv','norm','joint','weight'];for(var i=0;i<idata.length;i+=3){newDrawable.index.data.push(i,i+1,i+2);var foreachiter0_target=vbnames;for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];var vb=drawable[name];if(vb){var newvb=newDrawable[name];if(newvb==null)newvb=newDrawable[name]=
new gl3d.core.VertexBufferSet(new Array(idata.length*vb.data32PerVertex),vb.data32PerVertex);var d=vb.data32PerVertex;for(var j=0;j<d;j++){newvb.data[i*d+j]=vb.data[idata[i]*d+j];newvb.data[(i+1)*d+j]=vb.data[idata[i+1]*d+j];newvb.data[(i+2)*d+j]=vb.data[idata[i+2]*d+j]}}}}return newDrawable};
gl3d.meshs.Meshs.removeDuplicatedVertices=function(drawable){var posdata=drawable.pos.data;var hashToNewVertexId={};var oldVertexIdToNewVertexId=[];var newVertexCount=0;var newVertexId=0;for(var i=0;i<posdata.length/3;i++){var hash=posdata[i*3]+','+posdata[i*3+1]+','+posdata[i*3+2];var index=hashToNewVertexId[hash];if(index==null){newVertexId=newVertexCount++;hashToNewVertexId[hash]=newVertexId;if(newVertexId!=i){posdata[newVertexId*3]=posdata[i*3];posdata[newVertexId*3+1]=posdata[i*3+1];posdata[newVertexId*
3+2]=posdata[i*3+2]}}else newVertexId=org.apache.flex.utils.Language.uint(index);oldVertexIdToNewVertexId[i]=newVertexId}posdata.length=newVertexCount*3;var idata=drawable.index.data;for(i=0;i<idata.length;i++)idata[i]=oldVertexIdToNewVertexId[idata[i]]};
gl3d.meshs.Meshs.computeUV=function(drawable){var normal=drawable.pos.data;var uv=new Array;for(;i<len;i++){var x=normal[3*i];var y=normal[3*i+1];var z=normal[3*i+2];var msg=Math.sqrt(x*x+y*y+z*z);if(msg!=0){x/=msg;y/=msg;z/=msg}var u=Math.atan2(z,x)/Math.PI/2+.5;var v=Math.asin(y)/Math.PI+.5;uv.push(u,v)}return new gl3d.core.VertexBufferSet(uv,2)};
gl3d.meshs.Meshs.computeNormal=function(drawable){if(drawable.source&&drawable.source.uvIndex&&drawable.smooting)return gl3d.meshs.Meshs.computeNormal2(drawable);var norm=new Array(drawable.pos.data.length);var vin=drawable.pos.data;var idata=drawable.index.data;for(var i=0;i<idata.length;i+=3){var i0=idata[i]*3;var i1=idata[i+1]*3;var i2=idata[i+2]*3;var x0=vin[i0];var y0=vin[i0+1];var z0=vin[i0+2];var x1=vin[i1];var y1=vin[i1+1];var z1=vin[i1+2];var x2=vin[i2];var y2=vin[i2+1];var z2=vin[i2+2];
var nx=(y0-y2)*(z0-z1)-(z0-z2)*(y0-y1);var ny=(z0-z2)*(x0-x1)-(x0-x2)*(z0-z1);var nz=(x0-x2)*(y0-y1)-(y0-y2)*(x0-x1);norm[i0]+=nx;norm[i1]+=nx;norm[i2]+=nx;norm[i0+1]+=ny;norm[i1+1]+=ny;norm[i2+1]+=ny;norm[i0+2]+=nz;norm[i1+2]+=nz;norm[i2+2]+=nz}for(i=0;i<norm.length;i+=3){nx=norm[i];ny=norm[i+1];nz=norm[i+2];var distance=Math.sqrt(nx*nx+ny*ny+nz*nz);norm[i]/=distance;norm[i+1]/=distance;norm[i+2]/=distance}return new gl3d.core.VertexBufferSet(norm,3)};
gl3d.meshs.Meshs.computeNormal2=function(drawable){var vin=drawable.source.pos;var norm=new Array(drawable.pos.data.length);var idata=drawable.source.index;var o2ns=drawable.oldi2newis;var foreachiter1_target=idata;for(var foreachiter1 in foreachiter1_target){var face=foreachiter1_target[foreachiter1];var i0=face[0]*3;var i1=face[1]*3;var i2=face[2]*3;var x0=vin[i0];var y0=vin[i0+1];var z0=vin[i0+2];var x1=vin[i1];var y1=vin[i1+1];var z1=vin[i1+2];var x2=vin[i2];var y2=vin[i2+1];var z2=vin[i2+2];
var nx=(y0-y2)*(z0-z1)-(z0-z2)*(y0-y1);var ny=(z0-z2)*(x0-x1)-(x0-x2)*(z0-z1);var nz=(x0-x2)*(y0-y1)-(y0-y2)*(x0-x1);for(;i<len;i++){var foreachiter2_target=o2ns[face[i]];for(var foreachiter2 in foreachiter2_target){var ni=foreachiter2_target[foreachiter2];norm[ni*3]+=nx;norm[ni*3+1]+=ny;norm[ni*3+2]+=nz}}}for(i=0;i<norm.length;i+=3){nx=norm[i];ny=norm[i+1];nz=norm[i+2];var distance=Math.sqrt(nx*nx+ny*ny+nz*nz);norm[i]/=distance;norm[i+1]/=distance;norm[i+2]/=distance}return new gl3d.core.VertexBufferSet(norm,
3)};
gl3d.meshs.Meshs.computeTangent=function(drawable){var tangent=new Array(drawable.pos.data.length);var vin=drawable.pos.data;var uv=drawable.uv.data;var idata=drawable.index.data;for(var i=0;i<idata.length;i+=3){var i0=idata[i]*3;var i1=idata[i+1]*3;var i2=idata[i+2]*3;var x0=vin[i0];var y0=vin[i0+1];var z0=vin[i0+2];var x1=vin[i1];var y1=vin[i1+1];var z1=vin[i1+2];var x2=vin[i2];var y2=vin[i2+1];var z2=vin[i2+2];var uvi0=idata[i]*2;var uvi1=idata[i+1]*2;var uvi2=idata[i+2]*2;var u0=uv[uvi0];var v0=
uv[uvi0+1];var u1=uv[uvi1];var v1=uv[uvi1+1];var u2=uv[uvi2];var v2=uv[uvi2+1];var v0v2=v0-v2;var v1v2=v1-v2;var coef=(u0-u2)*v1v2-(u1-u2)*v0v2;if(coef==0)coef=1;else coef=1/coef;var tx=coef*(v1v2*(x0-x2)-v0v2*(x1-x2));var ty=coef*(v1v2*(y0-y2)-v0v2*(y1-y2));var tz=coef*(v1v2*(z0-z2)-v0v2*(z1-z2));tangent[i0]+=tx;tangent[i1]+=tx;tangent[i2]+=tx;tangent[i0+1]+=ty;tangent[i1+1]+=ty;tangent[i2+1]+=ty;tangent[i0+2]+=tz;tangent[i1+2]+=tz;tangent[i2+2]+=tz}for(i=0;i<tangent.length;i+=3){tx=tangent[i];ty=
tangent[i+1];tz=tangent[i+2];var mag=Math.sqrt(tx*tx+ty*ty+tz*tz);if(mag!=0){tx/=mag;ty/=mag;tz/=mag}tangent[i]=tx;tangent[i+1]=ty;tangent[i+2]=tz}return new gl3d.core.VertexBufferSet(tangent,3)};
gl3d.meshs.Meshs.computeRandom=function(drawable,step){step=typeof step!=='undefined'?step:4;var random=new Array(drawable.pos.data.length/3*4);for(var i=0;i<random.length/4;){var r1=Math.random();var r2=Math.random();var r3=Math.random();var r4=Math.random();for(var j=0;j<step;j++,i++){random[i*4]=r1;random[i*4+1]=r2;random[i*4+2]=r3;random[i*4+3]=r4}}return new gl3d.core.VertexBufferSet(random,4)};
gl3d.meshs.Meshs.computeSphereRandom=function(drawable,step){step=typeof step!=='undefined'?step:4;var randomVec=new flash.geom.Vector3D;var random=new Array(drawable.pos.data.length/3*4);return new gl3d.core.VertexBufferSet(random,4)};
gl3d.meshs.Meshs.computeTargetPosition=function(drawable){var targetPosition=new Array(drawable.pos.data.length);var idata=drawable.index.data;for(var i=0;i<idata.length;i+=3){var j=idata[i]*3;targetPosition[j++]=0;targetPosition[j++]=0;targetPosition[j]=1;j=idata[i+1]*3;targetPosition[j++]=0;targetPosition[j++]=1;targetPosition[j]=0;j=idata[i+2]*3;targetPosition[j++]=1;targetPosition[j++]=0;targetPosition[j]=0}return new gl3d.core.VertexBufferSet(targetPosition,3)};
gl3d.meshs.Meshs.computeIndex=function(drawable){var index=new Array;var numt=drawable.pos.data.length/3/3;for(var i=0;i<numt;i++)index.push(i*3,i*3+1,i*3+2);return new gl3d.core.IndexBufferSet(index)};
gl3d.meshs.Meshs.mul=function(drawable,value){value=typeof value!=='undefined'?value:1;var indexSource=drawable.index.data;var posSource=drawable.pos.data;var uvSource=drawable.uv.data;var index=new Array;var pos=new Array;var uv=new Array;var ilen=indexSource.length;var plen=posSource.length/3;for(var i=0;i<value;i++){for(var j=0;j<ilen;j++)index.push(indexSource[j]+i*plen);var len;for(j=0,len=posSource.length;j<len;j++)pos.push(posSource[j]);for(j=0,len=uvSource.length;j<len;j++)uv.push(uvSource[j])}return gl3d.meshs.Meshs.createDrawable(index,
pos,uv,null)};gl3d.meshs.Meshs.prototype.FLEXJS_CLASS_INFO={names:[{name:'Meshs',qName:'gl3d.meshs.Meshs'}]};goog.exportSymbol('gl3d.meshs.Meshs',gl3d.meshs.Meshs);gl3d.meshs.Meshs.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Meshs':{type:'',declaredBy:'gl3d.meshs.Meshs'}}}}};goog.provide('goog.debug.Error');goog.debug.Error=function(opt_msg){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var stack=(new Error).stack;if(stack)this.stack=stack}if(opt_msg)this.message=String(opt_msg);this.reportErrorToServer=true};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name='CustomError';goog.provide('goog.disposable.IDisposable');goog.disposable.IDisposable=function(){};goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod;goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod;goog.provide('goog.Disposable');goog.provide('goog.dispose');goog.provide('goog.disposeAll');goog.require('goog.disposable.IDisposable');goog.Disposable=function(){if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF){if(goog.Disposable.INCLUDE_STACK_ON_CREATION)this.creationStack=(new Error).stack;goog.Disposable.instances_[goog.getUid(this)]=this}this.disposed_=this.disposed_;this.onDisposeCallbacks_=this.onDisposeCallbacks_};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};
goog.define('goog.Disposable.MONITORING_MODE',0);goog.define('goog.Disposable.INCLUDE_STACK_ON_CREATION',true);goog.Disposable.instances_={};goog.Disposable.getUndisposedObjects=function(){var ret=[];for(var id in goog.Disposable.instances_)if(goog.Disposable.instances_.hasOwnProperty(id))ret.push(goog.Disposable.instances_[Number(id)]);return ret};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=false;goog.Disposable.prototype.onDisposeCallbacks_;
goog.Disposable.prototype.creationStack;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;
goog.Disposable.prototype.dispose=function(){if(!this.disposed_){this.disposed_=true;this.disposeInternal();if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF){var uid=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(uid))throw Error(this+' did not call the goog.Disposable base '+'constructor or was disposed of after a clearUndisposedObjects '+'call');delete goog.Disposable.instances_[uid]}}};
goog.Disposable.prototype.registerDisposable=function(disposable){this.addOnDisposeCallback(goog.partial(goog.dispose,disposable))};goog.Disposable.prototype.addOnDisposeCallback=function(callback,opt_scope){if(this.disposed_){goog.isDef(opt_scope)?callback.call(opt_scope):callback();return}if(!this.onDisposeCallbacks_)this.onDisposeCallbacks_=[];this.onDisposeCallbacks_.push(goog.isDef(opt_scope)?goog.bind(callback,opt_scope):callback)};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)while(this.onDisposeCallbacks_.length)this.onDisposeCallbacks_.shift()()};
goog.Disposable.isDisposed=function(obj){if(obj&&typeof obj.isDisposed=='function')return obj.isDisposed();return false};goog.dispose=function(obj){if(obj&&typeof obj.dispose=='function')obj.dispose()};goog.disposeAll=function(var_args){for(var i=0,len=arguments.length;i<len;++i){var disposable=arguments[i];if(goog.isArrayLike(disposable))goog.disposeAll.apply(null,disposable);else goog.dispose(disposable)}};goog.provide('goog.dom.NodeType');goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.provide('goog.events.EventId');goog.events.EventId=function(eventId){this.id=eventId};goog.events.EventId.prototype.toString=function(){return this.id};goog.provide('goog.events.Event');goog.provide('goog.events.EventLike');goog.require('goog.Disposable');goog.require('goog.events.EventId');goog.events.EventLike;goog.events.Event=function(type,opt_target){this.type=type instanceof goog.events.EventId?String(type):type;this.target=opt_target;this.currentTarget=this.target;this.propagationStopped_=false;this.defaultPrevented=false;this.returnValue_=true};goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=true};
goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=true;this.returnValue_=false};goog.events.Event.stopPropagation=function(e){e.stopPropagation()};goog.events.Event.preventDefault=function(e){e.preventDefault()};goog.provide('goog.events.Listenable');goog.provide('goog.events.ListenableKey');goog.require('goog.events.EventId');goog.forwardDeclare('goog.events.EventLike');goog.forwardDeclare('goog.events.EventTarget');goog.events.Listenable=function(){};goog.events.Listenable.IMPLEMENTED_BY_PROP='closure_listenable_'+(Math.random()*1E6|0);goog.events.Listenable.addImplementation=function(cls){cls.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=true};
goog.events.Listenable.isImplementedBy=function(obj){return!!(obj&&obj[goog.events.Listenable.IMPLEMENTED_BY_PROP])};goog.events.Listenable.prototype.listen;goog.events.Listenable.prototype.listenOnce;goog.events.Listenable.prototype.unlisten;goog.events.Listenable.prototype.unlistenByKey;goog.events.Listenable.prototype.dispatchEvent;goog.events.Listenable.prototype.removeAllListeners;goog.events.Listenable.prototype.getParentEventTarget;goog.events.Listenable.prototype.fireListeners;goog.events.Listenable.prototype.getListeners;
goog.events.Listenable.prototype.getListener;goog.events.Listenable.prototype.hasListener;goog.events.ListenableKey=function(){};goog.events.ListenableKey.counter_=0;goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_};goog.events.ListenableKey.prototype.src;goog.events.ListenableKey.prototype.type;goog.events.ListenableKey.prototype.listener;goog.events.ListenableKey.prototype.capture;goog.events.ListenableKey.prototype.handler;goog.events.ListenableKey.prototype.key;goog.provide('goog.events.Listener');goog.require('goog.events.ListenableKey');goog.events.Listener=function(listener,proxy,src,type,capture,opt_handler){if(goog.events.Listener.ENABLE_MONITORING)this.creationStack=(new Error).stack;this.listener=listener;this.proxy=proxy;this.src=src;this.type=type;this.capture=!!capture;this.handler=opt_handler;this.key=goog.events.ListenableKey.reserveKey();this.callOnce=false;this.removed=false};goog.define('goog.events.Listener.ENABLE_MONITORING',false);goog.events.Listener.prototype.creationStack;
goog.events.Listener.prototype.markAsRemoved=function(){this.removed=true;this.listener=null;this.proxy=null;this.src=null;this.handler=null};goog.provide('goog.object');goog.object.is=function(v,v2){if(v===v2)return v!==0||1/v===1/(v2);return v!==v&&v2!==v2};goog.object.forEach=function(obj,f,opt_obj){for(var key in obj)f.call((opt_obj),obj[key],key,obj)};goog.object.filter=function(obj,f,opt_obj){var res={};for(var key in obj)if(f.call((opt_obj),obj[key],key,obj))res[key]=obj[key];return res};goog.object.map=function(obj,f,opt_obj){var res={};for(var key in obj)res[key]=f.call((opt_obj),obj[key],key,obj);return res};
goog.object.some=function(obj,f,opt_obj){for(var key in obj)if(f.call((opt_obj),obj[key],key,obj))return true;return false};goog.object.every=function(obj,f,opt_obj){for(var key in obj)if(!f.call((opt_obj),obj[key],key,obj))return false;return true};goog.object.getCount=function(obj){var rv=0;for(var key in obj)rv++;return rv};goog.object.getAnyKey=function(obj){for(var key in obj)return key};goog.object.getAnyValue=function(obj){for(var key in obj)return obj[key]};
goog.object.contains=function(obj,val){return goog.object.containsValue(obj,val)};goog.object.getValues=function(obj){var res=[];var i=0;for(var key in obj)res[i++]=obj[key];return res};goog.object.getKeys=function(obj){var res=[];var i=0;for(var key in obj)res[i++]=key;return res};goog.object.getValueByKeys=function(obj,var_args){var isArrayLike=goog.isArrayLike(var_args);var keys=isArrayLike?var_args:arguments;for(var i=isArrayLike?0:1;i<keys.length;i++){obj=obj[keys[i]];if(!goog.isDef(obj))break}return obj};
goog.object.containsKey=function(obj,key){return obj!==null&&key in obj};goog.object.containsValue=function(obj,val){for(var key in obj)if(obj[key]==val)return true;return false};goog.object.findKey=function(obj,f,opt_this){for(var key in obj)if(f.call((opt_this),obj[key],key,obj))return key;return undefined};goog.object.findValue=function(obj,f,opt_this){var key=goog.object.findKey(obj,f,opt_this);return key&&obj[key]};goog.object.isEmpty=function(obj){for(var key in obj)return false;return true};
goog.object.clear=function(obj){for(var i in obj)delete obj[i]};goog.object.remove=function(obj,key){var rv;if(rv=key in(obj))delete obj[key];return rv};goog.object.add=function(obj,key,val){if(obj!==null&&key in obj)throw Error('The object already contains the key "'+key+'"');goog.object.set(obj,key,val)};goog.object.get=function(obj,key,opt_val){if(obj!==null&&key in obj)return obj[key];return opt_val};goog.object.set=function(obj,key,value){obj[key]=value};
goog.object.setIfUndefined=function(obj,key,value){return key in(obj)?obj[key]:obj[key]=value};goog.object.setWithReturnValueIfNotSet=function(obj,key,f){if(key in obj)return obj[key];var val=f();obj[key]=val;return val};goog.object.equals=function(a,b){for(var k in a)if(!(k in b)||a[k]!==b[k])return false;for(var k in b)if(!(k in a))return false;return true};goog.object.clone=function(obj){var res={};for(var key in obj)res[key]=obj[key];return res};
goog.object.unsafeClone=function(obj){var type=goog.typeOf(obj);if(type=='object'||type=='array'){if(goog.isFunction(obj.clone))return obj.clone();var clone=type=='array'?[]:{};for(var key in obj)clone[key]=goog.object.unsafeClone(obj[key]);return clone}return obj};goog.object.transpose=function(obj){var transposed={};for(var key in obj)transposed[obj[key]]=key;return transposed};
goog.object.PROTOTYPE_FIELDS_=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'];goog.object.extend=function(target,var_args){var key,source;for(var i=1;i<arguments.length;i++){source=arguments[i];for(key in source)target[key]=source[key];for(var j=0;j<goog.object.PROTOTYPE_FIELDS_.length;j++){key=goog.object.PROTOTYPE_FIELDS_[j];if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key]}}};
goog.object.create=function(var_args){var argLength=arguments.length;if(argLength==1&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(argLength%2)throw Error('Uneven number of arguments');var rv={};for(var i=0;i<argLength;i+=2)rv[arguments[i]]=arguments[i+1];return rv};
goog.object.createSet=function(var_args){var argLength=arguments.length;if(argLength==1&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);var rv={};for(var i=0;i<argLength;i++)rv[arguments[i]]=true;return rv};goog.object.createImmutableView=function(obj){var result=obj;if(Object.isFrozen&&!Object.isFrozen(obj)){result=Object.create(obj);Object.freeze(result)}return result};goog.object.isImmutableView=function(obj){return!!Object.isFrozen&&Object.isFrozen(obj)};goog.provide('goog.reflect');goog.reflect.object=function(type,object){return object};goog.reflect.objectProperty=function(prop,object){return prop};goog.reflect.sinkValue=function(x){goog.reflect.sinkValue[' '](x);return x};goog.reflect.sinkValue[' ']=goog.nullFunction;goog.reflect.canAccessProperty=function(obj,prop){try{goog.reflect.sinkValue(obj[prop]);return true}catch(e){}return false};
goog.reflect.cache=function(cacheObj,key,valueFn,opt_keyFn){var storedKey=opt_keyFn?opt_keyFn(key):key;if(Object.prototype.hasOwnProperty.call(cacheObj,storedKey))return cacheObj[storedKey];return cacheObj[storedKey]=valueFn(key)};goog.provide('goog.string');goog.provide('goog.string.Unicode');goog.define('goog.string.DETECT_DOUBLE_ESCAPING',false);goog.define('goog.string.FORCE_NON_DOM_HTML_UNESCAPING',false);goog.string.Unicode={NBSP:'\u00a0'};goog.string.startsWith=function(str,prefix){return str.lastIndexOf(prefix,0)==0};goog.string.endsWith=function(str,suffix){var l=str.length-suffix.length;return l>=0&&str.indexOf(suffix,l)==l};
goog.string.caseInsensitiveStartsWith=function(str,prefix){return goog.string.caseInsensitiveCompare(prefix,str.substr(0,prefix.length))==0};goog.string.caseInsensitiveEndsWith=function(str,suffix){return goog.string.caseInsensitiveCompare(suffix,str.substr(str.length-suffix.length,suffix.length))==0};goog.string.caseInsensitiveEquals=function(str1,str2){return str1.toLowerCase()==str2.toLowerCase()};
goog.string.subs=function(str,var_args){var splitParts=str.split('%s');var returnString='';var subsArguments=Array.prototype.slice.call(arguments,1);while(subsArguments.length&&splitParts.length>1)returnString+=splitParts.shift()+subsArguments.shift();return returnString+splitParts.join('%s')};goog.string.collapseWhitespace=function(str){return str.replace(/[\s\xa0]+/g,' ').replace(/^\s+|\s+$/g,'')};goog.string.isEmptyOrWhitespace=function(str){return/^[\s\xa0]*$/.test(str)};
goog.string.isEmptyString=function(str){return str.length==0};goog.string.isEmpty=goog.string.isEmptyOrWhitespace;goog.string.isEmptyOrWhitespaceSafe=function(str){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(str))};goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe;goog.string.isBreakingWhitespace=function(str){return!/[^\t\n\r ]/.test(str)};goog.string.isAlpha=function(str){return!/[^a-zA-Z]/.test(str)};goog.string.isNumeric=function(str){return!/[^0-9]/.test(str)};
goog.string.isAlphaNumeric=function(str){return!/[^a-zA-Z0-9]/.test(str)};goog.string.isSpace=function(ch){return ch==' '};goog.string.isUnicodeChar=function(ch){return ch.length==1&&ch>=' '&&ch<='~'||ch>='\u0080'&&ch<='\ufffd'};goog.string.stripNewlines=function(str){return str.replace(/(\r\n|\r|\n)+/g,' ')};goog.string.canonicalizeNewlines=function(str){return str.replace(/(\r\n|\r|\n)/g,'\n')};goog.string.normalizeWhitespace=function(str){return str.replace(/\xa0|\s/g,' ')};
goog.string.normalizeSpaces=function(str){return str.replace(/\xa0|[ \t]+/g,' ')};goog.string.collapseBreakingSpaces=function(str){return str.replace(/[\t\r\n ]+/g,' ').replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,'')};goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(str){return str.trim()}:function(str){return str.replace(/^[\s\xa0]+|[\s\xa0]+$/g,'')};goog.string.trimLeft=function(str){return str.replace(/^[\s\xa0]+/,'')};
goog.string.trimRight=function(str){return str.replace(/[\s\xa0]+$/,'')};goog.string.caseInsensitiveCompare=function(str1,str2){var test1=String(str1).toLowerCase();var test2=String(str2).toLowerCase();if(test1<test2)return-1;else if(test1==test2)return 0;else return 1};
goog.string.numberAwareCompare_=function(str1,str2,tokenizerRegExp){if(str1==str2)return 0;if(!str1)return-1;if(!str2)return 1;var tokens1=str1.toLowerCase().match(tokenizerRegExp);var tokens2=str2.toLowerCase().match(tokenizerRegExp);var count=Math.min(tokens1.length,tokens2.length);for(var i=0;i<count;i++){var a=tokens1[i];var b=tokens2[i];if(a!=b){var num1=parseInt(a,10);if(!isNaN(num1)){var num2=parseInt(b,10);if(!isNaN(num2)&&num1-num2)return num1-num2}return a<b?-1:1}}if(tokens1.length!=tokens2.length)return tokens1.length-
tokens2.length;return str1<str2?-1:1};goog.string.intAwareCompare=function(str1,str2){return goog.string.numberAwareCompare_(str1,str2,/\d+|\D+/g)};goog.string.floatAwareCompare=function(str1,str2){return goog.string.numberAwareCompare_(str1,str2,/\d+|\.\d+|\D+/g)};goog.string.numerateCompare=goog.string.floatAwareCompare;goog.string.urlEncode=function(str){return encodeURIComponent(String(str))};goog.string.urlDecode=function(str){return decodeURIComponent(str.replace(/\+/g,' '))};
goog.string.newLineToBr=function(str,opt_xml){return str.replace(/(\r\n|\r|\n)/g,opt_xml?'\x3cbr /\x3e':'\x3cbr\x3e')};
goog.string.htmlEscape=function(str,opt_isLikelyToContainHtmlChars){if(opt_isLikelyToContainHtmlChars){str=str.replace(goog.string.AMP_RE_,'\x26amp;').replace(goog.string.LT_RE_,'\x26lt;').replace(goog.string.GT_RE_,'\x26gt;').replace(goog.string.QUOT_RE_,'\x26quot;').replace(goog.string.SINGLE_QUOTE_RE_,'\x26#39;').replace(goog.string.NULL_RE_,'\x26#0;');if(goog.string.DETECT_DOUBLE_ESCAPING)str=str.replace(goog.string.E_RE_,'\x26#101;');return str}else{if(!goog.string.ALL_RE_.test(str))return str;
if(str.indexOf('\x26')!=-1)str=str.replace(goog.string.AMP_RE_,'\x26amp;');if(str.indexOf('\x3c')!=-1)str=str.replace(goog.string.LT_RE_,'\x26lt;');if(str.indexOf('\x3e')!=-1)str=str.replace(goog.string.GT_RE_,'\x26gt;');if(str.indexOf('"')!=-1)str=str.replace(goog.string.QUOT_RE_,'\x26quot;');if(str.indexOf("'")!=-1)str=str.replace(goog.string.SINGLE_QUOTE_RE_,'\x26#39;');if(str.indexOf('\x00')!=-1)str=str.replace(goog.string.NULL_RE_,'\x26#0;');if(goog.string.DETECT_DOUBLE_ESCAPING&&str.indexOf('e')!=
-1)str=str.replace(goog.string.E_RE_,'\x26#101;');return str}};goog.string.AMP_RE_=/&/g;goog.string.LT_RE_=/</g;goog.string.GT_RE_=/>/g;goog.string.QUOT_RE_=/"/g;goog.string.SINGLE_QUOTE_RE_=/'/g;goog.string.NULL_RE_=/\x00/g;goog.string.E_RE_=/e/g;goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/;
goog.string.unescapeEntities=function(str){if(goog.string.contains(str,'\x26'))if(!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&'document'in goog.global)return goog.string.unescapeEntitiesUsingDom_(str);else return goog.string.unescapePureXmlEntities_(str);return str};goog.string.unescapeEntitiesWithDocument=function(str,document){if(goog.string.contains(str,'\x26'))return goog.string.unescapeEntitiesUsingDom_(str,document);return str};
goog.string.unescapeEntitiesUsingDom_=function(str,opt_document){var seen={'\x26amp;':'\x26','\x26lt;':'\x3c','\x26gt;':'\x3e','\x26quot;':'"'};var div;if(opt_document)div=opt_document.createElement('div');else div=goog.global.document.createElement('div');return str.replace(goog.string.HTML_ENTITY_PATTERN_,function(s,entity){var value=seen[s];if(value)return value;if(entity.charAt(0)=='#'){var n=Number('0'+entity.substr(1));if(!isNaN(n))value=String.fromCharCode(n)}if(!value){div.innerHTML=s+' ';
value=div.firstChild.nodeValue.slice(0,-1)}return seen[s]=value})};goog.string.unescapePureXmlEntities_=function(str){return str.replace(/&([^;]+);/g,function(s,entity){switch(entity){case 'amp':return'\x26';case 'lt':return'\x3c';case 'gt':return'\x3e';case 'quot':return'"';default:if(entity.charAt(0)=='#'){var n=Number('0'+entity.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return s}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;
goog.string.whitespaceEscape=function(str,opt_xml){return goog.string.newLineToBr(str.replace(/  /g,' \x26#160;'),opt_xml)};goog.string.preserveSpaces=function(str){return str.replace(/(^|[\n ]) /g,'$1'+goog.string.Unicode.NBSP)};goog.string.stripQuotes=function(str,quoteChars){var length=quoteChars.length;for(var i=0;i<length;i++){var quoteChar=length==1?quoteChars:quoteChars.charAt(i);if(str.charAt(0)==quoteChar&&str.charAt(str.length-1)==quoteChar)return str.substring(1,str.length-1)}return str};
goog.string.truncate=function(str,chars,opt_protectEscapedCharacters){if(opt_protectEscapedCharacters)str=goog.string.unescapeEntities(str);if(str.length>chars)str=str.substring(0,chars-3)+'...';if(opt_protectEscapedCharacters)str=goog.string.htmlEscape(str);return str};
goog.string.truncateMiddle=function(str,chars,opt_protectEscapedCharacters,opt_trailingChars){if(opt_protectEscapedCharacters)str=goog.string.unescapeEntities(str);if(opt_trailingChars&&str.length>chars){if(opt_trailingChars>chars)opt_trailingChars=chars;var endPoint=str.length-opt_trailingChars;var startPoint=chars-opt_trailingChars;str=str.substring(0,startPoint)+'...'+str.substring(endPoint)}else if(str.length>chars){var half=Math.floor(chars/2);var endPos=str.length-half;half+=chars%2;str=str.substring(0,
half)+'...'+str.substring(endPos)}if(opt_protectEscapedCharacters)str=goog.string.htmlEscape(str);return str};goog.string.specialEscapeChars_={'\x00':'\\0','\b':'\\b','\f':'\\f','\n':'\\n','\r':'\\r','\t':'\\t','\x0B':'\\x0B','"':'\\"','\\':'\\\\','\x3c':'\x3c'};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(s){s=String(s);var sb=['"'];for(var i=0;i<s.length;i++){var ch=s.charAt(i);var cc=ch.charCodeAt(0);sb[i+1]=goog.string.specialEscapeChars_[ch]||(cc>31&&cc<127?ch:goog.string.escapeChar(ch))}sb.push('"');return sb.join('')};goog.string.escapeString=function(str){var sb=[];for(var i=0;i<str.length;i++)sb[i]=goog.string.escapeChar(str.charAt(i));return sb.join('')};
goog.string.escapeChar=function(c){if(c in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[c];if(c in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[c]=goog.string.specialEscapeChars_[c];var rv=c;var cc=c.charCodeAt(0);if(cc>31&&cc<127)rv=c;else{if(cc<256){rv='\\x';if(cc<16||cc>256)rv+='0'}else{rv='\\u';if(cc<4096)rv+='0'}rv+=cc.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[c]=rv};
goog.string.contains=function(str,subString){return str.indexOf(subString)!=-1};goog.string.caseInsensitiveContains=function(str,subString){return goog.string.contains(str.toLowerCase(),subString.toLowerCase())};goog.string.countOf=function(s,ss){return s&&ss?s.split(ss).length-1:0};goog.string.removeAt=function(s,index,stringLength){var resultStr=s;if(index>=0&&index<s.length&&stringLength>0)resultStr=s.substr(0,index)+s.substr(index+stringLength,s.length-index-stringLength);return resultStr};
goog.string.remove=function(s,ss){var re=new RegExp(goog.string.regExpEscape(ss),'');return s.replace(re,'')};goog.string.removeAll=function(s,ss){var re=new RegExp(goog.string.regExpEscape(ss),'g');return s.replace(re,'')};goog.string.regExpEscape=function(s){return String(s).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,'\\$1').replace(/\x08/g,'\\x08')};goog.string.repeat=String.prototype.repeat?function(string,length){return string.repeat(length)}:function(string,length){return(new Array(length+1)).join(string)};
goog.string.padNumber=function(num,length,opt_precision){var s=goog.isDef(opt_precision)?num.toFixed(opt_precision):String(num);var index=s.indexOf('.');if(index==-1)index=s.length;return goog.string.repeat('0',Math.max(0,length-index))+s};goog.string.makeSafe=function(obj){return obj==null?'':String(obj)};goog.string.buildString=function(var_args){return Array.prototype.join.call(arguments,'')};
goog.string.getRandomString=function(){var x=2147483648;return Math.floor(Math.random()*x).toString(36)+Math.abs(Math.floor(Math.random()*x)^goog.now()).toString(36)};
goog.string.compareVersions=function(version1,version2){var order=0;var v1Subs=goog.string.trim(String(version1)).split('.');var v2Subs=goog.string.trim(String(version2)).split('.');var subCount=Math.max(v1Subs.length,v2Subs.length);for(var subIdx=0;order==0&&subIdx<subCount;subIdx++){var v1Sub=v1Subs[subIdx]||'';var v2Sub=v2Subs[subIdx]||'';var v1CompParser=new RegExp('(\\d*)(\\D*)','g');var v2CompParser=new RegExp('(\\d*)(\\D*)','g');do{var v1Comp=v1CompParser.exec(v1Sub)||['','',''];var v2Comp=
v2CompParser.exec(v2Sub)||['','',''];if(v1Comp[0].length==0&&v2Comp[0].length==0)break;var v1CompNum=v1Comp[1].length==0?0:parseInt(v1Comp[1],10);var v2CompNum=v2Comp[1].length==0?0:parseInt(v2Comp[1],10);order=goog.string.compareElements_(v1CompNum,v2CompNum)||goog.string.compareElements_(v1Comp[2].length==0,v2Comp[2].length==0)||goog.string.compareElements_(v1Comp[2],v2Comp[2])}while(order==0)}return order};
goog.string.compareElements_=function(left,right){if(left<right)return-1;else if(left>right)return 1;return 0};goog.string.hashCode=function(str){var result=0;for(var i=0;i<str.length;++i)result=31*result+str.charCodeAt(i)>>>0;return result};goog.string.uniqueStringCounter_=Math.random()*2147483648|0;goog.string.createUniqueString=function(){return'goog_'+goog.string.uniqueStringCounter_++};
goog.string.toNumber=function(str){var num=Number(str);if(num==0&&goog.string.isEmptyOrWhitespace(str))return NaN;return num};goog.string.isLowerCamelCase=function(str){return/^[a-z]+([A-Z][a-z]*)*$/.test(str)};goog.string.isUpperCamelCase=function(str){return/^([A-Z][a-z]*)+$/.test(str)};goog.string.toCamelCase=function(str){return String(str).replace(/\-([a-z])/g,function(all,match){return match.toUpperCase()})};goog.string.toSelectorCase=function(str){return String(str).replace(/([A-Z])/g,'-$1').toLowerCase()};
goog.string.toTitleCase=function(str,opt_delimiters){var delimiters=goog.isString(opt_delimiters)?goog.string.regExpEscape(opt_delimiters):'\\s';delimiters=delimiters?'|['+delimiters+']+':'';var regexp=new RegExp('(^'+delimiters+')([a-z])','g');return str.replace(regexp,function(all,p1,p2){return p1+p2.toUpperCase()})};goog.string.capitalize=function(str){return String(str.charAt(0)).toUpperCase()+String(str.substr(1)).toLowerCase()};
goog.string.parseInt=function(value){if(isFinite(value))value=String(value);if(goog.isString(value))return/^\s*-?0x/i.test(value)?parseInt(value,16):parseInt(value,10);return NaN};goog.string.splitLimit=function(str,separator,limit){var parts=str.split(separator);var returnVal=[];while(limit>0&&parts.length){returnVal.push(parts.shift());limit--}if(parts.length)returnVal.push(parts.join(separator));return returnVal};
goog.string.lastComponent=function(str,separators){if(!separators)return str;else if(typeof separators=='string')separators=[separators];var lastSeparatorIndex=-1;for(var i=0;i<separators.length;i++){if(separators[i]=='')continue;var currentSeparatorIndex=str.lastIndexOf(separators[i]);if(currentSeparatorIndex>lastSeparatorIndex)lastSeparatorIndex=currentSeparatorIndex}if(lastSeparatorIndex==-1)return str;return str.slice(lastSeparatorIndex+1)};
goog.string.editDistance=function(a,b){var v0=[];var v1=[];if(a==b)return 0;if(!a.length||!b.length)return Math.max(a.length,b.length);for(var i=0;i<b.length+1;i++)v0[i]=i;for(var i=0;i<a.length;i++){v1[0]=i+1;for(var j=0;j<b.length;j++){var cost=Number(a[i]!=b[j]);v1[j+1]=Math.min(v1[j]+1,v0[j+1]+1,v0[j]+cost)}for(var j=0;j<v0.length;j++)v0[j]=v1[j]}return v1[b.length]};goog.provide('goog.asserts');goog.provide('goog.asserts.AssertionError');goog.require('goog.debug.Error');goog.require('goog.dom.NodeType');goog.require('goog.string');goog.define('goog.asserts.ENABLE_ASSERTS',goog.DEBUG);goog.asserts.AssertionError=function(messagePattern,messageArgs){messageArgs.unshift(messagePattern);goog.debug.Error.call(this,goog.string.subs.apply(null,messageArgs));messageArgs.shift();this.messagePattern=messagePattern};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);
goog.asserts.AssertionError.prototype.name='AssertionError';goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e;};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;goog.asserts.doAssertFailure_=function(defaultMessage,defaultArgs,givenMessage,givenArgs){var message='Assertion failed';if(givenMessage){message+=': '+givenMessage;var args=givenArgs}else if(defaultMessage){message+=': '+defaultMessage;args=defaultArgs}var e=new goog.asserts.AssertionError(''+message,args||[]);goog.asserts.errorHandler_(e)};
goog.asserts.setErrorHandler=function(errorHandler){if(goog.asserts.ENABLE_ASSERTS)goog.asserts.errorHandler_=errorHandler};goog.asserts.assert=function(condition,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!condition)goog.asserts.doAssertFailure_('',null,opt_message,Array.prototype.slice.call(arguments,2));return condition};
goog.asserts.fail=function(opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS)goog.asserts.errorHandler_(new goog.asserts.AssertionError('Failure'+(opt_message?': '+opt_message:''),Array.prototype.slice.call(arguments,1)))};goog.asserts.assertNumber=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(value))goog.asserts.doAssertFailure_('Expected number but got %s: %s.',[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return(value)};
goog.asserts.assertString=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isString(value))goog.asserts.doAssertFailure_('Expected string but got %s: %s.',[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return(value)};
goog.asserts.assertFunction=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(value))goog.asserts.doAssertFailure_('Expected function but got %s: %s.',[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return(value)};
goog.asserts.assertObject=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isObject(value))goog.asserts.doAssertFailure_('Expected object but got %s: %s.',[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return(value)};
goog.asserts.assertArray=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isArray(value))goog.asserts.doAssertFailure_('Expected array but got %s: %s.',[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return(value)};
goog.asserts.assertBoolean=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(value))goog.asserts.doAssertFailure_('Expected boolean but got %s: %s.',[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return(value)};
goog.asserts.assertElement=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&(!goog.isObject(value)||value.nodeType!=goog.dom.NodeType.ELEMENT))goog.asserts.doAssertFailure_('Expected Element but got %s: %s.',[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return(value)};
goog.asserts.assertInstanceof=function(value,type,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!(value instanceof type))goog.asserts.doAssertFailure_('Expected instanceof %s but got %s.',[goog.asserts.getType_(type),goog.asserts.getType_(value)],opt_message,Array.prototype.slice.call(arguments,3));return value};goog.asserts.assertObjectPrototypeIsIntact=function(){for(var key in Object.prototype)goog.asserts.fail(key+' should not be enumerable in Object.prototype.')};
goog.asserts.getType_=function(value){if(value instanceof Function)return value.displayName||value.name||'unknown type name';else if(value instanceof Object)return value.constructor.displayName||value.constructor.name||Object.prototype.toString.call(value);else return value===null?'null':typeof value};goog.provide('goog.array');goog.require('goog.asserts');goog.define('goog.NATIVE_ARRAY_PROTOTYPES',goog.TRUSTED_SITE);goog.define('goog.array.ASSUME_NATIVE_FUNCTIONS',false);goog.array.peek=function(array){return array[array.length-1]};goog.array.last=goog.array.peek;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(arr,obj,opt_fromIndex){goog.asserts.assert(arr.length!=null);return Array.prototype.indexOf.call(arr,obj,opt_fromIndex)}:function(arr,obj,opt_fromIndex){var fromIndex=opt_fromIndex==null?0:opt_fromIndex<0?Math.max(0,arr.length+opt_fromIndex):opt_fromIndex;if(goog.isString(arr)){if(!goog.isString(obj)||obj.length!=1)return-1;return arr.indexOf(obj,fromIndex)}for(var i=fromIndex;i<
arr.length;i++)if(i in arr&&arr[i]===obj)return i;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(arr,obj,opt_fromIndex){goog.asserts.assert(arr.length!=null);var fromIndex=opt_fromIndex==null?arr.length-1:opt_fromIndex;return Array.prototype.lastIndexOf.call(arr,obj,fromIndex)}:function(arr,obj,opt_fromIndex){var fromIndex=opt_fromIndex==null?arr.length-1:opt_fromIndex;if(fromIndex<0)fromIndex=Math.max(0,arr.length+fromIndex);if(goog.isString(arr)){if(!goog.isString(obj)||
obj.length!=1)return-1;return arr.lastIndexOf(obj,fromIndex)}for(var i=fromIndex;i>=0;i--)if(i in arr&&arr[i]===obj)return i;return-1};goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);Array.prototype.forEach.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(''):arr;for(var i=0;i<l;i++)if(i in arr2)f.call((opt_obj),arr2[i],i,arr)};
goog.array.forEachRight=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(''):arr;for(var i=l-1;i>=0;--i)if(i in arr2)f.call((opt_obj),arr2[i],i,arr)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return Array.prototype.filter.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var res=[];var resLength=0;var arr2=goog.isString(arr)?arr.split(''):arr;for(var i=0;i<l;i++)if(i in arr2){var val=arr2[i];if(f.call((opt_obj),val,i,arr))res[resLength++]=val}return res};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return Array.prototype.map.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var res=new Array(l);var arr2=goog.isString(arr)?arr.split(''):arr;for(var i=0;i<l;i++)if(i in arr2)res[i]=f.call((opt_obj),arr2[i],i,arr);return res};
goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(arr,f,val,opt_obj){goog.asserts.assert(arr.length!=null);if(opt_obj)f=goog.bind(f,opt_obj);return Array.prototype.reduce.call(arr,f,val)}:function(arr,f,val,opt_obj){var rval=val;goog.array.forEach(arr,function(val,index){rval=f.call((opt_obj),rval,val,index,arr)});return rval};
goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(arr,f,val,opt_obj){goog.asserts.assert(arr.length!=null);goog.asserts.assert(f!=null);if(opt_obj)f=goog.bind(f,opt_obj);return Array.prototype.reduceRight.call(arr,f,val)}:function(arr,f,val,opt_obj){var rval=val;goog.array.forEachRight(arr,function(val,index){rval=f.call((opt_obj),rval,val,index,arr)});return rval};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return Array.prototype.some.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(''):arr;for(var i=0;i<l;i++)if(i in arr2&&f.call((opt_obj),arr2[i],i,arr))return true;return false};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return Array.prototype.every.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(''):arr;for(var i=0;i<l;i++)if(i in arr2&&!f.call((opt_obj),arr2[i],i,arr))return false;return true};
goog.array.count=function(arr,f,opt_obj){var count=0;goog.array.forEach(arr,function(element,index,arr){if(f.call((opt_obj),element,index,arr))++count},opt_obj);return count};goog.array.find=function(arr,f,opt_obj){var i=goog.array.findIndex(arr,f,opt_obj);return i<0?null:goog.isString(arr)?arr.charAt(i):arr[i]};goog.array.findIndex=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(''):arr;for(var i=0;i<l;i++)if(i in arr2&&f.call((opt_obj),arr2[i],i,arr))return i;return-1};
goog.array.findRight=function(arr,f,opt_obj){var i=goog.array.findIndexRight(arr,f,opt_obj);return i<0?null:goog.isString(arr)?arr.charAt(i):arr[i]};goog.array.findIndexRight=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(''):arr;for(var i=l-1;i>=0;i--)if(i in arr2&&f.call((opt_obj),arr2[i],i,arr))return i;return-1};goog.array.contains=function(arr,obj){return goog.array.indexOf(arr,obj)>=0};goog.array.isEmpty=function(arr){return arr.length==0};
goog.array.clear=function(arr){if(!goog.isArray(arr))for(var i=arr.length-1;i>=0;i--)delete arr[i];arr.length=0};goog.array.insert=function(arr,obj){if(!goog.array.contains(arr,obj))arr.push(obj)};goog.array.insertAt=function(arr,obj,opt_i){goog.array.splice(arr,opt_i,0,obj)};goog.array.insertArrayAt=function(arr,elementsToAdd,opt_i){goog.partial(goog.array.splice,arr,opt_i,0).apply(null,elementsToAdd)};
goog.array.insertBefore=function(arr,obj,opt_obj2){var i;if(arguments.length==2||(i=goog.array.indexOf(arr,opt_obj2))<0)arr.push(obj);else goog.array.insertAt(arr,obj,i)};goog.array.remove=function(arr,obj){var i=goog.array.indexOf(arr,obj);var rv;if(rv=i>=0)goog.array.removeAt(arr,i);return rv};goog.array.removeLast=function(arr,obj){var i=goog.array.lastIndexOf(arr,obj);if(i>=0){goog.array.removeAt(arr,i);return true}return false};
goog.array.removeAt=function(arr,i){goog.asserts.assert(arr.length!=null);return Array.prototype.splice.call(arr,i,1).length==1};goog.array.removeIf=function(arr,f,opt_obj){var i=goog.array.findIndex(arr,f,opt_obj);if(i>=0){goog.array.removeAt(arr,i);return true}return false};goog.array.removeAllIf=function(arr,f,opt_obj){var removedCount=0;goog.array.forEachRight(arr,function(val,index){if(f.call((opt_obj),val,index,arr))if(goog.array.removeAt(arr,index))removedCount++});return removedCount};
goog.array.concat=function(var_args){return Array.prototype.concat.apply(Array.prototype,arguments)};goog.array.join=function(var_args){return Array.prototype.concat.apply(Array.prototype,arguments)};goog.array.toArray=function(object){var length=object.length;if(length>0){var rv=new Array(length);for(var i=0;i<length;i++)rv[i]=object[i];return rv}return[]};goog.array.clone=goog.array.toArray;
goog.array.extend=function(arr1,var_args){for(var i=1;i<arguments.length;i++){var arr2=arguments[i];if(goog.isArrayLike(arr2)){var len1=arr1.length||0;var len2=arr2.length||0;arr1.length=len1+len2;for(var j=0;j<len2;j++)arr1[len1+j]=arr2[j]}else arr1.push(arr2)}};goog.array.splice=function(arr,index,howMany,var_args){goog.asserts.assert(arr.length!=null);return Array.prototype.splice.apply(arr,goog.array.slice(arguments,1))};
goog.array.slice=function(arr,start,opt_end){goog.asserts.assert(arr.length!=null);if(arguments.length<=2)return Array.prototype.slice.call(arr,start);else return Array.prototype.slice.call(arr,start,opt_end)};
goog.array.removeDuplicates=function(arr,opt_rv,opt_hashFn){var returnArray=opt_rv||arr;var defaultHashFn=function(item){return goog.isObject(item)?'o'+goog.getUid(item):(typeof item).charAt(0)+item};var hashFn=opt_hashFn||defaultHashFn;var seen={},cursorInsert=0,cursorRead=0;while(cursorRead<arr.length){var current=arr[cursorRead++];var key=hashFn(current);if(!Object.prototype.hasOwnProperty.call(seen,key)){seen[key]=true;returnArray[cursorInsert++]=current}}returnArray.length=cursorInsert};
goog.array.binarySearch=function(arr,target,opt_compareFn){return goog.array.binarySearch_(arr,opt_compareFn||goog.array.defaultCompare,false,target)};goog.array.binarySelect=function(arr,evaluator,opt_obj){return goog.array.binarySearch_(arr,evaluator,true,undefined,opt_obj)};
goog.array.binarySearch_=function(arr,compareFn,isEvaluator,opt_target,opt_selfObj){var left=0;var right=arr.length;var found;while(left<right){var middle=left+right>>1;var compareResult;if(isEvaluator)compareResult=compareFn.call(opt_selfObj,arr[middle],middle,arr);else compareResult=(compareFn)(opt_target,arr[middle]);if(compareResult>0)left=middle+1;else{right=middle;found=!compareResult}}return found?left:~left};goog.array.sort=function(arr,opt_compareFn){arr.sort(opt_compareFn||goog.array.defaultCompare)};
goog.array.stableSort=function(arr,opt_compareFn){var compArr=new Array(arr.length);for(var i=0;i<arr.length;i++)compArr[i]={index:i,value:arr[i]};var valueCompareFn=opt_compareFn||goog.array.defaultCompare;function stableCompareFn(obj1,obj2){return valueCompareFn(obj1.value,obj2.value)||obj1.index-obj2.index}goog.array.sort(compArr,stableCompareFn);for(var i=0;i<arr.length;i++)arr[i]=compArr[i].value};
goog.array.sortByKey=function(arr,keyFn,opt_compareFn){var keyCompareFn=opt_compareFn||goog.array.defaultCompare;goog.array.sort(arr,function(a,b){return keyCompareFn(keyFn(a),keyFn(b))})};goog.array.sortObjectsByKey=function(arr,key,opt_compareFn){goog.array.sortByKey(arr,function(obj){return obj[key]},opt_compareFn)};
goog.array.isSorted=function(arr,opt_compareFn,opt_strict){var compare=opt_compareFn||goog.array.defaultCompare;for(var i=1;i<arr.length;i++){var compareResult=compare(arr[i-1],arr[i]);if(compareResult>0||compareResult==0&&opt_strict)return false}return true};
goog.array.equals=function(arr1,arr2,opt_equalsFn){if(!goog.isArrayLike(arr1)||!goog.isArrayLike(arr2)||arr1.length!=arr2.length)return false;var l=arr1.length;var equalsFn=opt_equalsFn||goog.array.defaultCompareEquality;for(var i=0;i<l;i++)if(!equalsFn(arr1[i],arr2[i]))return false;return true};
goog.array.compare3=function(arr1,arr2,opt_compareFn){var compare=opt_compareFn||goog.array.defaultCompare;var l=Math.min(arr1.length,arr2.length);for(var i=0;i<l;i++){var result=compare(arr1[i],arr2[i]);if(result!=0)return result}return goog.array.defaultCompare(arr1.length,arr2.length)};goog.array.defaultCompare=function(a,b){return a>b?1:a<b?-1:0};goog.array.inverseDefaultCompare=function(a,b){return-goog.array.defaultCompare(a,b)};goog.array.defaultCompareEquality=function(a,b){return a===b};
goog.array.binaryInsert=function(array,value,opt_compareFn){var index=goog.array.binarySearch(array,value,opt_compareFn);if(index<0){goog.array.insertAt(array,value,-(index+1));return true}return false};goog.array.binaryRemove=function(array,value,opt_compareFn){var index=goog.array.binarySearch(array,value,opt_compareFn);return index>=0?goog.array.removeAt(array,index):false};
goog.array.bucket=function(array,sorter,opt_obj){var buckets={};for(var i=0;i<array.length;i++){var value=array[i];var key=sorter.call((opt_obj),value,i,array);if(goog.isDef(key)){var bucket=buckets[key]||(buckets[key]=[]);bucket.push(value)}}return buckets};goog.array.toObject=function(arr,keyFunc,opt_obj){var ret={};goog.array.forEach(arr,function(element,index){ret[keyFunc.call((opt_obj),element,index,arr)]=element});return ret};
goog.array.range=function(startOrEnd,opt_end,opt_step){var array=[];var start=0;var end=startOrEnd;var step=opt_step||1;if(opt_end!==undefined){start=startOrEnd;end=opt_end}if(step*(end-start)<0)return[];if(step>0)for(var i=start;i<end;i+=step)array.push(i);else for(var i=start;i>end;i+=step)array.push(i);return array};goog.array.repeat=function(value,n){var array=[];for(var i=0;i<n;i++)array[i]=value;return array};
goog.array.flatten=function(var_args){var CHUNK_SIZE=8192;var result=[];for(var i=0;i<arguments.length;i++){var element=arguments[i];if(goog.isArray(element))for(var c=0;c<element.length;c+=CHUNK_SIZE){var chunk=goog.array.slice(element,c,c+CHUNK_SIZE);var recurseResult=goog.array.flatten.apply(null,chunk);for(var r=0;r<recurseResult.length;r++)result.push(recurseResult[r])}else result.push(element)}return result};
goog.array.rotate=function(array,n){goog.asserts.assert(array.length!=null);if(array.length){n%=array.length;if(n>0)Array.prototype.unshift.apply(array,array.splice(-n,n));else if(n<0)Array.prototype.push.apply(array,array.splice(0,-n))}return array};
goog.array.moveItem=function(arr,fromIndex,toIndex){goog.asserts.assert(fromIndex>=0&&fromIndex<arr.length);goog.asserts.assert(toIndex>=0&&toIndex<arr.length);var removedItems=Array.prototype.splice.call(arr,fromIndex,1);Array.prototype.splice.call(arr,toIndex,0,removedItems[0])};
goog.array.zip=function(var_args){if(!arguments.length)return[];var result=[];var minLen=arguments[0].length;for(var i=1;i<arguments.length;i++)if(arguments[i].length<minLen)minLen=arguments[i].length;for(var i=0;i<minLen;i++){var value=[];for(var j=0;j<arguments.length;j++)value.push(arguments[j][i]);result.push(value)}return result};
goog.array.shuffle=function(arr,opt_randFn){var randFn=opt_randFn||Math.random;for(var i=arr.length-1;i>0;i--){var j=Math.floor(randFn()*(i+1));var tmp=arr[i];arr[i]=arr[j];arr[j]=tmp}};goog.array.copyByIndex=function(arr,index_arr){var result=[];goog.array.forEach(index_arr,function(index){result.push(arr[index])});return result};goog.array.concatMap=function(arr,f,opt_obj){return goog.array.concat.apply([],goog.array.map(arr,f,opt_obj))};goog.provide('goog.debug.EntryPointMonitor');goog.provide('goog.debug.entryPointRegistry');goog.require('goog.asserts');goog.debug.EntryPointMonitor=function(){};goog.debug.EntryPointMonitor.prototype.wrap;goog.debug.EntryPointMonitor.prototype.unwrap;goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=false;
goog.debug.entryPointRegistry.register=function(callback){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=callback;if(goog.debug.entryPointRegistry.monitorsMayExist_){var monitors=goog.debug.entryPointRegistry.monitors_;for(var i=0;i<monitors.length;i++)callback(goog.bind(monitors[i].wrap,monitors[i]))}};
goog.debug.entryPointRegistry.monitorAll=function(monitor){goog.debug.entryPointRegistry.monitorsMayExist_=true;var transformer=goog.bind(monitor.wrap,monitor);for(var i=0;i<goog.debug.entryPointRegistry.refList_.length;i++)goog.debug.entryPointRegistry.refList_[i](transformer);goog.debug.entryPointRegistry.monitors_.push(monitor)};
goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(monitor){var monitors=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(monitor==monitors[monitors.length-1],'Only the most recent monitor can be unwrapped.');var transformer=goog.bind(monitor.unwrap,monitor);for(var i=0;i<goog.debug.entryPointRegistry.refList_.length;i++)goog.debug.entryPointRegistry.refList_[i](transformer);monitors.length--};goog.provide('goog.events.ListenerMap');goog.require('goog.array');goog.require('goog.events.Listener');goog.require('goog.object');goog.events.ListenerMap=function(src){this.src=src;this.listeners={};this.typeCount_=0};goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_};goog.events.ListenerMap.prototype.getListenerCount=function(){var count=0;for(var type in this.listeners)count+=this.listeners[type].length;return count};
goog.events.ListenerMap.prototype.add=function(type,listener,callOnce,opt_useCapture,opt_listenerScope){var typeStr=type.toString();var listenerArray=this.listeners[typeStr];if(!listenerArray){listenerArray=this.listeners[typeStr]=[];this.typeCount_++}var listenerObj;var index=goog.events.ListenerMap.findListenerIndex_(listenerArray,listener,opt_useCapture,opt_listenerScope);if(index>-1){listenerObj=listenerArray[index];if(!callOnce)listenerObj.callOnce=false}else{listenerObj=new goog.events.Listener(listener,
null,this.src,typeStr,!!opt_useCapture,opt_listenerScope);listenerObj.callOnce=callOnce;listenerArray.push(listenerObj)}return listenerObj};
goog.events.ListenerMap.prototype.remove=function(type,listener,opt_useCapture,opt_listenerScope){var typeStr=type.toString();if(!(typeStr in this.listeners))return false;var listenerArray=this.listeners[typeStr];var index=goog.events.ListenerMap.findListenerIndex_(listenerArray,listener,opt_useCapture,opt_listenerScope);if(index>-1){var listenerObj=listenerArray[index];listenerObj.markAsRemoved();goog.array.removeAt(listenerArray,index);if(listenerArray.length==0){delete this.listeners[typeStr];
this.typeCount_--}return true}return false};goog.events.ListenerMap.prototype.removeByKey=function(listener){var type=listener.type;if(!(type in this.listeners))return false;var removed=goog.array.remove(this.listeners[type],listener);if(removed){listener.markAsRemoved();if(this.listeners[type].length==0){delete this.listeners[type];this.typeCount_--}}return removed};
goog.events.ListenerMap.prototype.removeAll=function(opt_type){var typeStr=opt_type&&opt_type.toString();var count=0;for(var type in this.listeners)if(!typeStr||type==typeStr){var listenerArray=this.listeners[type];for(var i=0;i<listenerArray.length;i++){++count;listenerArray[i].markAsRemoved()}delete this.listeners[type];this.typeCount_--}return count};
goog.events.ListenerMap.prototype.getListeners=function(type,capture){var listenerArray=this.listeners[type.toString()];var rv=[];if(listenerArray)for(var i=0;i<listenerArray.length;++i){var listenerObj=listenerArray[i];if(listenerObj.capture==capture)rv.push(listenerObj)}return rv};
goog.events.ListenerMap.prototype.getListener=function(type,listener,capture,opt_listenerScope){var listenerArray=this.listeners[type.toString()];var i=-1;if(listenerArray)i=goog.events.ListenerMap.findListenerIndex_(listenerArray,listener,capture,opt_listenerScope);return i>-1?listenerArray[i]:null};
goog.events.ListenerMap.prototype.hasListener=function(opt_type,opt_capture){var hasType=goog.isDef(opt_type);var typeStr=hasType?opt_type.toString():'';var hasCapture=goog.isDef(opt_capture);return goog.object.some(this.listeners,function(listenerArray,type){for(var i=0;i<listenerArray.length;++i)if((!hasType||listenerArray[i].type==typeStr)&&(!hasCapture||listenerArray[i].capture==opt_capture))return true;return false})};
goog.events.ListenerMap.findListenerIndex_=function(listenerArray,listener,opt_useCapture,opt_listenerScope){for(var i=0;i<listenerArray.length;++i){var listenerObj=listenerArray[i];if(!listenerObj.removed&&listenerObj.listener==listener&&listenerObj.capture==!!opt_useCapture&&listenerObj.handler==opt_listenerScope)return i}return-1};goog.provide('goog.labs.userAgent.util');goog.require('goog.string');goog.labs.userAgent.util.getNativeUserAgentString_=function(){var navigator=goog.labs.userAgent.util.getNavigator_();if(navigator){var userAgent=navigator.userAgent;if(userAgent)return userAgent}return''};goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator};goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_();
goog.labs.userAgent.util.setUserAgent=function(opt_userAgent){goog.labs.userAgent.util.userAgent_=opt_userAgent||goog.labs.userAgent.util.getNativeUserAgentString_()};goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_};goog.labs.userAgent.util.matchUserAgent=function(str){var userAgent=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(userAgent,str)};
goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(str){var userAgent=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(userAgent,str)};goog.labs.userAgent.util.extractVersionTuples=function(userAgent){var versionRegExp=new RegExp('(\\w[\\w ]+)'+'/'+'([^\\s]+)'+'\\s*'+'(?:\\((.*?)\\))?','g');var data=[];var match;while(match=versionRegExp.exec(userAgent))data.push([match[1],match[2],match[3]||undefined]);return data};goog.provide('goog.labs.userAgent.browser');goog.require('goog.array');goog.require('goog.labs.userAgent.util');goog.require('goog.object');goog.require('goog.string');goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent('Opera')};goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent('Trident')||goog.labs.userAgent.util.matchUserAgent('MSIE')};goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent('Edge')};
goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent('Firefox')};goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent('Safari')&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent('Android'))};
goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent('Coast')};goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent('iPad')||goog.labs.userAgent.util.matchUserAgent('iPhone'))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent('AppleWebKit')};
goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent('Chrome')||goog.labs.userAgent.util.matchUserAgent('CriOS'))&&!goog.labs.userAgent.browser.matchEdge_()};goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent('Android')&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())};
goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_;goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_;goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_;goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_;goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_;goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_;goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_;
goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_;goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_;goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent('Silk')};
goog.labs.userAgent.browser.getVersion=function(){var userAgentString=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(userAgentString);var versionTuples=goog.labs.userAgent.util.extractVersionTuples(userAgentString);var versionMap={};goog.array.forEach(versionTuples,function(tuple){var key=tuple[0];var value=tuple[1];versionMap[key]=value});var versionMapHasKey=goog.partial(goog.object.containsKey,versionMap);function lookUpValueWithKeys(keys){var key=
goog.array.find(keys,versionMapHasKey);return versionMap[key]||''}if(goog.labs.userAgent.browser.isOpera())return lookUpValueWithKeys(['Version','Opera']);if(goog.labs.userAgent.browser.isEdge())return lookUpValueWithKeys(['Edge']);if(goog.labs.userAgent.browser.isChrome())return lookUpValueWithKeys(['Chrome','CriOS']);var tuple=versionTuples[2];return tuple&&tuple[1]||''};
goog.labs.userAgent.browser.isVersionOrHigher=function(version){return goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),version)>=0};
goog.labs.userAgent.browser.getIEVersion_=function(userAgent){var rv=/rv: *([\d\.]*)/.exec(userAgent);if(rv&&rv[1])return rv[1];var version='';var msie=/MSIE +([\d\.]+)/.exec(userAgent);if(msie&&msie[1]){var tridentVersion=/Trident\/(\d.\d)/.exec(userAgent);if(msie[1]=='7.0')if(tridentVersion&&tridentVersion[1])switch(tridentVersion[1]){case '4.0':version='8.0';break;case '5.0':version='9.0';break;case '6.0':version='10.0';break;case '7.0':version='11.0';break}else version='7.0';else version=msie[1]}return version};goog.provide('goog.labs.userAgent.engine');goog.require('goog.array');goog.require('goog.labs.userAgent.util');goog.require('goog.string');goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent('Presto')};goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent('Trident')||goog.labs.userAgent.util.matchUserAgent('MSIE')};goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent('Edge')};
goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase('WebKit')&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent('Gecko')&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()};
goog.labs.userAgent.engine.getVersion=function(){var userAgentString=goog.labs.userAgent.util.getUserAgent();if(userAgentString){var tuples=goog.labs.userAgent.util.extractVersionTuples(userAgentString);var engineTuple=goog.labs.userAgent.engine.getEngineTuple_(tuples);if(engineTuple){if(engineTuple[0]=='Gecko')return goog.labs.userAgent.engine.getVersionForKey_(tuples,'Firefox');return engineTuple[1]}var browserTuple=tuples[0];var info;if(browserTuple&&(info=browserTuple[2])){var match=/Trident\/([^\s;]+)/.exec(info);
if(match)return match[1]}}return''};goog.labs.userAgent.engine.getEngineTuple_=function(tuples){if(!goog.labs.userAgent.engine.isEdge())return tuples[1];for(var i=0;i<tuples.length;i++){var tuple=tuples[i];if(tuple[0]=='Edge')return tuple}};goog.labs.userAgent.engine.isVersionOrHigher=function(version){return goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),version)>=0};
goog.labs.userAgent.engine.getVersionForKey_=function(tuples,key){var pair=goog.array.find(tuples,function(pair){return key==pair[0]});return pair&&pair[1]||''};goog.provide('goog.labs.userAgent.platform');goog.require('goog.labs.userAgent.util');goog.require('goog.string');goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent('Android')};goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent('iPod')};goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent('iPhone')&&!goog.labs.userAgent.util.matchUserAgent('iPod')&&!goog.labs.userAgent.util.matchUserAgent('iPad')};
goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent('iPad')};goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()};goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent('Macintosh')};goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent('Linux')};
goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent('Windows')};goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent('CrOS')};
goog.labs.userAgent.platform.getVersion=function(){var userAgentString=goog.labs.userAgent.util.getUserAgent();var version='',re;if(goog.labs.userAgent.platform.isWindows()){re=/Windows (?:NT|Phone) ([0-9.]+)/;var match=re.exec(userAgentString);if(match)version=match[1];else version='0.0'}else if(goog.labs.userAgent.platform.isIos()){re=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/;var match=re.exec(userAgentString);version=match&&match[1].replace(/_/g,'.')}else if(goog.labs.userAgent.platform.isMacintosh()){re=
/Mac OS X ([0-9_.]+)/;var match=re.exec(userAgentString);version=match?match[1].replace(/_/g,'.'):'10'}else if(goog.labs.userAgent.platform.isAndroid()){re=/Android\s+([^\);]+)(\)|;)/;var match=re.exec(userAgentString);version=match&&match[1]}else if(goog.labs.userAgent.platform.isChromeOS()){re=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/;var match=re.exec(userAgentString);version=match&&match[1]}return version||''};
goog.labs.userAgent.platform.isVersionOrHigher=function(version){return goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),version)>=0};goog.provide('goog.userAgent');goog.require('goog.labs.userAgent.browser');goog.require('goog.labs.userAgent.engine');goog.require('goog.labs.userAgent.platform');goog.require('goog.labs.userAgent.util');goog.require('goog.string');goog.define('goog.userAgent.ASSUME_IE',false);goog.define('goog.userAgent.ASSUME_EDGE',false);goog.define('goog.userAgent.ASSUME_GECKO',false);goog.define('goog.userAgent.ASSUME_WEBKIT',false);goog.define('goog.userAgent.ASSUME_MOBILE_WEBKIT',false);
goog.define('goog.userAgent.ASSUME_OPERA',false);goog.define('goog.userAgent.ASSUME_ANY_VERSION',false);goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()};goog.userAgent.getNavigator=function(){return goog.global['navigator']||null};
goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera();goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE();goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge();goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko();
goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit();goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent('Mobile')};goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_();goog.userAgent.SAFARI=goog.userAgent.WEBKIT;
goog.userAgent.determinePlatform_=function(){var navigator=goog.userAgent.getNavigator();return navigator&&navigator.platform||''};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.define('goog.userAgent.ASSUME_MAC',false);goog.define('goog.userAgent.ASSUME_WINDOWS',false);goog.define('goog.userAgent.ASSUME_LINUX',false);goog.define('goog.userAgent.ASSUME_X11',false);goog.define('goog.userAgent.ASSUME_ANDROID',false);goog.define('goog.userAgent.ASSUME_IPHONE',false);
goog.define('goog.userAgent.ASSUME_IPAD',false);goog.define('goog.userAgent.ASSUME_IPOD',false);goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD;goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();
goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows();goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()};goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_();
goog.userAgent.isX11_=function(){var navigator=goog.userAgent.getNavigator();return!!navigator&&goog.string.contains(navigator['appVersion']||'','X11')};goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_();goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid();goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone();
goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad();goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod();goog.userAgent.determineVersion_=function(){var version='';var arr=goog.userAgent.getVersionRegexResult_();if(arr)version=arr?arr[1]:'';if(goog.userAgent.IE){var docMode=goog.userAgent.getDocumentMode_();if(docMode!=null&&docMode>parseFloat(version))return String(docMode)}return version};
goog.userAgent.getVersionRegexResult_=function(){var userAgent=goog.userAgent.getUserAgentString();if(goog.userAgent.GECKO)return/rv\:([^\);]+)(\)|;)/.exec(userAgent);if(goog.userAgent.EDGE)return/Edge\/([\d\.]+)/.exec(userAgent);if(goog.userAgent.IE)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(userAgent);if(goog.userAgent.WEBKIT)return/WebKit\/(\S+)/.exec(userAgent);if(goog.userAgent.OPERA)return/(?:Version)[ \/]?(\S+)/.exec(userAgent);return undefined};
goog.userAgent.getDocumentMode_=function(){var doc=goog.global['document'];return doc?doc['documentMode']:undefined};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(v1,v2){return goog.string.compareVersions(v1,v2)};goog.userAgent.isVersionOrHigherCache_={};
goog.userAgent.isVersionOrHigher=function(version){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[version]||(goog.userAgent.isVersionOrHigherCache_[version]=goog.string.compareVersions(goog.userAgent.VERSION,version)>=0)};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;goog.userAgent.isDocumentModeOrHigher=function(documentMode){return Number(goog.userAgent.DOCUMENT_MODE)>=documentMode};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;
goog.userAgent.DOCUMENT_MODE=function(){var doc=goog.global['document'];var mode=goog.userAgent.getDocumentMode_();if(!doc||!goog.userAgent.IE)return undefined;return mode||(doc['compatMode']=='CSS1Compat'?parseInt(goog.userAgent.VERSION,10):5)}();goog.provide('goog.events.BrowserFeature');goog.require('goog.userAgent');
goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher('9'),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher('528'),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher('1.9b')||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher('8')||
goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher('9.5')||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher('528'),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher('8')||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher('9'),TOUCH_ENABLED:'ontouchstart'in goog.global||!!(goog.global['document']&&document.documentElement&&'ontouchstart'in document.documentElement)||!!(goog.global['navigator']&&goog.global['navigator']['msMaxTouchPoints'])};goog.provide('goog.events.EventType');goog.require('goog.userAgent');goog.events.getVendorPrefixedName_=function(eventName){return goog.userAgent.WEBKIT?'webkit'+eventName:goog.userAgent.OPERA?'o'+eventName.toLowerCase():eventName.toLowerCase()};
goog.events.EventType={CLICK:'click',RIGHTCLICK:'rightclick',DBLCLICK:'dblclick',MOUSEDOWN:'mousedown',MOUSEUP:'mouseup',MOUSEOVER:'mouseover',MOUSEOUT:'mouseout',MOUSEMOVE:'mousemove',MOUSEENTER:'mouseenter',MOUSELEAVE:'mouseleave',SELECTSTART:'selectstart',WHEEL:'wheel',KEYPRESS:'keypress',KEYDOWN:'keydown',KEYUP:'keyup',BLUR:'blur',FOCUS:'focus',DEACTIVATE:'deactivate',FOCUSIN:goog.userAgent.IE?'focusin':'DOMFocusIn',FOCUSOUT:goog.userAgent.IE?'focusout':'DOMFocusOut',CHANGE:'change',RESET:'reset',
SELECT:'select',SUBMIT:'submit',INPUT:'input',PROPERTYCHANGE:'propertychange',DRAGSTART:'dragstart',DRAG:'drag',DRAGENTER:'dragenter',DRAGOVER:'dragover',DRAGLEAVE:'dragleave',DROP:'drop',DRAGEND:'dragend',TOUCHSTART:'touchstart',TOUCHMOVE:'touchmove',TOUCHEND:'touchend',TOUCHCANCEL:'touchcancel',BEFOREUNLOAD:'beforeunload',CONSOLEMESSAGE:'consolemessage',CONTEXTMENU:'contextmenu',DOMCONTENTLOADED:'DOMContentLoaded',ERROR:'error',HELP:'help',LOAD:'load',LOSECAPTURE:'losecapture',ORIENTATIONCHANGE:'orientationchange',
READYSTATECHANGE:'readystatechange',RESIZE:'resize',SCROLL:'scroll',UNLOAD:'unload',CANPLAY:'canplay',CANPLAYTHROUGH:'canplaythrough',DURATIONCHANGE:'durationchange',EMPTIED:'emptied',ENDED:'ended',LOADEDDATA:'loadeddata',LOADEDMETADATA:'loadedmetadata',PAUSE:'pause',PLAY:'play',PLAYING:'playing',RATECHANGE:'ratechange',SEEKED:'seeked',SEEKING:'seeking',STALLED:'stalled',SUSPEND:'suspend',TIMEUPDATE:'timeupdate',VOLUMECHANGE:'volumechange',WAITING:'waiting',HASHCHANGE:'hashchange',PAGEHIDE:'pagehide',
PAGESHOW:'pageshow',POPSTATE:'popstate',COPY:'copy',PASTE:'paste',CUT:'cut',BEFORECOPY:'beforecopy',BEFORECUT:'beforecut',BEFOREPASTE:'beforepaste',ONLINE:'online',OFFLINE:'offline',MESSAGE:'message',CONNECT:'connect',ANIMATIONSTART:goog.events.getVendorPrefixedName_('AnimationStart'),ANIMATIONEND:goog.events.getVendorPrefixedName_('AnimationEnd'),ANIMATIONITERATION:goog.events.getVendorPrefixedName_('AnimationIteration'),TRANSITIONEND:goog.events.getVendorPrefixedName_('TransitionEnd'),POINTERDOWN:'pointerdown',
POINTERUP:'pointerup',POINTERCANCEL:'pointercancel',POINTERMOVE:'pointermove',POINTEROVER:'pointerover',POINTEROUT:'pointerout',POINTERENTER:'pointerenter',POINTERLEAVE:'pointerleave',GOTPOINTERCAPTURE:'gotpointercapture',LOSTPOINTERCAPTURE:'lostpointercapture',MSGESTURECHANGE:'MSGestureChange',MSGESTUREEND:'MSGestureEnd',MSGESTUREHOLD:'MSGestureHold',MSGESTURESTART:'MSGestureStart',MSGESTURETAP:'MSGestureTap',MSGOTPOINTERCAPTURE:'MSGotPointerCapture',MSINERTIASTART:'MSInertiaStart',MSLOSTPOINTERCAPTURE:'MSLostPointerCapture',
MSPOINTERCANCEL:'MSPointerCancel',MSPOINTERDOWN:'MSPointerDown',MSPOINTERENTER:'MSPointerEnter',MSPOINTERHOVER:'MSPointerHover',MSPOINTERLEAVE:'MSPointerLeave',MSPOINTERMOVE:'MSPointerMove',MSPOINTEROUT:'MSPointerOut',MSPOINTEROVER:'MSPointerOver',MSPOINTERUP:'MSPointerUp',TEXT:'text',TEXTINPUT:'textInput',COMPOSITIONSTART:'compositionstart',COMPOSITIONUPDATE:'compositionupdate',COMPOSITIONEND:'compositionend',EXIT:'exit',LOADABORT:'loadabort',LOADCOMMIT:'loadcommit',LOADREDIRECT:'loadredirect',LOADSTART:'loadstart',
LOADSTOP:'loadstop',RESPONSIVE:'responsive',SIZECHANGED:'sizechanged',UNRESPONSIVE:'unresponsive',VISIBILITYCHANGE:'visibilitychange',STORAGE:'storage',DOMSUBTREEMODIFIED:'DOMSubtreeModified',DOMNODEINSERTED:'DOMNodeInserted',DOMNODEREMOVED:'DOMNodeRemoved',DOMNODEREMOVEDFROMDOCUMENT:'DOMNodeRemovedFromDocument',DOMNODEINSERTEDINTODOCUMENT:'DOMNodeInsertedIntoDocument',DOMATTRMODIFIED:'DOMAttrModified',DOMCHARACTERDATAMODIFIED:'DOMCharacterDataModified',BEFOREPRINT:'beforeprint',AFTERPRINT:'afterprint'};goog.provide('goog.events.BrowserEvent');goog.provide('goog.events.BrowserEvent.MouseButton');goog.require('goog.events.BrowserFeature');goog.require('goog.events.Event');goog.require('goog.events.EventType');goog.require('goog.reflect');goog.require('goog.userAgent');
goog.events.BrowserEvent=function(opt_e,opt_currentTarget){goog.events.BrowserEvent.base(this,'constructor',opt_e?opt_e.type:'');this.target=null;this.currentTarget=null;this.relatedTarget=null;this.offsetX=0;this.offsetY=0;this.clientX=0;this.clientY=0;this.screenX=0;this.screenY=0;this.button=0;this.keyCode=0;this.charCode=0;this.ctrlKey=false;this.altKey=false;this.shiftKey=false;this.metaKey=false;this.state=null;this.platformModifierKey=false;this.event_=null;if(opt_e)this.init(opt_e,opt_currentTarget)};
goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.IEButtonMap=[1,4,2];
goog.events.BrowserEvent.prototype.init=function(e,opt_currentTarget){var type=this.type=e.type;var relevantTouch=e.changedTouches?e.changedTouches[0]:null;this.target=(e.target)||e.srcElement;this.currentTarget=(opt_currentTarget);var relatedTarget=(e.relatedTarget);if(relatedTarget){if(goog.userAgent.GECKO)if(!goog.reflect.canAccessProperty(relatedTarget,'nodeName'))relatedTarget=null}else if(type==goog.events.EventType.MOUSEOVER)relatedTarget=e.fromElement;else if(type==goog.events.EventType.MOUSEOUT)relatedTarget=
e.toElement;this.relatedTarget=relatedTarget;if(!goog.isNull(relevantTouch)){this.clientX=relevantTouch.clientX!==undefined?relevantTouch.clientX:relevantTouch.pageX;this.clientY=relevantTouch.clientY!==undefined?relevantTouch.clientY:relevantTouch.pageY;this.screenX=relevantTouch.screenX||0;this.screenY=relevantTouch.screenY||0}else{this.offsetX=goog.userAgent.WEBKIT||e.offsetX!==undefined?e.offsetX:e.layerX;this.offsetY=goog.userAgent.WEBKIT||e.offsetY!==undefined?e.offsetY:e.layerY;this.clientX=
e.clientX!==undefined?e.clientX:e.pageX;this.clientY=e.clientY!==undefined?e.clientY:e.pageY;this.screenX=e.screenX||0;this.screenY=e.screenY||0}this.button=e.button;this.keyCode=e.keyCode||0;this.charCode=e.charCode||(type=='keypress'?e.keyCode:0);this.ctrlKey=e.ctrlKey;this.altKey=e.altKey;this.shiftKey=e.shiftKey;this.metaKey=e.metaKey;this.platformModifierKey=goog.userAgent.MAC?e.metaKey:e.ctrlKey;this.state=e.state;this.event_=e;if(e.defaultPrevented)this.preventDefault()};
goog.events.BrowserEvent.prototype.isButton=function(button){if(!goog.events.BrowserFeature.HAS_W3C_BUTTON)if(this.type=='click')return button==goog.events.BrowserEvent.MouseButton.LEFT;else return!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[button]);else return this.event_.button==button};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};
goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);if(this.event_.stopPropagation)this.event_.stopPropagation();else this.event_.cancelBubble=true};
goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var be=this.event_;if(!be.preventDefault){be.returnValue=false;if(goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{var VK_F1=112;var VK_F12=123;if(be.ctrlKey||be.keyCode>=VK_F1&&be.keyCode<=VK_F12)be.keyCode=-1}catch(ex){}}else be.preventDefault()};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};goog.provide('goog.events');goog.provide('goog.events.CaptureSimulationMode');goog.provide('goog.events.Key');goog.provide('goog.events.ListenableType');goog.require('goog.asserts');goog.require('goog.debug.entryPointRegistry');goog.require('goog.events.BrowserEvent');goog.require('goog.events.BrowserFeature');goog.require('goog.events.Listenable');goog.require('goog.events.ListenerMap');goog.forwardDeclare('goog.debug.ErrorHandler');goog.forwardDeclare('goog.events.EventWrapper');goog.events.Key;
goog.events.ListenableType;goog.events.LISTENER_MAP_PROP_='closure_lm_'+(Math.random()*1E6|0);goog.events.onString_='on';goog.events.onStringMap_={};goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2};goog.define('goog.events.CAPTURE_SIMULATION_MODE',2);goog.events.listenerCountEstimate_=0;
goog.events.listen=function(src,type,listener,opt_capt,opt_handler){if(goog.isArray(type)){for(var i=0;i<type.length;i++)goog.events.listen(src,type[i],listener,opt_capt,opt_handler);return null}listener=goog.events.wrapListener(listener);if(goog.events.Listenable.isImplementedBy(src))return src.listen((type),listener,opt_capt,opt_handler);else return goog.events.listen_((src),(type),listener,false,opt_capt,opt_handler)};
goog.events.listen_=function(src,type,listener,callOnce,opt_capt,opt_handler){if(!type)throw Error('Invalid event type');var capture=!!opt_capt;if(capture&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT)if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL){goog.asserts.fail('Can not register capture listener in IE8-.');return null}else if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT)return null;var listenerMap=goog.events.getListenerMap_(src);
if(!listenerMap)src[goog.events.LISTENER_MAP_PROP_]=listenerMap=new goog.events.ListenerMap(src);var listenerObj=listenerMap.add(type,listener,callOnce,opt_capt,opt_handler);if(listenerObj.proxy)return listenerObj;var proxy=goog.events.getProxy();listenerObj.proxy=proxy;proxy.src=src;proxy.listener=listenerObj;if(src.addEventListener)src.addEventListener(type.toString(),proxy,capture);else if(src.attachEvent)src.attachEvent(goog.events.getOnString_(type.toString()),proxy);else throw Error('addEventListener and attachEvent are unavailable.');
goog.events.listenerCountEstimate_++;return listenerObj};goog.events.getProxy=function(){var proxyCallbackFunction=goog.events.handleBrowserEvent_;var f=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(eventObject){return proxyCallbackFunction.call(f.src,f.listener,eventObject)}:function(eventObject){var v=proxyCallbackFunction.call(f.src,f.listener,eventObject);if(!v)return v};return f};
goog.events.listenOnce=function(src,type,listener,opt_capt,opt_handler){if(goog.isArray(type)){for(var i=0;i<type.length;i++)goog.events.listenOnce(src,type[i],listener,opt_capt,opt_handler);return null}listener=goog.events.wrapListener(listener);if(goog.events.Listenable.isImplementedBy(src))return src.listenOnce((type),listener,opt_capt,opt_handler);else return goog.events.listen_((src),(type),listener,true,opt_capt,opt_handler)};
goog.events.listenWithWrapper=function(src,wrapper,listener,opt_capt,opt_handler){wrapper.listen(src,listener,opt_capt,opt_handler)};
goog.events.unlisten=function(src,type,listener,opt_capt,opt_handler){if(goog.isArray(type)){for(var i=0;i<type.length;i++)goog.events.unlisten(src,type[i],listener,opt_capt,opt_handler);return null}listener=goog.events.wrapListener(listener);if(goog.events.Listenable.isImplementedBy(src))return src.unlisten((type),listener,opt_capt,opt_handler);if(!src)return false;var capture=!!opt_capt;var listenerMap=goog.events.getListenerMap_((src));if(listenerMap){var listenerObj=listenerMap.getListener((type),
listener,capture,opt_handler);if(listenerObj)return goog.events.unlistenByKey(listenerObj)}return false};
goog.events.unlistenByKey=function(key){if(goog.isNumber(key))return false;var listener=key;if(!listener||listener.removed)return false;var src=listener.src;if(goog.events.Listenable.isImplementedBy(src))return(src).unlistenByKey(listener);var type=listener.type;var proxy=listener.proxy;if(src.removeEventListener)src.removeEventListener(type,proxy,listener.capture);else if(src.detachEvent)src.detachEvent(goog.events.getOnString_(type),proxy);goog.events.listenerCountEstimate_--;var listenerMap=goog.events.getListenerMap_((src));
if(listenerMap){listenerMap.removeByKey(listener);if(listenerMap.getTypeCount()==0){listenerMap.src=null;src[goog.events.LISTENER_MAP_PROP_]=null}}else listener.markAsRemoved();return true};goog.events.unlistenWithWrapper=function(src,wrapper,listener,opt_capt,opt_handler){wrapper.unlisten(src,listener,opt_capt,opt_handler)};
goog.events.removeAll=function(obj,opt_type){if(!obj)return 0;if(goog.events.Listenable.isImplementedBy(obj))return(obj).removeAllListeners(opt_type);var listenerMap=goog.events.getListenerMap_((obj));if(!listenerMap)return 0;var count=0;var typeStr=opt_type&&opt_type.toString();for(var type in listenerMap.listeners)if(!typeStr||type==typeStr){var listeners=listenerMap.listeners[type].concat();for(var i=0;i<listeners.length;++i)if(goog.events.unlistenByKey(listeners[i]))++count}return count};
goog.events.getListeners=function(obj,type,capture){if(goog.events.Listenable.isImplementedBy(obj))return(obj).getListeners(type,capture);else{if(!obj)return[];var listenerMap=goog.events.getListenerMap_((obj));return listenerMap?listenerMap.getListeners(type,capture):[]}};
goog.events.getListener=function(src,type,listener,opt_capt,opt_handler){type=(type);listener=goog.events.wrapListener(listener);var capture=!!opt_capt;if(goog.events.Listenable.isImplementedBy(src))return src.getListener(type,listener,capture,opt_handler);if(!src)return null;var listenerMap=goog.events.getListenerMap_((src));if(listenerMap)return listenerMap.getListener(type,listener,capture,opt_handler);return null};
goog.events.hasListener=function(obj,opt_type,opt_capture){if(goog.events.Listenable.isImplementedBy(obj))return obj.hasListener(opt_type,opt_capture);var listenerMap=goog.events.getListenerMap_((obj));return!!listenerMap&&listenerMap.hasListener(opt_type,opt_capture)};goog.events.expose=function(e){var str=[];for(var key in e)if(e[key]&&e[key].id)str.push(key+' \x3d '+e[key]+' ('+e[key].id+')');else str.push(key+' \x3d '+e[key]);return str.join('\n')};
goog.events.getOnString_=function(type){if(type in goog.events.onStringMap_)return goog.events.onStringMap_[type];return goog.events.onStringMap_[type]=goog.events.onString_+type};goog.events.fireListeners=function(obj,type,capture,eventObject){if(goog.events.Listenable.isImplementedBy(obj))return(obj).fireListeners(type,capture,eventObject);return goog.events.fireListeners_(obj,type,capture,eventObject)};
goog.events.fireListeners_=function(obj,type,capture,eventObject){var retval=true;var listenerMap=goog.events.getListenerMap_((obj));if(listenerMap){var listenerArray=listenerMap.listeners[type.toString()];if(listenerArray){listenerArray=listenerArray.concat();for(var i=0;i<listenerArray.length;i++){var listener=listenerArray[i];if(listener&&listener.capture==capture&&!listener.removed){var result=goog.events.fireListener(listener,eventObject);retval=retval&&result!==false}}}}return retval};
goog.events.fireListener=function(listener,eventObject){var listenerFn=listener.listener;var listenerHandler=listener.handler||listener.src;if(listener.callOnce)goog.events.unlistenByKey(listener);return listenerFn.call(listenerHandler,eventObject)};goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_};
goog.events.dispatchEvent=function(src,e){goog.asserts.assert(goog.events.Listenable.isImplementedBy(src),'Can not use goog.events.dispatchEvent with '+'non-goog.events.Listenable instance.');return src.dispatchEvent(e)};goog.events.protectBrowserEventEntryPoint=function(errorHandler){goog.events.handleBrowserEvent_=errorHandler.protectEntryPoint(goog.events.handleBrowserEvent_)};
goog.events.handleBrowserEvent_=function(listener,opt_evt){if(listener.removed)return true;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var ieEvent=opt_evt||(goog.getObjectByName('window.event'));var evt=new goog.events.BrowserEvent(ieEvent,this);var retval=true;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(ieEvent)){goog.events.markIeEvent_(ieEvent);var ancestors=[];for(var parent=evt.currentTarget;parent;parent=parent.parentNode)ancestors.push(parent);
var type=listener.type;for(var i=ancestors.length-1;!evt.propagationStopped_&&i>=0;i--){evt.currentTarget=ancestors[i];var result=goog.events.fireListeners_(ancestors[i],type,true,evt);retval=retval&&result}for(var i=0;!evt.propagationStopped_&&i<ancestors.length;i++){evt.currentTarget=ancestors[i];var result=goog.events.fireListeners_(ancestors[i],type,false,evt);retval=retval&&result}}}else retval=goog.events.fireListener(listener,evt);return retval}return goog.events.fireListener(listener,new goog.events.BrowserEvent(opt_evt,
this))};goog.events.markIeEvent_=function(e){var useReturnValue=false;if(e.keyCode==0)try{e.keyCode=-1;return}catch(ex){useReturnValue=true}if(useReturnValue||(e.returnValue)==undefined)e.returnValue=true};goog.events.isMarkedIeEvent_=function(e){return e.keyCode<0||e.returnValue!=undefined};goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(identifier){return identifier+'_'+goog.events.uniqueIdCounter_++};
goog.events.getListenerMap_=function(src){var listenerMap=src[goog.events.LISTENER_MAP_PROP_];return listenerMap instanceof goog.events.ListenerMap?listenerMap:null};goog.events.LISTENER_WRAPPER_PROP_='__closure_events_fn_'+(Math.random()*1E9>>>0);
goog.events.wrapListener=function(listener){goog.asserts.assert(listener,'Listener can not be null.');if(goog.isFunction(listener))return listener;goog.asserts.assert(listener.handleEvent,'An object listener must have handleEvent method.');if(!listener[goog.events.LISTENER_WRAPPER_PROP_])listener[goog.events.LISTENER_WRAPPER_PROP_]=function(e){return(listener).handleEvent(e)};return listener[goog.events.LISTENER_WRAPPER_PROP_]};
goog.debug.entryPointRegistry.register(function(transformer){goog.events.handleBrowserEvent_=transformer(goog.events.handleBrowserEvent_)});goog.provide('goog.events.EventTarget');goog.require('goog.Disposable');goog.require('goog.asserts');goog.require('goog.events');goog.require('goog.events.Event');goog.require('goog.events.Listenable');goog.require('goog.events.ListenerMap');goog.require('goog.object');goog.events.EventTarget=function(){goog.Disposable.call(this);this.eventTargetListeners_=new goog.events.ListenerMap(this);this.actualEventTarget_=this;this.parentEventTarget_=null};goog.inherits(goog.events.EventTarget,goog.Disposable);
goog.events.Listenable.addImplementation(goog.events.EventTarget);goog.events.EventTarget.MAX_ANCESTORS_=1E3;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};goog.events.EventTarget.prototype.setParentEventTarget=function(parent){this.parentEventTarget_=parent};goog.events.EventTarget.prototype.addEventListener=function(type,handler,opt_capture,opt_handlerScope){goog.events.listen(this,type,handler,opt_capture,opt_handlerScope)};
goog.events.EventTarget.prototype.removeEventListener=function(type,handler,opt_capture,opt_handlerScope){goog.events.unlisten(this,type,handler,opt_capture,opt_handlerScope)};
goog.events.EventTarget.prototype.dispatchEvent=function(e){this.assertInitialized_();var ancestorsTree,ancestor=this.getParentEventTarget();if(ancestor){ancestorsTree=[];var ancestorCount=1;for(;ancestor;ancestor=ancestor.getParentEventTarget()){ancestorsTree.push(ancestor);goog.asserts.assert(++ancestorCount<goog.events.EventTarget.MAX_ANCESTORS_,'infinite loop')}}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,e,ancestorsTree)};
goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);this.removeAllListeners();this.parentEventTarget_=null};goog.events.EventTarget.prototype.listen=function(type,listener,opt_useCapture,opt_listenerScope){this.assertInitialized_();return this.eventTargetListeners_.add(String(type),listener,false,opt_useCapture,opt_listenerScope)};
goog.events.EventTarget.prototype.listenOnce=function(type,listener,opt_useCapture,opt_listenerScope){return this.eventTargetListeners_.add(String(type),listener,true,opt_useCapture,opt_listenerScope)};goog.events.EventTarget.prototype.unlisten=function(type,listener,opt_useCapture,opt_listenerScope){return this.eventTargetListeners_.remove(String(type),listener,opt_useCapture,opt_listenerScope)};goog.events.EventTarget.prototype.unlistenByKey=function(key){return this.eventTargetListeners_.removeByKey(key)};
goog.events.EventTarget.prototype.removeAllListeners=function(opt_type){if(!this.eventTargetListeners_)return 0;return this.eventTargetListeners_.removeAll(opt_type)};
goog.events.EventTarget.prototype.fireListeners=function(type,capture,eventObject){var listenerArray=this.eventTargetListeners_.listeners[String(type)];if(!listenerArray)return true;listenerArray=listenerArray.concat();var rv=true;for(var i=0;i<listenerArray.length;++i){var listener=listenerArray[i];if(listener&&!listener.removed&&listener.capture==capture){var listenerFn=listener.listener;var listenerHandler=listener.handler||listener.src;if(listener.callOnce)this.unlistenByKey(listener);rv=listenerFn.call(listenerHandler,
eventObject)!==false&&rv}}return rv&&eventObject.returnValue_!=false};goog.events.EventTarget.prototype.getListeners=function(type,capture){return this.eventTargetListeners_.getListeners(String(type),capture)};goog.events.EventTarget.prototype.getListener=function(type,listener,capture,opt_listenerScope){return this.eventTargetListeners_.getListener(String(type),listener,capture,opt_listenerScope)};
goog.events.EventTarget.prototype.hasListener=function(opt_type,opt_capture){var id=goog.isDef(opt_type)?String(opt_type):undefined;return this.eventTargetListeners_.hasListener(id,opt_capture)};goog.events.EventTarget.prototype.setTargetForTesting=function(target){this.actualEventTarget_=target};goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,'Event target is not initialized. Did you call the superclass '+'(goog.events.EventTarget) constructor?')};
goog.events.EventTarget.dispatchEventInternal_=function(target,e,opt_ancestorsTree){var type=e.type||(e);if(goog.isString(e))e=new goog.events.Event(e,target);else if(!(e instanceof goog.events.Event)){var oldEvent=e;e=new goog.events.Event(type,target);goog.object.extend(e,oldEvent)}else e.target=e.target||target;var rv=true,currentTarget;if(opt_ancestorsTree)for(var i=opt_ancestorsTree.length-1;!e.propagationStopped_&&i>=0;i--){currentTarget=e.currentTarget=opt_ancestorsTree[i];rv=currentTarget.fireListeners(type,
true,e)&&rv}if(!e.propagationStopped_){currentTarget=(e.currentTarget=target);rv=currentTarget.fireListeners(type,true,e)&&rv;if(!e.propagationStopped_)rv=currentTarget.fireListeners(type,false,e)&&rv}if(opt_ancestorsTree)for(i=0;!e.propagationStopped_&&i<opt_ancestorsTree.length;i++){currentTarget=e.currentTarget=opt_ancestorsTree[i];rv=currentTarget.fireListeners(type,false,e)&&rv}return rv};goog.provide('org.apache.flex.events.EventDispatcher');goog.require('goog.events');goog.require('goog.events.EventTarget');goog.require('org.apache.flex.events.IEventDispatcher');org.apache.flex.events.EventDispatcher=function(target){org.apache.flex.events.EventDispatcher.base(this,'constructor');target=typeof target!=='undefined'?target:null;if(target!=null)this.setTargetForTesting(target)};goog.inherits(org.apache.flex.events.EventDispatcher,goog.events.EventTarget);
org.apache.flex.events.EventDispatcher.prototype.hasEventListener=function(type){return goog.events.hasListener(this,type)};org.apache.flex.events.EventDispatcher.prototype.dispatchEvent=function(event){try{return org.apache.flex.events.EventDispatcher.base(this,'dispatchEvent',event)}catch(e){if(e.name!='stopImmediatePropagation')throw e;}return false};
org.apache.flex.events.EventDispatcher.prototype.FLEXJS_CLASS_INFO={names:[{name:'EventDispatcher',qName:'org.apache.flex.events.EventDispatcher'}],interfaces:[org.apache.flex.events.IEventDispatcher]};goog.exportSymbol('org.apache.flex.events.EventDispatcher',org.apache.flex.events.EventDispatcher);
org.apache.flex.events.EventDispatcher.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'EventDispatcher':{type:'',declaredBy:'org.apache.flex.events.EventDispatcher'},'hasEventListener':{type:'Boolean',declaredBy:'org.apache.flex.events.EventDispatcher'},'dispatchEvent':{type:'Boolean',declaredBy:'org.apache.flex.events.EventDispatcher'}}}}};goog.provide('org.apache.flex.utils.Proxy');goog.require('org.apache.flex.events.EventDispatcher');org.apache.flex.utils.Proxy=function(){org.apache.flex.utils.Proxy.base(this,'constructor');this.valueMap={}};goog.inherits(org.apache.flex.utils.Proxy,org.apache.flex.events.EventDispatcher);org.apache.flex.utils.Proxy.prototype.valueMap;org.apache.flex.utils.Proxy.prototype.getProperty=function(propName){return this.valueMap[propName]};
org.apache.flex.utils.Proxy.prototype.setProperty=function(propName,value){this.valueMap[propName]=value};org.apache.flex.utils.Proxy.prototype.hasProperty=function(propName){return this.valueMap.hasOwnProperty(propName)};org.apache.flex.utils.Proxy.prototype.deleteProperty=function(propName){delete this.valueMap[propName]};org.apache.flex.utils.Proxy.prototype.elementNames=function(){var names=[];for(var p in this.valueMap)names.push(p);return names};
org.apache.flex.utils.Proxy.prototype.FLEXJS_CLASS_INFO={names:[{name:'Proxy',qName:'org.apache.flex.utils.Proxy'}]};goog.exportSymbol('org.apache.flex.utils.Proxy',org.apache.flex.utils.Proxy);
org.apache.flex.utils.Proxy.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Proxy':{type:'',declaredBy:'org.apache.flex.utils.Proxy'},'getProperty':{type:'*',declaredBy:'org.apache.flex.utils.Proxy'},'setProperty':{type:'void',declaredBy:'org.apache.flex.utils.Proxy'},'hasProperty':{type:'Boolean',declaredBy:'org.apache.flex.utils.Proxy'},'deleteProperty':{type:'void',declaredBy:'org.apache.flex.utils.Proxy'},
'elementNames':{type:'Array',declaredBy:'org.apache.flex.utils.Proxy'}}}}};goog.provide('flash.utils.Dictionary');goog.require('org.apache.flex.utils.Proxy');flash.utils.Dictionary=function(weakKeys){weakKeys=typeof weakKeys!=='undefined'?weakKeys:false;flash.utils.Dictionary.base(this,'constructor');this.init(weakKeys)};goog.inherits(flash.utils.Dictionary,org.apache.flex.utils.Proxy);flash.utils.Dictionary.prototype.init=function(param1){};flash.utils.Dictionary.prototype.FLEXJS_CLASS_INFO={names:[{name:'Dictionary',qName:'flash.utils.Dictionary'}]};
goog.exportSymbol('flash.utils.Dictionary',flash.utils.Dictionary);flash.utils.Dictionary.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'Dictionary':{type:'',declaredBy:'flash.utils.Dictionary'}}}}};goog.provide('as3Shader.AGALByteCreator');goog.require('as3Shader.Creator');goog.require('as3Shader.Var');goog.require('flash.utils.Dictionary');as3Shader.AGALByteCreator=function(version){as3Shader.AGALByteCreator.base(this,'constructor');version=typeof version!=='undefined'?version:1;this.version=version};goog.inherits(as3Shader.AGALByteCreator,as3Shader.Creator);as3Shader.AGALByteCreator.initialized=false;as3Shader.AGALByteCreator.prototype.verbose=false;as3Shader.AGALByteCreator.prototype.version;
as3Shader.AGALByteCreator.prototype._error;
as3Shader.AGALByteCreator.prototype.creat=function(shader){if(!as3Shader.AGALByteCreator.initialized){as3Shader.AGALByteCreator.init();as3Shader.AGALByteCreator.initregmap(1,false);as3Shader.AGALByteCreator.initregmap(2,false)}var REGMAP=this.version==1?as3Shader.AGALByteCreator.REGMAP1:as3Shader.AGALByteCreator.REGMAP2;var isFrag=shader.programType==flash.display3D.Context3DProgramType.FRAGMENT;var programTypeName;if(shader.programType==flash.display3D.Context3DProgramType.VERTEX)programTypeName='v';
else programTypeName='f';var agalcode=new flash.utils.ByteArray;this.data=agalcode;agalcode.endian=flash.utils.Endian.LITTLE_ENDIAN;agalcode.writeByte(160);agalcode.writeUnsignedInt(this.version);agalcode.writeByte(161);agalcode.writeByte(isFrag?1:0);var lines=shader.lines;var nops=0;for(var i=0;i<lines.length;i++){var line=lines[i];var opName=line[0];if(this.version==1)if(opName=='ddx'||opName=='ddy')opName='mov';var opFound=as3Shader.AGALByteCreator.OPMAP[opName];var opts=line['flag'];if(opFound==
null){if(line.length>=3)org.apache.flex.utils.Language.trace('warning: bad line '+i+': '+lines[i]);continue}if(opFound.flags&as3Shader.AGALByteCreator.OP_VERSION2&&this.version<2){this._error='error: opcode requires version 2.';break}if(opFound.flags&as3Shader.AGALByteCreator.OP_VERT_ONLY&&isFrag){this._error='error: opcode is only allowed in vertex programs.';break}if(opFound.flags&as3Shader.AGALByteCreator.OP_FRAG_ONLY&&!isFrag){this._error='error: opcode is only allowed in fragment programs.';
break}if(this.verbose)org.apache.flex.utils.Language.trace('emit opcode\x3d'+opFound);agalcode.writeUnsignedInt(opFound.emitCode);nops++;if(nops>as3Shader.AGALByteCreator.MAX_OPCODES){this._error='error: too many opcodes. maximum is '+as3Shader.AGALByteCreator.MAX_OPCODES+'.';break}var badreg=false;var pad=160;var regLength=line.length-1;for(var j=0;j<regLength;j++){var v=line[j+1];var regidx=v.index;var isRelative=org.apache.flex.utils.Language.is(v.component,as3Shader.Var);if(this.verbose&&isRelative)org.apache.flex.utils.Language.trace('IS REL');
var regFound=REGMAP[programTypeName+v.type];if(regFound==null){this._error='error: could not find register name for operand '+j+' ('+v.type+').';badreg=true;break}if(isFrag){if(!(regFound.flags&as3Shader.AGALByteCreator.REG_FRAG)){this._error='error: register operand '+j+' ('+v.type+') only allowed in vertex programs.';badreg=true;break}if(isRelative){this._error='error: register operand '+j+' ('+v.type+') relative adressing not allowed in fragment programs.';badreg=true;break}}else if(!(regFound.flags&
as3Shader.AGALByteCreator.REG_VERT)){this._error='error: register operand '+j+' ('+v.type+') only allowed in fragment programs.';badreg=true;break}if(regFound.range<regidx){this._error='error: register operand '+j+' ('+v.type+') index exceeds limit of '+(regFound.range+1)+'.';badreg=true;break}var regmask=0;var maskmatch=null;if(org.apache.flex.utils.Language.is(v.component,String))maskmatch=org.apache.flex.utils.Language.as(v.component,String);var isDest=j==0&&!(opFound.flags&as3Shader.AGALByteCreator.OP_NO_DEST);
var isSampler=j==2&&opFound.flags&as3Shader.AGALByteCreator.OP_SPECIAL_TEX;var reltype=0;var relsel=0;var reloffset=0;if(isDest&&isRelative){this._error='error: relative can not be destination';badreg=true;break}if(maskmatch){regmask=0;var cv;var maskLength=maskmatch.length;for(var k=1;k<=maskLength;k++){cv=maskmatch.charCodeAt(k-1)-'x'.charCodeAt(0);if(cv>2)cv=3;if(isDest)regmask|=1<<cv;else regmask|=cv<<(k-1<<1)}if(!isDest)for(;k<=4;k++)regmask|=cv<<(k-1<<1)}else regmask=isDest?15:228;if(isRelative){var relv=
org.apache.flex.utils.Language.as(v.component,as3Shader.Var);regidx=relv.index;var regFoundRel=REGMAP[programTypeName+relv.type];if(regFoundRel==null){this._error='error: bad index register';badreg=true;break}reltype=regFoundRel.emitCode;relsel=org.apache.flex.utils.Language.as(relv.component,String).charCodeAt(0)-'x'.charCodeAt(0);if(relsel>2)relsel=3;reloffset=v.index+v.componentOffset;if(reloffset<0||reloffset>255){this._error='error: index offset '+reloffset+' out of bounds. [0..255]';badreg=
true;break}if(this.verbose)org.apache.flex.utils.Language.trace('RELATIVE: type\x3d'+reltype+'\x3d\x3d'+' sel\x3d'+relsel+'\x3d\x3d'+' idx\x3d'+regidx+' offset\x3d'+reloffset)}if(this.verbose)org.apache.flex.utils.Language.trace('  emit argcode\x3d'+regFound+'['+regidx+']['+regmask+']');if(isDest){agalcode.writeShort(regidx);agalcode.writeByte(regmask);agalcode.writeByte(regFound.emitCode);pad-=32}else if(isSampler){if(this.verbose)org.apache.flex.utils.Language.trace('  emit sampler');var samplerbits=
5;var optsLength=opts==null?0:opts.length;var bias=0;for(k=0;k<optsLength;k++){if(this.verbose)org.apache.flex.utils.Language.trace('    opt: '+opts[k]);var optfound=as3Shader.AGALByteCreator.SAMPLEMAP[opts[k]];if(optfound==null){bias=Number(opts[k]);if(this.verbose)org.apache.flex.utils.Language.trace('    bias: '+bias)}else{if(optfound.flag!=as3Shader.AGALByteCreator.SAMPLER_SPECIAL_SHIFT)samplerbits&=~(15<<optfound.flag);samplerbits|=org.apache.flex.utils.Language.uint(optfound.mask)<<org.apache.flex.utils.Language.uint(optfound.flag)}}agalcode.writeShort(regidx);
agalcode.writeByte(org.apache.flex.utils.Language._int(bias*8));agalcode.writeByte(0);agalcode.writeUnsignedInt(samplerbits);if(this.verbose)org.apache.flex.utils.Language.trace('    bits: '+(samplerbits-5));pad-=64}else{if(j==0){agalcode.writeUnsignedInt(0);pad-=32}agalcode.writeShort(regidx);agalcode.writeByte(reloffset);agalcode.writeByte(regmask);agalcode.writeByte(regFound.emitCode);agalcode.writeByte(reltype);agalcode.writeShort(isRelative?relsel|1<<15:0);pad-=64}}for(j=0;j<pad;j+=8)agalcode.writeByte(0);
if(badreg)break}};
as3Shader.AGALByteCreator.initregmap=function(version,ignorelimits){var REGMAP=version==1?as3Shader.AGALByteCreator.REGMAP1:as3Shader.AGALByteCreator.REGMAP2;REGMAP['v'+as3Shader.Var.TYPE_VA]=new as3Shader.AGALByteCreator.Register(as3Shader.AGALByteCreator.VA,'vertex attribute',0,ignorelimits?1024:7,as3Shader.AGALByteCreator.REG_VERT|as3Shader.AGALByteCreator.REG_READ);REGMAP['v'+as3Shader.Var.TYPE_C]=new as3Shader.AGALByteCreator.Register(as3Shader.AGALByteCreator.VC,'vertex constant',1,ignorelimits?
1024:version==1?127:249,as3Shader.AGALByteCreator.REG_VERT|as3Shader.AGALByteCreator.REG_READ);REGMAP['v'+as3Shader.Var.TYPE_T]=new as3Shader.AGALByteCreator.Register(as3Shader.AGALByteCreator.VT,'vertex temporary',2,ignorelimits?1024:version==1?7:25,as3Shader.AGALByteCreator.REG_VERT|as3Shader.AGALByteCreator.REG_WRITE|as3Shader.AGALByteCreator.REG_READ);REGMAP['v'+as3Shader.Var.TYPE_OP]=new as3Shader.AGALByteCreator.Register(as3Shader.AGALByteCreator.VO,'vertex output',3,ignorelimits?1024:0,as3Shader.AGALByteCreator.REG_VERT|
as3Shader.AGALByteCreator.REG_WRITE);REGMAP['v'+as3Shader.Var.TYPE_V]=REGMAP['f'+as3Shader.Var.TYPE_V]=new as3Shader.AGALByteCreator.Register(as3Shader.AGALByteCreator.VI,'varying',4,ignorelimits?1024:version==1?7:9,as3Shader.AGALByteCreator.REG_VERT|as3Shader.AGALByteCreator.REG_FRAG|as3Shader.AGALByteCreator.REG_READ|as3Shader.AGALByteCreator.REG_WRITE);REGMAP['f'+as3Shader.Var.TYPE_C]=new as3Shader.AGALByteCreator.Register(as3Shader.AGALByteCreator.FC,'fragment constant',1,ignorelimits?1024:version==
1?27:63,as3Shader.AGALByteCreator.REG_FRAG|as3Shader.AGALByteCreator.REG_READ);REGMAP['f'+as3Shader.Var.TYPE_T]=new as3Shader.AGALByteCreator.Register(as3Shader.AGALByteCreator.FT,'fragment temporary',2,ignorelimits?1024:version==1?7:25,as3Shader.AGALByteCreator.REG_FRAG|as3Shader.AGALByteCreator.REG_WRITE|as3Shader.AGALByteCreator.REG_READ);REGMAP['f'+as3Shader.Var.TYPE_FS]=new as3Shader.AGALByteCreator.Register(as3Shader.AGALByteCreator.FS,'texture sampler',5,ignorelimits?1024:7,as3Shader.AGALByteCreator.REG_FRAG|
as3Shader.AGALByteCreator.REG_READ);REGMAP['f'+as3Shader.Var.TYPE_OC]=new as3Shader.AGALByteCreator.Register(as3Shader.AGALByteCreator.FO,'fragment output',3,ignorelimits?1024:version==1?0:3,as3Shader.AGALByteCreator.REG_FRAG|as3Shader.AGALByteCreator.REG_WRITE)};
as3Shader.AGALByteCreator.init=function(){as3Shader.AGALByteCreator.initialized=true;as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.MOV]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.MOV,2,0,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.ADD]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.ADD,3,1,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.SUB]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.SUB,3,2,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.MUL]=
new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.MUL,3,3,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.DIV]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.DIV,3,4,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.RCP]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.RCP,2,5,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.MIN]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.MIN,3,6,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.MAX]=
new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.MAX,3,7,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.FRC]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.FRC,2,8,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.SQT]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.SQT,2,9,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.RSQ]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.RSQ,2,10,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.POW]=
new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.POW,3,11,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.LOG]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.LOG,2,12,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.EXP]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.EXP,2,13,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.NRM]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.NRM,2,14,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.SIN]=
new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.SIN,2,15,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.COS]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.COS,2,16,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.CRS]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.CRS,3,17,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.DP3]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.DP3,3,18,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.DP4]=
new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.DP4,3,19,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.ABS]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.ABS,2,20,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.NEG]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.NEG,2,21,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.SAT]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.SAT,2,22,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.M33]=
new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.M33,3,23,as3Shader.AGALByteCreator.OP_SPECIAL_MATRIX);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.M44]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.M44,3,24,as3Shader.AGALByteCreator.OP_SPECIAL_MATRIX);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.M34]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.M34,3,25,as3Shader.AGALByteCreator.OP_SPECIAL_MATRIX);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.DDX]=
new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.DDX,2,26,as3Shader.AGALByteCreator.OP_VERSION2|as3Shader.AGALByteCreator.OP_FRAG_ONLY);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.DDY]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.DDY,2,27,as3Shader.AGALByteCreator.OP_VERSION2|as3Shader.AGALByteCreator.OP_FRAG_ONLY);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.IFE]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.IFE,2,28,as3Shader.AGALByteCreator.OP_NO_DEST|
as3Shader.AGALByteCreator.OP_VERSION2|as3Shader.AGALByteCreator.OP_INCNEST|as3Shader.AGALByteCreator.OP_SCALAR);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.INE]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.INE,2,29,as3Shader.AGALByteCreator.OP_NO_DEST|as3Shader.AGALByteCreator.OP_VERSION2|as3Shader.AGALByteCreator.OP_INCNEST|as3Shader.AGALByteCreator.OP_SCALAR);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.IFG]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.IFG,
2,30,as3Shader.AGALByteCreator.OP_NO_DEST|as3Shader.AGALByteCreator.OP_VERSION2|as3Shader.AGALByteCreator.OP_INCNEST|as3Shader.AGALByteCreator.OP_SCALAR);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.IFL]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.IFL,2,31,as3Shader.AGALByteCreator.OP_NO_DEST|as3Shader.AGALByteCreator.OP_VERSION2|as3Shader.AGALByteCreator.OP_INCNEST|as3Shader.AGALByteCreator.OP_SCALAR);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.ELS]=
new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.ELS,0,32,as3Shader.AGALByteCreator.OP_NO_DEST|as3Shader.AGALByteCreator.OP_VERSION2|as3Shader.AGALByteCreator.OP_INCNEST|as3Shader.AGALByteCreator.OP_DECNEST|as3Shader.AGALByteCreator.OP_SCALAR);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.EIF]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.EIF,0,33,as3Shader.AGALByteCreator.OP_NO_DEST|as3Shader.AGALByteCreator.OP_VERSION2|as3Shader.AGALByteCreator.OP_DECNEST|
as3Shader.AGALByteCreator.OP_SCALAR);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.KIL]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.KIL,1,39,as3Shader.AGALByteCreator.OP_NO_DEST|as3Shader.AGALByteCreator.OP_FRAG_ONLY);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.TEX]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.TEX,3,40,as3Shader.AGALByteCreator.OP_FRAG_ONLY|as3Shader.AGALByteCreator.OP_SPECIAL_TEX);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.SGE]=
new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.SGE,3,41,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.SLT]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.SLT,3,42,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.SGN]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.SGN,2,43,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.SEQ]=new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.SEQ,3,44,0);as3Shader.AGALByteCreator.OPMAP[as3Shader.AGALByteCreator.SNE]=
new as3Shader.AGALByteCreator.OpCode(as3Shader.AGALByteCreator.SNE,3,45,0);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.RGBA]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.RGBA,as3Shader.AGALByteCreator.SAMPLER_TYPE_SHIFT,0);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.DXT1]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.DXT1,as3Shader.AGALByteCreator.SAMPLER_TYPE_SHIFT,1);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.DXT5]=
new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.DXT5,as3Shader.AGALByteCreator.SAMPLER_TYPE_SHIFT,2);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.VIDEO]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.VIDEO,as3Shader.AGALByteCreator.SAMPLER_TYPE_SHIFT,3);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.D2]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.D2,as3Shader.AGALByteCreator.SAMPLER_DIM_SHIFT,0);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.D3]=
new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.D3,as3Shader.AGALByteCreator.SAMPLER_DIM_SHIFT,2);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.CUBE]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.CUBE,as3Shader.AGALByteCreator.SAMPLER_DIM_SHIFT,1);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.MIPNEAREST]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.MIPNEAREST,as3Shader.AGALByteCreator.SAMPLER_MIPMAP_SHIFT,1);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.MIPLINEAR]=
new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.MIPLINEAR,as3Shader.AGALByteCreator.SAMPLER_MIPMAP_SHIFT,2);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.MIPNONE]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.MIPNONE,as3Shader.AGALByteCreator.SAMPLER_MIPMAP_SHIFT,0);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.NOMIP]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.NOMIP,as3Shader.AGALByteCreator.SAMPLER_MIPMAP_SHIFT,
0);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.NEAREST]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.NEAREST,as3Shader.AGALByteCreator.SAMPLER_FILTER_SHIFT,0);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.LINEAR]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.LINEAR,as3Shader.AGALByteCreator.SAMPLER_FILTER_SHIFT,1);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.ANISOTROPIC2X]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.ANISOTROPIC2X,
as3Shader.AGALByteCreator.SAMPLER_FILTER_SHIFT,2);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.ANISOTROPIC4X]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.ANISOTROPIC4X,as3Shader.AGALByteCreator.SAMPLER_FILTER_SHIFT,3);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.ANISOTROPIC8X]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.ANISOTROPIC8X,as3Shader.AGALByteCreator.SAMPLER_FILTER_SHIFT,4);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.ANISOTROPIC16X]=
new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.ANISOTROPIC16X,as3Shader.AGALByteCreator.SAMPLER_FILTER_SHIFT,5);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.CENTROID]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.CENTROID,as3Shader.AGALByteCreator.SAMPLER_SPECIAL_SHIFT,1<<0);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.SINGLE]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.SINGLE,as3Shader.AGALByteCreator.SAMPLER_SPECIAL_SHIFT,
1<<1);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.IGNORESAMPLER]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.IGNORESAMPLER,as3Shader.AGALByteCreator.SAMPLER_SPECIAL_SHIFT,1<<2);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.REPEAT]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.REPEAT,as3Shader.AGALByteCreator.SAMPLER_REPEAT_SHIFT,1);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.WRAP]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.WRAP,
as3Shader.AGALByteCreator.SAMPLER_REPEAT_SHIFT,1);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.CLAMP]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.CLAMP,as3Shader.AGALByteCreator.SAMPLER_REPEAT_SHIFT,0);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.CLAMP_U_REPEAT_V]=new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.CLAMP_U_REPEAT_V,as3Shader.AGALByteCreator.SAMPLER_REPEAT_SHIFT,2);as3Shader.AGALByteCreator.SAMPLEMAP[as3Shader.AGALByteCreator.REPEAT_U_CLAMP_V]=
new as3Shader.AGALByteCreator.Sampler(as3Shader.AGALByteCreator.REPEAT_U_CLAMP_V,as3Shader.AGALByteCreator.SAMPLER_REPEAT_SHIFT,3)};as3Shader.AGALByteCreator.OPMAP=new flash.utils.Dictionary;as3Shader.AGALByteCreator.REGMAP1=new flash.utils.Dictionary;as3Shader.AGALByteCreator.REGMAP2=new flash.utils.Dictionary;as3Shader.AGALByteCreator.SAMPLEMAP=new flash.utils.Dictionary;as3Shader.AGALByteCreator.MAX_NESTING=4;as3Shader.AGALByteCreator.MAX_OPCODES=2048;as3Shader.AGALByteCreator.FRAGMENT='fragment';
as3Shader.AGALByteCreator.VERTEX='vertex';as3Shader.AGALByteCreator.SAMPLER_TYPE_SHIFT=8;as3Shader.AGALByteCreator.SAMPLER_DIM_SHIFT=12;as3Shader.AGALByteCreator.SAMPLER_SPECIAL_SHIFT=16;as3Shader.AGALByteCreator.SAMPLER_REPEAT_SHIFT=20;as3Shader.AGALByteCreator.SAMPLER_MIPMAP_SHIFT=24;as3Shader.AGALByteCreator.SAMPLER_FILTER_SHIFT=28;as3Shader.AGALByteCreator.REG_WRITE=1;as3Shader.AGALByteCreator.REG_READ=2;as3Shader.AGALByteCreator.REG_FRAG=32;as3Shader.AGALByteCreator.REG_VERT=64;
as3Shader.AGALByteCreator.OP_SCALAR=1;as3Shader.AGALByteCreator.OP_SPECIAL_TEX=8;as3Shader.AGALByteCreator.OP_SPECIAL_MATRIX=16;as3Shader.AGALByteCreator.OP_FRAG_ONLY=32;as3Shader.AGALByteCreator.OP_VERT_ONLY=64;as3Shader.AGALByteCreator.OP_NO_DEST=128;as3Shader.AGALByteCreator.OP_VERSION2=256;as3Shader.AGALByteCreator.OP_INCNEST=512;as3Shader.AGALByteCreator.OP_DECNEST=1024;as3Shader.AGALByteCreator.MOV='mov';as3Shader.AGALByteCreator.ADD='add';as3Shader.AGALByteCreator.SUB='sub';
as3Shader.AGALByteCreator.MUL='mul';as3Shader.AGALByteCreator.DIV='div';as3Shader.AGALByteCreator.RCP='rcp';as3Shader.AGALByteCreator.MIN='min';as3Shader.AGALByteCreator.MAX='max';as3Shader.AGALByteCreator.FRC='frc';as3Shader.AGALByteCreator.SQT='sqt';as3Shader.AGALByteCreator.RSQ='rsq';as3Shader.AGALByteCreator.POW='pow';as3Shader.AGALByteCreator.LOG='log';as3Shader.AGALByteCreator.EXP='exp';as3Shader.AGALByteCreator.NRM='nrm';as3Shader.AGALByteCreator.SIN='sin';as3Shader.AGALByteCreator.COS='cos';
as3Shader.AGALByteCreator.CRS='crs';as3Shader.AGALByteCreator.DP3='dp3';as3Shader.AGALByteCreator.DP4='dp4';as3Shader.AGALByteCreator.ABS='abs';as3Shader.AGALByteCreator.NEG='neg';as3Shader.AGALByteCreator.SAT='sat';as3Shader.AGALByteCreator.M33='m33';as3Shader.AGALByteCreator.M44='m44';as3Shader.AGALByteCreator.M34='m34';as3Shader.AGALByteCreator.DDX='ddx';as3Shader.AGALByteCreator.DDY='ddy';as3Shader.AGALByteCreator.IFE='ife';as3Shader.AGALByteCreator.INE='ine';as3Shader.AGALByteCreator.IFG='ifg';
as3Shader.AGALByteCreator.IFL='ifl';as3Shader.AGALByteCreator.ELS='els';as3Shader.AGALByteCreator.EIF='eif';as3Shader.AGALByteCreator.TED='ted';as3Shader.AGALByteCreator.KIL='kil';as3Shader.AGALByteCreator.TEX='tex';as3Shader.AGALByteCreator.SGE='sge';as3Shader.AGALByteCreator.SLT='slt';as3Shader.AGALByteCreator.SGN='sgn';as3Shader.AGALByteCreator.SEQ='seq';as3Shader.AGALByteCreator.SNE='sne';as3Shader.AGALByteCreator.VA='va';as3Shader.AGALByteCreator.VC='vc';as3Shader.AGALByteCreator.VT='vt';
as3Shader.AGALByteCreator.VO='vo';as3Shader.AGALByteCreator.VI='vi';as3Shader.AGALByteCreator.FC='fc';as3Shader.AGALByteCreator.FT='ft';as3Shader.AGALByteCreator.FS='fs';as3Shader.AGALByteCreator.FO='fo';as3Shader.AGALByteCreator.FD='fd';as3Shader.AGALByteCreator.D2='2d';as3Shader.AGALByteCreator.D3='3d';as3Shader.AGALByteCreator.CUBE='cube';as3Shader.AGALByteCreator.MIPNEAREST='mipnearest';as3Shader.AGALByteCreator.MIPLINEAR='miplinear';as3Shader.AGALByteCreator.MIPNONE='mipnone';
as3Shader.AGALByteCreator.NOMIP='nomip';as3Shader.AGALByteCreator.NEAREST='nearest';as3Shader.AGALByteCreator.LINEAR='linear';as3Shader.AGALByteCreator.ANISOTROPIC2X='anisotropic2x';as3Shader.AGALByteCreator.ANISOTROPIC4X='anisotropic4x';as3Shader.AGALByteCreator.ANISOTROPIC8X='anisotropic8x';as3Shader.AGALByteCreator.ANISOTROPIC16X='anisotropic16x';as3Shader.AGALByteCreator.CENTROID='centroid';as3Shader.AGALByteCreator.SINGLE='single';as3Shader.AGALByteCreator.IGNORESAMPLER='ignoresampler';
as3Shader.AGALByteCreator.REPEAT='repeat';as3Shader.AGALByteCreator.WRAP='wrap';as3Shader.AGALByteCreator.CLAMP='clamp';as3Shader.AGALByteCreator.REPEAT_U_CLAMP_V='repeat_u_clamp_v';as3Shader.AGALByteCreator.CLAMP_U_REPEAT_V='clamp_u_repeat_v';as3Shader.AGALByteCreator.RGBA='rgba';as3Shader.AGALByteCreator.DXT1='dxt1';as3Shader.AGALByteCreator.DXT5='dxt5';as3Shader.AGALByteCreator.VIDEO='video';as3Shader.AGALByteCreator.prototype.FLEXJS_CLASS_INFO={names:[{name:'AGALByteCreator',qName:'as3Shader.AGALByteCreator'}]};
goog.exportSymbol('as3Shader.AGALByteCreator',as3Shader.AGALByteCreator);as3Shader.AGALByteCreator.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'verbose':{type:'Boolean'},'version':{type:'uint'},'_error':{type:'String'}}},accessors:function(){return{}},methods:function(){return{'AGALByteCreator':{type:'',declaredBy:'as3Shader.AGALByteCreator'},'creat':{type:'void',declaredBy:'as3Shader.AGALByteCreator'}}}}};
as3Shader.AGALByteCreator.OpCode=function(name,numRegister,emitCode,flags){this._name=name;this._numRegister=numRegister;this._emitCode=emitCode;this._flags=flags};as3Shader.AGALByteCreator.OpCode.prototype._emitCode;as3Shader.AGALByteCreator.OpCode.prototype._flags;as3Shader.AGALByteCreator.OpCode.prototype._name;as3Shader.AGALByteCreator.OpCode.prototype._numRegister;
as3Shader.AGALByteCreator.OpCode.prototype.toString=function(){return'[OpCode name\x3d"'+this._name+'", numRegister\x3d'+this._numRegister+', emitCode\x3d'+this._emitCode+', flags\x3d'+this._flags+']'};Object.defineProperties(as3Shader.AGALByteCreator.OpCode.prototype,{emitCode:{get:function(){return this._emitCode}},flags:{get:function(){return this._flags}},name:{get:function(){return this._name}},numRegister:{get:function(){return this._numRegister}}});
as3Shader.AGALByteCreator.OpCode.prototype.FLEXJS_CLASS_INFO={names:[{name:'OpCode',qName:'as3Shader.AGALByteCreator.OpCode'}]};goog.exportSymbol('as3Shader.AGALByteCreator.OpCode',as3Shader.AGALByteCreator.OpCode);
as3Shader.AGALByteCreator.OpCode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'emitCode':{type:'uint',declaredBy:'as3Shader.AGALByteCreator.OpCode'},'flags':{type:'uint',declaredBy:'as3Shader.AGALByteCreator.OpCode'},'name':{type:'String',declaredBy:'as3Shader.AGALByteCreator.OpCode'},'numRegister':{type:'uint',declaredBy:'as3Shader.AGALByteCreator.OpCode'}}},methods:function(){return{'OpCode':{type:'',declaredBy:'as3Shader.AGALByteCreator.OpCode'},
'toString':{type:'String',declaredBy:'as3Shader.AGALByteCreator.OpCode'}}}}};as3Shader.AGALByteCreator.Register=function(name,longName,emitCode,range,flags){this._name=name;this._longName=longName;this._emitCode=emitCode;this._range=range;this._flags=flags};as3Shader.AGALByteCreator.Register.prototype._emitCode;as3Shader.AGALByteCreator.Register.prototype._name;as3Shader.AGALByteCreator.Register.prototype._longName;as3Shader.AGALByteCreator.Register.prototype._flags;as3Shader.AGALByteCreator.Register.prototype._range;
as3Shader.AGALByteCreator.Register.prototype.toString=function(){return'[Register name\x3d"'+this._name+'", longName\x3d"'+this._longName+'", emitCode\x3d'+this._emitCode+', range\x3d'+this._range+', flags\x3d'+this._flags+']'};Object.defineProperties(as3Shader.AGALByteCreator.Register.prototype,{emitCode:{get:function(){return this._emitCode}},longName:{get:function(){return this._longName}},name:{get:function(){return this._name}},flags:{get:function(){return this._flags}},range:{get:function(){return this._range}}});
as3Shader.AGALByteCreator.Register.prototype.FLEXJS_CLASS_INFO={names:[{name:'Register',qName:'as3Shader.AGALByteCreator.Register'}]};goog.exportSymbol('as3Shader.AGALByteCreator.Register',as3Shader.AGALByteCreator.Register);
as3Shader.AGALByteCreator.Register.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'emitCode':{type:'uint',declaredBy:'as3Shader.AGALByteCreator.Register'},'longName':{type:'String',declaredBy:'as3Shader.AGALByteCreator.Register'},'name':{type:'String',declaredBy:'as3Shader.AGALByteCreator.Register'},'flags':{type:'uint',declaredBy:'as3Shader.AGALByteCreator.Register'},'range':{type:'uint',declaredBy:'as3Shader.AGALByteCreator.Register'}}},
methods:function(){return{'Register':{type:'',declaredBy:'as3Shader.AGALByteCreator.Register'},'toString':{type:'String',declaredBy:'as3Shader.AGALByteCreator.Register'}}}}};as3Shader.AGALByteCreator.Sampler=function(name,flag,mask){this._name=name;this._flag=flag;this._mask=mask};as3Shader.AGALByteCreator.Sampler.prototype._flag;as3Shader.AGALByteCreator.Sampler.prototype._mask;as3Shader.AGALByteCreator.Sampler.prototype._name;
as3Shader.AGALByteCreator.Sampler.prototype.toString=function(){return'[Sampler name\x3d"'+this._name+'", flag\x3d"'+this._flag+'", mask\x3d'+this.mask+']'};Object.defineProperties(as3Shader.AGALByteCreator.Sampler.prototype,{flag:{get:function(){return this._flag}},mask:{get:function(){return this._mask}},name:{get:function(){return this._name}}});as3Shader.AGALByteCreator.Sampler.prototype.FLEXJS_CLASS_INFO={names:[{name:'Sampler',qName:'as3Shader.AGALByteCreator.Sampler'}]};
goog.exportSymbol('as3Shader.AGALByteCreator.Sampler',as3Shader.AGALByteCreator.Sampler);
as3Shader.AGALByteCreator.Sampler.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'flag':{type:'uint',declaredBy:'as3Shader.AGALByteCreator.Sampler'},'mask':{type:'uint',declaredBy:'as3Shader.AGALByteCreator.Sampler'},'name':{type:'String',declaredBy:'as3Shader.AGALByteCreator.Sampler'}}},methods:function(){return{'Sampler':{type:'',declaredBy:'as3Shader.AGALByteCreator.Sampler'},'toString':{type:'String',declaredBy:'as3Shader.AGALByteCreator.Sampler'}}}}};goog.provide('gl3d.core.shaders.GLShader');goog.require('as3Shader.AGALByteCreator');goog.require('as3Shader.AGALCodeCreator');goog.require('as3Shader.GLCodeCreator');goog.require('flash.system.Capabilities');goog.require('gl3d.core.ProgramSet');gl3d.core.shaders.GLShader=function(){this.textureSets=[];this.textureSets=[];this.buffSets=[]};gl3d.core.shaders.GLShader.prototype.invalid=true;gl3d.core.shaders.GLShader.prototype.vs;gl3d.core.shaders.GLShader.prototype.fs;gl3d.core.shaders.GLShader.prototype.programSet;
gl3d.core.shaders.GLShader.prototype.textureSets;gl3d.core.shaders.GLShader.prototype.buffSets;gl3d.core.shaders.GLShader.prototype.debug=true;gl3d.core.shaders.GLShader.PROGRAM_POOL={};
gl3d.core.shaders.GLShader.prototype.getProgram=function(material){this.vs=this.getVertexShader(material);this.fs=this.getFragmentShader(material);if(this.vs&&this.fs){if(flash.system.Capabilities.playerType=='spriteflexjs'){this.vs.creator=new as3Shader.GLCodeCreator;this.fs.creator=new as3Shader.GLCodeCreator}else{this.vs.creator=new as3Shader.AGALByteCreator(material.view.renderer.agalVersion);this.fs.creator=new as3Shader.AGALByteCreator(material.view.renderer.agalVersion)}this.programSet=this.getProgramFromPool(material.view.id,
this.vs.code,this.fs.code)}return this.programSet};
gl3d.core.shaders.GLShader.prototype.getProgramFromPool=function(id,vcode,fcode){var classname=this+':'+id;var pobj=gl3d.core.shaders.GLShader.PROGRAM_POOL[classname];if(pobj)var ps=org.apache.flex.utils.Language.as(pobj,Array);if(ps){var foreachiter0_target=ps;for(var foreachiter0 in foreachiter0_target){var p=foreachiter0_target[foreachiter0];if(org.apache.flex.utils.Language.is(p.vcode,String)){if(p.vcode==vcode&&p.fcode==fcode)return p}else{if(p.vcode.length!=vcode.length||p.fcode.length!=fcode.length)continue;
var flag=false;for(var i=p.vcode.length-1;i>=0;i--)if(p.vcode[i]!=vcode[i]){flag=true;break}if(flag)continue;flag=false;for(i=p.fcode.length-1;i>=0;i--)if(p.fcode[i]!=fcode[i]){flag=true;break}if(flag)continue;return p}}}else ps=gl3d.core.shaders.GLShader.PROGRAM_POOL[classname]=new Array;ps.push(new gl3d.core.ProgramSet(vcode,fcode));if(this.debug&&this.vs&&this.fs){org.apache.flex.utils.Language.trace(this);this.doDebug(this.vs);this.doDebug(this.fs);org.apache.flex.utils.Language.trace()}return ps[ps.length-
1]};
gl3d.core.shaders.GLShader.prototype.doDebug=function(gl){gl.creator=new as3Shader.AGALCodeCreator;var code=org.apache.flex.utils.Language.as(gl.code,String);org.apache.flex.utils.Language.trace(code);org.apache.flex.utils.Language.trace('consts index',gl.constMemLen);org.apache.flex.utils.Language.trace('consts',gl.constPoolVec);for(var name in gl.namedVars){var v=gl.namedVars[name];if(v.used)org.apache.flex.utils.Language.trace(v.index,name)}gl.creator=new as3Shader.GLCodeCreator;org.apache.flex.utils.Language.trace(gl.code);org.apache.flex.utils.Language.trace()};
gl3d.core.shaders.GLShader.prototype.getVertexShader=function(material){return null};gl3d.core.shaders.GLShader.prototype.getFragmentShader=function(material){return null};
gl3d.core.shaders.GLShader.prototype.update=function(material){if(this.invalid){this.programSet=this.getProgram(material);this.invalid=false}if(this.programSet){this.programSet.update(material.view.renderer.gl3d);material.view.renderer.gl3d.setProgram(this.programSet.program);material.view.renderer.gl3d.setDepthTest(material.depthMask,material.passCompareMode);material.view.renderer.gl3d.setBlendFactors(material.sourceFactor,material.destinationFactor);material.view.renderer.gl3d.setCulling(material.culling)}if(this.vs&&
this.fs){this.vs.bind(this,material);this.fs.bind(this,material);material.view.renderer.gl3d.setProgramConstantsFromVector(flash.display3D.Context3DProgramType.VERTEX,this.vs.constMemLen,this.vs.constPoolVec);material.view.renderer.gl3d.setProgramConstantsFromVector(flash.display3D.Context3DProgramType.FRAGMENT,this.fs.constMemLen,this.fs.constPoolVec)}var allTexReady=true;if(this.textureSets)for(var i=0;i<this.textureSets.length;i++){var textureSet=this.textureSets[i];if(textureSet){textureSet.update(material.view);
if(!textureSet.ready)allTexReady=false}}if(!allTexReady)return;else if(this.textureSets)for(i=0;i<this.textureSets.length;i++){textureSet=this.textureSets[i];if(textureSet)textureSet.bind(material.view.renderer.gl3d,i)}if(this.buffSets)for(i=0;i<this.buffSets.length;i++){var buffSet=this.buffSets[i];if(buffSet){buffSet.update(material.view.renderer.gl3d);buffSet.bind(material.view.renderer.gl3d,i)}}if(this.programSet)material.view.renderer.gl3d.drawTriangles(material.node.drawable.index,0,material.node.drawable.index.numTriangles)};
gl3d.core.shaders.GLShader.prototype.FLEXJS_CLASS_INFO={names:[{name:'GLShader',qName:'gl3d.core.shaders.GLShader'}]};goog.exportSymbol('gl3d.core.shaders.GLShader',gl3d.core.shaders.GLShader);
gl3d.core.shaders.GLShader.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'invalid':{type:'Boolean'},'vs':{type:'GLAS3Shader'},'fs':{type:'GLAS3Shader'},'programSet':{type:'ProgramSet'},'textureSets':{type:'Array'},'buffSets':{type:'Array'},'debug':{type:'Boolean'}}},accessors:function(){return{}},methods:function(){return{'GLShader':{type:'',declaredBy:'gl3d.core.shaders.GLShader'},'getProgram':{type:'ProgramSet',declaredBy:'gl3d.core.shaders.GLShader'},'doDebug':{type:'void',
declaredBy:'gl3d.core.shaders.GLShader'},'getVertexShader':{type:'GLAS3Shader',declaredBy:'gl3d.core.shaders.GLShader'},'getFragmentShader':{type:'GLAS3Shader',declaredBy:'gl3d.core.shaders.GLShader'},'update':{type:'void',declaredBy:'gl3d.core.shaders.GLShader'}}}}};goog.provide('gl3d.shaders.PhongGLShader');goog.require('gl3d.core.shaders.GLShader');goog.require('gl3d.shaders.PhongFragmentShader');goog.require('gl3d.shaders.PhongVertexShader');gl3d.shaders.PhongGLShader=function(){gl3d.shaders.PhongGLShader.base(this,'constructor')};goog.inherits(gl3d.shaders.PhongGLShader,gl3d.core.shaders.GLShader);gl3d.shaders.PhongGLShader.prototype.drawable;gl3d.shaders.PhongGLShader.prototype.getVertexShader=function(material){return new gl3d.shaders.PhongVertexShader(material)};
gl3d.shaders.PhongGLShader.prototype.getFragmentShader=function(material){return new gl3d.shaders.PhongFragmentShader(material,org.apache.flex.utils.Language.as(this.vs,gl3d.shaders.PhongVertexShader))};gl3d.shaders.PhongGLShader.prototype.FLEXJS_CLASS_INFO={names:[{name:'PhongGLShader',qName:'gl3d.shaders.PhongGLShader'}]};goog.exportSymbol('gl3d.shaders.PhongGLShader',gl3d.shaders.PhongGLShader);
gl3d.shaders.PhongGLShader.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'PhongGLShader':{type:'',declaredBy:'gl3d.shaders.PhongGLShader'},'getVertexShader':{type:'GLAS3Shader',declaredBy:'gl3d.shaders.PhongGLShader'},'getFragmentShader':{type:'GLAS3Shader',declaredBy:'gl3d.shaders.PhongGLShader'}}}}};goog.provide('gl3d.core.Material');goog.require('gl3d.core.MaterialBase');goog.require('gl3d.shaders.PhongGLShader');gl3d.core.Material=function(shader){gl3d.core.Material.base(this,'constructor');shader=typeof shader!=='undefined'?shader:null;this.shader=shader||new gl3d.shaders.PhongGLShader};goog.inherits(gl3d.core.Material,gl3d.core.MaterialBase);gl3d.core.Material.prototype.shader;gl3d.core.Material.prototype.lastNumLight=-1;
gl3d.core.Material.prototype.draw=function(node,view){this.view=view;this.camera=this.materialCamera||view.camera;this.node=node;if(node.drawable&&this.shader){var context=view.renderer.gl3d;var hasSkin=node.skin&&node.skin.skinFrame&&!node.skin.useCpu;if(this.gpuSkin!=hasSkin){this.invalid=true;this.gpuSkin=hasSkin}if(this.lightAble&&this.lastNumLight!=view.lights.length){this.invalid=true;this.lastNumLight=view.lights.length}if(this.invalid){this.shader.invalid=true;this.invalid=false}this.shader.update(this)}};
gl3d.core.Material.prototype.FLEXJS_CLASS_INFO={names:[{name:'Material',qName:'gl3d.core.Material'}]};goog.exportSymbol('gl3d.core.Material',gl3d.core.Material);gl3d.core.Material.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'shader':{type:'GLShader'}}},accessors:function(){return{}},methods:function(){return{'Material':{type:'',declaredBy:'gl3d.core.Material'},'draw':{type:'void',declaredBy:'gl3d.core.Material'}}}}};goog.provide('TestEngine3D');goog.require('flash.display.Sprite');goog.require('flash.geom.Vector3D');goog.require('gl3d.core.Material');goog.require('gl3d.core.View3D');goog.require('gl3d.meshs.Meshs');
TestEngine3D=function(){TestEngine3D.base(this,'constructor');this.view1=new gl3d.core.View3D(0);this.view1.stage3dWidth=this.view1.stage3dHeight=400;this.addChild(this.view1);this.addEventListener(flash.events.Event.ENTER_FRAME,org.apache.flex.utils.Language.closure(this.enterFrame,this,'enterFrame'));this.n1=new gl3d.core.Node3D;this.n1.drawable=gl3d.meshs.Meshs.cube(1,1,1);this.n1.material=new gl3d.core.Material;this.n1.material.lightAble=false;this.view1.scene.addChild(this.n1);this.view1.camera.perspective.perspectiveFieldOfViewLH(Math.PI/
4,this.view1.stage3dWidth/this.view1.stage3dHeight,.1,4E3);this.view1.camera.z=-10;this.view1.scene.addChild(this.n1)};goog.inherits(TestEngine3D,flash.display.Sprite);TestEngine3D.prototype.view1;TestEngine3D.prototype.n1;TestEngine3D.prototype.enterFrame=function(e){this.n1.matrix.appendRotation(1,flash.geom.Vector3D.X_AXIS);this.n1.matrix.appendRotation(2,flash.geom.Vector3D.Y_AXIS);this.n1.updateTransforms();this.view1.render()};
TestEngine3D.prototype.FLEXJS_CLASS_INFO={names:[{name:'TestEngine3D',qName:'TestEngine3D'}]};goog.exportSymbol('TestEngine3D',TestEngine3D);TestEngine3D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'TestEngine3D':{type:'',declaredBy:'TestEngine3D'}}}}};
//# sourceMappingURL=./TestEngine3D.js.map